(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Pkvd:function(e,t,n){"use strict";n.r(t);var i=n("SVse"),s=n("s7LF"),a=n("PDjf"),d=n("pMoy"),l=n("M9ds"),o=n("l0rg"),r=(n("mrSG"),n("8LU1")),c=n("Z5sx"),m=n("2Vo4"),u=n("xgIS"),b=n("Cfvw"),h=n("PqYM"),p=n("1G5W"),g=n("/uUt"),f=n("lJxs"),j=n("IzEk"),E=n("pLZG"),x=n("eIep"),v=n("8Y7J");let M=(()=>{let e=class extends c.s{constructor(e,t){super(),this._control=t,this._inEdition=!1,this._editMode=!1,this._mandatory=!1,this._multiline=!1,this.edit$=new m.a([!1,!1]),this._disabled=null,this.onTouchedCallback=e=>{},this.onChangeCallback=e=>{},this._control&&(this._control.valueAccessor=this),this.element=e.nativeElement,Object(u.a)(this.element,"mousedown").pipe(Object(p.a)(this.destroyed$)).subscribe(e=>this.inEdition||this.disabled?(e.cancelBubble=!0,!1):this.editMode?(this.edit$.next([!0,!0]),e.cancelBubble=!0,!1):void 0);const n=Object(b.a)(this.edit$).pipe(Object(g.a)(),Object(f.a)(([e,t])=>(!1!==t&&Object(h.a)(10).pipe(Object(j.a)(1),Object(p.a)(this.destroyed$)).subscribe(()=>{this.selectAll(),this.focus()}),this._inEdition=e,e?this.element.setAttribute("contenteditable","true"):this.element.removeAttribute("contenteditable"),this.refreshView(),e))),i=n.pipe(Object(E.a)(e=>!e)),s=Object(u.a)(this.element.ownerDocument,"mousedown").pipe(Object(E.a)(e=>!this.isChildElement(e.target)),Object(p.a)(i));n.pipe(Object(E.a)(e=>e),Object(x.a)(()=>s),Object(p.a)(this.destroyed$)).subscribe(()=>{const e=this.element.innerText.replace(/\n/g,"<br />").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");this.onTouchedCallback(),!e&&this.mandatory||(this.value=e),this.inEdition=!1});const a=Object(u.a)(this.element,"keydown").pipe(Object(p.a)(i));n.pipe(Object(E.a)(e=>e),Object(x.a)(()=>a),Object(p.a)(this.destroyed$)).subscribe(e=>{if(e.cancelBubble=!0,e.stopPropagation(),e.code!==c.A.Enter||this.multiline)e.code===c.A.Escape&&(this.inEdition=!1);else{const e=this.element.innerText;!e&&this.mandatory||(this.value=e),this.inEdition=!1}return!1})}set mandatory(e){this._mandatory=Object(r.b)(e)}get mandatory(){return this._mandatory}set multiline(e){this._multiline=Object(r.b)(e)}get multiline(){return this._multiline}set disabled(e){const t=Object(r.b)(e);this._disabled=t||null,this.disabled&&this.edit$.next([!1,!1])}get disabled(){var e;return(null===(e=this._control)||void 0===e?void 0:e.disabled)||this._disabled}set editMode(e){this._editMode=Object(r.b)(e)}get editMode(){return this._editMode}set inEdition(e){this.disabled||this.edit$.next([Object(r.b)(e),!1])}get inEdition(){return this._inEdition}set value(e){e!==this.model&&(this.writeValue(e),this.onChangeCallback(e))}get value(){return this.model}writeValue(e){this.model=e,this.refreshView()}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngOnInit(){this.model=this.element.innerHTML}focus(){this.element.focus()}selectAll(){const e=document.createRange();e.selectNodeContents(this.element);const t=window.getSelection();t.removeAllRanges(),t.addRange(e)}edit(e){this.edit$.next([!this.disabled,e])}isChildElement(e){let t=e;for(;t&&t!==this.element;)t=t.parentElement;return t===this.element}refreshView(){this.model&&(this.inEdition?this.element.innerText=this.model.replace(/<br\s*[\/]?>/gi,"\n"):this.element.innerHTML=this.model.replace(/\n/g,"<br />"))}};return e.\u0275fac=function(t){return new(t||e)(v["\u0275\u0275directiveInject"](v.ElementRef),v["\u0275\u0275directiveInject"](s.NgControl,10))},e.\u0275dir=v["\u0275\u0275defineDirective"]({type:e,selectors:[["","deja-editable",""]],hostVars:1,hostBindings:function(e,t){2&e&&v["\u0275\u0275attribute"]("disabled",t._disabled)},inputs:{inEdition:"inEdition",mandatory:"mandatory",multiline:"multiline",disabled:"disabled",editMode:["deja-editable","editMode"]},features:[v["\u0275\u0275InheritDefinitionFeature"]]}),e})(),C=(()=>{let e=class{};return e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,s.FormsModule]]}),e})();var w=n("KYkd"),y=n("iInd"),O=n("iss+");function I(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-card",4),v["\u0275\u0275element"](1,"deja-markdown",5),v["\u0275\u0275elementEnd"]()),2&e&&(v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/dev/projects/deja-js/component/content-editable/readme.md"))}function _(e,t){if(1&e){const e=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"mat-card",4),v["\u0275\u0275elementStart"](1,"mat-toolbar",6),v["\u0275\u0275text"](2,"Content Editable Demo"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"mat-card-content"),v["\u0275\u0275elementStart"](4,"mat-checkbox",7),v["\u0275\u0275listener"]("ngModelChange",(function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().designMode=t})),v["\u0275\u0275text"](5,"Design Mode\xa0"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"mat-checkbox",7),v["\u0275\u0275listener"]("ngModelChange",(function(t){return v["\u0275\u0275restoreView"](e),v["\u0275\u0275nextContext"]().disabled=t})),v["\u0275\u0275text"](7,"Disabled"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](8,"mat-card-content",8),v["\u0275\u0275elementStart"](9,"div",9),v["\u0275\u0275text"](10," Lorem ipsum dolor sit amet, consectetur adipiscing elit. "),v["\u0275\u0275element"](11,"br"),v["\u0275\u0275text"](12," Mauris auctor sit amet odio et aliquet. Curabitur auctor eleifend mattis. "),v["\u0275\u0275element"](13,"br"),v["\u0275\u0275text"](14," Nullam sit amet quam tellus. Ut mattis tellus sed erat ultricies ornare. "),v["\u0275\u0275element"](15,"br"),v["\u0275\u0275text"](16," Nulla dictum nisi eu tortor lacinia porttitor. Donec eu arcu et enim cursus viverra. "),v["\u0275\u0275element"](17,"br"),v["\u0275\u0275text"](18," Praesent pulvinar dui nisi, a tincidunt arcu finibus sed. "),v["\u0275\u0275element"](19,"br"),v["\u0275\u0275elementStart"](20,"a",10),v["\u0275\u0275text"](21,"Google"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){const e=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngModel",e.designMode),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",e.disabled),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("deja-editable",e.designMode)("disabled",e.disabled)}}const S=y.f.forChild([{path:"",component:(()=>{class e{constructor(){this.tabIndex=1,this.designMode=!1,this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=v["\u0275\u0275defineComponent"]({type:e,selectors:[["deja-content-editable-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],["color","primary"],["color","primary",3,"ngModel","ngModelChange"],["id","contentEditableContainer"],["multiline","",3,"deja-editable","disabled"],["href","http://www.google.ch"]],template:function(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"mat-tab-group",0),v["\u0275\u0275listener"]("selectedTabChange",(function(e){return t.tabIndex=e.index})),v["\u0275\u0275element"](1,"mat-tab",1),v["\u0275\u0275element"](2,"mat-tab",2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](3,I,2,1,"mat-card",3),v["\u0275\u0275template"](4,_,22,4,"mat-card",3)),2&e&&(v["\u0275\u0275property"]("selectedIndex",t.tabIndex),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngIf",0===t.tabIndex),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",1===t.tabIndex))},directives:[l.b,l.a,i.n,a.a,O.a,o.a,a.c,d.a,s.NgControlStatus,s.NgModel,M],encapsulation:2}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]);n.d(t,"DejaContentEditableDemoModule",(function(){return k}));let k=(()=>{class e{}return e.\u0275mod=v["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=v["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,s.FormsModule,a.d,d.b,l.c,o.b,C,w.a,S]]}),e})()}}]);