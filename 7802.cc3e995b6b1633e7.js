"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[7802],{7331:(L,j,i)=>{i.d(j,{D:()=>I});var M=i(4482),t=i(5032),m=i(5403),B=i(8421);function I(T){return(0,M.e)((u,x)=>{let b=!1,_=null,c=null;const h=()=>{if(null==c||c.unsubscribe(),c=null,b){b=!1;const C=_;_=null,x.next(C)}};u.subscribe((0,m.x)(x,C=>{null==c||c.unsubscribe(),b=!0,_=C,c=(0,m.x)(x,h,t.Z),(0,B.Xf)(T(C)).subscribe(c)},()=>{h(),x.complete()},void 0,()=>{_=c=null}))})}},7802:(L,j,i)=>{i.d(j,{LD:()=>V,sQ:()=>Y});var M=i(9808),t=i(5e3),m=i(3075),B=i(7423),I=i(5245),T=i(7916),u=i(2722),x=i(2718),b=i(4004),_=i(1135),c=i(7579),h=i(8505),C=i(1884),U=i(7331),A=i(5963),R=i(2181),K=i(8372),W=i(4326),F=i(9300),y=i(4968),w=i(5698),X=i(3191),v=i(9009);const Z=["*"];function H(n,a){if(1&n&&t._UZ(0,"deja-color-fab",5),2&n){const r=a.index;t.Q6J("color",a.$implicit),t.uIk("index",r)}}function J(n,a){if(1&n&&t._UZ(0,"deja-color-fab",6),2&n){const e=a.$implicit,r=a.index;t.Udp("transition-duration",100*r+"ms"),t.Q6J("color",e),t.uIk("index",r)}}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.resetDefaultColor())}),t.TgZ(1,"mat-icon"),t._uU(2,"undo"),t.qZA()()}if(2&n){const e=t.oxw();t.Udp("background-color",e._resetcolor.toHex()),t.xp6(1),t.Udp("color",e.getBestTextColor(e._resetcolor.toHex()))}}let Q=(()=>{class n extends T.yl{constructor(e){super(),this.element=e.nativeElement}set color(e){if(this._colorFab=e,e){const r=(l,f)=>{f?this.element.setAttribute(l,f.toString()):this.element.removeAttribute(l)};e.active$.pipe((0,u.R)(this.destroyed$)).subscribe(l=>r("active",l)),e.color$.pipe((0,x.V)(e.disabled$),(0,b.U)(([l,f])=>l&&f?l.grayScale:l),(0,u.R)(this.destroyed$)).subscribe(l=>this.element.style.backgroundColor=l?l.toHex():"")}}get tile(){return this._colorFab}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["deja-color-fab"]],inputs:{color:"color"},features:[t.qOj],ngContentSelectors:Z,decls:1,vars:0,template:function(e,r){1&e&&(t.F$t(),t.Hsn(0))},styles:["[_nghost-%COMP%]{border-radius:50%;cursor:pointer;transition:all linear .2s;width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:space-around;margin:.45rem}[small][_nghost-%COMP%]{width:1.65rem;height:1.65rem;margin:.3rem}[active][_nghost-%COMP%]{transform:scale(1.4);transition:transform linear .2s!important}"]}),n})();class S{constructor(a,e=!1,r=!1){this._color=a,this._disabled=e,this._active=r,this.color$=new _.X(a),this.disabled$=new _.X(e),this.active$=new _.X(r)}set color(a){this.color$.next(this._color=a)}get color(){return this._color}set disabled(a){this.disabled$.next(this._disabled=a)}get disabled(){return this._disabled}set active(a){this.active$.next(this._active=a)}get active(){return this._active}}let V=(()=>{class n{constructor(e,r){this.control=r,this.colorhover=new t.vpe,this.destroyed$=new c.x,this._colors$=new _.X([]),this._resetcolor$=new _.X(null),this._colorFabs=[],this._subColorFabs=[],this._selectedBaseIndex=0,this._disabled=!1,this.selectedBaseIndex$=new _.X(0),this.selectedSubIndex$=new _.X(0),this.hilightedBaseIndex$=new c.x,this.hilightedSubIndex$=new c.x,this.onTouchedCallback=()=>{},this.onChangeCallback=o=>{};const l=e.nativeElement;this.control&&(this.control.valueAccessor=this),this._colorFabs$=this._colors$.pipe((0,b.U)(o=>o.map((s,d)=>new S(s,this._disabled,d===this._selectedBaseIndex))),(0,h.b)(o=>this._colorFabs=o)),this._colors$.pipe((0,x.V)(this._resetcolor$),(0,u.R)(this.destroyed$)).subscribe(([o,s])=>{if(!o||!o.length||!s)return void(this._resetcolor=void 0);let g;o.reduce((E,p)=>{const O=p;return O.subColors?E=[...E,...O.subColors]:E.push(p),E},[]).reduce((E,p)=>{const O=.3*Math.abs(p.r-s.r)+.4*Math.abs(p.g-s.g)+.25*Math.abs(p.b-s.b);return O<E?(g=p,O):E},765),this._resetcolor=g});const f=this.hilightedBaseIndex$.pipe((0,C.x)(),(0,U.D)(o=>(0,A.H)(void 0!==o?100:1e3)),(0,h.b)(o=>{var s,d;this.hilightedBaseIndex=o;const g=new CustomEvent("ColorEvent",{});g.color=o?null===(d=null===(s=this._colorFabs)||void 0===s?void 0:s[o])||void 0===d?void 0:d.color:this.value,this.colorhover.emit(g)}),(0,b.U)(o=>void 0!==o?o:this._selectedBaseIndex||0)),P=this.selectedBaseIndex$.pipe((0,h.b)(o=>this._selectedBaseIndex=o));this._subColorFabs$=f.pipe((0,R.b)(P),(0,C.x)(),(0,h.b)(o=>{this._colorFabs&&this._colorFabs.forEach((s,d)=>s.active=d===o)}),(0,K.b)(100),(0,h.b)(()=>l.setAttribute("sub-tr","")),(0,b.U)(o=>{var s;return(null===(s=this._colorFabs)||void 0===s?void 0:s[o])&&this._colorFabs[o].color.subColors}),(0,b.U)(o=>null==o?void 0:o.map((s,d)=>new S(s,this._disabled,d===this._selectedSubIndex))),(0,h.b)(o=>this._subColorFabs=o)),this._subColorFabs$.pipe((0,W.g)(100),(0,u.R)(this.destroyed$)).subscribe(()=>l.removeAttribute("sub-tr"));const D=this.hilightedSubIndex$.pipe((0,C.x)(),(0,U.D)(o=>(0,A.H)(void 0!==o?200:1100)),(0,h.b)(o=>{var s,d;this.hilightedSubIndex=o;const g=new CustomEvent("ColorEvent",{});g.color=void 0!==o?null===(d=null===(s=this._subColorFabs)||void 0===s?void 0:s[o])||void 0===d?void 0:d.color:this.value,this.colorhover.emit(g)}),(0,b.U)(o=>void 0!==o?o:this._selectedSubIndex||0)),$=this.selectedSubIndex$.pipe((0,C.x)(),(0,h.b)(o=>this._selectedSubIndex=o));D.pipe((0,R.b)($),(0,F.h)(()=>!!this._subColorFabs),(0,u.R)(this.destroyed$)).subscribe(o=>this._subColorFabs.forEach((s,d)=>s.active=d===o)),(0,y.R)(l,"mousemove").pipe((0,F.h)(()=>!this._disabled),(0,u.R)(this.destroyed$)).subscribe(o=>{const s=o.target,d=s.attributes[n.INDEX_ATTRIBUTE];s.hasAttribute("basecolor")?(this.hilightedBaseIndex$.next(+d.value),this.hilightedSubIndex$.next(this.hilightedSubIndex)):s.hasAttribute("subcolor")?(this.hilightedBaseIndex$.next(this.hilightedBaseIndex),this.hilightedSubIndex$.next(+d.value)):(this.hilightedBaseIndex$.next(void 0),this.hilightedSubIndex$.next(void 0))}),(0,y.R)(l,"click").pipe((0,F.h)(()=>!this._disabled),(0,u.R)(this.destroyed$)).subscribe(o=>{const s=o.target;(s.hasAttribute("basecolor")||s.hasAttribute("subcolor"))&&(this.value=v.Il.parse(s.style.backgroundColor))})}get subColorFabs(){return this._subColorFabs}get subColorFabs$(){return this._subColorFabs$}get colorFabs$(){return this._colorFabs$}set resetcolor(e){""===e&&(e=new v.Il);const r=e&&("string"==typeof e?v.Il.parse(e):e);this._resetcolor$.next(r||null)}set disabled(e){const r=(0,X.Ig)(e);this._colorFabs&&this._colorFabs.forEach(l=>l.disabled=r),this._subColorFabs&&this._subColorFabs.forEach(l=>l.disabled=r),this._disabled=r||null}get disabled(){return this._disabled}getBestTextColor(e){return v.Il.fromHex(e).bestTextColor.toHex()}resetDefaultColor(){this.value=this._resetcolor}set colors(e){this._colors$.next(e||[]),this.selectedBaseIndex$.next(0)}set selectedColor(e){const r=l=>{(0,A.H)(1).pipe((0,w.q)(1),(0,u.R)(this.destroyed$)).subscribe(()=>this.selectedSubIndex$.next(l))};this._colorFabs&&(this._colorFabs.find((f,P)=>{var D;const $=f.color,o=null===(D=$.subColors)||void 0===D?void 0:D.findIndex(s=>v.Il.equals(s,e));return void 0!==o&&o>=0?(this.selectedBaseIndex$.next(P),r(o),!0):!!v.Il.equals($,e)&&(this.selectedBaseIndex$.next(P),r(0),!0)})||(this.selectedBaseIndex$.next(0),r(0)))}set value(e){v.Il.equals(e,this._value)||(this.writeValue(e),this.onChangeCallback(e))}get value(){return this._value}writeValue(e){this._value=e,this.selectedColor=e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.unsubscribe()}}return n.INDEX_ATTRIBUTE="index",n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(m.a5,10))},n.\u0275cmp=t.Xpm({type:n,selectors:[["deja-color-selector"]],inputs:{resetcolor:"resetcolor",disabled:"disabled",colors:"colors"},outputs:{colorhover:"colorhover"},decls:7,vars:7,consts:[["id","basecolors",1,"colors-wrapper"],["basecolor","","small","",3,"color",4,"ngFor","ngForOf"],["id","subcolors",1,"colors-wrapper"],["subcolor","",3,"transition-duration","color",4,"ngFor","ngForOf"],["id","reset",3,"background-color","click",4,"ngIf"],["basecolor","","small","",3,"color"],["subcolor","",3,"color"],["id","reset",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,H,1,2,"deja-color-fab",1),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,J,1,4,"deja-color-fab",3),t.ALo(5,"async"),t.qZA(),t.YNc(6,N,3,4,"div",4)),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,3,r.colorFabs$)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(5,5,r.subColorFabs$)),t.xp6(2),t.Q6J("ngIf",!!r._resetcolor))},dependencies:[M.sg,M.O5,I.Hw,Q,M.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .colors-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-wrap:wrap;margin:1rem .5rem}[_nghost-%COMP%]   .colors-wrapper[_ngcontent-%COMP%]   deja-color-fab[_ngcontent-%COMP%]{float:left}[_nghost-%COMP%]   .colors-wrapper[_ngcontent-%COMP%]   #subcolors[_ngcontent-%COMP%]   deja-color-fab[_ngcontent-%COMP%]{opacity:1}[sub-tr][_nghost-%COMP%]   #subcolors.colors-wrapper[_ngcontent-%COMP%]   deja-color-fab[_ngcontent-%COMP%]{opacity:0;transform:scale(0)}[_nghost-%COMP%]   #reset[_ngcontent-%COMP%]{padding:.5rem 0;cursor:pointer;text-align:center}"]}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[M.ez,m.u5,B.ot,I.Ps]}),n})()}}]);