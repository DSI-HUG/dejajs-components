(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{Pkvd:function(e,t,n){"use strict";n.r(t),n.d(t,"DejaContentEditableDemoModule",(function(){return k}));var i=n("SVse"),a=n("s7LF"),s=n("PDjf"),d=n("pMoy"),o=n("M9ds"),l=n("l0rg"),r=n("8Y7J"),c=n("8LU1"),m=n("CDpB"),u=n("2Vo4"),b=n("xgIS"),h=n("Cfvw"),p=n("PqYM"),g=n("1G5W"),f=n("/uUt"),j=n("lJxs"),y=n("IzEk"),E=n("pLZG"),x=n("eIep");class C extends m.s{constructor(e,t){super(),this.control=t,this._disabled=null,this._inEdition=!1,this._editMode=!1,this._mandatory=!1,this._multiline=!1,this.edit$=new u.a([!1,!1]),this.onTouchedCallback=()=>{},this.onChangeCallback=e=>{},this.control&&(this.control.valueAccessor=this),this.element=e.nativeElement,Object(b.a)(this.element,"mousedown").pipe(Object(g.a)(this.destroyed$)).subscribe(e=>this.inEdition||this.disabled?(e.cancelBubble=!0,!1):this.editMode?(this.edit$.next([!0,!0]),e.cancelBubble=!0,!1):void 0);const n=Object(h.a)(this.edit$).pipe(Object(f.a)(),Object(j.a)(([e,t])=>(!1!==t&&Object(p.a)(10).pipe(Object(y.a)(1),Object(g.a)(this.destroyed$)).subscribe(()=>{this.selectAll(),this.focus()}),this._inEdition=e,e?this.element.setAttribute("contenteditable","true"):this.element.removeAttribute("contenteditable"),this.refreshView(),e))),i=n.pipe(Object(E.a)(e=>!e)),a=Object(b.a)(this.element.ownerDocument,"mousedown").pipe(Object(E.a)(e=>!this.isChildElement(e.target)),Object(g.a)(i));n.pipe(Object(E.a)(e=>e),Object(x.a)(()=>a),Object(g.a)(this.destroyed$)).subscribe(()=>{const e=this.element.innerText.replace(/\n/g,"<br />").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");this.onTouchedCallback(),!e&&this.mandatory||(this.value=e),this.inEdition=!1});const s=Object(b.a)(this.element,"keydown").pipe(Object(g.a)(i));n.pipe(Object(E.a)(e=>e),Object(x.a)(()=>s),Object(g.a)(this.destroyed$)).subscribe(e=>{if(e.cancelBubble=!0,e.stopPropagation(),e.code!==m.A.Enter||this.multiline)e.code===m.A.Escape&&(this.inEdition=!1);else{const e=this.element.innerText;!e&&this.mandatory||(this.value=e),this.inEdition=!1}return!1})}set mandatory(e){this._mandatory=Object(c.b)(e)}get mandatory(){return this._mandatory}set multiline(e){this._multiline=Object(c.b)(e)}get multiline(){return this._multiline}set disabled(e){const t=Object(c.b)(e);this._disabled=t||null,this.disabled&&this.edit$.next([!1,!1])}get disabled(){var e;return(null===(e=this.control)||void 0===e?void 0:e.disabled)||this._disabled}set editMode(e){this._editMode=Object(c.b)(e)}get editMode(){return this._editMode}set inEdition(e){this.disabled||this.edit$.next([Object(c.b)(e),!1])}get inEdition(){return this._inEdition}set value(e){e!==this.model&&(this.writeValue(e),this.onChangeCallback(e))}get value(){return this.model}writeValue(e){this.model=e,this.refreshView()}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngOnInit(){this.model=this.element.innerHTML}focus(){this.element.focus()}selectAll(){const e=document.createRange();e.selectNodeContents(this.element);const t=window.getSelection();t.removeAllRanges(),t.addRange(e)}edit(e){this.edit$.next([!this.disabled,e])}isChildElement(e){let t=e;for(;t&&t!==this.element;)t=t.parentElement;return t===this.element}refreshView(){this.model&&(this.inEdition?this.element.innerText=this.model.replace(/<br\s*[/]?>/gi,"\n"):this.element.innerHTML=this.model.replace(/\n/g,"<br />"))}}C.\u0275fac=function(e){return new(e||C)(r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](a.NgControl,10))},C.\u0275dir=r["\u0275\u0275defineDirective"]({type:C,selectors:[["","deja-editable",""]],hostVars:1,hostBindings:function(e,t){2&e&&r["\u0275\u0275attribute"]("disabled",t._disabled)},inputs:{inEdition:"inEdition",mandatory:"mandatory",multiline:"multiline",disabled:"disabled",editMode:["deja-editable","editMode"]},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),C.ctorParameters=()=>[{type:r.ElementRef},{type:a.NgControl,decorators:[{type:r.Self},{type:r.Optional}]}],C.propDecorators={_disabled:[{type:r.HostBinding,args:["attr.disabled"]}],mandatory:[{type:r.Input}],multiline:[{type:r.Input}],disabled:[{type:r.Input}],editMode:[{type:r.Input,args:["deja-editable"]}],inEdition:[{type:r.Input}]};class M{}M.\u0275mod=r["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(e){return new(e||M)},imports:[[i.c,a.FormsModule]]});var v=n("KYkd"),w=n("iInd"),O=n("iss+");function I(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-card",4),r["\u0275\u0275element"](1,"deja-markdown",5),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/content-editable/readme.md"))}function S(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-card",4),r["\u0275\u0275elementStart"](1,"mat-toolbar",6),r["\u0275\u0275text"](2,"Content Editable Demo"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"mat-card-content"),r["\u0275\u0275elementStart"](4,"mat-checkbox",7),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().designMode=t})),r["\u0275\u0275text"](5,"Design Mode\xa0"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"mat-checkbox",7),r["\u0275\u0275listener"]("ngModelChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().disabled=t})),r["\u0275\u0275text"](7,"Disabled"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"mat-card-content",8),r["\u0275\u0275elementStart"](9,"div",9),r["\u0275\u0275text"](10," Lorem ipsum dolor sit amet, consectetur adipiscing elit. "),r["\u0275\u0275element"](11,"br"),r["\u0275\u0275text"](12," Mauris auctor sit amet odio et aliquet. Curabitur auctor eleifend mattis. "),r["\u0275\u0275element"](13,"br"),r["\u0275\u0275text"](14," Nullam sit amet quam tellus. Ut mattis tellus sed erat ultricies ornare. "),r["\u0275\u0275element"](15,"br"),r["\u0275\u0275text"](16," Nulla dictum nisi eu tortor lacinia porttitor. Donec eu arcu et enim cursus viverra. "),r["\u0275\u0275element"](17,"br"),r["\u0275\u0275text"](18," Praesent pulvinar dui nisi, a tincidunt arcu finibus sed. "),r["\u0275\u0275element"](19,"br"),r["\u0275\u0275elementStart"](20,"a",10),r["\u0275\u0275text"](21,"Google"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",e.designMode),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.disabled),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("deja-editable",e.designMode)("disabled",e.disabled)}}const _=w.f.forChild([{path:"",component:(()=>{class e{constructor(){this.tabIndex=1,this.designMode=!1,this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["deja-content-editable-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],["color","primary"],["color","primary",3,"ngModel","ngModelChange"],["id","contentEditableContainer"],["multiline","",3,"deja-editable","disabled"],["href","http://www.google.ch"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab-group",0),r["\u0275\u0275listener"]("selectedTabChange",(function(e){return t.tabIndex=e.index})),r["\u0275\u0275element"](1,"mat-tab",1),r["\u0275\u0275element"](2,"mat-tab",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,I,2,1,"mat-card",3),r["\u0275\u0275template"](4,S,22,4,"mat-card",3)),2&e&&(r["\u0275\u0275property"]("selectedIndex",t.tabIndex),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",0===t.tabIndex),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",1===t.tabIndex))},directives:[o.b,o.a,i.n,s.a,O.a,l.a,s.c,d.a,a.NgControlStatus,a.NgModel,C],encapsulation:2}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]);let k=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,a.FormsModule,s.d,d.b,o.c,l.b,M,v.a,_]]}),e})()}}]);