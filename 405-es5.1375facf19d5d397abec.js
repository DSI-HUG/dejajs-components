!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,r,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){u=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(u)throw r}}return o}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[405],{7405:function(t,a,l){"use strict";l.r(a),l.d(a,{DejaContentEditableDemoModule:function(){return S}});var c=l(61511),d=l(16073),s=l(27439),f=l(29236),m=l(55109),b=l(33104),h=l(31572),p=l(19861),g=l(27312),y=l(78512),v=l(87254),_=l(81110),w=l(25416),k=l(98720),E=l(79996),x=l(90611),C=l(43835),j=l(44689),Z=function(){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(s,t);var a,l,c,d=o(s);function s(t,i){var r;n(this,s),(r=d.call(this)).control=i,r._disabled=null,r._inEdition=!1,r._editMode=!1,r._mandatory=!1,r._multiline=!1,r.edit$=new y.X([!1,!1]),r.onTouchedCallback=function(){},r.onChangeCallback=function(e){},r.control&&(r.control.valueAccessor=u(r)),r.element=t.nativeElement,(0,v.R)(r.element,"mousedown").pipe((0,w.R)(r.destroyed$)).subscribe(function(e){return r.inEdition||r.disabled?(e.cancelBubble=!0,!1):r.editMode?(r.edit$.next([!0,!0]),e.cancelBubble=!0,!1):void 0});var o=r.edit$.pipe((0,k.x)(),(0,E.U)(function(t){var n=e(t,2),i=n[0],o=n[1];return(null==o||o)&&(0,_.H)(10).pipe((0,x.q)(1),(0,w.R)(r.destroyed$)).subscribe(function(){r.selectAll(),r.focus()}),r._inEdition=i,i?r.element.setAttribute("contenteditable","true"):r.element.removeAttribute("contenteditable"),r.refreshView(),i})),a=o.pipe((0,C.h)(function(e){return!e})),l=(0,v.R)(r.element.ownerDocument,"mousedown").pipe((0,C.h)(function(e){return!r.isChildElement(e.target)}),(0,w.R)(a));o.pipe((0,C.h)(function(e){return e}),(0,j.w)(function(){return l}),(0,w.R)(r.destroyed$)).subscribe(function(){var e=r.element.innerText.replace(/\n/g,"<br />").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");r.onTouchedCallback(),!e&&r.mandatory||(r.value=e),r.inEdition=!1});var c=(0,v.R)(r.element,"keydown").pipe((0,w.R)(a));return o.pipe((0,C.h)(function(e){return e}),(0,j.w)(function(){return c}),(0,w.R)(r.destroyed$)).subscribe(function(e){if(e.cancelBubble=!0,e.stopPropagation(),e.code!==g.mW.Enter||r.multiline)e.code===g.mW.Escape&&(r.inEdition=!1);else{var t=r.element.innerText;!t&&r.mandatory||(r.value=t),r.inEdition=!1}return!1}),r}return a=s,(l=[{key:"mandatory",get:function(){return this._mandatory},set:function(e){this._mandatory=(0,p.Ig)(e)}},{key:"multiline",get:function(){return this._multiline},set:function(e){this._multiline=(0,p.Ig)(e)}},{key:"disabled",get:function(){var e;return(null===(e=this.control)||void 0===e?void 0:e.disabled)||this._disabled},set:function(e){var t=(0,p.Ig)(e);this._disabled=t||null,this.disabled&&this.edit$.next([!1,!1])}},{key:"editMode",get:function(){return this._editMode},set:function(e){this._editMode=(0,p.Ig)(e)}},{key:"inEdition",get:function(){return this._inEdition},set:function(e){this.disabled||this.edit$.next([(0,p.Ig)(e),!1])}},{key:"value",get:function(){return this.model},set:function(e){e!==this.model&&(this.writeValue(e),this.onChangeCallback(e))}},{key:"writeValue",value:function(e){this.model=e,this.refreshView()}},{key:"registerOnChange",value:function(e){this.onChangeCallback=e}},{key:"registerOnTouched",value:function(e){this.onTouchedCallback=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"ngOnInit",value:function(){this.model=this.element.innerHTML}},{key:"focus",value:function(){this.element.focus()}},{key:"selectAll",value:function(){var e=document.createRange();e.selectNodeContents(this.element);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}},{key:"edit",value:function(e){this.edit$.next([!this.disabled,e])}},{key:"isChildElement",value:function(e){for(var t=e;t&&t!==this.element;)t=t.parentElement;return t===this.element}},{key:"refreshView",value:function(){this.model&&(this.inEdition?this.element.innerText=this.model.replace(/<br\s*[/]?>/gi,"\n"):this.element.innerHTML=this.model.replace(/\n/g,"<br />"))}}])&&i(a.prototype,l),c&&i(a,c),s}(g.yl);return t.\u0275fac=function(e){return new(e||t)(h.Y36(h.SBq),h.Y36(d.a5,10))},t.\u0275dir=h.lG2({type:t,selectors:[["","deja-editable",""]],hostVars:1,hostBindings:function(e,t){2&e&&h.uIk("disabled",t._disabled)},inputs:{mandatory:"mandatory",multiline:"multiline",disabled:"disabled",editMode:["deja-editable","editMode"],inEdition:"inEdition"},features:[h.qOj]}),t}(),M=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[c.ez,d.u5]]}),e}(),A=l(7631),T=l(71398),I=l(50246);function U(e,t){1&e&&(h.TgZ(0,"mat-card",4),h._UZ(1,"deja-markdown",5),h.qZA()),2&e&&(h.xp6(1),h.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/content-editable/readme.md"))}function O(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-card",4),h.TgZ(1,"mat-toolbar",6),h._uU(2,"Content Editable Demo"),h.qZA(),h.TgZ(3,"mat-card-content"),h.TgZ(4,"mat-checkbox",7),h.NdJ("ngModelChange",function(e){return h.CHM(n),h.oxw().designMode=e}),h._uU(5,"Design Mode\xa0"),h.qZA(),h.TgZ(6,"mat-checkbox",7),h.NdJ("ngModelChange",function(e){return h.CHM(n),h.oxw().disabled=e}),h._uU(7,"Disabled"),h.qZA(),h.qZA(),h.TgZ(8,"mat-card-content",8),h.TgZ(9,"div",9),h._uU(10," Lorem ipsum dolor sit amet, consectetur adipiscing elit. "),h._UZ(11,"br"),h._uU(12," Mauris auctor sit amet odio et aliquet. Curabitur auctor eleifend mattis. "),h._UZ(13,"br"),h._uU(14," Nullam sit amet quam tellus. Ut mattis tellus sed erat ultricies ornare. "),h._UZ(15,"br"),h._uU(16," Nulla dictum nisi eu tortor lacinia porttitor. Donec eu arcu et enim cursus viverra. "),h._UZ(17,"br"),h._uU(18," Praesent pulvinar dui nisi, a tincidunt arcu finibus sed. "),h._UZ(19,"br"),h.TgZ(20,"a",10),h._uU(21,"Google"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.xp6(4),h.Q6J("ngModel",i.designMode),h.xp6(2),h.Q6J("ngModel",i.disabled),h.xp6(3),h.Q6J("deja-editable",i.designMode)("disabled",i.disabled)}}var R,q,J=T.Bz.forChild([{path:"",component:(R=function e(){n(this,e),this.tabIndex=1,this.designMode=!1,this.disabled=!1},R.\u0275fac=function(e){return new(e||R)},R.\u0275cmp=h.Xpm({type:R,selectors:[["deja-content-editable-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],["color","primary"],["color","primary",3,"ngModel","ngModelChange"],["id","contentEditableContainer"],["multiline","",3,"deja-editable","disabled"],["href","http://www.google.ch"]],template:function(e,t){1&e&&(h.TgZ(0,"mat-tab-group",0),h.NdJ("selectedTabChange",function(e){return t.tabIndex=e.index}),h._UZ(1,"mat-tab",1),h._UZ(2,"mat-tab",2),h.qZA(),h.YNc(3,U,2,1,"mat-card",3),h.YNc(4,O,22,4,"mat-card",3)),2&e&&(h.Q6J("selectedIndex",t.tabIndex),h.xp6(3),h.Q6J("ngIf",0===t.tabIndex),h.xp6(1),h.Q6J("ngIf",1===t.tabIndex))},directives:[m.SP,m.uX,c.O5,s.a8,I.F,b.Ye,s.dn,f.oG,d.JJ,d.On,Z],encapsulation:2}),R)},{path:"**",redirectTo:"",pathMatch:"full"}]),S=((q=function e(){n(this,e)}).\u0275fac=function(e){return new(e||q)},q.\u0275mod=h.oAB({type:q}),q.\u0275inj=h.cJS({providers:[],imports:[[c.ez,d.u5,s.QW,f.p9,m.Nh,b.g0,M,A.O,J]]}),q)}}])}();