(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+T7S":function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i("Dn5i");class s{}},"6Rdh":function(e,t,i){"use strict";i("woK4"),i.d(t,"a",function(){return s});class s{}},D1LT:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var s=i("8Y7J"),r=i("fYS1"),a=i("xgIS"),n=i("GJmQ"),c=i("pLZG");class l{constructor(e){this.closed=new s.EventEmitter,this.isAlive=!0;const t=e.nativeElement;Object(a.a)(t.ownerDocument,"keyup").pipe(Object(n.a)(()=>this.isAlive),Object(c.a)(e=>!(e.keyCode!==r.j.Enter||!this.okButton||!this.okButton._elementRef)||!(e.keyCode!==r.j.Escape||!this.cancelButton||!this.cancelButton._elementRef))).subscribe(e=>{e.keyCode===r.j.Enter&&this.okButton._elementRef.nativeElement.click(),e.keyCode===r.j.Escape&&this.cancelButton._elementRef.nativeElement.click()})}ngOnDestroy(){this.isAlive=!1}close(e){let t=!0,i=e.target;const s=e.currentTarget;for(;i.parentElement&&i!==s;)"dialog"===i.className&&(t=!1),i=i.parentElement;t&&(this.closed.emit(),e.preventDefault())}}},Dn5i:function(e,t,i){"use strict";i.d(t,"a",function(){return s});class s{}},KWJg:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var s=i("fYS1"),r=i("xgIS"),a=i("GJmQ"),n=i("pLZG"),c=i("SxV6");class l{constructor(e,t){this.clipboardService=t,this.draggable=null,this.draginfokey="draginfos",this.objectKey="object",this.elementKey="element",this.uuidKey="uuid",this.isAlive=!0;const i=e.nativeElement;Object(r.a)(i,"dragstart").pipe(Object(a.a)(()=>this.isAlive),Object(n.a)(()=>!!this.context)).subscribe(e=>{if(!t)throw new Error("To use the DejaDraggableDirective, please import and provide the DejaClipboardService in your application.");const n={};this.dragdropid=(new s.o).toString(),n[this.uuidKey]=this.dragdropid;const l=this.context&&this.context.object||i;n[this.objectKey]=l,n[this.elementKey]=i,this.clipboardService.set(this.draginfokey,n);let h="notavailable";if(l&&(l.dragged=!0,h=JSON.stringify(h)),this.context&&this.context.dragstartcallback){const t=e;t.dragInfo=n,t.dragObject=this.context.object,t.dragElement=i,this.context.dragstartcallback(t),e.dataTransfer.setData("text/plain",h),t.defaultPrevented&&e.preventDefault()}Object(r.a)(i,"dragend").pipe(Object(a.a)(()=>this.isAlive),Object(c.a)()).subscribe(e=>{const t=this.clipboardService.get(this.draginfokey),i=t&&t[this.objectKey];if(i&&delete i.dragged,this.context&&this.context.dragendcallback&&t){const s=e;s.dragInfo=t,s.dragObject=i,s.dragElement=t[this.elementKey],this.context.dragendcallback(s),s.defaultPrevented&&e.stopPropagation()}this.clipboardService.clear(),this.dragdropid=void 0})})}set context(e){this._context=e,this.draggable=!!e||null}get context(){return this._context}ngOnDestroy(){this.isAlive=!1}}},exGX:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i("KWJg"),i("lP1G");class s{}},lP1G:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var s=i("KCVW"),r=(i("fYS1"),i("XNiG")),a=i("Cfvw"),n=i("xgIS"),c=i("vkgz"),l=i("pLZG"),h=i("GJmQ"),o=i("1G5W");class d{constructor(e,t){this.clipboardService=t,this.droppable=null,this.draginfokey="draginfos",this.objectKey="object",this.droppedKey="dropped",this.elementKey="element",this._allEvents=!1,this.isAlive=!0;let i=!1;const s=e.nativeElement,d=new r.a,u=new r.a,b=Object(a.a)(u).pipe(Object(c.a)(()=>i=!1),Object(l.a)(e=>!e));Object(a.a)(d).pipe(Object(h.a)(()=>this.isAlive)).subscribe(e=>{if("dragenter"===e.type){if(i)return;if(i=!0,this.context.dragentercallback){const t=this.clipboardService.get(this.draginfokey),i=e;i.dragInfo=t,i.dragObject=e[this.objectKey],i.dragElement=s,i.itsMe=e[this.elementKey]===s,this.context.dragentercallback(i),i.defaultPrevented?(e.preventDefault(),e.dataTransfer.dropEffect="copy"):e.dataTransfer.dropEffect="none",Object(n.a)(s,"drop").pipe(Object(o.a)(b)).subscribe(i=>{if(this.context.dropcallback&&t){const r=i;r.dragInfo=t,r.dragObject=t[this.objectKey],r.dragElement=s,r.itsMe=t[this.elementKey]===s,this.context.dropcallback(r),r.defaultPrevented?(r.dragInfo[this.droppedKey]=!0,i.preventDefault(),e.dataTransfer.dropEffect="copy"):e.dataTransfer.dropEffect="none"}u.next()}),Object(n.a)(s,"dragover").pipe(Object(o.a)(b)).subscribe(i=>{if(this._allEvents||!this.lastTarget||this.lastTarget!==i.target){if(this.context.dragovercallback&&t){const r=i;r.dragInfo=t,r.dragObject=t[this.objectKey],r.dragElement=s,r.itsMe=t[this.elementKey]===s,this.context.dragovercallback(r),this.lastTarget=i.target,this.lastAccept=r.defaultPrevented,r.defaultPrevented?(i.preventDefault(),e.dataTransfer.dropEffect="copy"):e.dataTransfer.dropEffect="none"}}else this.lastAccept?(i.preventDefault(),e.dataTransfer.dropEffect="copy"):e.dataTransfer.dropEffect="none"})}}else{if(this.context.dragleavecallback){const t=new CustomEvent("DejaDragLeave",{cancelable:!0});this.context.dragleavecallback(t),t.defaultPrevented&&e.preventDefault()}u.next()}}),Object(n.a)(s,"dragenter").pipe(Object(h.a)(()=>this.isAlive),Object(l.a)(()=>!!this.context),Object(l.a)(()=>!!this.clipboardService.get(this.draginfokey))).subscribe(e=>{if(!t)throw new Error("To use the DejaDroppableDirective, please import and provide the DejaClipboardService in your application.");d.next(e)}),Object(n.a)(s,"dragleave").pipe(Object(h.a)(()=>this.isAlive),Object(l.a)(()=>!!this.context),Object(l.a)(()=>!!this.clipboardService.get(this.draginfokey))).subscribe(e=>{const t=s.getBoundingClientRect();e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom||d.next(e)})}set allEvents(e){this._allEvents=Object(s.b)(e)}set context(e){this._context=e,this.droppable=!!e||null}get context(){return this._context}ngOnDestroy(){this.isAlive=!0}}},"u/5O":function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i("D1LT");class s{}},woK4:function(e,t,i){"use strict";i.d(t,"a",function(){return S});var s=i("KCVW"),r=i("8Y7J"),a=i("fYS1"),n=i("XNiG"),c=i("2Vo4"),l=i("Cfvw"),h=i("xgIS"),o=i("itXk"),d=i("VRyK"),u=i("LRne"),b=i("PqYM"),p=i("GJmQ"),g=i("Kj3r"),m=i("vkgz"),j=i("eIep"),f=i("lJxs"),v=i("SxV6"),I=i("q92s"),x=i("pLZG");const O=()=>{};class S extends a.h{constructor(e,t,i,s,a){super(e,t),this.viewPort=t,this.elementRef=i,this._control=s,this.clipboardService=a,this.query="",this.itemsWidth=null,this.itemDragEnd=new r.EventEmitter,this.itemDragStart=new r.EventEmitter,this.scroll=new r.EventEmitter,this.selectedChange=new r.EventEmitter,this.viewPortChanged=new r.EventEmitter,this.onTouchedCallback=O,this.onChangeCallback=O,this._keyboardNavigation=!1,this.rangeStartIndex=0,this.filterExpression="",this._searchArea=!1,this._sortable=!1,this._itemsDraggable=!1,this.hasCustomService=!1,this.hasLoadingEvent=!1,this._modelIsValue=!1,this._disabled=null,this.keyboardNavigation$=new n.a,this.clearFilterExpression$=new c.a(null),this.writeValue$=new n.a,this.selectItems$=new n.a,this.contentInitialized$=new n.a,this.setQuery$=new n.a,this._control&&(this._control.valueAccessor=this),Object(l.a)(this.clearFilterExpression$).pipe(Object(p.a)(()=>this._isAlive),Object(g.a)(400)).subscribe(()=>this.filterExpression=""),Object(l.a)(this.keyboardNavigation$).pipe(Object(p.a)(()=>this._isAlive),Object(m.a)(()=>this._keyboardNavigation=!0),Object(g.a)(1e3)).subscribe(()=>{this._keyboardNavigation=!1,this.changeDetectorRef.markForCheck()}),Object(h.a)(window,"resize").pipe(Object(p.a)(()=>this._isAlive),Object(g.a)(5)).subscribe(()=>{this.viewPort.deleteSizeCache(),this.viewPort.refresh(),this.changeDetectorRef.markForCheck()}),Object(l.a)(this.setQuery$).pipe(Object(p.a)(()=>this._isAlive),Object(g.a)(250),Object(m.a)(e=>{this.query=e,this.setCurrentItem(void 0)}),Object(j.a)(()=>this.calcViewList$())).subscribe(O);const u=Object(o.b)(this.selectItems$,this.contentInitialized$).pipe(Object(f.a)(([e])=>e),Object(f.a)(e=>this.getVirtualSelectedEntities(e)),Object(f.a)(e=>e instanceof Array&&e||e&&[e]||[]),Object(m.a)(e=>super.setSelectedItems(e))),b=Object(o.b)(this.writeValue$,this.contentInitialized$).pipe(Object(f.a)(([e])=>{if(void 0===this.modelIsValue)if(e instanceof Array){const t=e||[],i=t.length&&typeof t[0];this.modelIsValue=i&&"string"===i||"number"===i}else{const t=typeof e;this.modelIsValue=""===e||"string"===t||"number"===t}return this.modelIsValue&&(this.query=""),e}),Object(f.a)(e=>this.getVirtualSelectedEntities(e)),Object(m.a)(e=>super.setSelectedModels(!e||this._multiSelect||e instanceof Array?e:[e])));Object(d.a)(b,u).pipe(Object(p.a)(()=>this._isAlive)).subscribe(()=>{super.getItemListService().ensureSelection(),this.changeDetectorRef.markForCheck()}),this._viewPortChanged=this.viewPortChanged,this.maxHeight=0}set listElememtRef(e){this.listElement=e.nativeElement}keyboardNavigation(){return this._keyboardNavigation}set minSearchlength(e){this._minSearchLength=Object(s.e)(e)}get minSearchlength(){return this._minSearchLength}set searchArea(e){this._searchArea=Object(s.b)(e)}get searchArea(){return this._searchArea||this.minSearchlength>0}set modelIsValue(e){this._modelIsValue=Object(s.b)(e)}get modelIsValue(){return this._modelIsValue}set sortable(e){this._sortable=Object(s.b)(e)}get sortable(){return this._sortable}set itemsDraggable(e){this._itemsDraggable=Object(s.b)(e)}get itemsDraggable(){return this._itemsDraggable}set pageSize(e){this._pageSize=Object(s.e)(e)}get pageSize(){if(0===this._pageSize){const e=this.getViewPortRowHeight();return Math.floor((this.maxHeight||this.listElement.clientHeight)/e)}return this._pageSize}set hintLabel(e){this.setHintLabel(e)}get hintLabel(){return this._hintLabel}set viewPortRowHeight(e){this.setViewPortRowHeight(e)}set viewportMode(e){this.setViewportMode(e)}set childrenField(e){super.setChildrenField(e)}get childrenField(){return this._childrenField}set textField(e){super.setTextField(e)}set valueField(e){super.setValueField(e)}set searchField(e){super.setSearchField(e)}get searchField(){return this._searchField}set maxHeight(e){super.setMaxHeight(e)}get maxHeight(){return this.getMaxHeight()}set currentItem(e){super.setCurrentItem(e),e&&this.ensureItemVisible(e)}get currentItem(){return super.getCurrentItem()}get depthMax(){return this._depthMax}set multiSelect(e){super.setMultiSelect(Object(s.b)(e))}get multiSelect(){return this._multiSelect}set selectedItems(e){void 0!==e&&this.selectItems$.next(e)}get selectedItems(){return super.getSelectedItems()}set selectedItem(e){void 0!==e&&this.selectItems$.next(e)}get selectedItem(){const e=super.getSelectedItems();return e&&e[0]}set selectedModel(e){void 0!==e&&this.writeValue(e)}get selectedModel(){const e=super.getSelectedModels();return e&&e[0]}set selectedModels(e){void 0!==e&&this.writeValue(e)}get selectedModels(){return super.getSelectedModels()}set itemListService(e){void 0!==e&&(this.hasCustomService=!0,this.setItemListService(e),e&&e.lastQuery&&(this.query=e.lastQuery.toString()))}get itemListService(){return this.getItemListService()}set sortingService(e){this.setSortingService(e)}set groupingService(e){this.setGroupingService(e)}set items(e){delete this.hintLabel,super.setItems$(e).pipe(Object(j.a)(e=>this.minSearchlength>0&&!this.query?(this._itemList=[],this.changeDetectorRef.markForCheck(),Object(u.a)(e)):this.calcViewList$().pipe(Object(f.a)(()=>e)))).subscribe(O)}set loadingItems(e){this.hasLoadingEvent=!!e,super.setLoadingItems(e)}set selectingItem(e){super.setSelectingItem(e)}set unselectingItem(e){super.setUnselectingItem(e)}set expandingItem(e){super.setExpandingItem(e)}set collapsingItem(e){super.setCollapsingItem(e)}set models(e){super.setModels$(e).pipe(Object(v.a)(),Object(j.a)(()=>this.calcViewList$())).subscribe(O)}set disabled(e){const t=Object(s.b)(e);this._disabled=t||null,this.changeDetectorRef.markForCheck()}get disabled(){return this._disabled}set waiter(e){void 0!==e&&(this._waiter=e)}get waiter(){return this._waiter}set inputValidatorDirective(e){e&&(e.parentControl=this._control)}set currentItemIndex(e){super.setCurrentItemIndex(e),this.changeDetectorRef.markForCheck()}get currentItemIndex(){return this.getCurrentItemIndex()}get itemTemplate(){return this.itemTemplateExternal||this.itemTemplateInternal}get parentItemTemplate(){return this.parentItemTemplateExternal||this.parentItemTemplateInternal}get loaderTemplate(){return this.loaderTemplateExternal||this.loaderTemplateInternal}get headerTemplate(){return this.headerTemplateExternal||this.headerTemplateInternal}get searchPrefixTemplate(){return this.searchPrefixTemplateExternal||this.searchPrefixTemplateInternal}get searchSuffixTemplate(){return this.searchSuffixTemplateExternal||this.searchSuffixTemplateInternal}get value(){return this._multiSelect?this.selectedItems:this.selectedItem}set value(e){this.writeValue(e),this.onChangeCallback(e),this.onTouchedCallback()}writeValue(e){this.writeValue$.next(e)}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}toggleAll$(e){return super.toggleAll$(e).pipe(Object(j.a)(e=>this.calcViewList$().pipe(Object(v.a)(),Object(f.a)(()=>e))))}toggleAll(e){this.toggleAll$(e).pipe(Object(v.a)()).subscribe(O)}ensureItemVisible(e){super.ensureItemVisible(e)}clearViewPort(){super.clearViewPort()}ngAfterContentInit(){if(!this.items&&this.options&&this.options.length){const e=[];this.valueField="value",this.textField="text";const t=this.options.map(t=>{const i={text:t.text,value:t.value};return t.selected&&e.push(i),i});this.models=t,e.length&&(this.selectedModels=e),t.length>100&&console.error("Select options with more than 100 items can have performance options. Please bind directly the items in code behind with items or models input.")}this.contentInitialized$.next(!0)}ngAfterViewInit(){0===this._itemList.length&&(this.hasCustomService||this.hasLoadingEvent)&&Object(b.a)(1).pipe(Object(v.a)(),Object(j.a)(()=>this.calcViewList$())).subscribe(O),Object(h.a)(this.listElement,"scroll").pipe(Object(p.a)(()=>this._isAlive),Object(f.a)(e=>[e,e.target.scrollTop,e.target.scrollLeft]),Object(f.a)(([e,t,i])=>(this.scroll.emit({originalEvent:e,scrollLeft:i,scrollTop:t}),t))).subscribe(e=>this.viewPort.scrollPosition$.next(e));let e=Object(h.a)(this.listElement,"keydown");if(this.input){const t=Object(h.a)(this.input.nativeElement,"keydown");e=e.pipe(Object(I.a)(t))}e.pipe(Object(p.a)(()=>this._isAlive),Object(x.a)(()=>!this.disabled),Object(x.a)(e=>{const t=e.keyCode||a.j[e.code];return t===a.j.Home||t===a.j.End||t===a.j.PageUp||t===a.j.PageDown||t===a.j.UpArrow||t===a.j.DownArrow||t===a.j.Space||t===a.j.Enter}),Object(j.a)(e=>this.ensureListCaches$().pipe(Object(f.a)(()=>e))),Object(f.a)(e=>{if(!this.rowsCount)return!0;const t=e=>{this.currentItemIndex=e,this.ensureItemVisible(this.currentItemIndex),this.viewPort.refresh()},i=this.rangeStartIndex>=0?this.rangeStartIndex:this.rangeStartIndex=this.currentItemIndex;switch(e.keyCode||a.j[e.code]){case a.j.Home:return e.shiftKey?this.selectRange$(i,0).pipe(Object(v.a)()).subscribe(O):e.ctrlKey||(this.rangeStartIndex=0,this.selectRange$(this.rangeStartIndex).pipe(Object(v.a)()).subscribe(O)),t(0),!1;case a.j.End:return e.shiftKey?this.selectRange$(i,this.rowsCount-1).pipe(Object(v.a)()).subscribe(O):e.ctrlKey||(this.rangeStartIndex=this.rowsCount-1,this.selectRange$(this.rangeStartIndex).pipe(Object(v.a)()).subscribe(O)),t(this.rowsCount-1),!1;case a.j.PageUp:const s=Math.max(0,this.currentItemIndex-this._pageSize);return e.shiftKey?this.selectRange$(i,s).pipe(Object(v.a)()).subscribe(O):e.ctrlKey||(this.rangeStartIndex=s,this.selectRange$(this.rangeStartIndex).pipe(Object(v.a)()).subscribe(O)),t(s),!1;case a.j.PageDown:const r=Math.min(this.rowsCount-1,this.currentItemIndex+this._pageSize);return e.shiftKey?this.selectRange$(i,r).pipe(Object(v.a)()).subscribe(O):e.ctrlKey||(this.rangeStartIndex=r,this.selectRange$(this.rangeStartIndex).pipe(Object(v.a)()).subscribe(O)),t(r),!1;case a.j.UpArrow:const n=Math.max(0,this.currentItemIndex-1);return-1!==n&&(e.shiftKey?this.selectRange$(i,n).pipe(Object(v.a)()).subscribe(O):e.ctrlKey||(this.rangeStartIndex=n,this.selectRange$(this.rangeStartIndex).pipe(Object(v.a)()).subscribe(O)),t(n)),!1;case a.j.DownArrow:const c=Math.min(this.rowsCount-1,this.currentItemIndex+1);return-1!==c&&(e.shiftKey?this.selectRange$(i,c).pipe(Object(v.a)()).subscribe(O):e.ctrlKey||(this.rangeStartIndex=c,this.selectRange$(this.rangeStartIndex).pipe(Object(v.a)()).subscribe(O)),t(c)),!1;case a.j.Space:if("INPUT"===e.target.tagName&&!e.ctrlKey&&!e.shiftKey)return!0;const l=this.currentItem;return l&&(this.isCollapsible(l)?this.toggleCollapse$(i,!l.collapsed).pipe(Object(v.a)()).subscribe(O):l.selected?this.toggleSelect$([l],!1).pipe(Object(v.a)()).subscribe(O):this.multiSelect&&e.ctrlKey?this.toggleSelect$([l],!l.selected).pipe(Object(v.a)()).subscribe(O):this.unselectAll$().pipe(Object(j.a)(()=>this.toggleSelect$([l],!0)),Object(v.a)()).subscribe(O)),!1;case a.j.Enter:const h=this.currentItem;return h&&(this.isCollapsible(h)?this.toggleCollapse$(i,!h.collapsed).pipe(Object(v.a)()).subscribe(O):this.isSelectable(h)&&this.unselectAll$().pipe(Object(j.a)(()=>this.toggleSelect$([h],!0)),Object(v.a)()).subscribe(O)),!1;default:return!0}})).subscribe(e=>{if(!e)return this.keyboardNavigation$.next(),this.changeDetectorRef.markForCheck(),event.preventDefault(),!1});let t=Object(h.a)(this.listElement,"keyup");if(this.input){const e=Object(h.a)(this.input.nativeElement,"keyup"),i=Object(h.a)(this.input.nativeElement,"drop");t=t.pipe(Object(I.a)(e,i))}t.pipe(Object(p.a)(()=>this._isAlive),Object(x.a)(()=>!this.disabled),Object(m.a)(()=>{(this.query||"").length<this.minSearchlength&&(this._itemList=[])}),Object(x.a)(e=>{const t=e.keyCode||a.j[e.code];return t>=a.j.Key0||t===a.j.Backspace||t===a.j.Space||t===a.j.Delete})).subscribe(e=>{const t=e=>{this.currentItemIndex=e,this.ensureItemVisible(this.currentItemIndex)};if(this.searchArea)this.keyboardNavigation$.next();else if(/[a-zA-Z0-9]/.test(e.key)){this.clearFilterExpression$.next(null),this.filterExpression+=e.key;const i=new RegExp(`^${this.filterExpression}`,"i");this.findNextMatch$(t=>{if(t&&this.isSelectable(t)){const e=this.getTextValue(t);if(i.test(e))return!0}return e.preventDefault(),!1},this.currentItemIndex).pipe(Object(v.a)()).subscribe(e=>{e.index>=0&&t(e.index)})}}),this.viewPort.element$.next(this.listElement)}mousedown(e){if(this.mouseUp$sub&&(this.mouseUp$sub.unsubscribe(),this.mouseUp$sub=void 0),this.disabled)return;const t=e.target,i=this.getItemIndexFromHTMLElement(t);if(void 0===i)return;const s=e=>"expandbtn"===e.id||"expandbtn"===e.parentElement.id,r=this._itemList[i-this.vpStartRow];if(this.clickedItem=r,(!s(t)||!this.isCollapsible(r))&&this.isSelectable(r)&&(!e.ctrlKey||!this.multiSelect)&&(0===e.button||!r.selected)){if(e.shiftKey&&this.multiSelect)return this.selectRange$(i,this.currentItemIndex).pipe(Object(v.a)()).subscribe(()=>this.changeDetectorRef.markForCheck()),!1;if(!e.ctrlKey){if(!this.multiSelect&&r.selected)return;this.unselectAll$().pipe(Object(v.a)()).subscribe(()=>{this.currentItemIndex=i,this.toggleSelect$([r],!0).pipe(Object(v.a)()).subscribe(()=>this.changeDetectorRef.markForCheck())})}}this.mouseUp$sub=Object(h.a)(this.listElement,"mouseup").pipe(Object(v.a)(),Object(x.a)(()=>!this.disabled)).subscribe(e=>{this.mouseUp$sub=void 0;const t=e.target,i=this.getItemIndexFromHTMLElement(t);if(void 0===i)return;const r=this._itemList[i-this.vpStartRow];this.clickedItem&&r!==this.clickedItem||e.shiftKey||0!==e.button||(!this.isCollapsible(r)||!s(t)&&this.isSelectable(r)?e.ctrlKey&&(this.multiSelect?this.toggleSelect$([r],!r.selected).pipe(Object(v.a)()).subscribe(()=>{this.currentItemIndex=i,this.changeDetectorRef.markForCheck()}):(this.selectedItem&&this.selectedItem!==r?this.toggleSelect$([this.selectedItem],!1).pipe(Object(j.a)(()=>this.toggleSelect$([r],!0))):this.toggleSelect$([r],!r.selected)).pipe(Object(v.a)()).subscribe(()=>{this.currentItemIndex=i,this.changeDetectorRef.markForCheck()})):this.toggleCollapse$(i,!r.collapsed).pipe(Object(v.a)()).subscribe(()=>{this.currentItemIndex=i}),this.rangeStartIndex=-1)})}getDragContext(e){return this.clipboardService&&(this.sortable||this.itemsDraggable)?{dragendcallback:e=>{this.itemDragEnd.emit(e),delete this._ddStartIndex,delete this._ddTargetIndex,this.calcViewList$().pipe(Object(v.a)()).subscribe(O)},dragstartcallback:t=>{const i=this.getItemIndexFromHTMLElement(t.target);void 0!==i&&(this._ddStartIndex=e,t.dragObject=this._itemList[i-this.vpStartRow],this.itemDragStart.emit(t))},object:{index:e}}:null}getDropContext(){if(!this.clipboardService||!this.sortable)return null;const e=e=>{if(void 0===this._ddStartIndex)return;const t=this.getItemIndexFromHTMLElement(e.target);void 0!==t&&(this.calcDragTargetIndex$(this._ddStartIndex,t).pipe(Object(j.a)(e=>void 0!==e&&e!==this._ddTargetIndex?(this._ddTargetIndex=e,this.calcViewList$().pipe(Object(v.a)(),Object(f.a)(()=>e))):Object(u.a)(e))).subscribe(O),e.preventDefault())};return{dragentercallback:e,dragovercallback:e,dropcallback:e=>{delete this._ddStartIndex,delete this._ddTargetIndex,this.drop$().pipe(Object(j.a)(()=>this.calcViewList$().pipe(Object(v.a)()))).subscribe(O),e.preventDefault()}}}dragLeave(e){const t=this.listElement.getBoundingClientRect();a.m.fromLTRB(t.left,t.top,t.right,t.bottom).containsPoint(new a.l(e.pageX,e.pageY))||(this._ddTargetIndex=this._ddStartIndex,this.calcViewList$().pipe(Object(v.a)()).subscribe(O))}onSelectionChange(){let e=null,t=null;if(this.multiSelect){const i=this.selectedModels;if(e={items:this.selectedItems,models:i},this.modelIsValue){const e=this.getValueField();i.find(t=>!!t[e])&&(t=i.map(t=>void 0!==t[e]?t[e]:t))}else t=i}else{const i=this.selectedModel;if(e={item:this.selectedItems[0],model:i},this.modelIsValue){const e=this.getValueField();t=void 0!==i[e]?i[e]:i}else t=i}this.onChangeCallback(t),this.selectedChange.emit(e)}selectRange$(e,t){return super.selectRange$(e,t).pipe(Object(m.a)(e=>(e&&this.onSelectionChange(),e)),Object(m.a)(()=>this.changeDetectorRef.markForCheck()))}toggleSelect$(e,t){return this._multiSelect||!e[0].selected!=!t?super.toggleSelect$(e,t).pipe(Object(m.a)(()=>{this.onSelectionChange()})):Object(u.a)(e)}calcViewList$(){return super.calcViewList$(this.query).pipe(Object(m.a)(()=>this.changeDetectorRef.markForCheck()))}getItemClass(e){const t=["listitem"];return e.className&&t.push(e.className),(e.collapsing||e.expanding)&&t.push("hide"),e.depth<this.depthMax&&t.push("parent"),e.collapsed&&t.push("collapsed"),e.selected&&t.push("selected"),!1===e.selectable&&t.push("unselectable"),e.depth===this._depthMax&&e.odd&&t.push("odd"),t.join(" ")}}}}]);