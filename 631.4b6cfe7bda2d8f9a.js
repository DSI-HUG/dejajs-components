"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[631],{6631:(O,E,i)=>{i.r(E),i.d(E,{DejaContentEditableDemoModule:()=>H});var b=i(6019),c=i(9133),f=i(888),D=i(904),g=i(2605),v=i(8643),e=i(3668),m=i(348),p=i(4986),x=i(4499),C=i(5077),l=i(6263),T=i(5488),Z=i(4753),y=i(9417),U=i(9468),u=i(461),j=i(3067);let A=(()=>{class n extends p.yl{constructor(t,o){super(),this.control=o,this._disabled=null,this._inEdition=!1,this._editMode=!1,this._mandatory=!1,this._multiline=!1,this.edit$=new x.X([!1,!1]),this.onTouchedCallback=()=>{},this.onChangeCallback=a=>{},this.control&&(this.control.valueAccessor=this),this.element=t.nativeElement,(0,C.R)(this.element,"mousedown").pipe((0,l.R)(this.destroyed$)).subscribe(a=>this.inEdition||this.disabled?(a.cancelBubble=!0,!1):this.editMode?(this.edit$.next([!0,!0]),a.cancelBubble=!0,!1):void 0);const d=this.edit$.pipe((0,T.x)(),(0,Z.U)(([a,r])=>((null==r||r)&&(0,y.H)(10).pipe((0,U.q)(1),(0,l.R)(this.destroyed$)).subscribe(()=>{this.selectAll(),this.focus()}),this._inEdition=a,a?this.element.setAttribute("contenteditable","true"):this.element.removeAttribute("contenteditable"),this.refreshView(),a))),M=d.pipe((0,u.h)(a=>!a)),V=(0,C.R)(this.element.ownerDocument,"mousedown").pipe((0,u.h)(a=>!this.isChildElement(a.target)),(0,l.R)(M));d.pipe((0,u.h)(a=>a),(0,j.w)(()=>V),(0,l.R)(this.destroyed$)).subscribe(()=>{const a=this.element.innerText.replace(/\n/g,"<br />").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");this.onTouchedCallback(),(a||!this.mandatory)&&(this.value=a),this.inEdition=!1});const F=(0,C.R)(this.element,"keydown").pipe((0,l.R)(M));d.pipe((0,u.h)(a=>a),(0,j.w)(()=>F),(0,l.R)(this.destroyed$)).subscribe(a=>{if(a.cancelBubble=!0,a.stopPropagation(),a.code!==p.mW.Enter||this.multiline)a.code===p.mW.Escape&&(this.inEdition=!1);else{const r=this.element.innerText;(r||!this.mandatory)&&(this.value=r),this.inEdition=!1}return!1})}set mandatory(t){this._mandatory=(0,m.Ig)(t)}get mandatory(){return this._mandatory}set multiline(t){this._multiline=(0,m.Ig)(t)}get multiline(){return this._multiline}set disabled(t){const o=(0,m.Ig)(t);this._disabled=o||null,this.disabled&&this.edit$.next([!1,!1])}get disabled(){var t;return(null===(t=this.control)||void 0===t?void 0:t.disabled)||this._disabled}set editMode(t){this._editMode=(0,m.Ig)(t)}get editMode(){return this._editMode}set inEdition(t){this.disabled||this.edit$.next([(0,m.Ig)(t),!1])}get inEdition(){return this._inEdition}set value(t){t!==this.model&&(this.writeValue(t),this.onChangeCallback(t))}get value(){return this.model}writeValue(t){this.model=t,this.refreshView()}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}ngOnInit(){this.model=this.element.innerHTML}focus(){this.element.focus()}selectAll(){const t=document.createRange();t.selectNodeContents(this.element);const o=window.getSelection();o.removeAllRanges(),o.addRange(t)}edit(t){this.edit$.next([!this.disabled,t])}isChildElement(t){let o=t;for(;o&&o!==this.element;)o=o.parentElement;return o===this.element}refreshView(){!this.model||(this.inEdition?this.element.innerText=this.model.replace(/<br\s*[/]?>/gi,"\n"):this.element.innerHTML=this.model.replace(/\n/g,"<br />"))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(c.a5,10))},n.\u0275dir=e.lG2({type:n,selectors:[["","deja-editable",""]],hostVars:1,hostBindings:function(t,o){2&t&&e.uIk("disabled",o._disabled)},inputs:{mandatory:"mandatory",multiline:"multiline",disabled:"disabled",editMode:["deja-editable","editMode"],inEdition:"inEdition"},features:[e.qOj]}),n})(),I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[b.ez,c.u5]]}),n})();var $=i(6412),w=i(3507),J=i(7991);function R(n,s){1&n&&(e.TgZ(0,"mat-card",4),e._UZ(1,"deja-markdown",5),e.qZA()),2&n&&(e.xp6(1),e.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/content-editable/readme.md"))}function B(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-card",4),e.TgZ(1,"mat-toolbar",6),e._uU(2,"Content Editable Demo"),e.qZA(),e.TgZ(3,"mat-card-content"),e.TgZ(4,"mat-checkbox",7),e.NdJ("ngModelChange",function(h){return e.CHM(t),e.oxw().designMode=h}),e._uU(5,"Design Mode\xa0"),e.qZA(),e.TgZ(6,"mat-checkbox",7),e.NdJ("ngModelChange",function(h){return e.CHM(t),e.oxw().disabled=h}),e._uU(7,"Disabled"),e.qZA(),e.qZA(),e.TgZ(8,"mat-card-content",8),e.TgZ(9,"div",9),e._uU(10," Lorem ipsum dolor sit amet, consectetur adipiscing elit. "),e._UZ(11,"br"),e._uU(12," Mauris auctor sit amet odio et aliquet. Curabitur auctor eleifend mattis. "),e._UZ(13,"br"),e._uU(14," Nullam sit amet quam tellus. Ut mattis tellus sed erat ultricies ornare. "),e._UZ(15,"br"),e._uU(16," Nulla dictum nisi eu tortor lacinia porttitor. Donec eu arcu et enim cursus viverra. "),e._UZ(17,"br"),e._uU(18," Praesent pulvinar dui nisi, a tincidunt arcu finibus sed. "),e._UZ(19,"br"),e.TgZ(20,"a",10),e._uU(21,"Google"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.designMode),e.xp6(2),e.Q6J("ngModel",t.disabled),e.xp6(3),e.Q6J("deja-editable",t.designMode)("disabled",t.disabled)}}const Q=w.Bz.forChild([{path:"",component:(()=>{class n{constructor(){this.tabIndex=1,this.designMode=!1,this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["deja-content-editable-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],["color","primary"],["color","primary",3,"ngModel","ngModelChange"],["id","contentEditableContainer"],["multiline","",3,"deja-editable","disabled"],["href","http://www.google.ch"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-tab-group",0),e.NdJ("selectedTabChange",function(d){return o.tabIndex=d.index}),e._UZ(1,"mat-tab",1),e._UZ(2,"mat-tab",2),e.qZA(),e.YNc(3,R,2,1,"mat-card",3),e.YNc(4,B,22,4,"mat-card",3)),2&t&&(e.Q6J("selectedIndex",o.tabIndex),e.xp6(3),e.Q6J("ngIf",0===o.tabIndex),e.xp6(1),e.Q6J("ngIf",1===o.tabIndex))},directives:[g.SP,g.uX,b.O5,f.a8,J.F,v.Ye,f.dn,D.oG,c.JJ,c.On,A],encapsulation:2}),n})()},{path:"**",redirectTo:"",pathMatch:"full"}]);let H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[],imports:[[b.ez,I,$.O,c.u5,f.QW,D.p9,g.Nh,v.g0,Q]]}),n})()}}]);