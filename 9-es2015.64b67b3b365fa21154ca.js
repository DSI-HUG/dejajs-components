(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"7lvT":function(t,e,i){"use strict";i("bp59"),i("arSW")},A5hg:function(t,e,i){"use strict";i.d(e,"a",function(){return h});var s=i("KCVW"),n=i("ZXVw"),r=i("XNiG");i("bcAL");let o=0;class h extends n.b{constructor(t,e,i,s,n,h){super(n,i,s,e),this._editor=t,this.ngControl=e,this._hostElement=h,this._uid=`mat-input-${o++}`,this.stateChanges=new r.a,this._required=!1,this._disabled=!1,this.describedBy="",this.controlType="app-editor"}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=Object(s.b)(t)}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Object(s.b)(t),this.focused&&(this.focused=!1,this.stateChanges.next())}onContainerClick(){this._editor.setFocus()}setDescribedByIds(t){this.describedBy=t.join(" ")}ngOnInit(){this._editor.focus.subscribe(()=>{this.focused=!0,this.stateChanges.next()}),this._editor.blur.subscribe(()=>{this.focused=!1,this.stateChanges.next()}),this._editor.change.subscribe(()=>{this.stateChanges.next()}),this._generatePlaceholder()}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnDestroy(){this.stateChanges.complete()}get empty(){return!this._editor.value}get shouldLabelFloat(){return this.focused||!this.empty?(this.empty?this._attachPlaceholder():this._detachPlaceholder(),!0):(this._detachPlaceholder(),!1)}_attachPlaceholder(){this._placeholder&&!this._placeholder.parentElement&&this._hostElement.nativeElement.appendChild(this._placeholder)}_detachPlaceholder(){this._placeholder&&this._placeholder.parentElement&&this._placeholder.remove()}_generatePlaceholder(){if(this.placeholder){this._placeholder=document.createElement("div"),this._placeholder.style.position="absolute",this._placeholder.style.position="absolute",this._placeholder.style.left="0",this._placeholder.style.boxSizing="content-box",this._placeholder.style.width="100%",this._placeholder.style.height="100%",this._placeholder.style.overflow="hidden",this._placeholder.style.pointerEvents="none",this._placeholder.style.top="-0.84375em",this._placeholder.style.paddingTop="0.84375em";const t=document.createElement("div");t.style.color="rgba(0,0,0,0.54)",t.style.top="1.28125em",t.style.position="absolute";const e=document.createTextNode(this.placeholder);t.appendChild(e),this._placeholder.appendChild(t)}}}},ZXVw:function(t,e,i){"use strict";class s{static escapeRegExp(t){return t?t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):t}}i("SVse");var n=i("Xd0L");const r=Object(n.E)(class{constructor(t,e,i,s){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=s}});i.d(e,"a",function(){return s}),i.d(e,"b",function(){return r})},arSW:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i("A5hg");class s{}},bcAL:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var s=i("KCVW"),n=i("8Y7J"),r=i("LvDl"),o=i("SxV6"),h=i("IzEk");i("pk1M");class a{constructor(t,e,i){this.zone=t,this._changeDetectorRef=e,this._initializer=i,this.change=new n.EventEmitter,this.ready=new n.EventEmitter,this.blur=new n.EventEmitter,this.focus=new n.EventEmitter,this.disabled=new n.EventEmitter,this._inline=!0,this._value=""}set readonly(t){this._readonly=Object(s.b)(t)}get readonly(){return this._readonly}set inline(t){this._inline=Object(s.b)(t)}get inline(){return this._inline}get value(){return this._value}set value(t){t!==this._value&&(this._value=t,this.onChange(t))}ngOnChanges(t){t.readonly&&this.instance&&this.instance.setReadOnly(t.readonly.currentValue)}ngOnDestroy(){if(this.focus.complete(),this.blur.complete(),this.change.complete(),this.disabled.complete(),this.instance)if(this.instance.focusManager.blur(!0),this._ready){try{this.instance.destroy()}catch(t){console.warn(t,"Error occurred when destroying ckEditor instance")}this.ready.complete(),this.instance=null}else this.ready.pipe(Object(o.a)()).subscribe(()=>{try{this.instance.destroy()}catch(t){console.warn(t,"Error occurred when destroying ckEditor instance")}this.instance=null,this.ready.complete()})}ngAfterViewInit(){this._initializer.initDejaEditorLib().then(()=>{this.ckeditorInit(r.cloneDeep(this.config)||{}),setTimeout(()=>this._changeDetectorRef.markForCheck())})}updateValue(){this.zone.run(()=>{let t=this.instance.getData();t||(t=null),this.value!==t&&(this.value=t,this.onChange(t),this.change.emit(t))})}textAreaChange(){this.zone.run(()=>{const t=this.host.nativeElement.value;this.onChange(t),this.change.emit(t)})}ckeditorInit(t){if("undefined"==typeof CKEDITOR)console.warn("CKEditor 4.x is missing (http://ckeditor.com/)");else{if(this.instance)return;this.readonly&&(t.readOnly=this.readonly);const e=t.on&&t.on.key;t.on||(t.on={}),t.on.key=(t=>{1114177===t.data.keyCode&&(t.cancel(),t.stop(),this.instance.document.$.execCommand("SelectAll")),e&&e(t)}),this.instance=this.inline?CKEDITOR.inline(this.host.nativeElement,t):CKEDITOR.replace(this.host.nativeElement,t),this.instance.setData(this.value),this.instance.on("instanceReady",t=>{this._ready=!0,this.ready.emit(t)}),this.instance.on("change",()=>{this.debounce?(this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.updateValue(),this.debounceTimeout=null},parseInt(this.debounce,10))):this.updateValue()}),this.instance.on("blur",t=>{this.blur.emit(t),this.onTouched()}),this.instance.on("focus",t=>{this.readonly||this.focus.emit(t)})}}writeValue(t){this._value=t,this.instance?this.instance.setData(t):this.host.nativeElement.value=t}onChange(t){}onTouched(){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.readonly=t,this.disabled.next(t),this._ready?this.instance&&this.instance.setReadOnly(t):this.ready.pipe(Object(h.a)(1)).subscribe(()=>{this.instance.setReadOnly(this.readonly)})}getWordAtCursor(){const t=this.instance.getSelection().getRanges(!0)[0];if(!t)return null;const e=this._firstTextNode(t);return e&&e.toReplace||null}hasActiveSelection(){return!!this.getSelectedText()}getSelectedText(){return this.instance.getSelection().getSelectedText()}replace(t){if(!t)return;if(this.getSelectedText()){const e=this.instance.focus;return this.instance.focus=(()=>{}),this.instance.insertText(t),void(this.instance.focus=e)}const e=this.instance.getSelection().getRanges(!0)[0];if(!e)return void this.instance.insertText(t);const i=this._firstTextNode(e);i?this._replaceWord(i,t):this.instance.insertText(t),this.updateValue(),this.setFocus()}setFocus(){this.instance?this.instance.focus():this.host.nativeElement.focus()}_hasTextNodeAsChild(t,e=!1){const i=t.getChildren().toArray();if(e)for(let s=i.length-1;s>=0;s--){const t=i[s];if(t.type===CKEDITOR.NODE_TEXT)return t;{const e=this._hasTextNodeAsChild(t);if(e)return e}}else for(const s of i){if(s.type===CKEDITOR.NODE_TEXT)return s;{const t=this._hasTextNodeAsChild(s);if(t)return t}}return null}_mergeTextNodeAroundWithDirection(t,e=!1){const i=[];let s=t.getText(),n=t;for(;(n=e?n.getPrevious():n.getNext)&&n.type===CKEDITOR.NODE_TEXT&&!n.getText().charAt(e?n.getText().length-1:0).match(/[\s,;.:!?]/);)e?s=n.getText()+s:s+=n.getText(),i.push(n);i.length>0&&(t.setText(s),i.forEach(t=>t.remove()))}_mergeTextNodeAround(t){return this._mergeTextNodeAroundWithDirection(t,!0),this._mergeTextNodeAroundWithDirection(t),t}_firstNonEmptyTextNode(t,e=!1){let i=t;for(;i=e?i.getPrevious():i.getNext();){if(i.type!==CKEDITOR.NODE_TEXT)return i;if(""!==i.getText())return i}}_trim(t){return t&&(t=t.replace(/[\u200b\u00A0]/g,"").trim()),t}_extractFirstWord(t,e=!1){if(!t)return t;if(-1!==t.indexOf(" ")){const i=t.split(" ");return this._trim(i[e?i.length-1:0])}return this._trim(t)}_firstTextNodeResult(t,e=!1,i=!1){const s=t.getText();if(this._trim(s)&&this._trim(s.substring(s.length-1))){const s=this._mergeTextNodeAround(t);return{textNode:s,firstNodeIsText:i,toReplace:this._extractFirstWord(s.getText(),e)}}return null}_firstTextNodeWithDirection(t,e=!1){const i=t.startContainer;if(e&&i.type===CKEDITOR.NODE_TEXT)return this._firstTextNodeResult(i,e,!0);const s=i.type===CKEDITOR.NODE_TEXT?e?this._firstNonEmptyTextNode(i,!0):this._firstNonEmptyTextNode(i):i.getChildren().getItem(t.startOffset-1);if(s){if(s.type===CKEDITOR.NODE_TEXT)return this._firstTextNodeResult(s,e);let t=this._hasTextNodeAsChild(s,e);if(t)return this._firstTextNodeResult(t,e);for(t=s;t=e?t.getPrevious():t.getNext();){if(t.type===CKEDITOR.NODE_TEXT)return this._firstTextNodeResult(t,e);const i=this._hasTextNodeAsChild(t,e);if(i)return this._firstTextNodeResult(i,e)}}return null}_firstTextNode(t){let e=this._firstTextNodeWithDirection(t,!0);return e||(e=this._firstTextNodeWithDirection(t)),e}_replaceWord(t,e){const i=t.textNode.getText().lastIndexOf(t.toReplace);if(-1!==i){const s=t.textNode.getText().substring(0,i),n=t.textNode.getText().substring(i+t.toReplace.length);t.textNode.setText(s);const r=CKEDITOR.dom.element.createFromHtml(`<span>${CKEDITOR.tools.transformPlainTextToHtml(e,CKEDITOR.ENTER_BR)}</span>`);r.insertAfter(t.textNode),t.textNode.getText().substring(i+t.toReplace.length)&&new CKEDITOR.dom.text(n).insertAfter(r),this.instance.getSelection().selectElement(t.textNode);const o=this.instance.getSelection().getRanges()[0];o.setStartAfter(t.textNode),o.select()}}}},bp59:function(t,e,i){"use strict";i("bcAL"),i.d(e,"a",function(){return s});class s{}},pk1M:function(t,e,i){"use strict";i.d(e,"a",function(){return s});class s{initDejaEditorLib(){return this._loading||this.init(),this._loader}init(){this._loader=new Promise(t=>{if(this._loading=!0,!window.ckeditor){const e=(document.getElementsByTagName("base")[0]||{}).href,i=window.CKEDITOR_BASEPATH||`${e}assets/ckeditor/`,s=document.createElement("script");document.head.appendChild(s),s.type="text/javascript",s.src=`${i}ckeditor.js`,s.addEventListener("load",t)}})}}}}]);