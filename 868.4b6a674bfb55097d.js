"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[868],{5933:(y,C,l)=>{l.d(C,{b:()=>D});var c=l(9947),p=l(2254),d=l(5373),v=l(7613),x=l(7867);function D(...g){return function(...g){const h=(0,v.yG)(g),b=(0,v._6)(g,1/0);return g=(0,p.k)(g),(0,c.e)((P,j)=>{(0,d.J)(b)((0,x.D)([P,...g],h)).subscribe(j)})}(...g)}},2254:(y,C,l)=>{l.d(C,{k:()=>p});const{isArray:c}=Array;function p(d){return 1===d.length&&c(d[0])?d[0]:d}},868:(y,C,l)=>{l.r(C),l.d(C,{DejaCircularPickerDemoModule:()=>be});var c=l(6019),p=l(9133),d=l(888),v=l(2605),x=l(8643),e=l(3668),D=l(348),g=l(1574),h=l(6420),b=l(5077),P=l(461),j=l(9463),Q=l(3067),U=l(273),E=l(5933),N=l(9468),I=l(7384),V=l(6263),Y=l(2210),R=l(9947),F=l(6921),L=l(8889),H=l(6474);const B=["labelTemplate"],W=["cursorTemplate"],X=["picker"];function z(a,o){}const G=function(a){return{$implicit:a}};function K(a,o){if(1&a&&e.YNc(0,z,0,0,"ng-template",9),2&a){const t=e.oxw(2);e.Q6J("ngTemplateOutlet",t.cursorTemplate)("ngTemplateOutletContext",e.VKq(2,G,t.cursor.value))}}function q(a,o){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.cursor.value)}}function ee(a,o){if(1&a&&(e.TgZ(0,"div",6),e.YNc(1,K,1,4,void 0,7),e.YNc(2,q,2,1,"ng-template",null,8,e.W1O),e.qZA()),2&a){const t=e.MAs(3),n=e.oxw();e.Udp("top",n.cursor.position.top,"px")("left",n.cursor.position.left,"px"),e.xp6(1),e.Q6J("ngIf",n.cursorTemplate)("ngIfElse",t)}}function te(a,o){}const ne=function(a,o){return{$implicit:a,index:o}};function ae(a,o){if(1&a&&e.YNc(0,te,0,0,"ng-template",9),2&a){const t=e.oxw(),n=t.$implicit,i=t.index,r=e.oxw();e.Q6J("ngTemplateOutlet",r.labelTemplate)("ngTemplateOutletContext",e.WLB(2,ne,n.value,i))}}function ie(a,o){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.value)}}function le(a,o){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,ae,1,5,void 0,11),e.YNc(2,ie,2,1,"span",11),e.qZA()),2&a){const t=o.$implicit,n=e.oxw();e.Udp("top",t.position.top,"px")("left",t.position.left,"px"),e.uIk("value",t.value),e.xp6(1),e.Q6J("ngIf",n.labelTemplate),e.xp6(1),e.Q6J("ngIf",!n.labelTemplate)}}const re=function(a){return{transform:a}};var M=(()=>{return(a=M||(M={}))[a.clockwise=-1]="clockwise",a[a.counterClockwise=1]="counterClockwise",M;var a})();let oe=(()=>{class a extends g.yl{constructor(t,n,i){super(),this.changeDetectorRef=n,this.control=i,this.clockwiseFactor=M.clockwise,this.fullDiameter=310,this.labelsDiameter=43,this._outerLabels=!1,this._disabled=!1,this.twoPi=2*Math.PI,this._radius=0,this.configs=[],this._circularValues=[],this.onChangeCallback=u=>{},this.onTouchedCallback=()=>{};const r=t.nativeElement;this.control&&(this.control.valueAccessor=this);const s=(0,b.R)(r.ownerDocument,"mouseup");(0,b.R)(r,"mousedown").pipe((0,P.h)(u=>!this.disabled&&1===u.buttons),(0,j.b)(100),(0,P.h)(u=>{this.clickedTime=Date.now();const T=this.getHtmlElement(u.target,"cursor"),_=this.getHtmlElement(u.target,"value");return T?this.cursorElement=T:_&&(this.value=+_.getAttribute("value")),!!T||!!_}),(0,Q.w)(()=>{const u=new U.x;r.ownerDocument.body.className.match(/noselect/)||r.ownerDocument.body.classList.add("noselect");const T=u.pipe((0,E.b)(s),(0,N.q)(1),(0,I.b)(()=>{delete this.cursorElement,delete this.clickedTime,r.ownerDocument.body.className=r.ownerDocument.body.className.replace(/\bnoselect\b/,"")})),Z=this.picker.nativeElement.getBoundingClientRect();return(0,b.R)(r.ownerDocument,"mousemove").pipe((0,V.R)(T),function(a,o=Y.z){return function(a){return(0,R.e)((o,t)=>{let n=!1,i=null;o.subscribe(new L.Q(t,s=>{n=!0,i=s})),a.subscribe(new L.Q(t,()=>{if(n){n=!1;const s=i;i=null,t.next(s)}},F.Z))})}((0,H.F)(a,o))}(10),(0,I.b)(f=>{if(1!==f.buttons)return void u.next();let m=h.Cd.fromOuterRect(Z),O=!1;if(this.outerLabels){m=m.inflate(this.labelsDiameter);for(const A of this.configs){if(O=m.containsPoint(new h.Ly(f.pageX,f.pageY)),O){this.selectedConfig=A;break}m=m.inflate(this.labelsDiameter)}}else{m=m.inflate(-this.labelsDiameter*(this.configs.length-1));for(let w=this.configs.length;w>0;w--){if(O=m.containsPoint(new h.Ly(f.pageX,f.pageY)),O){this.selectedConfig=this.configs[w-1];break}m=m.inflate(this.labelsDiameter)}}const J=this.pointToValue(f.pageX-Z.left,f.pageY-Z.top,this.selectedConfig);J!==this.value&&(this.value=J)}))}),(0,V.R)(this.destroyed$)).subscribe()}set outerLabels(t){this._outerLabels=(0,D.Ig)(t)||null}get outerLabels(){return this._outerLabels}set disabled(t){this._disabled=(0,D.Ig)(t),this.changeDetectorRef.markForCheck()}get disabled(){return this._disabled}get cursorHand(){return this._cursorHand}get cursor(){return this._cursor}get radius(){return this._radius}get circularValues(){return this._circularValues}ngOnInit(){this._radius=(this.fullDiameter-this.labelsDiameter)/2,this.ranges.forEach(n=>{n.interval=n.interval?n.interval:1,n.labelInterval=n.labelInterval?n.labelInterval:1,n.beginOffset=n.beginOffset?n.beginOffset:Math.PI/2,this.configs.push({range:n,stepAngle:this.twoPi/Math.floor((n.max-n.min+1)/n.interval),steps:Math.floor((n.max-n.min+1)/n.interval)})}),this.selectedConfig=this.configs[0],this.bind(),this.updateCursor()}set value(t){t!==this._value&&(this.writeValue(t),this.onChangeCallback(t))}get value(){return this._value}writeValue(t){t!==this._value&&(this._value=t,this.updateCursor())}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}pointToValue(t,n,i){const r=this.pointToAngle(t-this._radius,n-this._radius,i);let s=i.steps-Math.ceil(r/i.stepAngle);return s<0&&(s=i.steps),i.range.min+s*i.range.interval}valueToPoint(t,n,i){const r=new h.Ly,s=this.valueToAngle(t,i);return r.left=this._radius+(this._radius+n)*Math.cos(s),r.top=this._radius-(this._radius+n)*Math.sin(s),r}pointToAngle(t,n,i){return(-Math.atan2(n,t)-i.range.beginOffset-i.stepAngle/2+this.twoPi)%this.twoPi}valueToAngle(t,n){return Math.floor((t-n.range.min)/n.range.interval)*n.stepAngle*this.clockwiseFactor+n.range.beginOffset}bind(){this._circularValues=[],this.configs.forEach((t,n)=>{for(let i=t.range.min;i<=t.range.max;i+=t.range.labelInterval*t.range.interval){const r={value:i},s=this.labelsDiameter/2,k=this.labelsDiameter*n,u=this.valueToPoint(i,this.outerLabels?s+k:-s-k,t);r.position=new h.Ly(u.left-s,u.top-s),this._circularValues.push(r)}})}updateCursor(){if(!this._circularValues||!this._circularValues.length)return;null==this._value&&(this._value=this._circularValues[0].value),this.selectedConfig=this.configs.find(r=>this._value>=r.range.min&&this._value<=r.range.max),this.selectedConfig||(this.selectedConfig=this.configs[0]);const t=this.configs.indexOf(this.selectedConfig),n=this.labelsDiameter/2,i=this.valueToPoint(this._value,this.outerLabels?n+this.labelsDiameter*t:-n-this.labelsDiameter*t,this.selectedConfig);this._cursor={position:new h.Ly(i.left-n,i.top-n),value:this._value},this._cursorHand={angle:this.valueToAngle(this._value,this.selectedConfig),width:this.outerLabels?this._radius+this.labelsDiameter*t:this._radius-this.labelsDiameter-this.labelsDiameter*t},this.changeDetectorRef.markForCheck()}getHtmlElement(t,n){let i=t;for(;i&&!i.hasAttribute(n);)i=i.parentElement;if(i)return i}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(p.a5,10))},a.\u0275cmp=e.Xpm({type:a,selectors:[["deja-circular-picker"]],contentQueries:function(t,n,i){if(1&t&&(e.Suo(i,B,5),e.Suo(i,W,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.labelTemplate=r.first),e.iGM(r=e.CRH())&&(n.cursorTemplate=r.first)}},viewQuery:function(t,n){if(1&t&&e.Gf(X,7),2&t){let i;e.iGM(i=e.CRH())&&(n.picker=i.first)}},inputs:{clockwiseFactor:"clockwiseFactor",fullDiameter:"fullDiameter",labelsDiameter:"labelsDiameter",ranges:"ranges",outerLabels:"outerLabels",disabled:"disabled"},features:[e.qOj],decls:6,vars:13,consts:[[1,"circular-picker"],["picker",""],[1,"cursor-container"],["class","cursor","cursor","",3,"top","left",4,"ngIf"],[1,"cursorHand",3,"ngStyle"],["class","value",3,"top","left",4,"ngFor","ngForOf"],["cursor","",1,"cursor"],[4,"ngIf","ngIfElse"],["valueTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"value"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2),e.YNc(3,ee,4,6,"div",3),e._UZ(4,"div",4),e.qZA(),e.YNc(5,le,3,7,"div",5),e.qZA()),2&t&&(e.Udp("width",2*n.radius,"px")("height",2*n.radius,"px"),e.ekj("disabled",n.disabled),e.xp6(3),e.Q6J("ngIf",void 0!==n.cursor.value),e.xp6(1),e.Udp("width",n.cursorHand.width+2,"px"),e.Q6J("ngStyle",e.VKq(11,re,"translateY(-50%) rotate("+-n.cursorHand.angle+"rad)")),e.xp6(1),e.Q6J("ngForOf",n.circularValues))},directives:[c.O5,c.PC,c.sg,c.tP],styles:["[_nghost-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]{border-radius:50%;position:relative}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{border-radius:50%;cursor:pointer;height:43px;line-height:43px;position:absolute;text-align:center;width:43px}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .cursor-container[_ngcontent-%COMP%]   .cursor[_ngcontent-%COMP%]{border-radius:50%;cursor:pointer;height:43px;line-height:43px;position:absolute;text-align:center;width:43px;z-index:5}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .cursor-container[_ngcontent-%COMP%]   .cursorHand[_ngcontent-%COMP%]{border-radius:2px;height:4px;left:50%;position:absolute;top:50%;transform-origin:left center}"],changeDetection:0}),a})(),se=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[c.ez,p.u5]]}),a})();var ce=l(6412),ue=l(3507),de=l(7991);function me(a,o){1&a&&(e.TgZ(0,"mat-card",5),e._UZ(1,"deja-markdown",6),e.qZA()),2&a&&(e.xp6(1),e.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/circular-picker/readme.md"))}function pe(a,o){if(1&a&&e._uU(0),2&a){const t=o.$implicit,n=e.oxw(2);e.hij(" ",n.getLabelForValue(t)," ")}}function ge(a,o){if(1&a&&e._uU(0),2&a){const t=o.$implicit;e.hij(" ",24===t?0:t," ")}}function he(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"mat-card",7),e.TgZ(2,"mat-toolbar",8),e._uU(3,"Complex Circular-picker width custom labels"),e.qZA(),e.TgZ(4,"mat-card-content",9),e._UZ(5,"deja-circular-picker",10),e.TgZ(6,"deja-circular-picker",11),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().sm=i})("ngModelChange",function(i){return e.CHM(t),e.oxw().range42Changed(i)}),e.YNc(7,pe,1,1,"ng-template",null,12,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"mat-card",7),e.TgZ(11,"mat-toolbar",8),e._uU(12,"Circular-picker demo simple - Range 1 to 20 (inside and outside labels)"),e.qZA(),e.TgZ(13,"mat-card-content",13),e.TgZ(14,"div"),e._UZ(15,"deja-circular-picker",14),e.qZA(),e.TgZ(16,"div"),e._UZ(17,"deja-circular-picker",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"mat-card",7),e.TgZ(19,"mat-toolbar",8),e._uU(20,"Circular-picker demo multiple range (inside labels)"),e.qZA(),e.TgZ(21,"mat-card-content",13),e.TgZ(22,"deja-circular-picker",16),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().sms=i}),e.YNc(23,ge,1,1,"ng-template",null,12,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ranges",t.ranges41)("outerLabels",!0),e.xp6(1),e.Q6J("ngModel",t.sm)("ranges",t.ranges42),e.xp6(9),e.Q6J("ranges",t.ranges1),e.xp6(2),e.Q6J("ranges",t.ranges2)("outerLabels",!0),e.xp6(5),e.Q6J("ngModel",t.sms)("ranges",t.ranges3)}}const ve=ue.Bz.forChild([{path:"",component:(()=>{class a{constructor(){this.tabIndex=1,this.sm=3,this.sms=10,this.ranges1=[{min:1,max:20,labelInterval:2}],this.ranges2=[{min:1,max:20}],this.ranges3=[{min:1,max:12,beginOffset:Math.PI/3},{min:13,max:24,beginOffset:Math.PI/3}],this.ranges41=[{labelInterval:5,max:59,min:0}],this.ranges42=[{max:11,min:0},{max:111,min:100}],this.myModel=[{value:0,label:"T0"},{value:1,label:"T1"},{value:2,label:"T2"},{value:3,label:"T3"},{value:4,label:"T4"},{value:5,label:"T5"},{value:6,label:"T6"},{value:7,label:"T7"},{value:8,label:"T8"},{value:9,label:"T9"},{value:10,label:"T10"},{value:11,label:"T11"},{value:100,label:"T-1",realValue:-1},{value:101,label:"T-2",realValue:-2},{value:102,label:"T-3",realValue:-3},{value:103,label:"T-4",realValue:-4},{value:104,label:"T-5",realValue:-5},{value:105,label:"T-6",realValue:-6},{value:106,label:"T-7",realValue:-7},{value:107,label:"T-8",realValue:-8},{value:108,label:"T-9",realValue:-9},{value:109,label:"T-10",realValue:-10},{value:110,label:"T-11",realValue:-11},{value:111,label:"T-12",realValue:-12}]}range42Changed(t){console.log(`Selected model ${this.getLabelForValue(t)}`)}getLabelForValue(t){const n=this.myModel.find(i=>i.value===t);return(null==n?void 0:n.label)||(null==t?void 0:t.toString())||""}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["deja-circular-picker-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],[1,"demo-card"],["color","primary"],["id","complex-wrapper",1,"listContainer"],["id","outside",3,"ranges","outerLabels"],["id","inside",3,"ngModel","ranges","ngModelChange"],["cursorTemplate","","labelTemplate",""],[1,"listContainer"],[3,"ranges"],[3,"ranges","outerLabels"],[3,"ngModel","ranges","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-tab-group",0),e.NdJ("selectedTabChange",function(r){return n.tabIndex=r.index}),e._UZ(1,"mat-tab",1),e._UZ(2,"mat-tab",2),e.qZA(),e.YNc(3,me,2,1,"mat-card",3),e.YNc(4,he,26,9,"div",4)),2&t&&(e.Q6J("selectedIndex",n.tabIndex),e.xp6(3),e.Q6J("ngIf",0===n.tabIndex),e.xp6(1),e.Q6J("ngIf",1===n.tabIndex))},directives:[v.SP,v.uX,c.O5,d.a8,de.F,x.Ye,d.dn,oe,p.JJ,p.On],styles:["[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px;padding:2rem 0}[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   deja-circular-picker[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]{position:relative;height:333px}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #outside[_ngcontent-%COMP%], [_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #inside[_ngcontent-%COMP%]{left:50%;position:absolute!important;top:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #inside[_ngcontent-%COMP%]   .circular-picker[_ngcontent-%COMP%]{background:transparent;border:none}"]}),a})()},{path:"**",redirectTo:"",pathMatch:"full"}]);let be=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[c.ez,se,ce.O,p.u5,d.QW,v.Nh,x.g0,ve]]}),a})()}}]);