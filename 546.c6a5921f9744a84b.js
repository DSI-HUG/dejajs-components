"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[546],{9546:(Be,ve,S)=>{S.d(ve,{ZV:()=>Re.Z,tN:()=>be,NA:()=>Ze,uC:()=>xe,ZE:()=>Fe,NJ:()=>pe,Z2:()=>se});var me=S(6019),Y=S(3668),ne=S(4986),H=S(4499),ae=S(559),L=S(2997),b=S(3067),oe=S(9417),U=S(7384),ge=S(1676),D=S(4753),ce=S(5488),K=S(461),re=S(6263),Te=S(9463);let se=(()=>{class I extends ne.yl{constructor(){super(),this.emptyViewPort={beforeSize:0,afterSize:0,viewPortSize:0,listSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:0,items:[]},this.mode$=new H.X("fixed"),this.items$=new H.X([]),this.maxSize$=new H.X(0),this.ensureItem$=new H.X(null),this.scrollPosition$=new H.X(0),this.element$=new ae.t(1),this.itemsSize$=new H.X(0),this.direction$=new H.X("vertical"),this.viewPortResult$=new H.X(this.emptyViewPort),this.refresh$=new H.X(null),this.deleteSizeCache$=new H.X(!0),this.measureViewPort={beforeSize:0,afterSize:2e5,viewPortSize:0,listSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:void 0,items:[]},this._mode="fixed",this._itemsSize=I.itemDefaultSize,this._direction="vertical",this._scrollPosition=0,this.ignoreScrollCount=0,this.viewPort$=this.viewPortResult$;const e=()=>"horizontal"===this._direction?window.innerWidth:window.innerHeight,i=d=>Math.ceil("horizontal"===this._direction?d.clientWidth:d.clientHeight),l=(d,p,E,P,x)=>{const B=[];let Z,w,O,A=0,C=0,V=0;if(x&&void 0!==x.index&&x.atEnd){let z=d.length;for(;--z>=0;){const G=d[z],W=G.size||P;x.index===z&&(w=z),void 0!==w?void 0===Z?(C+=W,B.unshift(G),(C>p||0===z)&&(Z=z,O=C-p)):(O+=W,A+=W):V+=W}}else d.forEach((z,G)=>{const W=z.size||P;x&&x.index===G&&(Z=G,O=A),void 0===Z&&(A+W>=E?Z=G:A+=W),void 0!==Z&&void 0===w&&(C+=W,B.push(z)),void 0===w?(A+C>(O||E)+p||G===d.length-1)&&(w=G):V+=W});return void 0!==(null==x?void 0:x.index)&&C<p&&B.length<d.length?l(d,p,E,P,x.atEnd?{index:0,atEnd:!1}:{index:d.length-1,atEnd:!0}):(0,L.of)({beforeSize:A,afterSize:V,listSize:p,viewPortSize:C,visibleItems:B,startIndex:Z||0,endIndex:w,scrollPos:O,items:d})},o=(d,p,E,P,x,B,Z)=>l(d,p,E,x,B).pipe((0,b.w)(w=>!Z&&w.visibleItems.find(C=>!C.size)?(this.viewPortResult$.next(w),(0,oe.H)(1).pipe((0,U.b)(()=>{const C=P.getElementsByClassName("listitem");for(let V=0;V<C.length;V++){const O=C[V],z=+O.getAttribute("flat"),G=w.visibleItems[z-w.startIndex];G&&(G.size=i(O))}w.viewPortSize=w.visibleItems.reduce((V,O)=>V+(O.size||x),0)}),(0,b.w)(()=>l(d,p,w.scrollPos||E,x,B)))):(0,L.of)(w))),c=(d,p,E,P,x,B)=>{let w,A,C,Z=0;const V=P.getElementsByClassName("listitem");let O={beforeSize:0,afterSize:0,listSize:p,viewPortSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:0,items:d};if(V.length!==d.length&&(null==B||B))return this.viewPortResult$.next(O),(0,oe.H)(1).pipe((0,b.w)(()=>c(d,p,E,P,x,!1)));if(x&&void 0!==x.index&&x.atEnd){C=0;let z=0,G=V.length;for(;--G>=0;){const $e=d[G].size=i(V[G]);x.index===G&&(A=G),void 0!==A&&(void 0===w?(z+=$e,z>p&&(w=G,C=z-p)):C+=$e),Z+=$e}}else for(let z=0;z<V.length;z++){const W=d[z].size=i(V[z]);x&&x.index===z&&(w=z,C=Z),Z+=W,void 0===w&&Z>E&&(w=z),void 0===A&&Z>(C||E)+p&&(A=z)}return w=w||0,A=A||0,O={beforeSize:0,afterSize:0,listSize:p,viewPortSize:Z,visibleItems:d.slice(w,1+A),startIndex:w,endIndex:A,scrollPos:C,items:d},(0,L.of)(O)},g=(d,p,E,P,x,B,Z)=>{if(!(null==d?void 0:d.length))return(0,L.of)(this.emptyViewPort);let A,w=p||i(P);switch(w<=I.itemDefaultSize&&(w=e()),void 0!==B.index?this.ignoreScrollCount++:this.ignoreScrollCount=0,this.mode){case"disabled":A=c(d,w,E,P,B,!0);break;case"variable":A=l(d,w,E,x,B);break;case"auto":A=o(d,w,E,P,x,B);break;case"fixed":A=((d,p,E,P,x)=>{const B=Math.ceil(p/P)+1,Z=Math.floor(E/P),w=Math.min(d.length-Z,B);let A,C,V;x&&void 0!==x.index&&x.atEnd?(A=Math.max(0,x.index+1-Math.min(d.length,B)),C=Math.max(x.index,w-1),V=(C+1)*P-p):w<0?(C=d.length-1,A=C+1-Math.min(d.length,B)):void 0!==x.index?(A=x.index,C=A+w-1,V=A*P):(A=Z,C=A+w-1);const O=d.slice(A,C+1);return(0,L.of)({beforeSize:A*P,afterSize:(d.length-C-1)*P,listSize:p,viewPortSize:O.length*P,visibleItems:O,startIndex:A,endIndex:C,scrollPos:V,items:d})})(d,w,E,x,B);break;default:throw new Error("ViewPortService, invalide mode. The value can be disabled, variable, auto and fixed.")}return A.pipe((0,b.w)(C=>{if(!Z){const V=C.beforeSize+C.viewPortSize+C.afterSize-C.listSize;if("disabled"!==this.mode&&w<2*I.itemDefaultSize)return this.viewPortResult$.next(this.measureViewPort),(0,oe.H)(1).pipe((0,b.w)(()=>g(d,p,E,P,x,B,!0)));if(V<0||d.length&&V>0&&(C.scrollPos||E)>V)return g(d,p,0,P,x,{index:d.length-1,atEnd:!0},!0);if("auto"===this.mode&&C.viewPortSize<w)return g(d,p,0,P,x,{index:d.length-1,atEnd:!0},!0)}return(0,L.of)(C)}),(0,U.b)(()=>{B.index=void 0}))},m=this.items$;this.ensureParams$=this.ensureItem$.pipe((0,ge.V)(m),(0,D.U)(([d,p])=>{this.ignoreScrollCount=0;const E={};if(null!=d&&(null==p?void 0:p.length)){let P=d;isNaN(P)&&(P=p.findIndex(x=>d===x)),P>=0&&(this.viewPort&&P<=this.viewPort.startIndex?(E.index=P,E.atEnd=!1):(!this.viewPort||P>=this.viewPort.endIndex)&&(E.index=P,E.atEnd=!0))}return E}));const _=this.maxSize$.pipe((0,ce.x)()),M=this.refresh$.pipe((0,b.w)(d=>{if(this.ignoreScrollCount=0,d){if(d.clearMeasuredSize)return this.items$.pipe((0,U.b)(p=>{this.lastCalculatedSize=void 0,p.forEach(E=>E.size=void 0)}),(0,D.U)(()=>d));d.items&&d.items.forEach(p=>p.size=void 0)}return(0,L.of)(d)})),T=this.scrollPosition$.pipe((0,D.U)(d=>this._scrollPosition=d||0),(0,D.U)(d=>Math.max(d,0)),(0,K.h)(()=>!(this.ignoreScrollCount>0&&(this.ignoreScrollCount--,1))),(0,ce.x)()),X=this.mode$.pipe((0,D.U)(d=>this._mode=d),(0,ce.x)()),v=this.direction$.pipe((0,D.U)(d=>this._direction=d),(0,ce.x)()),J=this.itemsSize$.pipe((0,ce.x)(),(0,U.b)(d=>this._itemsSize=d)),F=this.element$.pipe((0,U.b)(d=>{d||(this.viewPort=void 0,this.ignoreScrollCount=0,this.lastCalculatedSize=void 0)}));v.pipe((0,ge.V)(m,X,this.deleteSizeCache$),(0,K.h)(([d,p,E])=>(null==p?void 0:p.length)&&"auto"===E),(0,b.w)(([d,p])=>p),(0,re.R)(this.destroyed$)).subscribe(d=>d.size=void 0),F.pipe((0,ge.V)(m,M,this.ensureParams$,v,X,J,_),(0,Te.b)(1),(0,ge.V)(T),(0,K.h)(([[d]])=>!!d),(0,b.w)(([[d,p,E,P,x,B,Z,w],A])=>{Z||(Z=I.itemDefaultSize);const C=this.lastCalculatedSize||w||i(d),V=this._scrollPosition;let O="auto"===w?0:+w;return(null==p?void 0:p.length)&&("auto"===C||C<2*I.itemDefaultSize)?(this.viewPortResult$.next(this.measureViewPort),(0,oe.H)(1).pipe((0,D.U)(()=>{if(O=this.lastCalculatedSize=i(d),"fixed"===this.mode)p.length*Z<O&&(O=p.length*Z);else if("variable"===this.mode){let z=0;p.find(G=>(z+=G.size||Z,z>O)),z<O&&(O=z)}return{element:d,scrollPos:V,items:p,maxSizeValue:O,itemDefaultSize:Z,ensureParams:P}}))):(O=O||this.lastCalculatedSize,(0,L.of)({element:d,scrollPos:V,items:p,maxSizeValue:O,itemDefaultSize:Z,ensureParams:P}))}),(0,b.w)(({element:d,scrollPos:p,items:E,maxSizeValue:P,itemDefaultSize:x,ensureParams:B})=>g(E,P,p,d,x,B)),(0,re.R)(this.destroyed$)).subscribe(d=>{this.viewPortResult$.next(d)},d=>console.error(d)),this.viewPortResult$.pipe((0,re.R)(this.destroyed$)).subscribe(d=>this.viewPort=d)}get mode(){return this._mode}get itemsSize(){return this._itemsSize}get direction(){return this._direction}deleteSizeCache(){this.deleteSizeCache$.next(!0)}clear(){this.viewPortResult$.next(this.emptyViewPort)}refresh(e){this.refresh$.next(e||null)}}return I.itemDefaultSize=40,I.\u0275fac=function(e){return new(e||I)},I.\u0275prov=Y.Yz7({token:I,factory:I.\u0275fac}),I})();var ee=S(7867),_e=S(8410),te=S(6302),Ie=S(5048),Me=S(1404),Le=S(2876);let we=(()=>{class I{constructor(){console.warn("@deja-js/component/core/SortingService is deprecated, and will be removed in a further version. Please use @deja-js/component/v2/tem-list/SortingService instead.")}sort$(e,i){return(0,L.of)(this.sort(e,i))}sort(e,i){if(null==e?void 0:e.length){const r=i instanceof Array?i:[i];let l=r.length;for(;--l>=0;){const o=r[l];e=(0,Le.Z)(e,o.name),"descending"===o.order&&(e=e.reverse())}}return e}sortTree$(e,i,r){return r=r||"items",this.sort$(e,i).pipe((0,b.w)(l=>l),(0,b.w)(l=>l&&l[r]?this.sortTree$(l[r],i,r).pipe((0,D.U)(o=>(l[r]=o,l))):(0,L.of)(l)),(0,te.u)((l,o)=>[...l,o],[]))}}return I.\u0275fac=function(e){return new(e||I)},I.\u0275prov=Y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),xe=(()=>{class I{group$(e,i,r="items"){if(!e||0===e.length||!i)return(0,L.of)(e);if(i instanceof Array){let l=(0,L.of)(e);return i.forEach(o=>l=l.pipe((0,b.w)(c=>this.group$(c,o,r)))),l}{const l=i;if(!e[0][r])return this.groupChildren$(e,l,0,r);const o=(c,g)=>(0,ee.D)(c).pipe((0,b.w)(m=>{var _;const M=m[r];return(null===(_=M[0])||void 0===_?void 0:_[r])?o(M,g+1).map(()=>m):this.groupChildren$(M,l,g,r).pipe((0,D.U)(T=>(m[r]=T,m)))}),(0,te.u)((m,_)=>[...m,_],[]));return o(e,1)}}groupChildren$(e,i,r,l){return(0,ee.D)(e).pipe((0,te.u)((o,c)=>{let g="function"==typeof i.groupByField?i.groupByField(c):c[i.groupByField];"function"==typeof c[g]&&(g=c[g]()),g||(g=this.getTextValue(c));let m=o[g];if(!m){const _=i.groupTextField&&("function"==typeof i.groupTextField?i.groupTextField(c):c[i.groupTextField])||g;m=o[g]={depth:r,toString:()=>_,$text:_},m[l]=[]}return m[l].push(c),o},{}),(0,D.U)(o=>Object.keys(o).map(c=>o[c])),(0,U.b)(o=>o.forEach(c=>{var g;return c.sortField=(null===(g=i.sortInfos)||void 0===g?void 0:g.name)||"toString"})),(0,b.w)(o=>i.sortInfos?(new we).sort$(o,i.sortInfos):(0,L.of)(o)))}getTextValue(e){return e?e.displayName?"string"==typeof e.displayName?e.displayName:e.displayName():"function"==typeof e.toString?e.toString():"":""}}return I.\u0275fac=function(e){return new(e||I)},I.\u0275prov=Y.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),pe=(()=>{class I{constructor(){this._waiter$=new H.X(!1),this._cache={},this._childrenField=I.defaultChildrenField,this.compareItems=(e,i)=>{const r=l=>null!=l;if(!r(e)||!r(i))return!1;if(e.equals)return e.equals(i);if(i.equals)return i.equals(e);{const l=e.model,o=e.model;return(null==l?void 0:l.equals)?l.equals(i.model):(null==o?void 0:o.equals)?o.equals(e.model):this.getValue(e,this._valueField)===this.getValue(i,this._valueField)}}}static getItemValue(e,i){var r;const l=o=>null!=o;if(i){const o=i.split(".");let c=void 0!==(null===(r=e.model)||void 0===r?void 0:r[o[0]])?e.model:e;if(o.forEach(g=>{c=null==c?void 0:c[g]}),l(c))return"function"==typeof c?c():c}return l(e.value)?e.value:l(e.model)&&e.model||e}static getItemText(e,i){var r;if(e){if(i){const l=i.split(".");let o=void 0!==(null===(r=e.model)||void 0===r?void 0:r[l[0]])?e.model:e;return l.forEach(c=>{o=null==o?void 0:o[c]}),void 0!==o?"function"==typeof o?o():o:""}if(e.displayName)return"string"==typeof e.displayName?e.displayName:e.displayName();if("function"==typeof e.toString)return e.toString()}return""}get lastQuery(){return this._lastQuery}setLoadingItems(e){this.loadingItems$=e}setSelectingItem(e){this.selectingItem$=e}setUnselectingItem(e){this.unselectingItem$=e}setExpandingItem(e){this.expandingItem$=e}setCollapsingItem(e){this.collapsingItem$=e}get waiter$(){return this._waiter$}set childrenField(e){this._childrenField=e||I.defaultChildrenField,this.invalidateCache()}get childrenField(){return this._childrenField}set hideSelected(e){this._hideSelected=e}get hideSelected(){return this._hideSelected}set valueField(e){this._valueField=e}get valueField(){return this._valueField}get hasCache(){return this._cache&&!!this._cache.visibleList}set items(e){this._items=e,this.invalidateCache()}get items(){return this._items}setItems$(e){if(e){if(e instanceof Array)return this.ensureChildrenProperties(e),this.ensureSelectedItems(e),this.items=e,this._waiter$.next(!1),(0,L.of)(e);{this.items=void 0,this._waiter$.next(!0);let i=e;return void 0===i.subscribe&&(i=(0,ee.D)(e)),i.pipe((0,D.U)(r=>r?(this.ensureChildrenProperties(r),this.ensureSelectedItems(r),this.items=[...this.items||[],...r],this._waiter$.next(!1),r):(this.items=[],this._waiter$.next(!1),[])))}}return this.items=void 0,(0,L.of)(null)}setModels$(e){return this.setItems$(e)}get groupInfos(){return this._groupInfos}getItems(){return this.items}getItemFromIndex(e){return this._cache.visibleList?this._cache.visibleList[e]:null}getItemIndex(e){return this._cache.visibleList?this._cache.visibleList.findIndex(i=>this.compareItems(e,i)):-1}getSortingService(){return this._sortingService||(this._sortingService=new we),this._sortingService}setSortingService(e){this._sortingService=e}getGroupingService(){return this._groupingService||(this._groupingService=new xe),this._groupingService}setGroupingService(e){this._groupingService=e}getTextValue(e,i){return I.getItemText(e,i)}getValue(e,i){return I.getItemValue(e,i)}drop$(){return new _e.y(e=>{if(!this._ddList||!this.items)return void e.next(!1);const i=this._ddCurrentIndex,r=this._ddList[i];if(!r)throw new Error("invalid drag infos stored in cache.");const l=this._ddList[i-1];let o,c=this._cache.flatList.findIndex(T=>T===l),g=0;for(;c>=0;){const T=this._cache.flatList[c];if(void 0===T.depth){g=c;break}if(T.depth===r.depth-1){o=T;break}T.depth===r.depth&&++g,--c}const m=(T,X)=>{for(let v=0;v<X.length;v++){const J=X[v];if(J===T)return{index:v,list:X};if(void 0!==J.$items){const F=m(T,J.$items);if(F)return F}}},_=m(r,this.items);_.list.splice(_.index,1);const M=o?o.$items:this.items;g>_.index&&_.list===M&&--g,M.splice(g,0,r),this.invalidateCache(),e.next(!0)})}calcDragTargetIndex$(e,i){return new _e.y(r=>{const l=this._ddList||this._cache.visibleList;if(!l)throw new Error("Empty cache on calcDragTargetIndex");const o=void 0!==this._ddCurrentIndex?this._ddCurrentIndex:e;if(o>=l.length)return void r.next(l.length-1);const c=l[o],g=o;if(void 0!==c.depth&&i!==o){if(i<o){let m=0;for(let _=o-1;_>=0;_--)if(l[_].depth<=c.depth){m=_;break}if(i<=m)for(let _=i;_<=m;_++){const M=l[_];if(M.depth===c.depth)return void r.next(_);if(M.depth===c.depth-1)return void r.next(_+1)}}if(i>o){let m=l.length-1;for(let _=o+1;_<l.length;_++)if(l[_].depth<=c.depth){m=_;break}if(i>=m){for(let M=i+1;M<l.length;M++){const T=l[M];if(T.depth===c.depth)return void r.next(M);if(T.depth===c.depth-1)return void r.next(M-1)}if(l[m].depth===c.depth)return void r.next(m)}}}r.next(g)})}toggleAll$(e){return(0,L.of)(this._cache.flatList).pipe((0,D.U)(i=>i.filter(r=>{var l;return r.$items&&(null===(l=r.collapsible)||void 0===l||l)})),(0,U.b)(()=>delete this._cache.visibleList),(0,b.w)(i=>e?this.collapseItems$(i):this.expandItems$(i)))}toggleCollapse$(e,i){var r;const l=this._cache.visibleList;if(!l||!l.length)throw new Error("Empty cache on toggleCollapse");const o=l[e];return!o||null!==(r=o.collapsible)&&void 0!==r&&!r?(0,L.of)([]):(void 0!==i?i:!o.collapsed)?this.collapseItem$(o):this.expandItem$(o)}expandItems$(e){return(0,ee.D)(e||[]).pipe((0,b.w)(i=>this.expandItem$(i)),(0,te.u)((i,r)=>[...i,r],[]))}collapseItems$(e){return(0,ee.D)(e||[]).pipe((0,b.w)(i=>this.collapseItem$(i)),(0,te.u)((i,r)=>[...i,r],[]))}expandItem$(e){return(0,L.of)(e).pipe((0,K.h)(i=>!!i),(0,b.w)(i=>this.expandingItem$?this.expandingItem$(i):(0,L.of)(i)),(0,K.h)(i=>!!i),(0,U.b)(i=>{i.collapsed=!1,delete this._cache.visibleList}))}collapseItem$(e){return(0,L.of)(e).pipe((0,K.h)(i=>!!i),(0,b.w)(i=>this.collapsingItem$?this.collapsingItem$(i):(0,L.of)(i)),(0,K.h)(i=>!!i),(0,U.b)(i=>{i.collapsed=!0,delete this._cache.visibleList}))}getSelectedItems(){return this.selectedList||[]}setSelectedItems(e){this.selectedList&&this.selectedList.forEach(i=>{i.selected=!1}),this.selectedList=e,this.hideSelected&&delete this._cache.visibleList,this.ensureSelectedItems(this.items)}unselectAll$(){this.hideSelected&&delete this._cache.visibleList;const e=this.selectedList;return this.selectedList=[],this.unSelectItems$(e)}selectRange$(e,i){void 0===i&&(i=e);const r=this._cache.visibleList;if(!r||!r.length)throw new Error("Empty cache on selection");return this.unselectAll$().pipe((0,D.U)(()=>r.slice(Math.min(e,i),1+Math.max(e,i))),(0,D.U)(l=>l.filter(o=>{var c;return null===(c=o.selectable)||void 0===c||c})),(0,U.b)(()=>{this.hideSelected&&delete this._cache.visibleList}),(0,b.w)(l=>this.selectItems$(l).pipe((0,D.U)(o=>o.length))))}toggleSelect$(e,i){return function(I,n,e){return(0,Ie.P)(()=>i?n:e)}(0,this.selectItems$(e=e||[]),this.unSelectItems$(e)).pipe((0,D.U)(()=>(this.hideSelected&&delete this._cache.visibleList,this.selectedList)))}selectItems$(e){return(0,ee.D)(e||[]).pipe((0,b.w)(i=>this.selectItem$(i)),(0,te.u)((i,r)=>[...i,r],[]))}unSelectItems$(e){return(0,ee.D)(e||[]).pipe((0,K.h)(i=>i.selected),(0,b.w)(i=>this.unSelectItem$(i)),(0,te.u)((i,r)=>[...i,r],[]))}selectItem$(e){return(0,L.of)(e).pipe((0,K.h)(i=>!!i),(0,b.w)(i=>this.selectingItem$?this.selectingItem$(i):(0,L.of)(i)),(0,K.h)(i=>!!i),(0,U.b)(i=>{this.selectedList||(this.selectedList=[]),i.selected=!0,this.selectedList.push(i)}))}unSelectItem$(e){return(0,L.of)(e).pipe((0,K.h)(i=>!!i),(0,b.w)(i=>this.unselectingItem$?this.unselectingItem$(i):(0,L.of)(i)),(0,K.h)(i=>!!i),(0,U.b)(i=>{var r;if(i.selected=!1,null===(r=this.selectedList)||void 0===r?void 0:r.length){const l=this.selectedList.findIndex(o=>this.compareItems(o,i));l>=0&&this.selectedList.splice(l,1)}}))}findNextMatch$(e,i){let r={index:-1};const l=this._cache.visibleList;if(!l||!l.length)throw new Error("Empty cache on findNextMatch");if(l.length){(i<0||i>=l.length)&&(i=-1);let o=i+1;for(;o!==i;){const c=l[o];if(e(c,o)){r={index:o,item:c};break}if(o++,o>=l.length){if(-1===i)break;o=0}}}return(0,L.of)(r)}sort$(e){if(!this.items)throw new Error("No Items");const i=this.getSortingService().sortTree$(this._cache.groupedList,e,"$items").pipe((0,U.b)(r=>{this._cache.groupedList=r,this.invalidateViewCache()}));return this._cache.groupedList&&0!==this._cache.groupedList.length?i:this.getGroupedList$(this.items).pipe((0,U.b)(r=>this._cache.groupedList=r),(0,b.w)(()=>i))}group$(e){return this._groupInfos=e,this.invalidateCache(),this.ensureChildrenProperties(this.items),(0,L.of)(e)}ungroup$(e){const i=this._groupInfos?this._groupInfos.findIndex(r=>r.groupByField===e.groupByField):-1;return i>=0&&this._groupInfos.splice(i,1),this.invalidateCache(),this.ensureChildrenProperties(this.items),(0,L.of)(e)}getParentListInfos$(e,i){return this.ensureFlatListCache$(!0,i).pipe((0,b.w)(l=>{let c,o=l.findIndex(g=>g===e);if(o<0)throw new Error("Item not found.");if(e.depth){let g=0;for(;--o>=0;){const m=l[o];m.depth<e.depth&&(c={index:g,parent:m}),g++}}else c={index:this.items.findIndex(m=>m===e)};return(0,L.of)(c)}))}invalidateCache(){this._cache={},this.ensureChildrenProperties(this.items)}invalidateRowsHeightCache(){this._items&&this._items.forEach(e=>e.size=void 0)}getViewList$(e,i,r,l,o,c){var g;const m={},_=(null==i?void 0:i.toString())!==(null===(g=this._lastQuery)||void 0===g?void 0:g.toString());let T;if(r=r||_||!this.items||!this.items.length,this._lastQuery=i,i)if("string"==typeof i)try{const v=(v=>(["\\","/","|","&",";","$","%","@",'"',"<",">","(",")","+"].forEach(F=>v=v.replace(F,`\\${F}`)),v))(i=(new ne.R5).remove(i));T=new RegExp(v,"i")}catch(v){console.log("Invalid search parameters")}else T=i,void 0===T.test&&(T=void 0);const X=()=>{let v;if(void 0!==l&&void 0!==o&&l!==o){if(!this._ddList){this._ddList=[...this._cache.visibleList];const d=this._ddList[l].depth;let p=l;if(void 0!==d)for(let E=l+1;E<this._ddList.length&&!(this._ddList[E].depth<=d);E++)p=E;this._ddChildCount=p-l+1,this._ddCurrentIndex=l}const J=this._ddList.splice(this._ddCurrentIndex,this._ddChildCount);o>this._ddCurrentIndex&&(o-=this._ddChildCount,++o),this._ddCurrentIndex=o,J.forEach(F=>this._ddList.splice(o++,0,F)),v=this._ddList}else delete this._ddList,delete this._ddCurrentIndex,delete this._ddChildCount,v=this._cache.visibleList||[];return m.depthMax=this._cache.depthMax,m.visibleList=v,m};return r?(this.waiter$.next(!0),(_||!this.items||!this.items.length)&&(this.internalQuery=T),this.getItemList$(i,this.selectedList).pipe((0,U.b)(v=>{(!this.items||!this.items.length)&&this.ensureSelectedItems(v),v!==this.items&&(this.items=v,this.internalQuery=void 0,this.ensureChildrenProperties(v)),delete this._cache.visibleList,this.waiter$.next(void 0===this.items)}),(0,b.w)(()=>this.ensureVisibleListCache$(e,this.internalQuery,_,c)),(0,D.U)(X))):this.ensureVisibleListCache$(e,this.internalQuery,_,c).pipe((0,D.U)(X))}ensureSelection(){return this.ensureSelectedItems(this.items)}getItemList$(e,i){return this.loadingItems$?this.loadingItems$(e,i):(0,L.of)(this.items)}itemMatch(e,i,r){if(e.$items)return!0;const o=e[i],c="function"==typeof o?o():o||this.getTextValue(e,i);return c&&r.test((new ne.R5).remove(c))}getGroupedList$(e){return e?this.getGroupingService().group$(this.items,this.groupInfos,"$items"):(0,L.of)([])}getVisibleList$(e,i,r,l,o){if(!e)return(0,L.of)([]);let c=[];const g=[];let m=!1;if(r){const _=(M,T,X)=>{let v;return M&&M.forEach(J=>{const F=J;if(F.$items){if(this.isVisible(F)&&this.itemMatch(F,i,r)){m=!1;const d=_(F.$items,T+1,X);d&&(F.collapsed&&l&&(F.collapsed=!1),v=v?F.collapsed&&[...v,F]||[...v,F,...d]:F.collapsed&&[F]||[F,...d],F.selected&&g.push(F))}}else this.itemMatch(J,i,r)&&(F.depth=T,v||(v=[]),!X&&this.isVisible(J)&&!(J.selected&&this.hideSelected)&&(F.odd=m,m=!m,v.push(F))),F.selected&&g.push(F)}),v};c=_(e||[],0,!1)||[]}else{const _=(M,T,X)=>{M&&M.forEach(v=>{!X&&this.isVisible(v)&&!(v.selected&&this.hideSelected)&&(v.odd=m,m=!m,c.push(v)),v.selected&&g.push(v),v.$items&&(m=!1,_(v.$items,T+1,X||v.collapsed||!this.isVisible(v)))})};_(e,0,!1)}return(0,L.of)(c).pipe((0,U.b)(()=>{o||(this.selectedList=g)}))}getFlatList$(e,i,r){if(!e)return(0,L.of)([]);const l=[],o=[];let c=0,g=!1,m=!1;const _=(M,T,X)=>(0,ee.D)(M||[]).pipe((0,U.b)(v=>{T>c&&(c=T),v.depth=T,!X&&this.isVisible(v)&&!(v.selected&&this.hideSelected)&&(v.odd=m,m=!m,l.push(v)),v.selected&&o.push(v)}),(0,b.w)(v=>v.$items?(g=!0,m=!1,(0,Me.z)((0,L.of)(v),_(v.$items,T+1,X||v.collapsed))):(0,L.of)(v)));return _(e,0,!1).pipe((0,U.b)(()=>{r||(this.selectedList=o),i||(this._cache.visibleList=l),this._cache.depthMax=g?c:0}),(0,te.u)((M,T)=>(M.push(T),M),[]))}invalidateViewCache(){delete this._cache.flatList,delete this._cache.visibleList,delete this._cache.depthMax,this._cache.rowsCount=0}ensureSelectedItems(e){if(this.selectedList&&this.selectedList.length>0){if(this.selectedList.forEach(l=>l.selected=!0),!e)return this.selectedList;const i=[],r=l=>{l.forEach(o=>{const c=this.selectedList.find(g=>this.compareItems(g,o));c&&(c.selected=!1,i.push(o)),o.$items&&r(o.$items)})};r(e),this.selectedList.filter(l=>l.selected).forEach(l=>i.push(l)),this.selectedList=i,this.selectedList.forEach(l=>l.selected=!0)}else{if(this.selectedList=[],!e)return this.selectedList;const i=r=>{r.forEach(l=>{l.selected&&this.selectedList.push(l),l.$items&&i(l.$items)})};i(e)}return this.selectedList}ensureVisibleListCache$(e,i,r,l){var o;return(null===(o=this._cache.visibleList)||void 0===o?void 0:o.length)?(0,L.of)(this._cache.visibleList):this.ensureFlatListCache$(!!i,l).pipe((0,b.w)(()=>this.getVisibleList$(this._cache.groupedList,e,i,r,l)),(0,U.b)(c=>{this._cache.visibleList=c,this._cache.rowsCount=c.length}))}ensureFlatListCache$(e,i){var r;return(null===(r=this._cache.flatList)||void 0===r?void 0:r.length)?(0,L.of)(this._cache.flatList):this.ensureGroupedListCache$().pipe((0,b.w)(()=>this.getFlatList$(this._cache.groupedList,e,i)),(0,U.b)(l=>{var o;(null===(o=this._cache.flatList)||void 0===o?void 0:o.length)&&this._cache.flatList!==l&&(delete this._cache.visibleList,this._cache.rowsCount=0,this._cache.depthMax=0,l&&l.forEach(c=>{c.depth&&c.depth>this._cache.depthMax&&(this._cache.depthMax=c.depth)})),this._cache.flatList=l}))}ensureGroupedListCache$(){var e;return(null===(e=this._cache.groupedList)||void 0===e?void 0:e.length)?(0,L.of)(this._cache.groupedList):this.groupInfos&&0!==this.groupInfos.length?this.items?this.getGroupedList$(this.items).pipe((0,U.b)(i=>{var r;(null===(r=this._cache.groupedList)||void 0===r?void 0:r.length)&&this._cache.groupedList!==i&&this.invalidateViewCache(),this._cache.groupedList=i})):(0,L.of)([]):(0,L.of)(this.items).pipe((0,U.b)(i=>this._cache.groupedList=i))}ensureChildrenProperties(e){!e||e.forEach(i=>{const r=i[this.childrenField];r&&(i.$items=r,this.ensureChildrenProperties(i.$items))})}isVisible(e){var i;return null===(i=e.visible)||void 0===i||i}}return I.defaultChildrenField="items",I.defaultTextField="displayName",I.defaultValueField="value",I})();var Ae=S(348),le=S(9468);class Fe extends ne.yl{constructor(n,e){super(),this.changeDetectorRef=n,this.viewPort=e,this._waiter=!0,this._itemList=[],this._multiSelect=!1,this._currentItemIndex=-1,this._minSearchLength=0,this._vpBeforeHeight=0,this._vpAfterHeight=0,this._vpStartRow=0,this._vpEndRow=0,this._pageSize=0,this._depthMax=0,this.rowsCount=0,this.allCollapsed=!1,this._viewPortRowHeight=se.itemDefaultSize,this._listElementId=`listcontainer_${(1e9*Math.random()).toString().substr(10)}`,e.viewPort$.pipe((0,b.w)(i=>{var r;let l=(0,L.of)(null);return delete this._hintLabel,"disabled"===e.mode?(this._itemList=i.items,this._vpStartRow=0,this._vpEndRow=0,this._vpBeforeHeight=0,this._vpAfterHeight=0):(this._itemList=i.visibleItems,this._vpStartRow=i.startIndex,this._vpEndRow=i.endIndex,this._vpBeforeHeight=i.beforeSize,this._vpAfterHeight=i.afterSize),void 0!==i.scrollPos&&this.listElement&&(this.listElement.getElementsByClassName("listitem").length!==i.visibleItems.length?l=(0,oe.H)(1).pipe((0,K.h)(()=>!!this.listElement),(0,U.b)(()=>this.listElement.scrollTop=i.scrollPos)):this.listElement.scrollTop=i.scrollPos),this.changeDetectorRef.markForCheck(),null===(r=this._viewPortChanged)||void 0===r||r.next(i),l}),(0,re.R)(this.destroyed$)).subscribe()}get isMultiSelect(){return this._multiSelect}get itemList(){return this._itemList}get treeItemList(){return this._itemList}get ddStartIndex(){return this._ddStartIndex}get vpBeforeHeight(){return this._vpBeforeHeight}get vpAfterHeight(){return this._vpAfterHeight}get vpStartRow(){return this._vpStartRow}get vpEndRow(){return this._vpEndRow}get sortInfos(){return this._sortInfos}get groupInfos(){return this._itemListService.groupInfos}setHideSelected(n){this._hideSelected=n,this._itemListService&&(this._itemListService.hideSelected=n)}setChildrenField(n){this._childrenField=n,this._itemListService&&(this._itemListService.childrenField=n)}getItemIndexFromHTMLElement(n){for(;(null==n?void 0:n.parentElement)&&n.hasAttribute&&!n.hasAttribute("flat")&&n.parentElement.id!==this.listElementId;)n=n.parentElement;if(n&&n.hasAttribute("flat"))return+n.getAttribute("flat")}getItemFromHTMLElement(n){const e=this.getItemIndexFromHTMLElement(n);if(void 0!==e)return this._itemList[e-this.vpStartRow]}getItemListService(){return this._itemListService||this.setItemListService(new pe),this._itemListService}getSelectedItems(){return this.getItemListService().getSelectedItems()}setSelectedItems(n){this.getItemListService().setSelectedItems(n),this.changeDetectorRef.markForCheck()}setLoadingItems(n){this.getItemListService().setLoadingItems(n)}setSelectingItem(n){this.getItemListService().setSelectingItem(n)}setUnselectingItem(n){this.getItemListService().setUnselectingItem(n)}setExpandingItem(n){this.getItemListService().setExpandingItem(n)}setCollapsingItem(n){this.getItemListService().setCollapsingItem(n)}getTextValue(n){return this.getItemListService().getTextValue(n,this._textField)}setViewportMode(n){this.viewPort.mode$.next(n)}sort(n){this.sort$(n).pipe((0,le.q)(1),(0,re.R)(this.destroyed$)).subscribe()}sort$(n){const e=n||this._textField;return this._sortInfos?e===this._sortInfos.name?this._sortInfos.order="ascending"===this._sortInfos.order?"descending":"ascending":(this._sortInfos.name=e,this._sortInfos.order="ascending"):this._sortInfos={name:e,order:"ascending"},this.getItemListService().sort$(this._sortInfos).pipe((0,le.q)(1),(0,b.w)(i=>this.calcViewList$().pipe((0,le.q)(1),(0,D.U)(()=>i))))}group$(n){return this.getItemListService().group$(n).pipe((0,b.w)(()=>this.calcViewList$().pipe((0,le.q)(1))))}ungroup$(n){return this.getItemListService().ungroup$(n).pipe((0,b.w)(()=>this.calcViewList$().pipe((0,le.q)(1))))}toggleAll$(n){return this.allCollapsed=void 0!==n?n:!this.allCollapsed,"disabled"===this.viewPort.mode?(0,ee.D)(this._itemList).pipe((0,K.h)(e=>{var i;return e.$items&&0===e.depth&&(null===(i=e.collapsible)||void 0===i||i)}),(0,b.w)((e,i)=>this.toggleCollapse$(i+this.vpStartRow,this.allCollapsed)),(0,te.u)((e,i)=>(e.push(i),e),[])):this.getItemListService().toggleAll$(this.allCollapsed)}toggleCollapse$(n,e){return this.getItemListService().toggleCollapse$(n,e).pipe((0,b.w)(i=>this.calcViewList$().pipe((0,le.q)(1),(0,D.U)(()=>i))))}unselectAll$(){return this.getItemListService().unselectAll$()}refresh(){this.getItemListService().invalidateCache(),this.calcViewList$().pipe((0,le.q)(1),(0,re.R)(this.destroyed$)).subscribe()}refreshViewPort(n,e){const i={};n&&(i.items=n instanceof Array?n:[n]),e&&(i.clearMeasuredSize=e),this.viewPort.refresh(i),this.changeDetectorRef.markForCheck()}clearViewPort(){this.viewPort.clear()}clearRowsHeight(){this.getItemListService().invalidateRowsHeightCache()}getParentListInfos$(n){return this.getItemListService().getParentListInfos$(n,this._multiSelect)}get listElementId(){return this._listElementId}get listElement(){return this._listElement||document.getElementById(this.listElementId)}set listElement(n){this._listElement=n}getViewPortRowHeight(){return this._viewPortRowHeight||se.itemDefaultSize}getCurrentItemIndex(){return this._currentItemIndex}getCurrentItem(){return!this._currentItem&&this._currentItemIndex>=0&&(this._currentItem=this.getItemListService().getItemFromIndex(this._currentItemIndex)),this._currentItem}getItemHeight(n){return"disabled"===this.viewPort.mode?null:"fixed"===this.viewPort.mode?this.getViewPortRowHeight():"auto"===this.viewPort.mode?n.size||null:n.size&&n.size>se.itemDefaultSize?n.size:this.getViewPortRowHeight()}getSelectedModels(){return this.getItemListService().getSelectedItems().map(n=>void 0!==n.model?n.model:n)}setSelectedModels(n){this.setSelectedItems(n&&this.mapToIItemBase(n,!0))}findNextMatch$(n,e){return this.ensureListCaches$().pipe((0,b.w)(()=>this.getItemListService().findNextMatch$(n,e)))}setViewPortRowHeight(n){this._viewPortRowHeight=(0,Ae.su)(n),n&&this.viewPort.itemsSize$.next(this._viewPortRowHeight)}setItemListService(n){this.waiter$sub&&(this.waiter$sub.unsubscribe(),this.waiter$sub=void 0),this._itemListService=n,this._itemListService&&(this._itemListService.hideSelected=this._hideSelected,this._itemListService.childrenField=this._childrenField,this._itemListService.valueField=this._valueField,this.waiter$sub=this._itemListService.waiter$.pipe((0,re.R)(this.destroyed$)).subscribe(e=>{this._waiter=e,this.changeDetectorRef.markForCheck()}))}setSortingService(n){!n&&!this._itemListService||this._itemListService.setSortingService(n)}setGroupingService(n){!n&&!this._itemListService||this._itemListService.setGroupingService(n)}setHintLabel(n){this._hintLabel=n}setNodataLabel(n){this._nodataLabel=n}setCurrentItemIndex(n){this._currentItemIndex=n,this._currentItem=null}setCurrentItem(n){this._currentItemIndex=n?this.getItemListService().getItemIndex(n):-1,this._currentItem=n}getItemIndex(n){return n&&this.getItemListService()?this.getItemListService().getItemIndex(n):-1}setMultiSelect(n){this._multiSelect=n}setItems$(n){return n instanceof Array||this.clearViewPort(),this.getItemListService().setItems$(n)}setModels$(n){let e;e=n instanceof Array?(0,L.of)(n):n;const i=null==e?void 0:e.pipe((0,D.U)(r=>this.mapToIItemBase(r)));return this.setItems$(i)}getItems(){return this.getItemListService().getItems()}drop$(){return this.setCurrentItemIndex(-1),this.getItemListService().drop$()}getViewList$(n,e){if("string"==typeof n&&(n||"").length<this._minSearchLength){const i={depthMax:0,visibleList:[]};return this.getItems()?(0,L.of)(i):this.setItems$([]).pipe((0,D.U)(()=>i))}return this.getItemListService().getViewList$(this._searchField||this._textField,n,e,this._ddStartIndex,this._ddTargetIndex,this._multiSelect)}selectRange$(n,e){const i=this.getItemListService();return this.ensureListCaches$().pipe((0,b.w)(()=>i.selectRange$(n,e)))}toggleSelect$(n,e){return this.getItemListService().toggleSelect$(n,e)}isCollapsible(n){var e;return(null==n?void 0:n.$items)&&(null===(e=n.collapsible)||void 0===e||e)}isSelectable(n){var e;return n&&(null===(e=n.selectable)||void 0===e||e)}setTextField(n){this._textField=n}getTextField(){return this._textField||pe.defaultTextField}setValueField(n){this._valueField=n,this._itemListService&&(this._itemListService.valueField=n)}getValueField(){return this._valueField||pe.defaultValueField}setSearchField(n){this._searchField=n}setMaxHeight(n){this._maxHeight="auto"===n?null:+n||null,this.viewPort.maxSize$.next(n)}getMaxHeight(){return this._maxHeight}calcDragTargetIndex$(n,e){return this.ensureListCaches$().pipe((0,b.w)(()=>this.getItemListService().calcDragTargetIndex$(n,e)))}getItemTreeInfo(n,e){const i=n.findIndex(g=>g===e);if(i<0)return null;const l=e.depth;let o=i;const c=[];if(void 0!==l)for(let g=i+1;g<n.length;g++){const m=n[g];if(m.depth<=l)break;c.push(m),o=g}return{children:c,item:e,lastIndex:o,startIndex:i}}calcViewList$(n){return this.getViewList$(n).pipe((0,U.b)(e=>{void 0!==e.depthMax&&(this._depthMax=e.depthMax),this.rowsCount=e.visibleList.length,this.viewPort.items$.next(e.visibleList)}))}ensureListCaches$(){return this._itemListService.hasCache?(0,L.of)(null):this.getViewList$()}ensureItemVisible(n){this.viewPort.ensureItem$.next(n)}mapToIItemBase(n,e){return(n||[]).map(r=>{const l={};l.model=r;const o=this.getTextField(),c=this.getValueField();"string"==typeof r?(l[o]=r,l[c]=r,this._searchField&&(l[this._searchField]=r)):(l[o]=this.getTextValue(r),l[c]=r[c],this._searchField&&(l[this._searchField]=r[this._searchField]));const g=this.getItemListService().childrenField;return r[g]?l[g]=this.mapToIItemBase(r[g],e):l.selected=e||void 0,l})}getVirtualSelectedEntities(n){const e=i=>{"string"==typeof i&&(i=i.trim());const r={},l=this.getTextField(),o=this.getValueField();return r[l]=i.toString(),r[o]=i,r};if(n){const i=typeof n;if("string"===i||"number"===i)n=this._multiSelect?n.split(",").map(e):e(n);else if(n instanceof Array&&n.length){const r=typeof n[0];("string"===r||"number"===r)&&(n=this._multiSelect?n.map(e):e(n[0]))}else n instanceof Array&&!this._multiSelect&&(n=null)}return n}}var Re=S(610),ze=S(3660);let Ze=(()=>{class I{}return I.\u0275fac=function(e){return new(e||I)},I.\u0275mod=Y.oAB({type:I}),I.\u0275inj=Y.cJS({imports:[[ze.Ps]]}),I})(),be=(()=>{class I{}return I.\u0275fac=function(e){return new(e||I)},I.\u0275mod=Y.oAB({type:I}),I.\u0275inj=Y.cJS({imports:[[me.ez]]}),I})()},610:(Be,ve,S)=>{S.d(ve,{Z:()=>ne});var me=S(348),Y=S(3668);let ne=(()=>{class H{set selected(L){this._selected=(0,me.Ig)(L)}get selected(){return this._selected}}return H.\u0275fac=function(L){return new(L||H)},H.\u0275cmp=Y.Xpm({type:H,selectors:[["deja-item"]],inputs:{value:"value",text:"text",selected:"selected"},decls:0,vars:0,template:function(L,b){},encapsulation:2}),H})()},2876:(Be,ve,S)=>{S.d(ve,{Z:()=>Xi});var me=S(3742),Y=S(3749),ne=S(6247),H=S(6874),ae=Y.Z?Y.Z.isConcatSpreadable:void 0;const b=function(t){return(0,H.Z)(t)||(0,ne.Z)(t)||!!(ae&&t&&t[ae])},U=function oe(t,s,h,a,f){var u=-1,$=t.length;for(h||(h=b),f||(f=[]);++u<$;){var y=t[u];s>0&&h(y)?s>1?oe(y,s-1,h,a,f):(0,me.Z)(f,y):a||(f[f.length]=y)}return f},D=function(t,s){for(var h=-1,a=null==t?0:t.length,f=Array(a);++h<a;)f[h]=s(t[h],h,t);return f};var ce=S(9250),K=S(1467);const se=function(t){return"symbol"==typeof t||(0,K.Z)(t)&&"[object Symbol]"==(0,ce.Z)(t)};var ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_e=/^\w*$/;const Ie=function(t,s){if((0,H.Z)(t))return!1;var h=typeof t;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=t&&!se(t))||_e.test(t)||!ee.test(t)||null!=s&&t in Object(s)};var Se=S(3882);function Le(t,s){if("function"!=typeof t||null!=s&&"function"!=typeof s)throw new TypeError("Expected a function");var h=function(){var a=arguments,f=s?s.apply(this,a):a[0],u=h.cache;if(u.has(f))return u.get(f);var $=t.apply(this,a);return h.cache=u.set(f,$)||u,$};return h.cache=new(Le.Cache||Se.Z),h}Le.Cache=Se.Z;const we=Le;var le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fe=/\\(\\)?/g,Re=function(t){var s=we(t,function(a){return 500===h.size&&h.clear(),a}),h=s.cache;return s}(function(t){var s=[];return 46===t.charCodeAt(0)&&s.push(""),t.replace(le,function(h,a,f,u){s.push(f?u.replace(Fe,"$1"):a||h)}),s});const ze=Re;var be=Y.Z?Y.Z.prototype:void 0,I=be?be.toString:void 0;const e=function n(t){if("string"==typeof t)return t;if((0,H.Z)(t))return D(t,n)+"";if(se(t))return I?I.call(t):"";var s=t+"";return"0"==s&&1/t==-1/0?"-0":s},r=function(t){return null==t?"":e(t)},o=function(t,s){return(0,H.Z)(t)?t:Ie(t,s)?[t]:ze(r(t))},m=function(t){if("string"==typeof t||se(t))return t;var s=t+"";return"0"==s&&1/t==-1/0?"-0":s},M=function(t,s){for(var h=0,a=(s=o(s,t)).length;null!=t&&h<a;)t=t[m(s[h++])];return h&&h==a?t:void 0};var T=S(5180);function p(t){var s=-1,h=null==t?0:t.length;for(this.__data__=new Se.Z;++s<h;)this.add(t[s])}p.prototype.add=p.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},p.prototype.has=function(t){return this.__data__.has(t)};const E=p,x=function(t,s){for(var h=-1,a=null==t?0:t.length;++h<a;)if(s(t[h],h,t))return!0;return!1},Z=function(t,s){return t.has(s)},V=function(t,s,h,a,f,u){var $=1&h,y=t.length,R=s.length;if(y!=R&&!($&&R>y))return!1;var N=u.get(t),q=u.get(s);if(N&&q)return N==s&&q==t;var j=-1,Q=!0,he=2&h?new E:void 0;for(u.set(t,s),u.set(s,t);++j<y;){var k=t[j],ie=s[j];if(a)var de=$?a(ie,k,j,s,t,u):a(k,ie,j,t,s,u);if(void 0!==de){if(de)continue;Q=!1;break}if(he){if(!x(s,function(ue,fe){if(!Z(he,fe)&&(k===ue||f(k,ue,h,a,u)))return he.push(fe)})){Q=!1;break}}else if(k!==ie&&!f(k,ie,h,a,u)){Q=!1;break}}return u.delete(t),u.delete(s),Q};var O=S(1818),z=S(9516);const W=function(t){var s=-1,h=Array(t.size);return t.forEach(function(a,f){h[++s]=[f,a]}),h},nt=function(t){var s=-1,h=Array(t.size);return t.forEach(function(a){h[++s]=a}),h};var He=Y.Z?Y.Z.prototype:void 0,Oe=He?He.valueOf:void 0;var De=S(6157),_t=Object.prototype.hasOwnProperty;var Ue=S(7066),Ne=S(8802),bt=S(4609),Ge="[object Arguments]",Xe="[object Array]",Ce="[object Object]",Qe=Object.prototype.hasOwnProperty;const Pt=function(t,s,h,a,f,u){var $=(0,H.Z)(t),y=(0,H.Z)(s),R=$?Xe:(0,Ue.Z)(t),N=y?Xe:(0,Ue.Z)(s),q=(R=R==Ge?Ce:R)==Ce,j=(N=N==Ge?Ce:N)==Ce,Q=R==N;if(Q&&(0,Ne.Z)(t)){if(!(0,Ne.Z)(s))return!1;$=!0,q=!1}if(Q&&!q)return u||(u=new T.Z),$||(0,bt.Z)(t)?V(t,s,h,a,f,u):function(t,s,h,a,f,u,$){switch(h){case"[object DataView]":if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=s.byteLength||!u(new O.Z(t),new O.Z(s)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,z.Z)(+t,+s);case"[object Error]":return t.name==s.name&&t.message==s.message;case"[object RegExp]":case"[object String]":return t==s+"";case"[object Map]":var y=W;case"[object Set]":if(y||(y=nt),t.size!=s.size&&!(1&a))return!1;var N=$.get(t);if(N)return N==s;a|=2,$.set(t,s);var q=V(y(t),y(s),a,f,u,$);return $.delete(t),q;case"[object Symbol]":if(Oe)return Oe.call(t)==Oe.call(s)}return!1}(t,s,R,h,a,f,u);if(!(1&h)){var he=q&&Qe.call(t,"__wrapped__"),k=j&&Qe.call(s,"__wrapped__");if(he||k){var ie=he?t.value():t,de=k?s.value():s;return u||(u=new T.Z),f(ie,de,h,a,u)}}return!!Q&&(u||(u=new T.Z),function(t,s,h,a,f,u){var $=1&h,y=(0,De.Z)(t),R=y.length;if(R!=(0,De.Z)(s).length&&!$)return!1;for(var j=R;j--;){var Q=y[j];if(!($?Q in s:_t.call(s,Q)))return!1}var he=u.get(t),k=u.get(s);if(he&&k)return he==s&&k==t;var ie=!0;u.set(t,s),u.set(s,t);for(var de=$;++j<R;){var ue=t[Q=y[j]],fe=s[Q];if(a)var st=$?a(fe,ue,Q,s,t,u):a(ue,fe,Q,t,s,u);if(!(void 0===st?ue===fe||f(ue,fe,h,a,u):st)){ie=!1;break}de||(de="constructor"==Q)}if(ie&&!de){var Ee=t.constructor,Pe=s.constructor;Ee!=Pe&&"constructor"in t&&"constructor"in s&&!("function"==typeof Ee&&Ee instanceof Ee&&"function"==typeof Pe&&Pe instanceof Pe)&&(ie=!1)}return u.delete(t),u.delete(s),ie}(t,s,h,a,f,u))},Ye=function Ke(t,s,h,a,f){return t===s||(null==t||null==s||!(0,K.Z)(t)&&!(0,K.Z)(s)?t!=t&&s!=s:Pt(t,s,h,a,Ke,f))};var Je=S(2057);const We=function(t){return t==t&&!(0,Je.Z)(t)};var je=S(1380);const qe=function(t,s){return function(h){return null!=h&&h[t]===s&&(void 0!==s||t in Object(h))}},Bt=function(t){var s=function(t){for(var s=(0,je.Z)(t),h=s.length;h--;){var a=s[h],f=t[a];s[h]=[a,f,We(f)]}return s}(t);return 1==s.length&&s[0][2]?qe(s[0][0],s[0][1]):function(h){return h===t||function(t,s,h,a){var f=h.length,u=f,$=!a;if(null==t)return!u;for(t=Object(t);f--;){var y=h[f];if($&&y[2]?y[1]!==t[y[0]]:!(y[0]in t))return!1}for(;++f<u;){var R=(y=h[f])[0],N=t[R],q=y[1];if($&&y[2]){if(void 0===N&&!(R in t))return!1}else{var j=new T.Z;if(a)var Q=a(N,q,R,t,s,j);if(!(void 0===Q?Ye(q,N,3,a,j):Q))return!1}}return!0}(h,t,s)}},Nt=function(t,s){return null!=t&&s in Object(t)};var ke=S(3705),Gt=S(4690);const Yt=function(t,s){return null!=t&&function(t,s,h){for(var a=-1,f=(s=o(s,t)).length,u=!1;++a<f;){var $=m(s[a]);if(!(u=null!=t&&h(t,$)))break;t=t[$]}return u||++a!=f?u:!!(f=null==t?0:t.length)&&(0,Gt.Z)(f)&&(0,ke.Z)($,f)&&((0,H.Z)(t)||(0,ne.Z)(t))}(t,s,Nt)},qt=function(t,s){return Ie(t)&&We(s)?qe(m(t),s):function(h){var a=function(t,s,h){var a=null==t?void 0:M(t,s);return void 0===a?h:a}(h,t);return void 0===a&&a===s?Yt(h,t):Ye(s,a,3)}},ye=function(t){return t},ri=function(t){return Ie(t)?function(t){return function(s){return null==s?void 0:s[t]}}(m(t)):function(t){return function(s){return M(s,t)}}(t)},hi=function(t){return"function"==typeof t?t:null==t?ye:"object"==typeof t?(0,H.Z)(t)?qt(t[0],t[1]):Bt(t):ri(t)};const ai=function(s,h,a){for(var f=-1,u=Object(s),$=a(s),y=$.length;y--;){var R=$[++f];if(!1===h(u[R],R,u))break}return s};var Ve=S(5021),gi=function(t,s){return function(h,a){if(null==h)return h;if(!(0,Ve.Z)(h))return t(h,a);for(var f=h.length,u=-1,$=Object(h);++u<f&&!1!==a($[u],u,$););return h}}(function(t,s){return t&&ai(t,s,je.Z)});const pi=gi;var Li=S(982);const _i=function(t,s){if(t!==s){var h=void 0!==t,a=null===t,f=t==t,u=se(t),$=void 0!==s,y=null===s,R=s==s,N=se(s);if(!y&&!N&&!u&&t>s||u&&$&&R&&!y&&!N||a&&$&&R||!h&&R||!f)return 1;if(!a&&!u&&!N&&t<s||N&&h&&f&&!a&&!u||y&&h&&f||!$&&f||!R)return-1}return 0},Ci=function(t,s,h){s=s.length?D(s,function(u){return(0,H.Z)(u)?function($){return M($,1===u.length?u[0]:u)}:u}):[ye];var a=-1;s=D(s,(0,Li.Z)(hi));var f=function(t,s){var h=-1,a=(0,Ve.Z)(t)?Array(t.length):[];return pi(t,function(f,u,$){a[++h]=s(f,u,$)}),a}(t,function(u,$,y){return{criteria:D(s,function(N){return N(u)}),index:++a,value:u}});return function(t,s){var h=t.length;for(t.sort(s);h--;)t[h]=t[h].value;return t}(f,function(u,$){return function(t,s,h){for(var a=-1,f=t.criteria,u=s.criteria,$=f.length,y=h.length;++a<$;){var R=_i(f[a],u[a]);if(R)return a>=y?R:R*("desc"==h[a]?-1:1)}return t.index-s.index}(u,$,h)})},Ei=function(t,s,h){switch(h.length){case 0:return t.call(s);case 1:return t.call(s,h[0]);case 2:return t.call(s,h[0],h[1]);case 3:return t.call(s,h[0],h[1],h[2])}return t.apply(s,h)};var et=Math.max;const Ai=function(t){return function(){return t}};var tt=S(6605),Fi=tt.Z?function(t,s){return(0,tt.Z)(t,"toString",{configurable:!0,enumerable:!1,value:Ai(s),writable:!0})}:ye,Oi=Date.now,Bi=function(t){var s=0,h=0;return function(){var a=Oi(),f=16-(a-h);if(h=a,f>0){if(++s>=800)return arguments[0]}else s=0;return t.apply(void 0,arguments)}}(Fi);const Hi=Bi,it=function(t,s,h){if(!(0,Je.Z)(h))return!1;var a=typeof s;return!!("number"==a?(0,Ve.Z)(h)&&(0,ke.Z)(s,h.length):"string"==a&&s in h)&&(0,z.Z)(h[s],t)};var Gi=function(t,s){return Hi(function(t,s,h){return s=et(void 0===s?t.length-1:s,0),function(){for(var a=arguments,f=-1,u=et(a.length-s,0),$=Array(u);++f<u;)$[f]=a[s+f];f=-1;for(var y=Array(s+1);++f<s;)y[f]=a[f];return y[s]=h($),Ei(t,this,y)}}(t,s,ye),t+"")}(function(t,s){if(null==t)return[];var h=s.length;return h>1&&it(t,s[0],s[1])?s=[]:h>2&&it(s[0],s[1],s[2])&&(s=[s[0]]),Ci(t,U(s,1),[])});const Xi=Gi}}]);