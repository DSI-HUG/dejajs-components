(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{BK5C:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i("U6oP");class s{}},F8Ji:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i("pHvX");class s{}},U6oP:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var s=i("fYS1"),r=i("ZXVw");class n{constructor(){this._regexpOptions="i",this._firstOccurenceOnly=!1,this._firstOccurencePerWordOnly=!1,this._atTheBeginningOfWordOnly=!1,this._highlightClassName="highlight | yellowBackgroundColorHighlight"}get content(){return this._content}set query(e){e=s.f.remove(e),this._query!==e&&(this._query=e,this.refresh())}set value(e){this._value=e,this.refresh()}set regexpOption(e){this._regexpOptions=e,this.refresh()}set firstOccurenceOnly(e){this._firstOccurenceOnly=e,this.refresh()}set firstOccurencePerWordOnly(e){this._firstOccurencePerWordOnly=e,this.refresh()}set atTheBeginningOfWordOnly(e){this._atTheBeginningOfWordOnly=e,this.refresh()}get highlightClassName(){return this._highlightClassName}set highlightClassName(e){this._highlightClassName=e,this._highlightClassName||(this._highlightClassName="highlight"),this.refresh()}refresh(){if(this._value&&this._query&&this._query.length>0){const e=this._atTheBeginningOfWordOnly?`\\b${r.a.escapeRegExp(this._query)}`:r.a.escapeRegExp(this._query),t=new RegExp(e,this._regexpOptions),i=this._value.toString(),n=s.f.remove(i).split(t);let h=0;const l=this._query.length,o=[];let a=!0,c=0;n.forEach(e=>{if(e&&(o.push(i.slice(h,h+e.length)),h+=e.length),h+l<=i.length){c+=1;let t=!1;this._firstOccurencePerWordOnly&&c>1&&1===e.split(/[^a-zA-Z\d]/g).length&&(t=!0),t||this._firstOccurenceOnly&&!a||o.push(`<span class="${this._highlightClassName}">`),o.push(i.slice(h,h+l)),t||this._firstOccurenceOnly&&!a||o.push("</span>"),h+=l}a=!1}),this._content=o.join("")}else this._content=this._value}}},WJjc:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i("o//k");class s{}},"o//k":function(e,t,i){"use strict";i.d(t,"a",function(){return h});var s=i("KCVW"),r=i("8Y7J");const n=()=>{};class h{constructor(e){this._control=e,this.readonly=!1,this.close=new r.EventEmitter,this.onTouchedCallback=n,this.onChangeCallback=n,this._disabled=null,this._control&&(this._control.valueAccessor=this)}set disabled(e){this._disabled=Object(s.b)(e)||null}get disabled(){return this._disabled}set items(e){this.writeValue(e)}get items(){return this._items}set value(e){this.writeValue(e),this.onChangeCallback(e)}get value(){return this._items}writeValue(e){this._items=e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}get itemTemplate(){return this.itemTemplateExternal||this.itemTemplateInternal}get insertTemplate(){return this.insertTemplateExternal||this.insertTemplateInternal}getTextValue(e){return e?this.textField&&e.model&&void 0!==e.model[this.textField]?e.model[this.textField]:this.textField&&void 0!==e[this.textField]?e[this.textField]:e.displayName?"string"==typeof e.displayName?e.displayName:e.displayName():"function"==typeof e.toString?e.toString():void 0:""}onClose(e,t){const i=new CustomEvent("DejaChipsCloseEvent",{});i.item=e,i.index=t,this.items.splice(t,1),this.onChangeCallback(this.items),this.close.emit(i)}}},pHvX:function(e,t,i){"use strict";var s=i("KCVW"),r=i("8Y7J"),n=(i("4uwd"),i("fYS1")),h=i("XNiG"),l=i("2Vo4"),o=i("Cfvw"),a=i("itXk"),c=i("PqYM"),u=i("xgIS"),d=i("VRyK"),p=i("GJmQ"),m=i("Kj3r"),g=i("6eBy"),b=i("pLZG"),w=(i("7o/Q"),i("HDdC"),i("l7GE")),y=i("ZUHj");class f{constructor(e){this.delayDurationSelector=e}call(e,t){return t.subscribe(new O(e,this.delayDurationSelector))}}class O extends w.a{constructor(e,t){super(e),this.delayDurationSelector=t,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(e,t,i,s,r){this.destination.next(e),this.removeSubscription(r),this.tryComplete()}notifyError(e,t){this._error(e)}notifyComplete(e){const t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()}_next(e){const t=this.index++;try{const s=this.delayDurationSelector(e,t);s&&this.tryDelay(s,e)}catch(i){this.destination.error(i)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(e){e.unsubscribe();const t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue}tryDelay(e,t){const i=Object(y.a)(this,e,t);i&&!i.closed&&(this.destination.add(i),this.delayNotifierSubscriptions.push(i))}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}var C=i("vkgz"),I=i("3E0/"),_=i("eIep"),S=i("lJxs"),j=i("SxV6"),x=i("fFD9");i.d(t,"a",function(){return D});const v=()=>{},D=(()=>{class e extends n.h{constructor(t,i,s,u,d,w,y,O,x){super(t,i),this.viewPort=i,this.fm=s,this.elementRef=u,this.ngControl=d,this._parentForm=w,this._parentFormGroup=y,this._defaultErrorStateMatcher=x,this.id=`deja-select-${e.nextId++}`,this.describedBy="",this.controlType="deja-select",this.errorState=!1,this.stateChanges=new h.a,this.overlayOffsetX=0,this.overlayOffsetY=0,this.viewPortChanged=new r.EventEmitter,this.selectedChange=new r.EventEmitter,this.dropDownVisibleChange=new r.EventEmitter,this.dropDownMaxHeight=null,this.onTouchedCallback=v,this.onChangeCallback=v,this.onValidatorChangeCallback=v,this._keyboardNavigation=!1,this._waiter=!1,this.isMobile=!1,this._disabled=null,this._type="select",this.dropDownQuery="",this.filterExpression="",this._dropdownVisible=!1,this.lastScrollPosition=0,this._selectionClearable=!1,this._query="",this._required=!1,this._focused=!1,this._readonly=null,this.clearFilterExpression$=new l.a(null),this.filterListComplete$=new h.a,this.storeScrollPosition$=new h.a,this.hideDropDown$=new h.a,this.showDropDown$=new h.a,this.filter$=new h.a,this.query$=new l.a(""),this.writeValue$=new h.a,this.contentInitialized$=new h.a,this.keyboardNavigation$=new h.a,this.delaySearchTrigger$=new l.a(250),this._positions=n.c.default,this.overlayOwnerElement=this.elementRef.nativeElement,this.ngControl&&(this.ngControl.valueAccessor=this),this.fm.monitor(u.nativeElement,!0).subscribe(e=>{this._focused=!!e,this.stateChanges.next()});const D=e=>{e!==this._dropdownVisible&&(this._dropdownVisible=e,this.changeDetectorRef.markForCheck(),this.dropDownVisibleChange.emit(e))};var V;O.isMobile$.pipe(Object(p.a)(()=>this._isAlive)).subscribe(e=>{this.isMobile=e,this.changeDetectorRef.markForCheck()}),this._parentForm&&this._parentForm.ngSubmit.subscribe(()=>{this.changeDetectorRef.markForCheck()}),this._parentFormGroup&&this._parentFormGroup.ngSubmit.subscribe(()=>{this.changeDetectorRef.markForCheck()}),Object(o.a)(this.clearFilterExpression$).pipe(Object(p.a)(()=>this._isAlive),Object(m.a)(750)).subscribe(()=>this.filterExpression=""),Object(a.b)(this.delaySearchTrigger$,this.filterListComplete$).pipe(Object(p.a)(()=>this._isAlive),Object(g.a)(([e])=>Object(c.a)(e))).subscribe(()=>{this._itemList=[],this.reshowDropDown()}),Object(o.a)(this.storeScrollPosition$).pipe(Object(p.a)(()=>this._isAlive)).subscribe(e=>{this.viewPort.scrollPosition$.next(e),this.lastScrollPosition=e}),Object(o.a)(this.hideDropDown$).pipe(Object(p.a)(()=>this._isAlive),Object(b.a)(()=>this.dropdownVisible),(V=(e=>Object(c.a)(e||0)),e=>e.lift(new f(V)))).subscribe(()=>{delete this.selectingItemIndex,D(!1),this.viewPort.element$.next(null),this.changeDetectorRef.markForCheck()}),Object(o.a)(this.showDropDown$).pipe(Object(p.a)(()=>this._isAlive),Object(m.a)(50),Object(b.a)(()=>(this.query||"").length>=this.minSearchlength&&!this._readonly),Object(C.a)(()=>{const e=this.isMobile&&document.body||this.htmlInputElement||this.elementRef.nativeElement;if(this.isMobile)this.dropDownMaxHeight=document.body.clientHeight;else if(this.maxHeight)this.dropDownMaxHeight=this.maxHeight;else{const t=e.getBoundingClientRect(),i=document.body.clientHeight;this.dropDownMaxHeight=Math.max(t.top,i-t.bottom,25)-25}!this.dropDownQuery&&this.isModeAutocomplete&&this.minSearchlength>0&&this.query&&this.query.length>this.minSearchlength&&(this.dropDownQuery=this.query),D(!0),this.changeDetectorRef.markForCheck()}),Object(I.a)(1),Object(b.a)(()=>this.dropdownVisible),Object(_.a)(()=>this.calcViewList$()),Object(C.a)(()=>{const e=this.getSelectedItems(),t=e&&e[0],i=t?this.getItemIndex(t):-1;i>=0?(this.setSelectedItems(e),this.currentItemIndex=i,this.ensureItemVisible(i)):(this.ensureItemVisible(null),this.listElement.scrollTop=this.lastScrollPosition)}),Object(I.a)(1),Object(b.a)(()=>this.dropdownVisible),Object(C.a)(()=>{this.viewPort.element$.next(this.listElement)}),Object(I.a)(1)).subscribe(()=>{this.overlay.updatePosition()}),Object(o.a)(this.keyboardNavigation$).pipe(Object(p.a)(()=>this._isAlive),Object(C.a)(()=>this._keyboardNavigation=!0),Object(m.a)(1e3)).subscribe(()=>{this._keyboardNavigation=!1,this.changeDetectorRef.markForCheck()}),Object(o.a)(this.query$).pipe(Object(p.a)(()=>this._isAlive),Object(C.a)(e=>this._query=e),Object(b.a)(()=>!!this.input),Object(I.a)(1)).subscribe(()=>{this.changeDetectorRef.markForCheck()}),Object(a.b)(this.writeValue$,this.contentInitialized$).pipe(Object(p.a)(()=>this._isAlive),Object(S.a)(([e])=>e),Object(C.a)(e=>{if(void 0===this.modelIsValue)if(e instanceof Array){const t=e||[],i=t.length&&typeof t[0];this.modelIsValue=i&&"string"===i||"number"===i}else{const t=typeof e;this.modelIsValue=""===e||"string"===t||"number"===t}return this.modelIsValue&&(this.query=""),e}),Object(S.a)(e=>this.getVirtualSelectedEntities(e))).subscribe(e=>{if(e)if(this._multiSelect)this.query="",super.setSelectedModels(e),super.getItemListService().ensureSelection(),this.changeDetectorRef.markForCheck();else{const t=e instanceof Array?[e[0]]:[e],i=super.mapToIItemBase(t)[0];this.unselectAll$().pipe(Object(_.a)(()=>i?this.toggleSelect$([i],!0):[]),Object(S.a)(()=>super.getItemListService().ensureSelection()),Object(C.a)(()=>this.ensureSelection()),Object(j.a)()).subscribe(()=>this.changeDetectorRef.markForCheck())}else this.selectedItems&&this.selectedItems.length&&this.removeSelection()}),this._viewPortChanged=this.viewPortChanged,this.maxHeight=0}get shouldLabelFloat(){return this.focused||!this.empty}set positions(e){this._positions="string"==typeof e?n.c.parse(e):e}get positions(){return this._positions}set dropDownWidth(e){this._dropDownWidth=e&&("string"==typeof e?e:`${e}px`)}get dropDownWidth(){return this._dropDownWidth||(this.elementRef&&this.elementRef.nativeElement).clientWidth}get keyboardNavigation(){return this._keyboardNavigation}get required(){return this._required}set required(e){this._required=Object(s.b)(e),this.stateChanges.next()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get empty(){return!this.value}get focused(){return this._focused}set options(e){if(!this.items&&e&&e.length){const t=[];this.valueField="value",this.textField="text";const i=e.map(e=>{const i={text:e.text,value:e.value};return e.selected&&t.push(i),i});this.models=i,t.length&&(this.selectedModels=t),i.length>100&&console.error("Select options with more than 100 items can have performance options. Please bind directly the items in code behind with items or models input.")}}set query(e){this.query$.next(e)}get query(){return this._query}set delaySearchTrigger(e){this.delaySearchTrigger$.next(e)}set minSearchlength(e){this._minSearchLength=e}get minSearchlength(){return this._minSearchLength}set disabled(e){const t=Object(s.b)(e);this._disabled=t||null,this.changeDetectorRef.markForCheck()}get disabled(){return this.ngControl?this.ngControl.disabled:this._disabled}set selectionClearable(e){this._selectionClearable=Object(s.b)(e)}get selectionClearable(){return this._selectionClearable}set hideSelected(e){this.setHideSelected(Object(s.b)(e))}get hideSelected(){return this._hideSelected}set currentItem(e){super.setCurrentItem(e),e&&this.ensureItemVisible(e)}set pageSize(e){this._pageSize=Object(s.e)(e)}get pageSize(){if(0===this._pageSize){const e=this.getViewPortRowHeight(),t=this.listElement;return Math.floor((t&&t.clientHeight||this.dropDownMaxHeight)/e)}return this._pageSize}set hintLabel(e){this.setHintLabel(e)}get hintLabel(){return this._hintLabel}set viewPortRowHeight(e){this.setViewPortRowHeight(e)}set viewportMode(e){this.setViewportMode(e)}set childrenField(e){super.setChildrenField(e)}get childrenField(){return this._childrenField}set textField(e){super.setTextField(e)}get textField(){return super.getTextField()}set valueField(e){super.setValueField(e)}get valueField(){return super.getValueField()}set searchField(e){super.setSearchField(e)}get searchField(){return this._searchField}set type(e){if("autocomplete"!==e&&"multiselect"!==e&&"select"!==e)throw new Error("Invalid type property for DejaSelectComponent. Type can be select, autocomplete or multiselect.");this._type=e,this.setMultiSelect("multiselect"===this._type),this.changeDetectorRef.markForCheck()}get type(){return this._type}set loadingItems(e){super.setLoadingItems(e)}set selectingItem(e){super.setSelectingItem(e)}set unselectingItem(e){super.setUnselectingItem(e)}set expandingItem(e){super.setExpandingItem(e)}set collapsingItem(e){super.setCollapsingItem(e)}get isModeSelect(){return"select"===this._type}get isModeAutocomplete(){return"autocomplete"===this._type}set selectedItems(e){this.setSelectedItems(e)}get selectedItems(){return super.getSelectedItems()}set selectedItem(e){this.setSelectedItems(null!=e?[e]:[])}get selectedItem(){const e=super.getSelectedItems();return e&&e[0]}set selectedModel(e){this.writeValue(e)}get selectedModel(){const e=super.getSelectedModels();return e&&e[0]}set selectedModels(e){this.writeValue(e)}get selectedModels(){return super.getSelectedModels()}set itemListService(e){this.setItemListService(e),e&&e.lastQuery&&(this.query=e.lastQuery.toString())}get itemListService(){return this.getItemListService()}set sortingService(e){this.setSortingService(e)}set groupingService(e){this.setGroupingService(e)}set waiter(e){this._waiter=e}get waiter(){return this._waiter}set items(e){super.setItems$(e).pipe(Object(j.a)(),Object(C.a)(()=>this.ensureSelection()),Object(_.a)(()=>this.calcViewList$())).subscribe(v)}set models(e){super.setModels$(e).pipe(Object(j.a)(),Object(C.a)(()=>this.ensureSelection()),Object(_.a)(()=>this.calcViewList$())).subscribe(v)}get depthMax(){return this._depthMax}set maxHeight(e){super.setMaxHeight(e)}get maxHeight(){return this.getMaxHeight()}set readonly(e){const t=Object(s.b)(e);this._readonly=t||null,this.changeDetectorRef.markForCheck()}get readonly(){return this._readonly}set inputValidatorDirective(e){e&&(e.parentControl=this.ngControl)}set currentItemIndex(e){super.setCurrentItemIndex(e),this.changeDetectorRef.markForCheck()}get currentItemIndex(){return this.getCurrentItemIndex()}get itemTemplate(){return this.itemTemplateExternal||this.itemTemplateInternal}get parentItemTemplate(){return this.parentItemTemplateExternal||this.parentItemTemplateInternal}get htmlInputElement(){return this.inputElement&&this.inputElement.nativeElement}get loaderTemplate(){return this.loaderTemplateExternal||this.loaderTemplateInternal}get dropdownVisible(){return this._dropdownVisible}get value(){return this._multiSelect?this.selectedItems:this.selectedItem}set value(e){this.writeValue(e),this.onChangeCallback(e),this.onTouchedCallback(),this.stateChanges.next()}writeValue(e){this.writeValue$.next(e)}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnDestroy(){this.stateChanges.complete(),this.fm.stopMonitoring(this.elementRef.nativeElement)}ngAfterContentInit(){this.contentInitialized$.next(!0),this.ngControl&&this.ngControl.valueChanges.pipe(Object(b.a)(()=>!!this.input)).subscribe(()=>{this.ngControl.touched&&this.input.ngControl.control.markAsTouched(),this.input.ngControl.control.updateValueAndValidity()}),this.overlayOwnerElement=this.elementRef.nativeElement,this.overlayOwnerElement.parentElement.className.indexOf("mat-form-field-infix")>=0&&(this.overlayOwnerElement=this.overlayOwnerElement.parentElement)}ngAfterViewInit(){Object(u.a)(this.htmlInputElement,"click").pipe(Object(p.a)(()=>this._isAlive),Object(b.a)(()=>!this.dropdownVisible&&!this.disabled)).subscribe(e=>{this.isModeSelect?this.showDropDown():(this.htmlInputElement.select(),this.filter$.next(e))}),Object(u.a)(this.htmlInputElement,"focus").pipe(Object(p.a)(()=>this._isAlive),Object(b.a)(()=>!this.dropdownVisible&&!this.disabled),Object(I.a)(10),Object(b.a)(()=>this.htmlInputElement===document.activeElement)).subscribe(e=>{this.isModeSelect?this.showDropDown():this.filter$.next(e)}),Object(u.a)(this.htmlInputElement,"blur").pipe(Object(p.a)(()=>this._isAlive),Object(b.a)(()=>void 0===this.selectingItemIndex)).subscribe(()=>{this.onTouchedCallback(),this.hideDropDown$.next(10)}),Object(d.a)(Object(u.a)(this.htmlInputElement,"keydown"),Object(u.a)(this.elementRef.nativeElement,"keydown")).pipe(Object(p.a)(()=>this._isAlive),Object(b.a)(e=>{if(e.defaultPrevented)return!1;const t=e.keyCode||n.j[e.code];return t===n.j.Home||t===n.j.End||t===n.j.PageUp||t===n.j.PageDown||t===n.j.UpArrow||t===n.j.DownArrow||t===n.j.Space||t===n.j.Enter}),Object(_.a)(e=>this.ensureListCaches$().pipe(Object(S.a)(()=>e))),Object(S.a)(e=>{const t=(e,t)=>{this.currentItemIndex=e,this.dropdownVisible&&(this.ensureItemVisible(this.currentItemIndex),this.viewPort.refresh()),this._multiSelect||(t=t||super.getCurrentItem(),this.select(t,!1))};switch(e.keyCode||n.j[e.code]){case n.j.Home:return e.altKey||this._multiSelect&&!this.dropdownVisible?this.toggleDropDown():t(0),!1;case n.j.End:return e.altKey||this._multiSelect&&!this.dropdownVisible?this.toggleDropDown():t(Math.max(0,this.rowsCount-1)),!1;case n.j.PageUp:return e.altKey||this._multiSelect&&!this.dropdownVisible?this.toggleDropDown():t(Math.max(0,this.currentItemIndex-this._pageSize)),!1;case n.j.PageDown:return e.altKey||this._multiSelect&&!this.dropdownVisible?this.toggleDropDown():t(Math.min(this.rowsCount-1,this.currentItemIndex+this._pageSize)),!1;case n.j.UpArrow:return e.altKey||this._multiSelect&&!this.dropdownVisible?this.toggleDropDown():t(Math.max(0,this.currentItemIndex-1)),!1;case n.j.DownArrow:return e.altKey||this._multiSelect&&!this.dropdownVisible?this.toggleDropDown():t(Math.min(this.rowsCount-1,this.currentItemIndex+1)),!1;case n.j.Space:if(this.dropdownVisible){const e=this._itemList[this.currentItemIndex-this.vpStartRow];if(this.isCollapsible(e))return this.keyboardNavigation$.next(),this.toggleCollapse$(this.currentItemIndex,!e.collapsed).pipe(Object(j.a)()).subscribe(v),!1}if(!this.isModeSelect)return!0;case n.j.Enter:return this.dropdownVisible&&this.select(this._itemList[this.currentItemIndex-this.vpStartRow]),!1;default:return!0}})).subscribe(e=>{if(!e)return this.keyboardNavigation$.next(),this.changeDetectorRef.markForCheck(),event.preventDefault(),!1});const e=Object(u.a)(this.htmlInputElement,"keyup").pipe(Object(b.a)(e=>{const t=e.keyCode||n.j[e.code];return t>=n.j.Key0||t===n.j.Backspace||t===n.j.Space||t===n.j.Delete}));Object(d.a)(e,this.filter$).pipe(Object(p.a)(()=>this._isAlive),Object(C.a)(()=>{if((this.query||"").length<this.minSearchlength)return this._itemList=[],void this.hideDropDown()})).subscribe(e=>{const t=(e,t)=>{this.currentItemIndex=e,this.dropdownVisible&&this.ensureItemVisible(this.currentItemIndex),this._multiSelect||(t=t||super.getCurrentItem(),this.select(t,!1))};if(this.keyboardNavigation$.next(),this.isModeSelect){if(/[a-zA-Z0-9]/.test(e.key)){this.clearFilterExpression$.next(null),this.filterExpression+=e.key;const i=new RegExp(`^${this.filterExpression}`,"i");this.findNextMatch$(e=>{if(e&&this.isSelectable(e)){const t=this.getTextValue(e);if(i.test(t))return!0}return!1},this.currentItemIndex).pipe(Object(j.a)()).subscribe(e=>{e.index>=0&&t(e.index,e.item)})}}else this.filterListComplete$.next()})}setDescribedByIds(e){this.describedBy=e.join(" ")}onContainerClick(e){"input"!==e.target.tagName.toLowerCase()&&this.elementRef.nativeElement.querySelector("input").focus()}toggleAll$(e){return super.toggleAll$(e).pipe(Object(_.a)(e=>this.calcViewList$().pipe(Object(j.a)(),Object(S.a)(()=>e))))}toggleAll(e){this.toggleAll$(e).pipe(Object(j.a)()).subscribe(v)}toggleCollapse$(e,t){return super.toggleCollapse$(e,t).pipe(Object(C.a)(()=>{this.dropdownVisible&&this.reshowDropDown()}))}toggleCollapse(e,t){this.toggleCollapse$(e,t).pipe(Object(j.a)()).subscribe(v)}queryChanged(e){this.query=e,this.isModeSelect||(this.dropDownQuery=this.query,this.isModeAutocomplete&&this.unselectAll$().pipe(Object(j.a)()).subscribe(()=>this.onModelChange()))}hideDropDown(){this.hideDropDown$.next()}scroll(e){this.storeScrollPosition$.next(e.target.scrollTop)}mousedown(e){this.mouseUp$sub&&(this.mouseUp$sub.unsubscribe(),this.mouseUp$sub=void 0),this.selectingItemIndex=this.getItemIndexFromHTMLElement(e.target),this.mouseUp$sub=Object(u.a)(this.listElement,"mouseup").subscribe(t=>{const i=this.getItemIndexFromHTMLElement(t.target);if(void 0===i||void 0===this.selectingItemIndex||i!==this.selectingItemIndex)return;const s=this._itemList[i-this.vpStartRow];s&&0===t.button&&(!this.isCollapsible(s)||!(e=>"expandbtn"===e.id||"expandbtn"===e.parentElement.id)(e.target)&&this.isSelectable(s)?s.selected||this.select(s):0===t.button&&this.toggleCollapse$(i,!s.collapsed).pipe(Object(j.a)()).subscribe(v))})}getItemClass(e){const t=["listitem"];return e.className&&t.push(e.className),t.join(" ")}updateErrorState(){const e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}clearSelection(){this.removeSelection()}onCloseClicked(e){this.ngControl&&this.ngControl.control.markAsTouched(),this.removeSelection(e&&e.item)}onOpenClicked(){this.dropdownVisible||this.disabled||(this.isModeSelect?this.showDropDown():(this.htmlInputElement.select(),this.filter$.next(event)))}removeSelection(e){if(this._multiSelect?e?this.toggleSelect$([e],!1).pipe(Object(j.a)()).subscribe(e=>{const t=[...e];this.setSelectedItems(t),this.onModelChange(t)}):this.unselectAll$().pipe(Object(j.a)()).subscribe(()=>this.onModelChange()):(this.query="",this.dropDownQuery="",this.setSelectedItems(void 0),this.onModelChange(),delete this.selectingItemIndex),event)return event.stopPropagation(),!1}calcViewList$(){return super.calcViewList$(this.dropDownQuery).pipe(Object(C.a)(()=>this.changeDetectorRef.markForCheck()))}ensureItemVisible(e){super.ensureItemVisible(e)}onModelChange(e){let t=null,i=null;if(e)if(Array.isArray(e)){const s=e.map(e=>void 0!==e.model?e.model:e);if(t={items:e,models:s},this.modelIsValue){const e=this.getValueField();s.find(t=>!!t[e])&&(i=s.map(t=>void 0!==t[e]?t[e]:t))}else i=s}else{const s=e.model;if(t={item:e,model:s},this.modelIsValue){const e=this.getValueField();i=void 0!==s[e]?s[e]:s}else i=void 0!==e.model?e.model:e}this.onChangeCallback(i),t&&this.selectedChange.emit(t)}select(e,t){this.isSelectable(e)&&e&&(this._multiSelect?this.toggleSelect$([e],!0).pipe(Object(j.a)()).subscribe(e=>{const t=e?[...e]:[];this.setSelectedItems(t),this.onModelChange(t),this.query="",this.dropDownQuery=""}):(this.query=this.getTextValue(e),this.setSelectedItems([e]),this.onModelChange(e)),this.htmlInputElement.focus(),!1!==t&&this.hideDropDown())}toggleDropDown(){this.dropdownVisible?this.hideDropDown():this.showDropDown()}showDropDown(){this.showDropDown$.next()}reshowDropDown(){if(!this.dropdownVisible)return this.showDropDown();delete this.selectingItemIndex;const e=this.listElement;e&&(e.scrollTop=this.lastScrollPosition),this.calcViewList$().pipe(Object(C.a)(()=>this.refreshViewPort()),Object(x.a)(this.viewPortChanged),Object(j.a)(),Object(I.a)(1)).subscribe(()=>{this.overlay.updatePosition();const e=this.getSelectedItems()[0],t=e&&this.getItemIndex(e);t>=0&&(this.currentItemIndex=t,this.ensureItemVisible(t))})}ensureSelection(){this._multiSelect||(this.query=this.selectedItems.length?this.getTextValue(this.selectedItems[0]):"")}}return e.nextId=0,e})()}}]);