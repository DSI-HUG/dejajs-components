"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[593],{5576:(A,T,c)=>{c.d(T,{L:()=>h});class h{constructor(m,a){this.left=m||0,this.top=a||0}static equals(m,a){return m.left===a.left&&m.top===a.top}offset(m,a){return new h(this.left+m,this.top+a)}clone(){return new h(this.left,this.top)}constrain(m,a,r,t){return new h(Math.min(Math.max(m,this.left),a),Math.min(Math.max(r,this.top),t))}around(m,a,r,t){return Math.abs(this.left-m)<=r&&Math.abs(this.top-a)<=(t||r)}}},1850:(A,T,c)=>{c.d(T,{U:()=>d});var h=c(5576);class d{constructor(a,r,t,g){if("number"==typeof a)this.left=a||0,this.top=r||0,this.width=t||0,this.height=g||0;else{const f=a||{};this.left=f.left||0,this.top=f.top||0,this.width=void 0!==f.right?f.right-this.left:f.width||0,this.height=void 0!==f.bottom?f.bottom-this.top:f.height||0}}static equals(a,r){return a&&r&&a.left===r.left&&a.top===r.top&&a.width===r.width&&a.height===r.height}static union(a,r){return d.fromLTRB(Math.min(a.left,r.left),Math.min(a.top,r.top),Math.max(a.left+a.width,r.left+r.width),Math.max(a.top+a.height,r.top+r.height))}static overlapInfos(a,r){const t=Math.max(0,Math.min(a.right,r.right)-Math.max(a.left,r.left)),g=Math.max(0,Math.min(a.bottom,r.bottom)-Math.max(a.top,r.top));return{area:t*g,width:t,height:g,direction:t>g?"horizontal":"vertical"}}static fromLTRB(a,r,t,g){return new d(a,r,t-a,g-r)}static fromPoints(a,r){return d.fromLTRB(Math.min(a.left,r.left),Math.min(a.top,r.top),Math.max(a.left,r.left),Math.max(a.top,r.top))}set right(a){this.width=a-this.left}get right(){return this.left+this.width}set bottom(a){this.height=a-this.top}get bottom(){return this.top+this.height}get position(){return new h.L(this.left,this.top)}offset(a,r){return new d(this.left+a,this.top+r,this.width,this.height)}adjacent(a){return a.left<=this.right&&a.right>=this.left&&a.top<=this.bottom&&a.bottom>=this.top}contains(a){return a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom}containsPoint(a){return a.left>=this.left&&a.left<=this.right&&a.top>=this.top&&a.top<=this.bottom}intersectWith(a){return a.left<this.right&&a.right>this.left&&a.top<this.bottom&&a.bottom>this.top}isEmpty(){return!this.width||!this.height}clone(){return new d(this.left,this.top,this.width,this.height)}toClientRect(){return{left:this.left,top:this.top,bottom:this.bottom,right:this.right,width:this.width,height:this.height}}toRectStruct(){return this.toClientRect()}}},9593:(A,T,c)=>{c.r(T),c.d(T,{DejaCircularPickerDemoModule:()=>Tt});var h=c(6019),d=c(9133),m=c(888),a=c(2605),r=c(8643),t=c(3668),g=c(348),f=c(7656),b=c(5576),E=c(1850);class M{constructor(s,e){this.center=s,this.radius=e}static fromOuterRect(s,e,i,l){if("object"==typeof s){const v=s;s=v.left,e=v.top,i=v.width,l=v.height}const o=Math.min(i,l)/2,u=new b.L(+s+i/2,e+l/2);return new M(u,o)}static equals(s,e){return!s==!e&&b.L.equals(s.center,e.center)&&s.radius===e.radius}get outerRect(){return E.U.fromLTRB(this.center.left-this.radius,this.center.top-this.radius,this.center.left+this.radius,this.center.top+this.radius)}contains(s){return this.outerRect.contains(s.outerRect)}containsPoint(s){const e=Math.abs(s.left-this.center.left),i=Math.abs(s.top-this.center.top);return e*e+i*i<=this.radius*this.radius}clone(){return new M(this.center,this.radius)}inflate(s){return new M(this.center,this.radius+s)}}var O=c(5077),I=c(461),U=c(9463),J=c(3067),Q=c(273),N=c(5933),Y=c(9468),L=c(7384),y=c(6263),S=c(2210),F=c(9947),H=c(6921),V=c(8889),B=c(6474);const z=["labelTemplate"],X=["cursorTemplate"],G=["picker"];function q(n,s){}const K=function(n){return{$implicit:n}};function tt(n,s){if(1&n&&t.YNc(0,q,0,0,"ng-template",9),2&n){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.cursorTemplate)("ngTemplateOutletContext",t.VKq(2,K,e.cursor.value))}}function et(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.cursor.value)}}function it(n,s){if(1&n&&(t.TgZ(0,"div",6),t.YNc(1,tt,1,4,void 0,7),t.YNc(2,et,2,1,"ng-template",null,8,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw();t.Udp("top",i.cursor.position.top,"px")("left",i.cursor.position.left,"px"),t.xp6(1),t.Q6J("ngIf",i.cursorTemplate)("ngIfElse",e)}}function nt(n,s){}const at=function(n,s){return{$implicit:n,index:s}};function lt(n,s){if(1&n&&t.YNc(0,nt,0,0,"ng-template",9),2&n){const e=t.oxw(),i=e.$implicit,l=e.index,o=t.oxw();t.Q6J("ngTemplateOutlet",o.labelTemplate)("ngTemplateOutletContext",t.WLB(2,at,i.value,l))}}function st(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.value)}}function rt(n,s){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,lt,1,5,void 0,11),t.YNc(2,st,2,1,"span",11),t.qZA()),2&n){const e=s.$implicit,i=t.oxw();t.Udp("top",e.position.top,"px")("left",e.position.left,"px"),t.uIk("value",e.value),t.xp6(1),t.Q6J("ngIf",i.labelTemplate),t.xp6(1),t.Q6J("ngIf",!i.labelTemplate)}}const ot=function(n){return{transform:n}};var D=(()=>{return(n=D||(D={}))[n.clockwise=-1]="clockwise",n[n.counterClockwise=1]="counterClockwise",D;var n})();let ct=(()=>{class n extends f.yl{constructor(e,i,l){super(),this.changeDetectorRef=i,this.control=l,this.clockwiseFactor=D.clockwise,this.fullDiameter=310,this.labelsDiameter=43,this._outerLabels=!1,this._disabled=!1,this.twoPi=2*Math.PI,this._radius=0,this.configs=[],this._circularValues=[],this.onChangeCallback=p=>{},this.onTouchedCallback=()=>{};const o=e.nativeElement;this.control&&(this.control.valueAccessor=this);const u=(0,O.R)(o.ownerDocument,"mouseup");(0,O.R)(o,"mousedown").pipe((0,I.h)(p=>!this.disabled&&1===p.buttons),(0,U.b)(100),(0,I.h)(p=>{this.clickedTime=Date.now();const P=this.getHtmlElement(p.target,"cursor"),_=this.getHtmlElement(p.target,"value");return P?this.cursorElement=P:_&&(this.value=+_.getAttribute("value")),!!P||!!_}),(0,J.w)(()=>{const p=new Q.x;o.ownerDocument.body.className.match(/noselect/)||o.ownerDocument.body.classList.add("noselect");const P=p.pipe((0,N.b)(u),(0,Y.q)(1),(0,L.b)(()=>{delete this.cursorElement,delete this.clickedTime,o.ownerDocument.body.className=o.ownerDocument.body.className.replace(/\bnoselect\b/,"")})),k=this.picker.nativeElement.getBoundingClientRect();return(0,O.R)(o.ownerDocument,"mousemove").pipe((0,y.R)(P),function(n,s=S.z){return function(n){return(0,F.e)((s,e)=>{let i=!1,l=null;s.subscribe(new V.Q(e,u=>{i=!0,l=u})),n.subscribe(new V.Q(e,()=>{if(i){i=!1;const u=l;l=null,e.next(u)}},H.Z))})}((0,B.F)(n,s))}(10),(0,L.b)(x=>{if(1!==x.buttons)return void p.next();let C=M.fromOuterRect(k),w=!1;if(this.outerLabels){C=C.inflate(this.labelsDiameter);for(const j of this.configs){if(w=C.containsPoint(new b.L(x.pageX,x.pageY)),w){this.selectedConfig=j;break}C=C.inflate(this.labelsDiameter)}}else{C=C.inflate(-this.labelsDiameter*(this.configs.length-1));for(let Z=this.configs.length;Z>0;Z--){if(w=C.containsPoint(new b.L(x.pageX,x.pageY)),w){this.selectedConfig=this.configs[Z-1];break}C=C.inflate(this.labelsDiameter)}}const R=this.pointToValue(x.pageX-k.left,x.pageY-k.top,this.selectedConfig);R!==this.value&&(this.value=R)}))}),(0,y.R)(this.destroyed$)).subscribe()}set outerLabels(e){this._outerLabels=(0,g.Ig)(e)||null}get outerLabels(){return this._outerLabels}set disabled(e){this._disabled=(0,g.Ig)(e),this.changeDetectorRef.markForCheck()}get disabled(){return this._disabled}get cursorHand(){return this._cursorHand}get cursor(){return this._cursor}get radius(){return this._radius}get circularValues(){return this._circularValues}ngOnInit(){this._radius=(this.fullDiameter-this.labelsDiameter)/2,this.ranges.forEach(i=>{i.interval=i.interval?i.interval:1,i.labelInterval=i.labelInterval?i.labelInterval:1,i.beginOffset=i.beginOffset?i.beginOffset:Math.PI/2,this.configs.push({range:i,stepAngle:this.twoPi/Math.floor((i.max-i.min+1)/i.interval),steps:Math.floor((i.max-i.min+1)/i.interval)})}),this.selectedConfig=this.configs[0],this.bind(),this.updateCursor()}set value(e){e!==this._value&&(this.writeValue(e),this.onChangeCallback(e))}get value(){return this._value}writeValue(e){e!==this._value&&(this._value=e,this.updateCursor())}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}pointToValue(e,i,l){const o=this.pointToAngle(e-this._radius,i-this._radius,l);let u=l.steps-Math.ceil(o/l.stepAngle);return u<0&&(u=l.steps),l.range.min+u*l.range.interval}valueToPoint(e,i,l){const o=new b.L,u=this.valueToAngle(e,l);return o.left=this._radius+(this._radius+i)*Math.cos(u),o.top=this._radius-(this._radius+i)*Math.sin(u),o}pointToAngle(e,i,l){return(-Math.atan2(i,e)-l.range.beginOffset-l.stepAngle/2+this.twoPi)%this.twoPi}valueToAngle(e,i){return Math.floor((e-i.range.min)/i.range.interval)*i.stepAngle*this.clockwiseFactor+i.range.beginOffset}bind(){this._circularValues=[],this.configs.forEach((e,i)=>{for(let l=e.range.min;l<=e.range.max;l+=e.range.labelInterval*e.range.interval){const o={value:l},u=this.labelsDiameter/2,v=this.labelsDiameter*i,p=this.valueToPoint(l,this.outerLabels?u+v:-u-v,e);o.position=new b.L(p.left-u,p.top-u),this._circularValues.push(o)}})}updateCursor(){if(!this._circularValues||!this._circularValues.length)return;null==this._value&&(this._value=this._circularValues[0].value),this.selectedConfig=this.configs.find(o=>this._value>=o.range.min&&this._value<=o.range.max),this.selectedConfig||(this.selectedConfig=this.configs[0]);const e=this.configs.indexOf(this.selectedConfig),i=this.labelsDiameter/2,l=this.valueToPoint(this._value,this.outerLabels?i+this.labelsDiameter*e:-i-this.labelsDiameter*e,this.selectedConfig);this._cursor={position:new b.L(l.left-i,l.top-i),value:this._value},this._cursorHand={angle:this.valueToAngle(this._value,this.selectedConfig),width:this.outerLabels?this._radius+this.labelsDiameter*e:this._radius-this.labelsDiameter-this.labelsDiameter*e},this.changeDetectorRef.markForCheck()}getHtmlElement(e,i){let l=e;for(;l&&!l.hasAttribute(i);)l=l.parentElement;if(l)return l}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(d.a5,10))},n.\u0275cmp=t.Xpm({type:n,selectors:[["deja-circular-picker"]],contentQueries:function(e,i,l){if(1&e&&(t.Suo(l,z,5),t.Suo(l,X,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.labelTemplate=o.first),t.iGM(o=t.CRH())&&(i.cursorTemplate=o.first)}},viewQuery:function(e,i){if(1&e&&t.Gf(G,7),2&e){let l;t.iGM(l=t.CRH())&&(i.picker=l.first)}},inputs:{clockwiseFactor:"clockwiseFactor",fullDiameter:"fullDiameter",labelsDiameter:"labelsDiameter",ranges:"ranges",outerLabels:"outerLabels",disabled:"disabled"},features:[t.qOj],decls:6,vars:13,consts:[[1,"circular-picker"],["picker",""],[1,"cursor-container"],["class","cursor","cursor","",3,"top","left",4,"ngIf"],[1,"cursorHand",3,"ngStyle"],["class","value",3,"top","left",4,"ngFor","ngForOf"],["cursor","",1,"cursor"],[4,"ngIf","ngIfElse"],["valueTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"value"],[4,"ngIf"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0,1),t.TgZ(2,"div",2),t.YNc(3,it,4,6,"div",3),t._UZ(4,"div",4),t.qZA(),t.YNc(5,rt,3,7,"div",5),t.qZA()),2&e&&(t.Udp("width",2*i.radius,"px")("height",2*i.radius,"px"),t.ekj("disabled",i.disabled),t.xp6(3),t.Q6J("ngIf",void 0!==i.cursor.value),t.xp6(1),t.Udp("width",i.cursorHand.width+2,"px"),t.Q6J("ngStyle",t.VKq(11,ot,"translateY(-50%) rotate("+-i.cursorHand.angle+"rad)")),t.xp6(1),t.Q6J("ngForOf",i.circularValues))},directives:[h.O5,h.PC,h.sg,h.tP],styles:["[_nghost-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]{border-radius:50%;position:relative}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{border-radius:50%;cursor:pointer;height:43px;line-height:43px;position:absolute;text-align:center;width:43px}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .cursor-container[_ngcontent-%COMP%]   .cursor[_ngcontent-%COMP%]{border-radius:50%;cursor:pointer;height:43px;line-height:43px;position:absolute;text-align:center;width:43px;z-index:5}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .cursor-container[_ngcontent-%COMP%]   .cursorHand[_ngcontent-%COMP%]{border-radius:2px;height:4px;left:50%;position:absolute;top:50%;transform-origin:left center}"],changeDetection:0}),n})(),ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.ez,d.u5]]}),n})();var ht=c(6412),mt=c(3507),dt=c(7991);function pt(n,s){1&n&&(t.TgZ(0,"mat-card",5),t._UZ(1,"deja-markdown",6),t.qZA()),2&n&&(t.xp6(1),t.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/circular-picker/readme.md"))}function gt(n,s){if(1&n&&t._uU(0),2&n){const e=s.$implicit,i=t.oxw(2);t.hij(" ",i.getLabelForValue(e)," ")}}function ft(n,s){if(1&n&&t._uU(0),2&n){const e=s.$implicit;t.hij(" ",24===e?0:e," ")}}function Ct(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-card",7),t.TgZ(2,"mat-toolbar",8),t._uU(3,"Complex Circular-picker width custom labels"),t.qZA(),t.TgZ(4,"mat-card-content",9),t._UZ(5,"deja-circular-picker",10),t.TgZ(6,"deja-circular-picker",11),t.NdJ("ngModelChange",function(l){return t.CHM(e),t.oxw().sm=l})("ngModelChange",function(l){return t.CHM(e),t.oxw().range42Changed(l)}),t.YNc(7,gt,1,1,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-card",7),t.TgZ(11,"mat-toolbar",8),t._uU(12,"Circular-picker demo simple - Range 1 to 20 (inside and outside labels)"),t.qZA(),t.TgZ(13,"mat-card-content",13),t.TgZ(14,"div"),t._UZ(15,"deja-circular-picker",14),t.qZA(),t.TgZ(16,"div"),t._UZ(17,"deja-circular-picker",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"mat-card",7),t.TgZ(19,"mat-toolbar",8),t._uU(20,"Circular-picker demo multiple range (inside labels)"),t.qZA(),t.TgZ(21,"mat-card-content",13),t.TgZ(22,"deja-circular-picker",16),t.NdJ("ngModelChange",function(l){return t.CHM(e),t.oxw().sms=l}),t.YNc(23,ft,1,1,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ranges",e.ranges41)("outerLabels",!0),t.xp6(1),t.Q6J("ngModel",e.sm)("ranges",e.ranges42),t.xp6(9),t.Q6J("ranges",e.ranges1),t.xp6(2),t.Q6J("ranges",e.ranges2)("outerLabels",!0),t.xp6(5),t.Q6J("ngModel",e.sms)("ranges",e.ranges3)}}const xt=mt.Bz.forChild([{path:"",component:(()=>{class n{constructor(){this.tabIndex=1,this.sm=3,this.sms=10,this.ranges1=[{min:1,max:20,labelInterval:2}],this.ranges2=[{min:1,max:20}],this.ranges3=[{min:1,max:12,beginOffset:Math.PI/3},{min:13,max:24,beginOffset:Math.PI/3}],this.ranges41=[{labelInterval:5,max:59,min:0}],this.ranges42=[{max:11,min:0},{max:111,min:100}],this.myModel=[{value:0,label:"T0"},{value:1,label:"T1"},{value:2,label:"T2"},{value:3,label:"T3"},{value:4,label:"T4"},{value:5,label:"T5"},{value:6,label:"T6"},{value:7,label:"T7"},{value:8,label:"T8"},{value:9,label:"T9"},{value:10,label:"T10"},{value:11,label:"T11"},{value:100,label:"T-1",realValue:-1},{value:101,label:"T-2",realValue:-2},{value:102,label:"T-3",realValue:-3},{value:103,label:"T-4",realValue:-4},{value:104,label:"T-5",realValue:-5},{value:105,label:"T-6",realValue:-6},{value:106,label:"T-7",realValue:-7},{value:107,label:"T-8",realValue:-8},{value:108,label:"T-9",realValue:-9},{value:109,label:"T-10",realValue:-10},{value:110,label:"T-11",realValue:-11},{value:111,label:"T-12",realValue:-12}]}range42Changed(e){console.log(`Selected model ${this.getLabelForValue(e)}`)}getLabelForValue(e){const i=this.myModel.find(l=>l.value===e);return(null==i?void 0:i.label)||(null==e?void 0:e.toString())||""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["deja-circular-picker-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],[1,"demo-card"],["color","primary"],["id","complex-wrapper",1,"listContainer"],["id","outside",3,"ranges","outerLabels"],["id","inside",3,"ngModel","ranges","ngModelChange"],["cursorTemplate","","labelTemplate",""],[1,"listContainer"],[3,"ranges"],[3,"ranges","outerLabels"],[3,"ngModel","ranges","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group",0),t.NdJ("selectedTabChange",function(o){return i.tabIndex=o.index}),t._UZ(1,"mat-tab",1),t._UZ(2,"mat-tab",2),t.qZA(),t.YNc(3,pt,2,1,"mat-card",3),t.YNc(4,Ct,26,9,"div",4)),2&e&&(t.Q6J("selectedIndex",i.tabIndex),t.xp6(3),t.Q6J("ngIf",0===i.tabIndex),t.xp6(1),t.Q6J("ngIf",1===i.tabIndex))},directives:[a.SP,a.uX,h.O5,m.a8,dt.F,r.Ye,m.dn,ct,d.JJ,d.On],styles:["[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px;padding:2rem 0}[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   deja-circular-picker[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]{position:relative;height:333px}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #outside[_ngcontent-%COMP%], [_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #inside[_ngcontent-%COMP%]{left:50%;position:absolute!important;top:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #inside[_ngcontent-%COMP%]   .circular-picker[_ngcontent-%COMP%]{background:transparent;border:none}"]}),n})()},{path:"**",redirectTo:"",pathMatch:"full"}]);let Tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[h.ez,ut,ht.O,d.u5,m.QW,a.Nh,r.g0,xt]]}),n})()}}]);