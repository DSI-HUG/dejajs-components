"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[212,183],{1676:($e,de,u)=>{u.d(de,{V:()=>W});var m=u(5804),B=u(9947),ce=u(2254),K=u(2937),ae=u(7979),ie=u(7613);function Q(...L){const I=(0,ie.jO)(L);return I?(0,ae.z)(Q(...L),(0,K.Z)(I)):(0,B.e)((q,V)=>{(0,m.l)([q,...(0,ce.k)(L)])(V)})}function W(...L){return Q(...L)}},411:($e,de,u)=>{u.d(de,{H:()=>Q});var m=u(3668),B=u(5304),K=(u(7671),u(6019));function ae(W,L){if(1&W){const I=m.EpF();m.TgZ(0,"img",11),m.NdJ("load",function(){return m.CHM(I),m.oxw(2).imageLoaded.emit()}),m.qZA()}if(2&W){const I=m.oxw(2);m.uIk("src",I.item.urlToImage,m.LSH)}}function ie(W,L){if(1&W&&(m.TgZ(0,"span",1),m.TgZ(1,"span",2),m.YNc(2,ae,1,1,"img",3),m.qZA(),m.TgZ(3,"span",4),m.TgZ(4,"span",5),m._uU(5),m.qZA(),m.TgZ(6,"span",6),m._uU(7),m.qZA(),m.TgZ(8,"span",7),m.TgZ(9,"a",8),m._uU(10),m.qZA(),m.TgZ(11,"span",9),m._uU(12),m.qZA(),m.TgZ(13,"span",10),m._uU(14),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&W){const I=m.oxw();m.xp6(2),m.Q6J("ngIf",I.item.urlToImage),m.xp6(3),m.Oqu(I.item.title),m.xp6(2),m.Oqu(I.item.description),m.xp6(2),m.uIk("href",I.item.url,m.LSH),m.xp6(1),m.Oqu(I.item.url),m.xp6(2),m.Oqu(I.item.author),m.xp6(2),m.Oqu(I.item.publishedAt)}}let Q=(()=>{class W{constructor(I,q){this.elementRef=I,this.imageLoaded=new m.vpe,q&&(this.item=q)}}return W.\u0275fac=function(I){return new(I||W)(m.Y36(m.SBq),m.Y36(B.WI,8))},W.\u0275cmp=m.Xpm({type:W,selectors:[["news-card"]],inputs:{item:"item"},outputs:{imageLoaded:"imageLoaded"},decls:1,vars:1,consts:[["class","news",4,"ngIf"],[1,"news"],[1,"logo"],[3,"load",4,"ngIf"],[1,"text"],[1,"title"],[1,"description"],[1,"footer"],[1,"url"],[1,"author"],[1,"publishedAt"],[3,"load"]],template:function(I,q){1&I&&m.YNc(0,ie,15,7,"span",0),2&I&&m.Q6J("ngIf",q.item)},directives:[K.O5],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]{padding:5px;overflow:hidden;display:flex;flex-direction:row}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{flex:0 0 25%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:auto;-o-object-fit:contain;object-fit:contain;max-width:100%;max-height:100%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px #aaa solid;padding-left:.3rem;margin-left:.3rem;flex:0 0 75%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:200%;margin:0 1rem .3rem .3rem;white-space:normal}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:120%;margin:.3rem 1rem .3rem .3rem;white-space:normal}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem 1rem 0 .3rem;overflow:hidden;justify-content:space-between;flex-wrap:wrap}"]}),W})()},9183:($e,de,u)=>{u.r(de),u.d(de,{NewsCardModule:()=>ae});var m=u(6019),B=u(1574),ce=u(411),K=u(3668);let ae=(()=>{class ie extends B.sw{constructor(){super(ce.H)}}return ie.\u0275fac=function(W){return new(W||ie)},ie.\u0275mod=K.oAB({type:ie}),ie.\u0275inj=K.cJS({providers:[],imports:[[m.ez]]}),ie})()},7722:($e,de,u)=>{u.d(de,{ZV:()=>Ze,tN:()=>ze,_h:()=>be,NA:()=>Me,uC:()=>ye,ZE:()=>Re,NJ:()=>Le,Z2:()=>_e});var m=u(6019),B=u(3668),ce=u(348),K=u(1574),ae=u(5048),Q=u(4499),W=u(559),L=u(2997),I=u(3067),q=u(9417),V=u(7384),ge=u(1676),G=u(4753),me=u(5488),Y=u(461),fe=u(6263),Te=u(9463),le=u(6302),se=u(7867),Se=u(8410),Oe=u(1404),oe=u(9468),Fe=u(22),we=u(3660);let Ze=(()=>{class g{set selected(e){this._selected=(0,ce.Ig)(e)}get selected(){return this._selected}}return g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=B.Xpm({type:g,selectors:[["deja-item"]],inputs:{value:"value",text:"text",selected:"selected"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),g})(),_e=(()=>{class g extends K.yl{constructor(){super(),this.emptyViewPort={beforeSize:0,afterSize:0,viewPortSize:0,listSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:0,items:[]},this.mode$=new Q.X("fixed"),this.items$=new Q.X([]),this.maxSize$=new Q.X(0),this.ensureItem$=new Q.X(null),this.scrollPosition$=new Q.X(0),this.element$=new W.t(1),this.itemsSize$=new Q.X(0),this.direction$=new Q.X("vertical"),this.viewPortResult$=new Q.X(this.emptyViewPort),this.refresh$=new Q.X(null),this.deleteSizeCache$=new Q.X(!0),this.measureViewPort={beforeSize:0,afterSize:2e5,viewPortSize:0,listSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:void 0,items:[]},this._mode="fixed",this._itemsSize=g.itemDefaultSize,this._direction="vertical",this._scrollPosition=0,this.ignoreScrollCount=0,this.viewPort$=this.viewPortResult$;const e=()=>"horizontal"===this._direction?window.innerWidth:window.innerHeight,t=d=>Math.ceil("horizontal"===this._direction?d.clientWidth:d.clientHeight),r=(d,x,M,E,C)=>{const H=[];let Z,$,D,A=0,b=0,U=0;if(C&&void 0!==C.index&&C.atEnd){let R=d.length;for(;--R>=0;){const X=d[R],ee=X.size||E;C.index===R&&($=R),void 0!==$?void 0===Z?(b+=ee,H.unshift(X),(b>x||0===R)&&(Z=R,D=b-x)):(D+=ee,A+=ee):U+=ee}}else d.forEach((R,X)=>{const ee=R.size||E;C&&C.index===X&&(Z=X,D=A),void 0===Z&&(A+ee>=M?Z=X:A+=ee),void 0!==Z&&void 0===$&&(b+=ee,H.push(R)),void 0===$?(A+b>(D||M)+x||X===d.length-1)&&($=X):U+=ee});return void 0!==(null==C?void 0:C.index)&&b<x&&H.length<d.length?r(d,x,M,E,C.atEnd?{index:0,atEnd:!1}:{index:d.length-1,atEnd:!0}):(0,L.of)({beforeSize:A,afterSize:U,listSize:x,viewPortSize:b,visibleItems:H,startIndex:Z||0,endIndex:$,scrollPos:D,items:d})},o=(d,x,M,E,C,H,Z)=>r(d,x,M,C,H).pipe((0,I.w)($=>!Z&&$.visibleItems.find(b=>!b.size)?(this.viewPortResult$.next($),(0,q.H)(1).pipe((0,V.b)(()=>{const b=E.getElementsByClassName("listitem");for(let U=0;U<b.length;U++){const D=b[U],R=+D.getAttribute("flat"),X=$.visibleItems[R-$.startIndex];X&&(X.size=t(D))}$.viewPortSize=$.visibleItems.reduce((U,D)=>U+(D.size||C),0)}),(0,I.w)(()=>r(d,x,$.scrollPos||M,C,H)))):(0,L.of)($))),c=(d,x,M,E,C,H)=>{let $,A,b,Z=0;const U=E.getElementsByClassName("listitem");let D={beforeSize:0,afterSize:0,listSize:x,viewPortSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:0,items:d};if(U.length!==d.length&&(null==H||H))return this.viewPortResult$.next(D),(0,q.H)(1).pipe((0,I.w)(()=>c(d,x,M,E,C,!1)));if(C&&void 0!==C.index&&C.atEnd){b=0;let R=0,X=U.length;for(;--X>=0;){const xe=d[X].size=t(U[X]);C.index===X&&(A=X),void 0!==A&&(void 0===$?(R+=xe,R>x&&($=X,b=R-x)):b+=xe),Z+=xe}}else for(let R=0;R<U.length;R++){const ee=d[R].size=t(U[R]);C&&C.index===R&&($=R,b=Z),Z+=ee,void 0===$&&Z>M&&($=R),void 0===A&&Z>(b||M)+x&&(A=R)}return $=$||0,A=A||0,D={beforeSize:0,afterSize:0,listSize:x,viewPortSize:Z,visibleItems:d.slice($,1+A),startIndex:$,endIndex:A,scrollPos:b,items:d},(0,L.of)(D)},p=(d,x,M,E,C,H,Z)=>{if(!(null==d?void 0:d.length))return(0,L.of)(this.emptyViewPort);let A,$=x||t(E);switch($<=g.itemDefaultSize&&($=e()),void 0!==H.index?this.ignoreScrollCount++:this.ignoreScrollCount=0,this.mode){case"disabled":A=c(d,$,M,E,H,!0);break;case"variable":A=r(d,$,M,C,H);break;case"auto":A=o(d,$,M,E,C,H);break;case"fixed":A=((d,x,M,E,C)=>{const H=Math.ceil(x/E)+1,Z=Math.floor(M/E),$=Math.min(d.length-Z,H);let A,b,U;C&&void 0!==C.index&&C.atEnd?(A=Math.max(0,C.index+1-Math.min(d.length,H)),b=Math.max(C.index,$-1),U=(b+1)*E-x):$<0?(b=d.length-1,A=b+1-Math.min(d.length,H)):void 0!==C.index?(A=C.index,b=A+$-1,U=A*E):(A=Z,b=A+$-1);const D=d.slice(A,b+1);return(0,L.of)({beforeSize:A*E,afterSize:(d.length-b-1)*E,listSize:x,viewPortSize:D.length*E,visibleItems:D,startIndex:A,endIndex:b,scrollPos:U,items:d})})(d,$,M,C,H);break;default:throw new Error("ViewPortService, invalide mode. The value can be disabled, variable, auto and fixed.")}return A.pipe((0,I.w)(b=>{if(!Z){const U=b.beforeSize+b.viewPortSize+b.afterSize-b.listSize;if("disabled"!==this.mode&&$<2*g.itemDefaultSize)return this.viewPortResult$.next(this.measureViewPort),(0,q.H)(1).pipe((0,I.w)(()=>p(d,x,M,E,C,H,!0)));if(U<0||d.length&&U>0&&(b.scrollPos||M)>U)return p(d,x,0,E,C,{index:d.length-1,atEnd:!0},!0);if("auto"===this.mode&&b.viewPortSize<$)return p(d,x,0,E,C,{index:d.length-1,atEnd:!0},!0)}return(0,L.of)(b)}),(0,V.b)(()=>{H.index=void 0}))},S=this.items$;this.ensureParams$=this.ensureItem$.pipe((0,ge.V)(S),(0,G.U)(([d,x])=>{this.ignoreScrollCount=0;const M={};if(null!=d&&(null==x?void 0:x.length)){let E=d;isNaN(E)&&(E=x.findIndex(C=>d===C)),E>=0&&(this.viewPort&&E<=this.viewPort.startIndex?(M.index=E,M.atEnd=!1):(!this.viewPort||E>=this.viewPort.endIndex)&&(M.index=E,M.atEnd=!0))}return M}));const w=this.maxSize$.pipe((0,me.x)()),P=this.refresh$.pipe((0,I.w)(d=>{if(this.ignoreScrollCount=0,d){if(d.clearMeasuredSize)return this.items$.pipe((0,V.b)(x=>{this.lastCalculatedSize=void 0,x.forEach(M=>M.size=void 0)}),(0,G.U)(()=>d));d.items&&d.items.forEach(x=>x.size=void 0)}return(0,L.of)(d)})),F=this.scrollPosition$.pipe((0,G.U)(d=>this._scrollPosition=d||0),(0,G.U)(d=>Math.max(d,0)),(0,Y.h)(()=>!(this.ignoreScrollCount>0&&(this.ignoreScrollCount--,1))),(0,me.x)()),j=this.mode$.pipe((0,G.U)(d=>this._mode=d),(0,me.x)()),_=this.direction$.pipe((0,G.U)(d=>this._direction=d),(0,me.x)()),k=this.itemsSize$.pipe((0,me.x)(),(0,V.b)(d=>this._itemsSize=d)),O=this.element$.pipe((0,V.b)(d=>{d||(this.viewPort=void 0,this.ignoreScrollCount=0,this.lastCalculatedSize=void 0)}));_.pipe((0,ge.V)(S,j,this.deleteSizeCache$),(0,Y.h)(([d,x,M])=>(null==x?void 0:x.length)&&"auto"===M),(0,I.w)(([d,x])=>x),(0,fe.R)(this.destroyed$)).subscribe(d=>d.size=void 0),O.pipe((0,ge.V)(S,P,this.ensureParams$,_,j,k,w),(0,Te.b)(1),(0,ge.V)(F),(0,Y.h)(([[d]])=>!!d),(0,I.w)(([[d,x,M,E,C,H,Z,$],A])=>{Z||(Z=g.itemDefaultSize);const b=this.lastCalculatedSize||$||t(d),U=this._scrollPosition;let D="auto"===$?0:+$;return(null==x?void 0:x.length)&&("auto"===b||b<2*g.itemDefaultSize)?(this.viewPortResult$.next(this.measureViewPort),(0,q.H)(1).pipe((0,G.U)(()=>{if(D=this.lastCalculatedSize=t(d),"fixed"===this.mode)x.length*Z<D&&(D=x.length*Z);else if("variable"===this.mode){let R=0;x.find(X=>(R+=X.size||Z,R>D)),R<D&&(D=R)}return{element:d,scrollPos:U,items:x,maxSizeValue:D,itemDefaultSize:Z,ensureParams:E}}))):(D=D||this.lastCalculatedSize,(0,L.of)({element:d,scrollPos:U,items:x,maxSizeValue:D,itemDefaultSize:Z,ensureParams:E}))}),(0,I.w)(({element:d,scrollPos:x,items:M,maxSizeValue:E,itemDefaultSize:C,ensureParams:H})=>p(M,E,x,d,C,H)),(0,fe.R)(this.destroyed$)).subscribe(d=>{this.viewPortResult$.next(d)},d=>console.error(d)),this.viewPortResult$.pipe((0,fe.R)(this.destroyed$)).subscribe(d=>this.viewPort=d)}get mode(){return this._mode}get itemsSize(){return this._itemsSize}get direction(){return this._direction}deleteSizeCache(){this.deleteSizeCache$.next(!0)}clear(){this.viewPortResult$.next(this.emptyViewPort)}refresh(e){this.refresh$.next(e||null)}}return g.itemDefaultSize=40,g.\u0275fac=function(e){return new(e||g)},g.\u0275prov=B.Yz7({token:g,factory:g.\u0275fac}),g})(),Ce=(()=>{class g{constructor(){console.warn("@deja-js/component/core/SortingService is deprecated, and will be removed in a further version. Please use @deja-js/component/v2/tem-list/SortingService instead.")}sort$(e,t){return(0,L.of)(this.sort(e,t))}sort(e,t){if(null==e?void 0:e.length){const l=t instanceof Array?t:[t];let r=l.length;for(;--r>=0;){const o=l[r];e=(0,Fe.Z)(e,o.name),"descending"===o.order&&(e=e.reverse())}}return e}sortTree$(e,t,l){return l=l||"items",this.sort$(e,t).pipe((0,I.w)(r=>r),(0,I.w)(r=>r&&r[l]?this.sortTree$(r[l],t,l).pipe((0,G.U)(o=>(r[l]=o,r))):(0,L.of)(r)),(0,le.u)((r,o)=>[...r,o],[]))}}return g.\u0275fac=function(e){return new(e||g)},g.\u0275prov=B.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),ye=(()=>{class g{group$(e,t,l="items"){if(!e||0===e.length||!t)return(0,L.of)(e);if(t instanceof Array){let r=(0,L.of)(e);return t.forEach(o=>r=r.pipe((0,I.w)(c=>this.group$(c,o,l)))),r}{const r=t;if(!e[0][l])return this.groupChildren$(e,r,0,l);const o=(c,p)=>(0,se.D)(c).pipe((0,I.w)(S=>{var P;const w=S[l];return(null==(P=w[0])?void 0:P[l])?o(w,p+1).map(()=>S):this.groupChildren$(w,r,p,l).pipe((0,G.U)(F=>(S[l]=F,S)))}),(0,le.u)((S,w)=>[...S,w],[]));return o(e,1)}}groupChildren$(e,t,l,r){return(0,se.D)(e).pipe((0,le.u)((o,c)=>{let p="function"==typeof t.groupByField?t.groupByField(c):c[t.groupByField];"function"==typeof c[p]&&(p=c[p]()),p||(p=this.getTextValue(c));let S=o[p];if(!S){const w=t.groupTextField&&("function"==typeof t.groupTextField?t.groupTextField(c):c[t.groupTextField])||p;S=o[p]={depth:l,toString:()=>w,$text:w},S[r]=[]}return S[r].push(c),o},{}),(0,G.U)(o=>Object.keys(o).map(c=>o[c])),(0,V.b)(o=>o.forEach(c=>{var p;return c.sortField=(null==(p=t.sortInfos)?void 0:p.name)||"toString"})),(0,I.w)(o=>t.sortInfos?(new Ce).sort$(o,t.sortInfos):(0,L.of)(o)))}getTextValue(e){return e?e.displayName?"string"==typeof e.displayName?e.displayName:e.displayName():"function"==typeof e.toString?e.toString():"":""}}return g.\u0275fac=function(e){return new(e||g)},g.\u0275prov=B.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),Le=(()=>{class g{constructor(){this._waiter$=new Q.X(!1),this._cache={},this._childrenField=g.defaultChildrenField,this.compareItems=(e,t)=>{const l=r=>null!=r;if(!l(e)||!l(t))return!1;if(e.equals)return e.equals(t);if(t.equals)return t.equals(e);{const r=e.model,o=e.model;return(null==r?void 0:r.equals)?r.equals(t.model):(null==o?void 0:o.equals)?o.equals(e.model):this.getValue(e,this._valueField)===this.getValue(t,this._valueField)}}}static getItemValue(e,t){var r;const l=o=>null!=o;if(t){const o=t.split(".");let c=void 0!==(null==(r=e.model)?void 0:r[o[0]])?e.model:e;if(o.forEach(p=>{c=null==c?void 0:c[p]}),l(c))return"function"==typeof c?c():c}return l(e.value)?e.value:l(e.model)&&e.model||e}static getItemText(e,t){var l;if(e){if(t){const r=t.split(".");let o=void 0!==(null==(l=e.model)?void 0:l[r[0]])?e.model:e;return r.forEach(c=>{o=null==o?void 0:o[c]}),void 0!==o?"function"==typeof o?o():o:""}if(e.displayName)return"string"==typeof e.displayName?e.displayName:e.displayName();if("function"==typeof e.toString)return e.toString()}return""}get lastQuery(){return this._lastQuery}setLoadingItems(e){this.loadingItems$=e}setSelectingItem(e){this.selectingItem$=e}setUnselectingItem(e){this.unselectingItem$=e}setExpandingItem(e){this.expandingItem$=e}setCollapsingItem(e){this.collapsingItem$=e}get waiter$(){return this._waiter$}set childrenField(e){this._childrenField=e||g.defaultChildrenField,this.invalidateCache()}get childrenField(){return this._childrenField}set hideSelected(e){this._hideSelected=e}get hideSelected(){return this._hideSelected}set valueField(e){this._valueField=e}get valueField(){return this._valueField}get hasCache(){return this._cache&&!!this._cache.visibleList}set items(e){this._items=e,this.invalidateCache()}get items(){return this._items}setItems$(e){if(e){if(e instanceof Array)return this.ensureChildrenProperties(e),this.ensureSelectedItems(e),this.items=e,this._waiter$.next(!1),(0,L.of)(e);{this.items=void 0,this._waiter$.next(!0);let t=e;return void 0===t.subscribe&&(t=(0,se.D)(e)),t.pipe((0,G.U)(l=>l?(this.ensureChildrenProperties(l),this.ensureSelectedItems(l),this.items=[...this.items||[],...l],this._waiter$.next(!1),l):(this.items=[],this._waiter$.next(!1),[])))}}return this.items=void 0,(0,L.of)(null)}setModels$(e){return this.setItems$(e)}get groupInfos(){return this._groupInfos}getItems(){return this.items}getItemFromIndex(e){return this._cache.visibleList?this._cache.visibleList[e]:null}getItemIndex(e){return this._cache.visibleList?this._cache.visibleList.findIndex(t=>this.compareItems(e,t)):-1}getSortingService(){return this._sortingService||(this._sortingService=new Ce),this._sortingService}setSortingService(e){this._sortingService=e}getGroupingService(){return this._groupingService||(this._groupingService=new ye),this._groupingService}setGroupingService(e){this._groupingService=e}getTextValue(e,t){return g.getItemText(e,t)}getValue(e,t){return g.getItemValue(e,t)}drop$(){return new Se.y(e=>{if(!this._ddList||!this.items)return void e.next(!1);const t=this._ddCurrentIndex,l=this._ddList[t];if(!l)throw new Error("invalid drag infos stored in cache.");const r=this._ddList[t-1];let o,c=this._cache.flatList.findIndex(F=>F===r),p=0;for(;c>=0;){const F=this._cache.flatList[c];if(void 0===F.depth){p=c;break}if(F.depth===l.depth-1){o=F;break}F.depth===l.depth&&++p,--c}const S=(F,j)=>{for(let _=0;_<j.length;_++){const k=j[_];if(k===F)return{index:_,list:j};if(void 0!==k.$items){const O=S(F,k.$items);if(O)return O}}},w=S(l,this.items);w.list.splice(w.index,1);const P=o?o.$items:this.items;p>w.index&&w.list===P&&--p,P.splice(p,0,l),this.invalidateCache(),e.next(!0)})}calcDragTargetIndex$(e,t){return new Se.y(l=>{const r=this._ddList||this._cache.visibleList;if(!r)throw new Error("Empty cache on calcDragTargetIndex");const o=void 0!==this._ddCurrentIndex?this._ddCurrentIndex:e;if(o>=r.length)return void l.next(r.length-1);const c=r[o],p=o;if(void 0!==c.depth&&t!==o){if(t<o){let S=0;for(let w=o-1;w>=0;w--)if(r[w].depth<=c.depth){S=w;break}if(t<=S)for(let w=t;w<=S;w++){const P=r[w];if(P.depth===c.depth)return void l.next(w);if(P.depth===c.depth-1)return void l.next(w+1)}}if(t>o){let S=r.length-1;for(let w=o+1;w<r.length;w++)if(r[w].depth<=c.depth){S=w;break}if(t>=S){for(let P=t+1;P<r.length;P++){const F=r[P];if(F.depth===c.depth)return void l.next(P);if(F.depth===c.depth-1)return void l.next(P-1)}if(r[S].depth===c.depth)return void l.next(S)}}}l.next(p)})}toggleAll$(e){return(0,L.of)(this._cache.flatList).pipe((0,G.U)(t=>t.filter(l=>{var r;return l.$items&&(null==(r=l.collapsible)||r)})),(0,V.b)(()=>delete this._cache.visibleList),(0,I.w)(t=>e?this.collapseItems$(t):this.expandItems$(t)))}toggleCollapse$(e,t){var c;const l=this._cache.visibleList;if(!l||!l.length)throw new Error("Empty cache on toggleCollapse");const r=l[e];return!r||null!=(c=r.collapsible)&&!c?(0,L.of)([]):(void 0!==t?t:!r.collapsed)?this.collapseItem$(r):this.expandItem$(r)}expandItems$(e){return(0,se.D)(e||[]).pipe((0,I.w)(t=>this.expandItem$(t)),(0,le.u)((t,l)=>[...t,l],[]))}collapseItems$(e){return(0,se.D)(e||[]).pipe((0,I.w)(t=>this.collapseItem$(t)),(0,le.u)((t,l)=>[...t,l],[]))}expandItem$(e){return(0,L.of)(e).pipe((0,Y.h)(t=>!!t),(0,I.w)(t=>this.expandingItem$?this.expandingItem$(t):(0,L.of)(t)),(0,Y.h)(t=>!!t),(0,V.b)(t=>{t.collapsed=!1,delete this._cache.visibleList}))}collapseItem$(e){return(0,L.of)(e).pipe((0,Y.h)(t=>!!t),(0,I.w)(t=>this.collapsingItem$?this.collapsingItem$(t):(0,L.of)(t)),(0,Y.h)(t=>!!t),(0,V.b)(t=>{t.collapsed=!0,delete this._cache.visibleList}))}getSelectedItems(){return this.selectedList||[]}setSelectedItems(e){this.selectedList&&this.selectedList.forEach(t=>{t.selected=!1}),this.selectedList=e,this.hideSelected&&delete this._cache.visibleList,this.ensureSelectedItems(this.items)}unselectAll$(){this.hideSelected&&delete this._cache.visibleList;const e=this.selectedList;return this.selectedList=[],this.unSelectItems$(e)}selectRange$(e,t){void 0===t&&(t=e);const l=this._cache.visibleList;if(!l||!l.length)throw new Error("Empty cache on selection");return this.unselectAll$().pipe((0,G.U)(()=>l.slice(Math.min(e,t),1+Math.max(e,t))),(0,G.U)(r=>r.filter(o=>{var c;return null==(c=o.selectable)||c})),(0,V.b)(()=>{this.hideSelected&&delete this._cache.visibleList}),(0,I.w)(r=>this.selectItems$(r).pipe((0,G.U)(o=>o.length))))}toggleSelect$(e,t){return function(g,s,e){return(0,ae.P)(()=>t?s:e)}(0,this.selectItems$(e=e||[]),this.unSelectItems$(e)).pipe((0,G.U)(()=>(this.hideSelected&&delete this._cache.visibleList,this.selectedList)))}selectItems$(e){return(0,se.D)(e||[]).pipe((0,I.w)(t=>this.selectItem$(t)),(0,le.u)((t,l)=>[...t,l],[]))}unSelectItems$(e){return(0,se.D)(e||[]).pipe((0,Y.h)(t=>t.selected),(0,I.w)(t=>this.unSelectItem$(t)),(0,le.u)((t,l)=>[...t,l],[]))}selectItem$(e){return(0,L.of)(e).pipe((0,Y.h)(t=>!!t),(0,I.w)(t=>this.selectingItem$?this.selectingItem$(t):(0,L.of)(t)),(0,Y.h)(t=>!!t),(0,V.b)(t=>{this.selectedList||(this.selectedList=[]),t.selected=!0,this.selectedList.push(t)}))}unSelectItem$(e){return(0,L.of)(e).pipe((0,Y.h)(t=>!!t),(0,I.w)(t=>this.unselectingItem$?this.unselectingItem$(t):(0,L.of)(t)),(0,Y.h)(t=>!!t),(0,V.b)(t=>{var l;if(t.selected=!1,null==(l=this.selectedList)?void 0:l.length){const r=this.selectedList.findIndex(o=>this.compareItems(o,t));r>=0&&this.selectedList.splice(r,1)}}))}findNextMatch$(e,t){let l={index:-1};const r=this._cache.visibleList;if(!r||!r.length)throw new Error("Empty cache on findNextMatch");if(r.length){(t<0||t>=r.length)&&(t=-1);let o=t+1;for(;o!==t;){const c=r[o];if(e(c,o)){l={index:o,item:c};break}if(o++,o>=r.length){if(-1===t)break;o=0}}}return(0,L.of)(l)}sort$(e){if(!this.items)throw new Error("No Items");const t=this.getSortingService().sortTree$(this._cache.groupedList,e,"$items").pipe((0,V.b)(l=>{this._cache.groupedList=l,this.invalidateViewCache()}));return this._cache.groupedList&&0!==this._cache.groupedList.length?t:this.getGroupedList$(this.items).pipe((0,V.b)(l=>this._cache.groupedList=l),(0,I.w)(()=>t))}group$(e){return this._groupInfos=e,this.invalidateCache(),this.ensureChildrenProperties(this.items),(0,L.of)(e)}ungroup$(e){const t=this._groupInfos?this._groupInfos.findIndex(l=>l.groupByField===e.groupByField):-1;return t>=0&&this._groupInfos.splice(t,1),this.invalidateCache(),this.ensureChildrenProperties(this.items),(0,L.of)(e)}getParentListInfos$(e,t){return this.ensureFlatListCache$(!0,t).pipe((0,I.w)(r=>{let c,o=r.findIndex(p=>p===e);if(o<0)throw new Error("Item not found.");if(e.depth){let p=0;for(;--o>=0;){const S=r[o];S.depth<e.depth&&(c={index:p,parent:S}),p++}}else c={index:this.items.findIndex(S=>S===e)};return(0,L.of)(c)}))}invalidateCache(){this._cache={},this.ensureChildrenProperties(this.items)}invalidateRowsHeightCache(){this._items&&this._items.forEach(e=>e.size=void 0)}getViewList$(e,t,l,r,o,c){var j;const p={},S=(null==t?void 0:t.toString())!==(null==(j=this._lastQuery)?void 0:j.toString());let P;if(l=l||S||!this.items||!this.items.length,this._lastQuery=t,t)if("string"==typeof t)try{const _=(_=>(["\\","/","|","&",";","$","%","@",'"',"<",">","(",")","+"].forEach(O=>_=_.replace(O,`\\${O}`)),_))(t=(new K.R5).remove(t));P=new RegExp(_,"i")}catch(_){console.log("Invalid search parameters")}else P=t,void 0===P.test&&(P=void 0);const F=()=>{let _;if(void 0!==r&&void 0!==o&&r!==o){if(!this._ddList){this._ddList=[...this._cache.visibleList];const d=this._ddList[r].depth;let x=r;if(void 0!==d)for(let M=r+1;M<this._ddList.length&&!(this._ddList[M].depth<=d);M++)x=M;this._ddChildCount=x-r+1,this._ddCurrentIndex=r}const k=this._ddList.splice(this._ddCurrentIndex,this._ddChildCount);o>this._ddCurrentIndex&&(o-=this._ddChildCount,++o),this._ddCurrentIndex=o,k.forEach(O=>this._ddList.splice(o++,0,O)),_=this._ddList}else delete this._ddList,delete this._ddCurrentIndex,delete this._ddChildCount,_=this._cache.visibleList||[];return p.depthMax=this._cache.depthMax,p.visibleList=_,p};return l?(this.waiter$.next(!0),(S||!this.items||!this.items.length)&&(this.internalQuery=P),this.getItemList$(t,this.selectedList).pipe((0,V.b)(_=>{(!this.items||!this.items.length)&&this.ensureSelectedItems(_),_!==this.items&&(this.items=_,this.internalQuery=void 0,this.ensureChildrenProperties(_)),delete this._cache.visibleList,this.waiter$.next(void 0===this.items)}),(0,I.w)(()=>this.ensureVisibleListCache$(e,this.internalQuery,S,c)),(0,G.U)(F))):this.ensureVisibleListCache$(e,this.internalQuery,S,c).pipe((0,G.U)(F))}ensureSelection(){return this.ensureSelectedItems(this.items)}getItemList$(e,t){return this.loadingItems$?this.loadingItems$(e,t):(0,L.of)(this.items)}itemMatch(e,t,l){if(e.$items)return!0;const o=e[t],c="function"==typeof o?o():o||this.getTextValue(e,t);return c&&l.test((new K.R5).remove(c))}getGroupedList$(e){return e?this.getGroupingService().group$(this.items,this.groupInfos,"$items"):(0,L.of)([])}getVisibleList$(e,t,l,r,o){if(!e)return(0,L.of)([]);let c=[];const p=[];let S=!1;if(l){const w=(P,F,j)=>{let _;return P&&P.forEach(k=>{const O=k;if(O.$items){if(this.isVisible(O)&&this.itemMatch(O,t,l)){S=!1;const d=w(O.$items,F+1,j);d&&(O.collapsed&&r&&(O.collapsed=!1),_=_?O.collapsed&&[..._,O]||[..._,O,...d]:O.collapsed&&[O]||[O,...d],O.selected&&p.push(O))}}else this.itemMatch(k,t,l)&&(O.depth=F,_||(_=[]),!j&&this.isVisible(k)&&!(k.selected&&this.hideSelected)&&(O.odd=S,S=!S,_.push(O))),O.selected&&p.push(O)}),_};c=w(e||[],0,!1)||[]}else{const w=(P,F,j)=>{P&&P.forEach(_=>{!j&&this.isVisible(_)&&!(_.selected&&this.hideSelected)&&(_.odd=S,S=!S,c.push(_)),_.selected&&p.push(_),_.$items&&(S=!1,w(_.$items,F+1,j||_.collapsed||!this.isVisible(_)))})};w(e,0,!1)}return(0,L.of)(c).pipe((0,V.b)(()=>{o||(this.selectedList=p)}))}getFlatList$(e,t,l){if(!e)return(0,L.of)([]);const r=[],o=[];let c=0,p=!1,S=!1;const w=(P,F,j)=>(0,se.D)(P||[]).pipe((0,V.b)(_=>{F>c&&(c=F),_.depth=F,!j&&this.isVisible(_)&&!(_.selected&&this.hideSelected)&&(_.odd=S,S=!S,r.push(_)),_.selected&&o.push(_)}),(0,I.w)(_=>_.$items?(p=!0,S=!1,(0,Oe.z)((0,L.of)(_),w(_.$items,F+1,j||_.collapsed))):(0,L.of)(_)));return w(e,0,!1).pipe((0,V.b)(()=>{l||(this.selectedList=o),t||(this._cache.visibleList=r),this._cache.depthMax=p?c:0}),(0,le.u)((P,F)=>(P.push(F),P),[]))}invalidateViewCache(){delete this._cache.flatList,delete this._cache.visibleList,delete this._cache.depthMax,this._cache.rowsCount=0}ensureSelectedItems(e){if(this.selectedList&&this.selectedList.length>0){if(this.selectedList.forEach(r=>r.selected=!0),!e)return this.selectedList;const t=[],l=r=>{r.forEach(o=>{const c=this.selectedList.find(p=>this.compareItems(p,o));c&&(c.selected=!1,t.push(o)),o.$items&&l(o.$items)})};l(e),this.selectedList.filter(r=>r.selected).forEach(r=>t.push(r)),this.selectedList=t,this.selectedList.forEach(r=>r.selected=!0)}else{if(this.selectedList=[],!e)return this.selectedList;const t=l=>{l.forEach(r=>{r.selected&&this.selectedList.push(r),r.$items&&t(r.$items)})};t(e)}return this.selectedList}ensureVisibleListCache$(e,t,l,r){var o;return(null==(o=this._cache.visibleList)?void 0:o.length)?(0,L.of)(this._cache.visibleList):this.ensureFlatListCache$(!!t,r).pipe((0,I.w)(()=>this.getVisibleList$(this._cache.groupedList,e,t,l,r)),(0,V.b)(c=>{this._cache.visibleList=c,this._cache.rowsCount=c.length}))}ensureFlatListCache$(e,t){var l;return(null==(l=this._cache.flatList)?void 0:l.length)?(0,L.of)(this._cache.flatList):this.ensureGroupedListCache$().pipe((0,I.w)(()=>this.getFlatList$(this._cache.groupedList,e,t)),(0,V.b)(r=>{var o;(null==(o=this._cache.flatList)?void 0:o.length)&&this._cache.flatList!==r&&(delete this._cache.visibleList,this._cache.rowsCount=0,this._cache.depthMax=0,r&&r.forEach(c=>{c.depth&&c.depth>this._cache.depthMax&&(this._cache.depthMax=c.depth)})),this._cache.flatList=r}))}ensureGroupedListCache$(){var e;return(null==(e=this._cache.groupedList)?void 0:e.length)?(0,L.of)(this._cache.groupedList):this.groupInfos&&0!==this.groupInfos.length?this.items?this.getGroupedList$(this.items).pipe((0,V.b)(t=>{var l;(null==(l=this._cache.groupedList)?void 0:l.length)&&this._cache.groupedList!==t&&this.invalidateViewCache(),this._cache.groupedList=t})):(0,L.of)([]):(0,L.of)(this.items).pipe((0,V.b)(t=>this._cache.groupedList=t))}ensureChildrenProperties(e){!e||e.forEach(t=>{const l=t[this.childrenField];l&&(t.$items=l,this.ensureChildrenProperties(t.$items))})}isVisible(e){var t;return null==(t=e.visible)||t}}return g.defaultChildrenField="items",g.defaultTextField="displayName",g.defaultValueField="value",g})();class Re extends K.yl{constructor(s,e){super(),this.changeDetectorRef=s,this.viewPort=e,this._waiter=!0,this._itemList=[],this._multiSelect=!1,this._currentItemIndex=-1,this._minSearchLength=0,this._vpBeforeHeight=0,this._vpAfterHeight=0,this._vpStartRow=0,this._vpEndRow=0,this._pageSize=0,this._depthMax=0,this.rowsCount=0,this.allCollapsed=!1,this._viewPortRowHeight=_e.itemDefaultSize,this._listElementId=`listcontainer_${(1e9*Math.random()).toString().substr(10)}`,e.viewPort$.pipe((0,I.w)(t=>{var r;let l=(0,L.of)(null);return delete this._hintLabel,"disabled"===e.mode?(this._itemList=t.items,this._vpStartRow=0,this._vpEndRow=0,this._vpBeforeHeight=0,this._vpAfterHeight=0):(this._itemList=t.visibleItems,this._vpStartRow=t.startIndex,this._vpEndRow=t.endIndex,this._vpBeforeHeight=t.beforeSize,this._vpAfterHeight=t.afterSize),void 0!==t.scrollPos&&this.listElement&&(this.listElement.getElementsByClassName("listitem").length!==t.visibleItems.length?l=(0,q.H)(1).pipe((0,Y.h)(()=>!!this.listElement),(0,V.b)(()=>this.listElement.scrollTop=t.scrollPos)):this.listElement.scrollTop=t.scrollPos),this.changeDetectorRef.markForCheck(),null==(r=this._viewPortChanged)||r.next(t),l}),(0,fe.R)(this.destroyed$)).subscribe()}get isMultiSelect(){return this._multiSelect}get itemList(){return this._itemList}get treeItemList(){return this._itemList}get ddStartIndex(){return this._ddStartIndex}get vpBeforeHeight(){return this._vpBeforeHeight}get vpAfterHeight(){return this._vpAfterHeight}get vpStartRow(){return this._vpStartRow}get vpEndRow(){return this._vpEndRow}get sortInfos(){return this._sortInfos}get groupInfos(){return this._itemListService.groupInfos}setHideSelected(s){this._hideSelected=s,this._itemListService&&(this._itemListService.hideSelected=s)}setChildrenField(s){this._childrenField=s,this._itemListService&&(this._itemListService.childrenField=s)}getItemIndexFromHTMLElement(s){for(;(null==s?void 0:s.parentElement)&&s.hasAttribute&&!s.hasAttribute("flat")&&s.parentElement.id!==this.listElementId;)s=s.parentElement;if(s&&s.hasAttribute("flat"))return+s.getAttribute("flat")}getItemFromHTMLElement(s){const e=this.getItemIndexFromHTMLElement(s);if(void 0!==e)return this._itemList[e-this.vpStartRow]}getItemListService(){return this._itemListService||this.setItemListService(new Le),this._itemListService}getSelectedItems(){return this.getItemListService().getSelectedItems()}setSelectedItems(s){this.getItemListService().setSelectedItems(s),this.changeDetectorRef.markForCheck()}setLoadingItems(s){this.getItemListService().setLoadingItems(s)}setSelectingItem(s){this.getItemListService().setSelectingItem(s)}setUnselectingItem(s){this.getItemListService().setUnselectingItem(s)}setExpandingItem(s){this.getItemListService().setExpandingItem(s)}setCollapsingItem(s){this.getItemListService().setCollapsingItem(s)}getTextValue(s){return this.getItemListService().getTextValue(s,this._textField)}setViewportMode(s){this.viewPort.mode$.next(s)}sort(s){this.sort$(s).pipe((0,oe.q)(1),(0,fe.R)(this.destroyed$)).subscribe()}sort$(s){const e=s||this._textField;return this._sortInfos?e===this._sortInfos.name?this._sortInfos.order="ascending"===this._sortInfos.order?"descending":"ascending":(this._sortInfos.name=e,this._sortInfos.order="ascending"):this._sortInfos={name:e,order:"ascending"},this.getItemListService().sort$(this._sortInfos).pipe((0,oe.q)(1),(0,I.w)(t=>this.calcViewList$().pipe((0,oe.q)(1),(0,G.U)(()=>t))))}group$(s){return this.getItemListService().group$(s).pipe((0,I.w)(()=>this.calcViewList$().pipe((0,oe.q)(1))))}ungroup$(s){return this.getItemListService().ungroup$(s).pipe((0,I.w)(()=>this.calcViewList$().pipe((0,oe.q)(1))))}toggleAll$(s){return this.allCollapsed=void 0!==s?s:!this.allCollapsed,"disabled"===this.viewPort.mode?(0,se.D)(this._itemList).pipe((0,Y.h)(e=>{var t;return e.$items&&0===e.depth&&(null==(t=e.collapsible)||t)}),(0,I.w)((e,t)=>this.toggleCollapse$(t+this.vpStartRow,this.allCollapsed)),(0,le.u)((e,t)=>(e.push(t),e),[])):this.getItemListService().toggleAll$(this.allCollapsed)}toggleCollapse$(s,e){return this.getItemListService().toggleCollapse$(s,e).pipe((0,I.w)(t=>this.calcViewList$().pipe((0,oe.q)(1),(0,G.U)(()=>t))))}unselectAll$(){return this.getItemListService().unselectAll$()}refresh(){this.getItemListService().invalidateCache(),this.calcViewList$().pipe((0,oe.q)(1),(0,fe.R)(this.destroyed$)).subscribe()}refreshViewPort(s,e){const t={};s&&(t.items=s instanceof Array?s:[s]),e&&(t.clearMeasuredSize=e),this.viewPort.refresh(t),this.changeDetectorRef.markForCheck()}clearViewPort(){this.viewPort.clear()}clearRowsHeight(){this.getItemListService().invalidateRowsHeightCache()}getParentListInfos$(s){return this.getItemListService().getParentListInfos$(s,this._multiSelect)}get listElementId(){return this._listElementId}get listElement(){return this._listElement||document.getElementById(this.listElementId)}set listElement(s){this._listElement=s}getViewPortRowHeight(){return this._viewPortRowHeight||_e.itemDefaultSize}getCurrentItemIndex(){return this._currentItemIndex}getCurrentItem(){return!this._currentItem&&this._currentItemIndex>=0&&(this._currentItem=this.getItemListService().getItemFromIndex(this._currentItemIndex)),this._currentItem}getItemHeight(s){return"disabled"===this.viewPort.mode?null:"fixed"===this.viewPort.mode?this.getViewPortRowHeight():"auto"===this.viewPort.mode?s.size||null:s.size&&s.size>_e.itemDefaultSize?s.size:this.getViewPortRowHeight()}getSelectedModels(){return this.getItemListService().getSelectedItems().map(s=>void 0!==s.model?s.model:s)}setSelectedModels(s){this.setSelectedItems(s&&this.mapToIItemBase(s,!0))}findNextMatch$(s,e){return this.ensureListCaches$().pipe((0,I.w)(()=>this.getItemListService().findNextMatch$(s,e)))}setViewPortRowHeight(s){this._viewPortRowHeight=(0,ce.su)(s),s&&this.viewPort.itemsSize$.next(this._viewPortRowHeight)}setItemListService(s){this.waiter$sub&&(this.waiter$sub.unsubscribe(),this.waiter$sub=void 0),this._itemListService=s,this._itemListService&&(this._itemListService.hideSelected=this._hideSelected,this._itemListService.childrenField=this._childrenField,this._itemListService.valueField=this._valueField,this.waiter$sub=this._itemListService.waiter$.pipe((0,fe.R)(this.destroyed$)).subscribe(e=>{this._waiter=e,this.changeDetectorRef.markForCheck()}))}setSortingService(s){!s&&!this._itemListService||this._itemListService.setSortingService(s)}setGroupingService(s){!s&&!this._itemListService||this._itemListService.setGroupingService(s)}setHintLabel(s){this._hintLabel=s}setNodataLabel(s){this._nodataLabel=s}setCurrentItemIndex(s){this._currentItemIndex=s,this._currentItem=null}setCurrentItem(s){this._currentItemIndex=s?this.getItemListService().getItemIndex(s):-1,this._currentItem=s}getItemIndex(s){return s&&this.getItemListService()?this.getItemListService().getItemIndex(s):-1}setMultiSelect(s){this._multiSelect=s}setItems$(s){return s instanceof Array||this.clearViewPort(),this.getItemListService().setItems$(s)}setModels$(s){let e;e=s instanceof Array?(0,L.of)(s):s;const t=null==e?void 0:e.pipe((0,G.U)(l=>this.mapToIItemBase(l)));return this.setItems$(t)}getItems(){return this.getItemListService().getItems()}drop$(){return this.setCurrentItemIndex(-1),this.getItemListService().drop$()}getViewList$(s,e){if("string"==typeof s&&(s||"").length<this._minSearchLength){const t={depthMax:0,visibleList:[]};return this.getItems()?(0,L.of)(t):this.setItems$([]).pipe((0,G.U)(()=>t))}return this.getItemListService().getViewList$(this._searchField||this._textField,s,e,this._ddStartIndex,this._ddTargetIndex,this._multiSelect)}selectRange$(s,e){const t=this.getItemListService();return this.ensureListCaches$().pipe((0,I.w)(()=>t.selectRange$(s,e)))}toggleSelect$(s,e){return this.getItemListService().toggleSelect$(s,e)}isCollapsible(s){var e;return(null==s?void 0:s.$items)&&(null==(e=s.collapsible)||e)}isSelectable(s){var e;return s&&(null==(e=s.selectable)||e)}setTextField(s){this._textField=s}getTextField(){return this._textField||Le.defaultTextField}setValueField(s){this._valueField=s,this._itemListService&&(this._itemListService.valueField=s)}getValueField(){return this._valueField||Le.defaultValueField}setSearchField(s){this._searchField=s}setMaxHeight(s){this._maxHeight="auto"===s?null:+s||null,this.viewPort.maxSize$.next(s)}getMaxHeight(){return this._maxHeight}calcDragTargetIndex$(s,e){return this.ensureListCaches$().pipe((0,I.w)(()=>this.getItemListService().calcDragTargetIndex$(s,e)))}getItemTreeInfo(s,e){const t=s.findIndex(p=>p===e);if(t<0)return null;const r=e.depth;let o=t;const c=[];if(void 0!==r)for(let p=t+1;p<s.length;p++){const S=s[p];if(S.depth<=r)break;c.push(S),o=p}return{children:c,item:e,lastIndex:o,startIndex:t}}calcViewList$(s){return this.getViewList$(s).pipe((0,V.b)(e=>{void 0!==e.depthMax&&(this._depthMax=e.depthMax),this.rowsCount=e.visibleList.length,this.viewPort.items$.next(e.visibleList)}))}ensureListCaches$(){return this._itemListService.hasCache?(0,L.of)(null):this.getViewList$()}ensureItemVisible(s){this.viewPort.ensureItem$.next(s)}mapToIItemBase(s,e){return(s||[]).map(l=>{const r={};r.model=l;const o=this.getTextField(),c=this.getValueField();"string"==typeof l?(r[o]=l,r[c]=l,this._searchField&&(r[this._searchField]=l)):(r[o]=this.getTextValue(l),r[c]=l[c],this._searchField&&(r[this._searchField]=l[this._searchField]));const p=this.getItemListService().childrenField;return l[p]?r[p]=this.mapToIItemBase(l[p],e):r.selected=e||void 0,r})}getVirtualSelectedEntities(s){const e=t=>{"string"==typeof t&&(t=t.trim());const l={},r=this.getTextField(),o=this.getValueField();return l[r]=t.toString(),l[o]=t,l};if(s){const t=typeof s;if("string"===t||"number"===t)s=this._multiSelect?s.split(",").map(e):e(s);else if(s instanceof Array&&s.length){const l=typeof s[0];("string"===l||"number"===l)&&(s=this._multiSelect?s.map(e):e(s[0]))}else s instanceof Array&&!this._multiSelect&&(s=null)}return s}}let be=(()=>{class g{}return g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=B.Xpm({type:g,selectors:[["deja-sort-indicator"]],inputs:{sortInfos:["sort-infos","sortInfos"]},decls:3,vars:1,template:function(e,t){1&e&&(B.TgZ(0,"span"),B.TgZ(1,"mat-icon"),B._uU(2,"arrow_upward"),B.qZA(),B.qZA()),2&e&&B.uIk("sortorder",t.sortInfos?t.sortInfos.order:null)},directives:[we.Hw],styles:['[_nghost-%COMP%]{display:block;position:relative;width:1rem}[_nghost-%COMP%]   [sortorder][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);transition:all .5s linear;padding:.3rem;zoom:72%}[_nghost-%COMP%]   [sortorder="1"][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}']}),g})(),Me=(()=>{class g{}return g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=B.oAB({type:g}),g.\u0275inj=B.cJS({imports:[[we.Ps]]}),g})(),ze=(()=>{class g{}return g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=B.oAB({type:g}),g.\u0275inj=B.cJS({imports:[[m.ez]]}),g})()},22:($e,de,u)=>{u.d(de,{Z:()=>wi});var m=u(3742),B=u(3749),ce=u(6247),K=u(6874),ae=B.Z?B.Z.isConcatSpreadable:void 0;const Q=function(i){return(0,K.Z)(i)||(0,ce.Z)(i)||!!(ae&&i&&i[ae])},L=function W(i,n,h,a,v){var f=-1,y=i.length;for(h||(h=Q),v||(v=[]);++f<y;){var T=i[f];n>0&&h(T)?n>1?W(T,n-1,h,a,v):(0,m.Z)(v,T):a||(v[v.length]=T)}return v},q=function(i,n){for(var h=-1,a=null==i?0:i.length,v=Array(a);++h<a;)v[h]=n(i[h],h,i);return v};var V=u(9250),ge=u(1467);const Y=function(i){return"symbol"==typeof i||(0,ge.Z)(i)&&"[object Symbol]"==(0,V.Z)(i)};var fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/;const se=function(i,n){if((0,K.Z)(i))return!1;var h=typeof i;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=i&&!Y(i))||Te.test(i)||!fe.test(i)||null!=n&&i in Object(n)};var Se=u(3882);function oe(i,n){if("function"!=typeof i||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var h=function(){var a=arguments,v=n?n.apply(this,a):a[0],f=h.cache;if(f.has(v))return f.get(v);var y=i.apply(this,a);return h.cache=f.set(v,y)||f,y};return h.cache=new(oe.Cache||Se.Z),h}oe.Cache=Se.Z;const Fe=oe;var Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ye=/\\(\\)?/g,Le=function(i){var n=Fe(i,function(a){return 500===h.size&&h.clear(),a}),h=n.cache;return n}(function(i){var n=[];return 46===i.charCodeAt(0)&&n.push(""),i.replace(Ce,function(h,a,v,f){n.push(v?f.replace(ye,"$1"):a||h)}),n});const Re=Le;var De=B.Z?B.Z.prototype:void 0,be=De?De.toString:void 0;const ze=function Me(i){if("string"==typeof i)return i;if((0,K.Z)(i))return q(i,Me)+"";if(Y(i))return be?be.call(i):"";var n=i+"";return"0"==n&&1/i==-1/0?"-0":n},s=function(i){return null==i?"":ze(i)},t=function(i,n){return(0,K.Z)(i)?i:se(i,n)?[i]:Re(s(i))},o=function(i){if("string"==typeof i||Y(i))return i;var n=i+"";return"0"==n&&1/i==-1/0?"-0":n},p=function(i,n){for(var h=0,a=(n=t(n,i)).length;null!=i&&h<a;)i=i[o(n[h++])];return h&&h==a?i:void 0};var S=u(5180);function k(i){var n=-1,h=null==i?0:i.length;for(this.__data__=new Se.Z;++n<h;)this.add(i[n])}k.prototype.add=k.prototype.push=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},k.prototype.has=function(i){return this.__data__.has(i)};const O=k,x=function(i,n){for(var h=-1,a=null==i?0:i.length;++h<a;)if(n(i[h],h,i))return!0;return!1},E=function(i,n){return i.has(n)},$=function(i,n,h,a,v,f){var y=1&h,T=i.length,z=n.length;if(T!=z&&!(y&&z>T))return!1;var N=f.get(i),ne=f.get(n);if(N&&ne)return N==n&&ne==i;var te=-1,J=!0,ue=2&h?new O:void 0;for(f.set(i,n),f.set(n,i);++te<T;){var re=i[te],he=n[te];if(a)var pe=y?a(he,re,te,n,i,f):a(re,he,te,i,n,f);if(void 0!==pe){if(pe)continue;J=!1;break}if(ue){if(!x(n,function(Ie,ve){if(!E(ue,ve)&&(re===Ie||v(re,Ie,h,a,f)))return ue.push(ve)})){J=!1;break}}else if(re!==he&&!v(re,he,h,a,f)){J=!1;break}}return f.delete(i),f.delete(n),J};var A=u(1818),b=u(9516);const D=function(i){var n=-1,h=Array(i.size);return i.forEach(function(a,v){h[++n]=[v,a]}),h},X=function(i){var n=-1,h=Array(i.size);return i.forEach(function(a){h[++n]=a}),h};var He=B.Z?B.Z.prototype:void 0,Ve=He?He.valueOf:void 0;var Ue=u(6157),vt=Object.prototype.hasOwnProperty;var Ne=u(7066),Ge=u(8802),Lt=u(4609),Xe="[object Arguments]",Ke="[object Array]",Ee="[object Object]",Qe=Object.prototype.hasOwnProperty;const Ct=function(i,n,h,a,v,f){var y=(0,K.Z)(i),T=(0,K.Z)(n),z=y?Ke:(0,Ne.Z)(i),N=T?Ke:(0,Ne.Z)(n),ne=(z=z==Xe?Ee:z)==Ee,te=(N=N==Xe?Ee:N)==Ee,J=z==N;if(J&&(0,Ge.Z)(i)){if(!(0,Ge.Z)(n))return!1;y=!0,ne=!1}if(J&&!ne)return f||(f=new S.Z),y||(0,Lt.Z)(i)?$(i,n,h,a,v,f):function(i,n,h,a,v,f,y){switch(h){case"[object DataView]":if(i.byteLength!=n.byteLength||i.byteOffset!=n.byteOffset)return!1;i=i.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=n.byteLength||!f(new A.Z(i),new A.Z(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,b.Z)(+i,+n);case"[object Error]":return i.name==n.name&&i.message==n.message;case"[object RegExp]":case"[object String]":return i==n+"";case"[object Map]":var T=D;case"[object Set]":if(T||(T=X),i.size!=n.size&&!(1&a))return!1;var N=y.get(i);if(N)return N==n;a|=2,y.set(i,n);var ne=$(T(i),T(n),a,v,f,y);return y.delete(i),ne;case"[object Symbol]":if(Ve)return Ve.call(i)==Ve.call(n)}return!1}(i,n,z,h,a,v,f);if(!(1&h)){var ue=ne&&Qe.call(i,"__wrapped__"),re=te&&Qe.call(n,"__wrapped__");if(ue||re){var he=ue?i.value():i,pe=re?n.value():n;return f||(f=new S.Z),v(he,pe,h,a,f)}}return!!J&&(f||(f=new S.Z),function(i,n,h,a,v,f){var y=1&h,T=(0,Ue.Z)(i),z=T.length;if(z!=(0,Ue.Z)(n).length&&!y)return!1;for(var te=z;te--;){var J=T[te];if(!(y?J in n:vt.call(n,J)))return!1}var ue=f.get(i),re=f.get(n);if(ue&&re)return ue==n&&re==i;var he=!0;f.set(i,n),f.set(n,i);for(var pe=y;++te<z;){var Ie=i[J=T[te]],ve=n[J];if(a)var it=y?a(ve,Ie,J,n,i,f):a(Ie,ve,J,i,n,f);if(!(void 0===it?Ie===ve||v(Ie,ve,h,a,f):it)){he=!1;break}pe||(pe="constructor"==J)}if(he&&!pe){var Pe=i.constructor,Ae=n.constructor;Pe!=Ae&&"constructor"in i&&"constructor"in n&&!("function"==typeof Pe&&Pe instanceof Pe&&"function"==typeof Ae&&Ae instanceof Ae)&&(he=!1)}return f.delete(i),f.delete(n),he}(i,n,h,a,v,f))},Ye=function We(i,n,h,a,v){return i===n||(null==i||null==n||!(0,ge.Z)(i)&&!(0,ge.Z)(n)?i!=i&&n!=n:Ct(i,n,h,a,We,v))};var Pt=u(2057);const je=function(i){return i==i&&!(0,Pt.Z)(i)};var Je=u(1380);const qe=function(i,n){return function(h){return null!=h&&h[i]===n&&(void 0!==n||i in Object(h))}},Rt=function(i){var n=function(i){for(var n=(0,Je.Z)(i),h=n.length;h--;){var a=n[h],v=i[a];n[h]=[a,v,je(v)]}return n}(i);return 1==n.length&&n[0][2]?qe(n[0][0],n[0][1]):function(h){return h===i||function(i,n,h,a){var v=h.length,f=v,y=!a;if(null==i)return!f;for(i=Object(i);v--;){var T=h[v];if(y&&T[2]?T[1]!==i[T[0]]:!(T[0]in i))return!1}for(;++v<f;){var z=(T=h[v])[0],N=i[z],ne=T[1];if(y&&T[2]){if(void 0===N&&!(z in i))return!1}else{var te=new S.Z;if(a)var J=a(N,ne,z,i,n,te);if(!(void 0===J?Ye(ne,N,3,a,te):J))return!1}}return!0}(h,i,n)}},Bt=function(i,n){return null!=i&&n in Object(i)};var Ht=u(3705),Ut=u(4690);const Kt=function(i,n){return null!=i&&function(i,n,h){for(var a=-1,v=(n=t(n,i)).length,f=!1;++a<v;){var y=o(n[a]);if(!(f=null!=i&&h(i,y)))break;i=i[y]}return f||++a!=v?f:!!(v=null==i?0:i.length)&&(0,Ut.Z)(v)&&(0,Ht.Z)(y,v)&&((0,K.Z)(i)||(0,ce.Z)(i))}(i,n,Bt)},jt=function(i,n){return se(i)&&je(n)?qe(o(i),n):function(h){var a=function(i,n,h){var a=null==i?void 0:p(i,n);return void 0===a?h:a}(h,i);return void 0===a&&a===n?Kt(h,i):Ye(n,a,3)}};var ke=u(5739);const ii=function(i){return se(i)?function(i){return function(n){return null==n?void 0:n[i]}}(o(i)):function(i){return function(n){return p(n,i)}}(i)},ni=function(i){return"function"==typeof i?i:null==i?ke.Z:"object"==typeof i?(0,K.Z)(i)?jt(i[0],i[1]):Rt(i):ii(i)};var ri=u(5091);var i,et=u(5021);const ci=(i=function(i,n){return i&&(0,ri.Z)(i,n,Je.Z)},function(h,a){if(null==h)return h;if(!(0,et.Z)(h))return i(h,a);for(var v=h.length,f=-1,y=Object(h);++f<v&&!1!==a(y[f],f,y););return h});var pi=u(982);const Ii=function(i,n){if(i!==n){var h=void 0!==i,a=null===i,v=i==i,f=Y(i),y=void 0!==n,T=null===n,z=n==n,N=Y(n);if(!T&&!N&&!f&&i>n||f&&y&&z&&!T&&!N||a&&y&&z||!h&&z||!v)return 1;if(!a&&!f&&!N&&i<n||N&&h&&v&&!a&&!f||T&&h&&v||!y&&v||!z)return-1}return 0},Li=function(i,n,h){n=n.length?q(n,function(f){return(0,K.Z)(f)?function(y){return p(y,1===f.length?f[0]:f)}:f}):[ke.Z];var a=-1;n=q(n,(0,pi.Z)(ni));var v=function(i,n){var h=-1,a=(0,et.Z)(i)?Array(i.length):[];return ci(i,function(v,f,y){a[++h]=n(v,f,y)}),a}(i,function(f,y,T){return{criteria:q(n,function(N){return N(f)}),index:++a,value:f}});return function(i,n){var h=i.length;for(i.sort(n);h--;)i[h]=i[h].value;return i}(v,function(f,y){return function(i,n,h){for(var a=-1,v=i.criteria,f=n.criteria,y=v.length,T=h.length;++a<y;){var z=Ii(v[a],f[a]);if(z)return a>=T?z:z*("desc"==h[a]?-1:1)}return i.index-n.index}(f,y,h)})};var xi=u(5955),tt=u(7905),$i=(0,xi.Z)(function(i,n){if(null==i)return[];var h=n.length;return h>1&&(0,tt.Z)(i,n[0],n[1])?n=[]:h>2&&(0,tt.Z)(n[0],n[1],n[2])&&(n=[n[0]]),Li(i,L(n,1),[])});const wi=$i}}]);