"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[441],{5441:(ee,y,r)=>{r.r(y),r.d(y,{MonacoEditorDemoModule:()=>K});var p=r(6019),g=r(9133),C=r(888),x=r(904),S=r(6400),f=r(2605),Z=r(8643),A=r(3507),D=r(7656),e=r(3668);let j=(()=>{class o{initMonacoLib(){return this._loading||this.init(),this._loader}init(){this._loader=new Promise(t=>{this._loading=!0;const i=(document.getElementsByTagName("base")[0]||{}).href,a=window,d=a.MONACOEDITOR_BASEPATH||`${i}assets/monaco/vs`,u=()=>{a.require.config({paths:{vs:d}}),a.require(["vs/editor/editor.main"],()=>{t()})};if(a.require||a.monaco)u();else{const c=document.createElement("script");c.type="text/javascript",c.src=`${d}/loader.js`,c.addEventListener("load",u),document.body.appendChild(c)}})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[j],imports:[[p.ez,g.u5,D.vf]]}),o})();var z=r(2891),H=r(6412),m=r(6263),W=r(4753),B=r(4522);let I=(()=>{class o{constructor(t){this.httpClient=t}getFile$(t){return this.httpClient.get(`assets/datas/monaco/${t}`,{observe:"body",responseType:"text"}).pipe((0,W.U)(n=>n))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(B.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var R=r(7991);class q{}let N=(()=>{class o{constructor(t){this.elementRef=t,this.sizeChanged=new e.vpe,this.element=t.nativeElement,this.resizeSensor=document.createElement("div"),this.resizeSensor.dir="ltr",this.resizeSensor.className="resize-sensor";const n="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",i="position: absolute; left: 0; top: 0; transition: 0s;";this.resizeSensor.style.cssText=n,this.resizeSensor.innerHTML=`<div class="resize-sensor-expand" style="${n}">\n                <div style="${i}"></div>\n            </div>\n            <div class="resize-sensor-shrink" style="${n}">\n                <div style="${i}width: 200%; height: 200%"></div>\n            </div>`,this.element.appendChild(this.resizeSensor);const a=this.resizeSensor.children[0],d=a.children[0],u=this.resizeSensor.children[1],c=window.getComputedStyle(this.element).getPropertyPriority("position");"absolute"!==c&&"relative"!==c&&"fixed"!==c&&(this.element.style.position="relative");const b=l=>{if(!l.getBoundingClientRect)return{width:l.offsetWidth,height:l.offsetHeight};const h=l.getBoundingClientRect();return{width:Math.round(h.width),height:Math.round(h.height)}};let v;const E=b(this.element);let _=E.width,T=E.height;const w=()=>{const l=0===this.element.offsetWidth&&0===this.element.offsetHeight,h=l&&this.element.style.display;l&&(this.element.style.display="block"),d.style.width=d.style.height="100000px",a.scrollLeft=a.scrollTop=u.scrollLeft=u.scrollTop=1e5,l&&(this.element.style.display=h)},O=()=>{const l=b(this.element),h=l.width,M=l.height;(h!==_||M!==T)&&!v&&(v=requestAnimationFrame(()=>{v=0,(h!==_||M!==T)&&(_=h,T=M,this.sizeChanged.emit())})),w()};a.addEventListener("scroll",O),u.addEventListener("scroll",O),requestAnimationFrame(w)}ngOnDestroy(){this.resizeSensor&&(this.element.contains(this.resizeSensor)&&this.element.removeChild(this.resizeSensor),delete this.resizeSensor)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","resize-listener",""]],outputs:{sizeChanged:"sizeChanged"}}),o})();const J=["editor"];let k=(()=>{class o{constructor(t,n){this.monacoEditorService=t,this.control=n,this.valueChange=new e.vpe,this.valueToCompareChange=new e.vpe,this.onInit=new e.vpe,this._value="",this._valueToCompare="",this.onTouchedCallback=()=>{},this.onChangeCallback=i=>{},console.warn("@deja-js/component/deja-monaco-editor is deprecated, and will be removed in a further version. Please use @deja-js/component/v2/monaco-editor instead."),this.control&&(this.control.valueAccessor=this)}set language(t){t&&(this._language=t,this._editor&&this.ngAfterViewInit())}set valueToCompare(t){if(t!==this._valueToCompare){if(this._valueToCompare=t,void 0===this._valueToCompare||!this._valueToCompare||!this._editor)return;"vs.editor.ICodeEditor"!==this._editor.getEditorType()&&this.getModifiedModel().setValue(this._valueToCompare)}}set value(t){if(t!==this._value){if(this._value=t,!this._editor)return;(void 0===this._value||!this._value)&&(this._value=""),this.getOriginalModel().setValue(this._value),this.onChangeCallback(this._value)}}onResize(){this.editorContent.nativeElement.setAttribute("style","height: 100%; width: 100%;"),this._editor&&this._editor.layout()}ngAfterViewInit(){this.monacoEditorService.initMonacoLib().then(()=>{this.initEditor()})}ngOnDestroy(){this.dispose()}ngOnChanges(){this._editor&&this._editor.updateOptions(this.getOptions())}writeValue(t){this.value=t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}dispose(){const t=this.editorContent.nativeElement;if(this._editor){for(;t.hasChildNodes();)t.removeChild(t.firstChild);this._editor=null}}initEditor(){const t=this.editorContent.nativeElement,n=this.getOptions();this.dispose(),this._editor=this.isDiffEditor?this.initDiffEditor(t,n):this.initSimpleEditor(t,n),this.onResize(),this.getOriginalModel().onDidChangeContent(()=>{const i=this.getOriginalModel().getValue();this._value!==i&&this.updateValue(i)}),this.getModifiedModel()&&this.getModifiedModel().onDidChangeContent(()=>{const i=this.getModifiedModel().getValue();this._valueToCompare!==i&&this.updateValueToCompare(i)}),this.onInit.next(this._editor)}initSimpleEditor(t,n){return monaco.editor.create(t,n)}initDiffEditor(t,n){const i=monaco.editor.createModel(this._value,this.language),a=monaco.editor.createModel(this._valueToCompare,this.language),d=monaco.editor.createDiffEditor(t,n);return d.setModel({modified:a,original:i}),d}getOptions(){const t=new q;return t.experimentalScreenReader=this.experimentalScreenReader,t.ariaLabel=this.ariaLabel,t.rulers=this.rulers,t.wordSeparators=this.wordSeparators,t.selectionClipboard=this.selectionClipboard,t.lineNumbers=this.lineNumbers,t.selectOnLineNumbers=this.selectOnLineNumbers,t.lineNumbersMinChars=this.lineNumbersMinChars,t.glyphMargin=this.glyphMargin,t.lineDecorationsWidth=this.lineDecorationsWidth,t.revealHorizontalRightPadding=this.revealHorizontalRightPadding,t.roundedSelection=this.roundedSelection,t.theme=this.theme,t.readOnly=this.readOnly,t.scrollbar=this.scrollbar,t.overviewRulerLanes=this.overviewRulerLanes,t.cursorBlinking=this.cursorBlinking,t.mouseWheelZoom=this.mouseWheelZoom,t.cursorStyle=this.cursorStyle,t.mouseWheelZoom=this.mouseWheelZoom,t.fontLigatures=this.fontLigatures,t.disableTranslate3d=this.disableTranslate3d,t.hideCursorInOverviewRuler=this.hideCursorInOverviewRuler,t.scrollBeyondLastLine=this.scrollBeyondLastLine,t.automaticLayout=this.automaticLayout,t.wrappingColumn=this.wrappingColumn,t.wordWrap=this.wordWrap,t.wrappingIndent=this.wrappingIndent,t.wordWrapBreakBeforeCharacters=this.wordWrapBreakBeforeCharacters,t.wordWrapBreakAfterCharacters=this.wordWrapBreakAfterCharacters,t.wordWrapBreakObtrusiveCharacters=this.wordWrapBreakObtrusiveCharacters,t.stopRenderingLineAfter=this.stopRenderingLineAfter,t.hover=this.hover,t.contextmenu=this.contextmenu,t.mouseWheelScrollSensitivity=this.mouseWheelScrollSensitivity,t.quickSuggestions=this.quickSuggestions,t.quickSuggestionsDelay=this.quickSuggestionsDelay,t.parameterHints=this.parameterHints,t.iconsInSuggestions=this.iconsInSuggestions,t.autoClosingBrackets=this.autoClosingBrackets,t.formatOnType=this.formatOnType,t.suggestOnTriggerCharacters=this.suggestOnTriggerCharacters,t.acceptSuggestionOnEnter=this.acceptSuggestionOnEnter,t.snippetSuggestions=this.snippetSuggestions,t.tabCompletion=this.tabCompletion,t.wordBasedSuggestions=this.wordBasedSuggestions,t.selectionHighlight=this.selectionHighlight,t.codeLens=this.codeLens,t.folding=this.folding,t.renderWhitespace=this.renderWhitespace,t.renderControlCharacters=this.renderControlCharacters,t.renderIndentGuides=this.renderIndentGuides,t.renderLineHighlight=this.renderLineHighlight,t.useTabStops=this.useTabStops,t.fontFamily=this.fontFamily,t.fontWeight=this.fontWeight,t.fontSize=this.fontSize,t.lineHeight=this.lineHeight,t.formatOnPaste=this.formatOnPaste,t.value=this._value,t.language=this._language,Object.keys(t).forEach(n=>void 0===t[n]&&delete t[n]),t}updateValue(t){this._value=t,this.valueChange.emit(t),this.onChangeCallback(t)}updateValueToCompare(t){this._valueToCompare=t,this.valueToCompareChange.emit(t)}getOriginalModel(){if(this._editor){const t=this._editor.getModel();return t.original||t}}getModifiedModel(){if(this._editor)return this._editor.getModel().modified||null}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j),e.Y36(g.a5,10))},o.\u0275cmp=e.Xpm({type:o,selectors:[["deja-monaco-editor"]],viewQuery:function(t,n){if(1&t&&e.Gf(J,7),2&t){let i;e.iGM(i=e.CRH())&&(n.editorContent=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7)},inputs:{experimentalScreenReader:"experimentalScreenReader",ariaLabel:"ariaLabel",rulers:"rulers",wordSeparators:"wordSeparators",selectionClipboard:"selectionClipboard",lineNumbers:"lineNumbers",selectOnLineNumbers:"selectOnLineNumbers",lineNumbersMinChars:"lineNumbersMinChars",glyphMargin:"glyphMargin",lineDecorationsWidth:"lineDecorationsWidth",revealHorizontalRightPadding:"revealHorizontalRightPadding",roundedSelection:"roundedSelection",theme:"theme",readOnly:"readOnly",scrollbar:"scrollbar",fixedOverflowWidgets:"fixedOverflowWidgets",overviewRulerLanes:"overviewRulerLanes",cursorBlinking:"cursorBlinking",mouseWheelZoom:"mouseWheelZoom",cursorStyle:"cursorStyle",fontLigatures:"fontLigatures",disableTranslate3d:"disableTranslate3d",disableMonospaceOptimizations:"disableMonospaceOptimizations",hideCursorInOverviewRuler:"hideCursorInOverviewRuler",scrollBeyondLastLine:"scrollBeyondLastLine",automaticLayout:"automaticLayout",wrappingColumn:"wrappingColumn",wordWrap:"wordWrap",wrappingIndent:"wrappingIndent",wordWrapBreakBeforeCharacters:"wordWrapBreakBeforeCharacters",wordWrapBreakAfterCharacters:"wordWrapBreakAfterCharacters",wordWrapBreakObtrusiveCharacters:"wordWrapBreakObtrusiveCharacters",stopRenderingLineAfter:"stopRenderingLineAfter",hover:"hover",contextmenu:"contextmenu",mouseWheelScrollSensitivity:"mouseWheelScrollSensitivity",quickSuggestions:"quickSuggestions",quickSuggestionsDelay:"quickSuggestionsDelay",parameterHints:"parameterHints",iconsInSuggestions:"iconsInSuggestions",autoClosingBrackets:"autoClosingBrackets",formatOnType:"formatOnType",formatOnPaste:"formatOnPaste",suggestOnTriggerCharacters:"suggestOnTriggerCharacters",acceptSuggestionOnEnter:"acceptSuggestionOnEnter",acceptSuggestionOnCommitCharacter:"acceptSuggestionOnCommitCharacter",snippetSuggestions:"snippetSuggestions",emptySelectionClipboard:"emptySelectionClipboard",tabCompletion:"tabCompletion",wordBasedSuggestions:"wordBasedSuggestions",suggestFontSize:"suggestFontSize",suggestLineHeight:"suggestLineHeight",selectionHighlight:"selectionHighlight",codeLens:"codeLens",folding:"folding",renderWhitespace:"renderWhitespace",renderControlCharacters:"renderControlCharacters",renderIndentGuides:"renderIndentGuides",renderLineHighlight:"renderLineHighlight",useTabStops:"useTabStops",fontFamily:"fontFamily",fontWeight:"fontWeight",fontSize:"fontSize",lineHeight:"lineHeight",isDiffEditor:"isDiffEditor",language:"language",valueToCompare:"valueToCompare",value:"value"},outputs:{valueChange:"valueChange",valueToCompareChange:"valueToCompareChange",onInit:"onInit"},features:[e.TTD],decls:2,vars:0,consts:[["resize-listener","",1,"monaco-editor",3,"sizeChanged"],["editor",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("sizeChanged",function(){return n.onResize()}),e.qZA())},directives:[N],styles:["deja-monaco-editor{width:100%;display:flex;flex:1 1 auto}deja-monaco-editor .monaco-editor{flex:1 1 auto}\n"],encapsulation:2}),o})();var F=r(2378),P=r(5142),U=r(8167),Q=r(6731);function V(o,s){1&o&&(e.TgZ(0,"mat-card",6),e._UZ(1,"deja-markdown",7),e.qZA()),2&o&&(e.xp6(1),e.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/monaco-editor/readme.md"))}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"mat-card",6),e.TgZ(2,"mat-toolbar",8),e._uU(3," Modification d'un fichier XML "),e._UZ(4,"span",9),e.TgZ(5,"mat-checkbox",10),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().readOnly=i}),e._uU(6,"Read only"),e.qZA(),e.qZA(),e.TgZ(7,"mat-card-content"),e.TgZ(8,"div",11),e.TgZ(9,"deja-monaco-editor",12),e.NdJ("valueChange",function(i){return e.CHM(t),e.oxw().xmlContent=i})("valueChange",function(){return e.CHM(t),e.oxw().onValueChange()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"mat-card",6),e.TgZ(11,"mat-toolbar",8),e._uU(12,"Comparaison d'un fichier XML"),e.qZA(),e.TgZ(13,"mat-card-content"),e.TgZ(14,"div",11),e.TgZ(15,"deja-monaco-editor",13),e.NdJ("valueChange",function(i){return e.CHM(t),e.oxw().xmlContent=i})("valueToCompareChange",function(i){return e.CHM(t),e.oxw().xmlContentToCompare=i})("valueToCompareChange",function(){return e.CHM(t),e.oxw().onValueToCompareChange()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"mat-card",6),e.TgZ(17,"mat-toolbar",8),e._uU(18,"Modification d'un fichier JSON"),e.qZA(),e.TgZ(19,"mat-card-content"),e.TgZ(20,"div",11),e.TgZ(21,"deja-monaco-editor",14),e.NdJ("valueChange",function(i){return e.CHM(t),e.oxw().jsonContent=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"mat-card",6),e.TgZ(23,"mat-toolbar",8),e._uU(24,"Comparaison d'un fichier JSON"),e.qZA(),e.TgZ(25,"mat-card-content"),e.TgZ(26,"div",11),e.TgZ(27,"deja-monaco-editor",15),e.NdJ("valueChange",function(i){return e.CHM(t),e.oxw().jsonContent=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.readOnly),e.xp6(4),e.Q6J("value",t.xmlContent)("readOnly",t.readOnly)("folding",!0),e.xp6(6),e.Q6J("value",t.xmlContent)("valueToCompare",t.xmlContentToCompare)("isDiffEditor",!0)("folding",!0),e.xp6(6),e.Q6J("value",t.jsonContent)("folding",!0),e.xp6(6),e.Q6J("value",t.jsonContent)("valueToCompare",t.jsonContentToCompare)("isDiffEditor",!0)("folding",!0)}}function G(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"mat-card",6),e.TgZ(2,"mat-toolbar",8),e._uU(3," Resize auto "),e.qZA(),e.TgZ(4,"mat-card-content",16),e.TgZ(5,"deja-splitter",17),e.TgZ(6,"split-area",18),e.TgZ(7,"deja-splitter",19),e.TgZ(8,"split-area",18),e.TgZ(9,"deja-monaco-editor",20),e.NdJ("valueChange",function(i){return e.CHM(t),e.oxw().xmlContent=i})("valueChange",function(){return e.CHM(t),e.oxw().onValueChange()}),e.qZA(),e.qZA(),e.TgZ(10,"split-area"),e.TgZ(11,"p"),e._uU(12,"Sed ut perspiciatis unde omnis iste natus erro..."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"split-area"),e.TgZ(14,"p"),e._uU(15,"Sed ut perspiciatis unde omnis iste natus erro..."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"mat-card",6),e.TgZ(17,"mat-toolbar",8),e._uU(18," Modification du text et du language "),e.qZA(),e.TgZ(19,"mat-card-content"),e.TgZ(20,"mat-form-field"),e.TgZ(21,"mat-select",21),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().updateLanguage(i)}),e.TgZ(22,"mat-option",22),e._uU(23,"XML"),e.qZA(),e.TgZ(24,"mat-option",23),e._uU(25,"JSON"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",11),e.TgZ(27,"deja-monaco-editor",24),e.NdJ("valueChange",function(i){return e.CHM(t),e.oxw().dynamicContent=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("size",75),e.xp6(2),e.Q6J("size",75),e.xp6(1),e.Q6J("value",t.xmlContent)("readOnly",t.readOnly)("folding",!0),e.xp6(12),e.Q6J("ngModel",t.dynamicLanguage),e.xp6(6),e.Q6J("value",t.dynamicContent)("folding",!0)("language",t.dynamicLanguage)}}const X=[{path:"",component:(()=>{class o extends D.yl{constructor(t){super(),this.fileService=t,this.tabIndex=1,this.readOnly=!1}ngOnInit(){this.fileService.getFile$("xmlFile.xml").pipe((0,m.R)(this.destroyed$)).subscribe(t=>this.xmlContent=t),this.fileService.getFile$("xmlFileToCompare.xml").pipe((0,m.R)(this.destroyed$)).subscribe(t=>this.xmlContentToCompare=t),this.fileService.getFile$("jsonFile.json").pipe((0,m.R)(this.destroyed$)).subscribe(t=>this.jsonContent=t),this.fileService.getFile$("jsonFileToCompare.json").pipe((0,m.R)(this.destroyed$)).subscribe(t=>this.jsonContentToCompare=t),this.updateLanguage("xml")}onValueChange(){}onValueToCompareChange(){}updateLanguage(t){"json"===t?(this.dynamicLanguage=t,this.dynamicContent=this.jsonContent):(this.dynamicLanguage="xml",this.dynamicContent=this.xmlContent)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["deja-monaco-editor-demo"]],features:[e.qOj],decls:8,vars:4,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["label","AUTO RESIZE"],["class","demo-card demo-basic",4,"ngIf"],[4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],["color","primary"],["flex",""],[3,"ngModel","ngModelChange"],[1,"viewer"],["language","xml","theme","vs",3,"value","readOnly","folding","valueChange"],["language","xml",3,"value","valueToCompare","isDiffEditor","folding","valueChange","valueToCompareChange"],["language","json",3,"value","folding","valueChange"],["language","json",3,"value","valueToCompare","isDiffEditor","folding","valueChange"],[2,"height","500px"],["direction","vertical"],[3,"size"],["direction","horizontal"],["language","xml","theme","vs",2,"height","100%",3,"value","readOnly","folding","valueChange"],["placeholder","Language",3,"ngModel","ngModelChange"],["value","xml"],["value","json"],[3,"value","folding","language","valueChange"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-tab-group",0),e.NdJ("selectedTabChange",function(a){return n.tabIndex=a.index}),e._uU(1,"> "),e._UZ(2,"mat-tab",1),e._UZ(3,"mat-tab",2),e._UZ(4,"mat-tab",3),e.qZA(),e.YNc(5,V,2,1,"mat-card",4),e.YNc(6,$,28,14,"div",5),e.YNc(7,G,28,9,"div",5)),2&t&&(e.Q6J("selectedIndex",n.tabIndex),e.xp6(5),e.Q6J("ngIf",0===n.tabIndex),e.xp6(1),e.Q6J("ngIf",1===n.tabIndex),e.xp6(1),e.Q6J("ngIf",2===n.tabIndex))},directives:[f.SP,f.uX,p.O5,C.a8,R.F,Z.Ye,x.oG,g.JJ,g.On,C.dn,k,F.t,P.z,U.KE,S.gD,Q.ey],styles:["[_nghost-%COMP%]   .viewer[_ngcontent-%COMP%]{height:500px;display:flex;flex:1 1 100%}[_nghost-%COMP%]   .viewer[_ngcontent-%COMP%]   deja-monaco-editor[_ngcontent-%COMP%]{display:flex;flex:1 1 100%}[_nghost-%COMP%]   span[flex][_ngcontent-%COMP%]{flex:1 1 auto}"]}),o})()}];let K=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,H.O,L,z.dp,g.u5,C.QW,x.p9,S.LD,f.Nh,Z.g0,A.Bz.forChild(X)]]}),o})()}}]);