"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[3425],{3425:(ee,T,r)=>{r.r(T),r.d(T,{MonacoEditorDemoModule:()=>X});var p=r(9808),m=r(3075),C=r(9224),x=r(7446),S=r(4107),f=r(3251),D=r(4594),z=r(1865),j=r(2031),t=r(5e3);let b=(()=>{class o{initMonacoLib(){return this._loading||this.init(),this._loader}init(){this._loader=new Promise(e=>{this._loading=!0;const n=(document.getElementsByTagName("base")[0]||{}).href,a=window,d=a.MONACOEDITOR_BASEPATH||`${n}assets/monaco/vs`,u=()=>{a.require.config({paths:{vs:d}}),a.require(["vs/editor/editor.main"],()=>{e()})};if(a.require||a.monaco)u();else{const c=document.createElement("script");c.type="text/javascript",c.src=`${d}/loader.js`,c.addEventListener("load",u),document.body.appendChild(c)}})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[b],imports:[p.ez,m.u5,j.vf]}),o})();var H=r(268),W=r(3485),g=r(2722),B=r(4004),I=r(520);let A=(()=>{class o{constructor(e){this.httpClient=e}getFile$(e){return this.httpClient.get(`assets/datas/monaco/${e}`,{observe:"body",responseType:"text"}).pipe((0,B.U)(i=>i))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(I.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var R=r(1339);class N{}let J=(()=>{class o{constructor(e){this.elementRef=e,this.sizeChanged=new t.vpe,this.element=e.nativeElement,this.resizeSensor=document.createElement("div"),this.resizeSensor.dir="ltr",this.resizeSensor.className="resize-sensor";const i="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",n="position: absolute; left: 0; top: 0; transition: 0s;";this.resizeSensor.style.cssText=i,this.resizeSensor.innerHTML=`<div class="resize-sensor-expand" style="${i}">\n                <div style="${n}"></div>\n            </div>\n            <div class="resize-sensor-shrink" style="${i}">\n                <div style="${n}width: 200%; height: 200%"></div>\n            </div>`,this.element.appendChild(this.resizeSensor);const a=this.resizeSensor.children[0],d=a.children[0],u=this.resizeSensor.children[1],c=window.getComputedStyle(this.element).getPropertyPriority("position");"absolute"!==c&&"relative"!==c&&"fixed"!==c&&(this.element.style.position="relative");const E=l=>{if(!l.getBoundingClientRect)return{width:l.offsetWidth,height:l.offsetHeight};const h=l.getBoundingClientRect();return{width:Math.round(h.width),height:Math.round(h.height)}};let v;const w=E(this.element);let _=w.width,M=w.height;const O=()=>{const l=0===this.element.offsetWidth&&0===this.element.offsetHeight,h=l&&this.element.style.display;l&&(this.element.style.display="block"),d.style.width=d.style.height="100000px",a.scrollLeft=a.scrollTop=u.scrollLeft=u.scrollTop=1e5,l&&(this.element.style.display=h)},L=()=>{const l=E(this.element),h=l.width,y=l.height;(h!==_||y!==M)&&!v&&(v=requestAnimationFrame(()=>{v=0,(h!==_||y!==M)&&(_=h,M=y,this.sizeChanged.emit())})),O()};a.addEventListener("scroll",L),u.addEventListener("scroll",L),requestAnimationFrame(O)}ngOnDestroy(){this.resizeSensor&&(this.element.contains(this.resizeSensor)&&this.element.removeChild(this.resizeSensor),delete this.resizeSensor)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275dir=t.lG2({type:o,selectors:[["","resize-listener",""]],outputs:{sizeChanged:"sizeChanged"}}),o})();const k=["editor"];let F=(()=>{class o{constructor(e,i){this.monacoEditorService=e,this.control=i,this.valueChange=new t.vpe,this.valueToCompareChange=new t.vpe,this.onInit=new t.vpe,this._value="",this._valueToCompare="",this.onTouchedCallback=()=>{},this.onChangeCallback=n=>{},console.warn("@deja-js/component/deja-monaco-editor is deprecated, and will be removed in a further version. Please use @deja-js/component/v2/monaco-editor instead."),this.control&&(this.control.valueAccessor=this)}set language(e){e&&(this._language=e,this._editor&&this.ngAfterViewInit())}set valueToCompare(e){if(e!==this._valueToCompare){if(this._valueToCompare=e,void 0===this._valueToCompare||!this._valueToCompare||!this._editor)return;"vs.editor.ICodeEditor"!==this._editor.getEditorType()&&this.getModifiedModel().setValue(this._valueToCompare)}}set value(e){if(e!==this._value){if(this._value=e,!this._editor)return;(void 0===this._value||!this._value)&&(this._value=""),this.getOriginalModel().setValue(this._value),this.onChangeCallback(this._value)}}onResize(){this.editorContent.nativeElement.setAttribute("style","height: 100%; width: 100%;"),this._editor&&this._editor.layout()}ngAfterViewInit(){this.monacoEditorService.initMonacoLib().then(()=>{this.initEditor()})}ngOnDestroy(){this.dispose()}ngOnChanges(){this._editor&&this._editor.updateOptions(this.getOptions())}writeValue(e){this.value=e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}dispose(){const e=this.editorContent.nativeElement;if(this._editor){for(;e.hasChildNodes();)e.removeChild(e.firstChild);this._editor=null}}initEditor(){const e=this.editorContent.nativeElement,i=this.getOptions();this.dispose(),this._editor=this.isDiffEditor?this.initDiffEditor(e,i):this.initSimpleEditor(e,i),this.onResize(),this.getOriginalModel().onDidChangeContent(()=>{const n=this.getOriginalModel().getValue();this._value!==n&&this.updateValue(n)}),this.getModifiedModel()&&this.getModifiedModel().onDidChangeContent(()=>{const n=this.getModifiedModel().getValue();this._valueToCompare!==n&&this.updateValueToCompare(n)}),this.onInit.next(this._editor)}initSimpleEditor(e,i){return monaco.editor.create(e,i)}initDiffEditor(e,i){const n=monaco.editor.createModel(this._value,this.language),a=monaco.editor.createModel(this._valueToCompare,this.language),d=monaco.editor.createDiffEditor(e,i);return d.setModel({modified:a,original:n}),d}getOptions(){const e=new N;return e.experimentalScreenReader=this.experimentalScreenReader,e.ariaLabel=this.ariaLabel,e.rulers=this.rulers,e.wordSeparators=this.wordSeparators,e.selectionClipboard=this.selectionClipboard,e.lineNumbers=this.lineNumbers,e.selectOnLineNumbers=this.selectOnLineNumbers,e.lineNumbersMinChars=this.lineNumbersMinChars,e.glyphMargin=this.glyphMargin,e.lineDecorationsWidth=this.lineDecorationsWidth,e.revealHorizontalRightPadding=this.revealHorizontalRightPadding,e.roundedSelection=this.roundedSelection,e.theme=this.theme,e.readOnly=this.readOnly,e.scrollbar=this.scrollbar,e.overviewRulerLanes=this.overviewRulerLanes,e.cursorBlinking=this.cursorBlinking,e.mouseWheelZoom=this.mouseWheelZoom,e.cursorStyle=this.cursorStyle,e.mouseWheelZoom=this.mouseWheelZoom,e.fontLigatures=this.fontLigatures,e.disableTranslate3d=this.disableTranslate3d,e.hideCursorInOverviewRuler=this.hideCursorInOverviewRuler,e.scrollBeyondLastLine=this.scrollBeyondLastLine,e.automaticLayout=this.automaticLayout,e.wrappingColumn=this.wrappingColumn,e.wordWrap=this.wordWrap,e.wrappingIndent=this.wrappingIndent,e.wordWrapBreakBeforeCharacters=this.wordWrapBreakBeforeCharacters,e.wordWrapBreakAfterCharacters=this.wordWrapBreakAfterCharacters,e.wordWrapBreakObtrusiveCharacters=this.wordWrapBreakObtrusiveCharacters,e.stopRenderingLineAfter=this.stopRenderingLineAfter,e.hover=this.hover,e.contextmenu=this.contextmenu,e.mouseWheelScrollSensitivity=this.mouseWheelScrollSensitivity,e.quickSuggestions=this.quickSuggestions,e.quickSuggestionsDelay=this.quickSuggestionsDelay,e.parameterHints=this.parameterHints,e.iconsInSuggestions=this.iconsInSuggestions,e.autoClosingBrackets=this.autoClosingBrackets,e.formatOnType=this.formatOnType,e.suggestOnTriggerCharacters=this.suggestOnTriggerCharacters,e.acceptSuggestionOnEnter=this.acceptSuggestionOnEnter,e.snippetSuggestions=this.snippetSuggestions,e.tabCompletion=this.tabCompletion,e.wordBasedSuggestions=this.wordBasedSuggestions,e.selectionHighlight=this.selectionHighlight,e.codeLens=this.codeLens,e.folding=this.folding,e.renderWhitespace=this.renderWhitespace,e.renderControlCharacters=this.renderControlCharacters,e.renderIndentGuides=this.renderIndentGuides,e.renderLineHighlight=this.renderLineHighlight,e.useTabStops=this.useTabStops,e.fontFamily=this.fontFamily,e.fontWeight=this.fontWeight,e.fontSize=this.fontSize,e.lineHeight=this.lineHeight,e.formatOnPaste=this.formatOnPaste,e.value=this._value,e.language=this._language,Object.keys(e).forEach(i=>void 0===e[i]&&delete e[i]),e}updateValue(e){this._value=e,this.valueChange.emit(e),this.onChangeCallback(e)}updateValueToCompare(e){this._valueToCompare=e,this.valueToCompareChange.emit(e)}getOriginalModel(){if(this._editor){const e=this._editor.getModel();return e.original||e}}getModifiedModel(){if(this._editor)return this._editor.getModel().modified||null}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b),t.Y36(m.a5,10))},o.\u0275cmp=t.Xpm({type:o,selectors:[["deja-monaco-editor"]],viewQuery:function(e,i){if(1&e&&t.Gf(k,7),2&e){let n;t.iGM(n=t.CRH())&&(i.editorContent=n.first)}},hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onResize()},!1,t.Jf7)},inputs:{experimentalScreenReader:"experimentalScreenReader",ariaLabel:"ariaLabel",rulers:"rulers",wordSeparators:"wordSeparators",selectionClipboard:"selectionClipboard",lineNumbers:"lineNumbers",selectOnLineNumbers:"selectOnLineNumbers",lineNumbersMinChars:"lineNumbersMinChars",glyphMargin:"glyphMargin",lineDecorationsWidth:"lineDecorationsWidth",revealHorizontalRightPadding:"revealHorizontalRightPadding",roundedSelection:"roundedSelection",theme:"theme",readOnly:"readOnly",scrollbar:"scrollbar",fixedOverflowWidgets:"fixedOverflowWidgets",overviewRulerLanes:"overviewRulerLanes",cursorBlinking:"cursorBlinking",mouseWheelZoom:"mouseWheelZoom",cursorStyle:"cursorStyle",fontLigatures:"fontLigatures",disableTranslate3d:"disableTranslate3d",disableMonospaceOptimizations:"disableMonospaceOptimizations",hideCursorInOverviewRuler:"hideCursorInOverviewRuler",scrollBeyondLastLine:"scrollBeyondLastLine",automaticLayout:"automaticLayout",wrappingColumn:"wrappingColumn",wordWrap:"wordWrap",wrappingIndent:"wrappingIndent",wordWrapBreakBeforeCharacters:"wordWrapBreakBeforeCharacters",wordWrapBreakAfterCharacters:"wordWrapBreakAfterCharacters",wordWrapBreakObtrusiveCharacters:"wordWrapBreakObtrusiveCharacters",stopRenderingLineAfter:"stopRenderingLineAfter",hover:"hover",contextmenu:"contextmenu",mouseWheelScrollSensitivity:"mouseWheelScrollSensitivity",quickSuggestions:"quickSuggestions",quickSuggestionsDelay:"quickSuggestionsDelay",parameterHints:"parameterHints",iconsInSuggestions:"iconsInSuggestions",autoClosingBrackets:"autoClosingBrackets",formatOnType:"formatOnType",formatOnPaste:"formatOnPaste",suggestOnTriggerCharacters:"suggestOnTriggerCharacters",acceptSuggestionOnEnter:"acceptSuggestionOnEnter",acceptSuggestionOnCommitCharacter:"acceptSuggestionOnCommitCharacter",snippetSuggestions:"snippetSuggestions",emptySelectionClipboard:"emptySelectionClipboard",tabCompletion:"tabCompletion",wordBasedSuggestions:"wordBasedSuggestions",suggestFontSize:"suggestFontSize",suggestLineHeight:"suggestLineHeight",selectionHighlight:"selectionHighlight",codeLens:"codeLens",folding:"folding",renderWhitespace:"renderWhitespace",renderControlCharacters:"renderControlCharacters",renderIndentGuides:"renderIndentGuides",renderLineHighlight:"renderLineHighlight",useTabStops:"useTabStops",fontFamily:"fontFamily",fontWeight:"fontWeight",fontSize:"fontSize",lineHeight:"lineHeight",isDiffEditor:"isDiffEditor",language:"language",valueToCompare:"valueToCompare",value:"value"},outputs:{valueChange:"valueChange",valueToCompareChange:"valueToCompareChange",onInit:"onInit"},features:[t.TTD],decls:2,vars:0,consts:[["resize-listener","",1,"monaco-editor",3,"sizeChanged"],["editor",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0,1),t.NdJ("sizeChanged",function(){return i.onResize()}),t.qZA())},dependencies:[J],styles:["deja-monaco-editor{width:100%;display:flex;flex:1 1 auto}deja-monaco-editor .monaco-editor{flex:1 1 auto}\n"],encapsulation:2}),o})();var P=r(3029),G=r(3638),U=r(7322),Q=r(508);function V(o,s){1&o&&(t.TgZ(0,"mat-card",6),t._UZ(1,"deja-markdown",7),t.qZA()),2&o&&(t.xp6(1),t.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/monaco-editor/readme.md"))}function $(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"mat-card",6)(2,"mat-toolbar",8),t._uU(3," Modification d'un fichier XML "),t._UZ(4,"span",9),t.TgZ(5,"mat-checkbox",10),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.readOnly=n)}),t._uU(6,"Read only"),t.qZA()(),t.TgZ(7,"mat-card-content")(8,"div",11)(9,"deja-monaco-editor",12),t.NdJ("valueChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.xmlContent=n)})("valueChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onValueChange())}),t.qZA()()()(),t.TgZ(10,"mat-card",6)(11,"mat-toolbar",8),t._uU(12,"Comparaison d'un fichier XML"),t.qZA(),t.TgZ(13,"mat-card-content")(14,"div",11)(15,"deja-monaco-editor",13),t.NdJ("valueChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.xmlContent=n)})("valueToCompareChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.xmlContentToCompare=n)})("valueToCompareChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onValueToCompareChange())}),t.qZA()()()(),t.TgZ(16,"mat-card",6)(17,"mat-toolbar",8),t._uU(18,"Modification d'un fichier JSON"),t.qZA(),t.TgZ(19,"mat-card-content")(20,"div",11)(21,"deja-monaco-editor",14),t.NdJ("valueChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.jsonContent=n)}),t.qZA()()()(),t.TgZ(22,"mat-card",6)(23,"mat-toolbar",8),t._uU(24,"Comparaison d'un fichier JSON"),t.qZA(),t.TgZ(25,"mat-card-content")(26,"div",11)(27,"deja-monaco-editor",15),t.NdJ("valueChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.jsonContent=n)}),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.readOnly),t.xp6(4),t.Q6J("value",e.xmlContent)("readOnly",e.readOnly)("folding",!0),t.xp6(6),t.Q6J("value",e.xmlContent)("valueToCompare",e.xmlContentToCompare)("isDiffEditor",!0)("folding",!0),t.xp6(6),t.Q6J("value",e.jsonContent)("folding",!0),t.xp6(6),t.Q6J("value",e.jsonContent)("valueToCompare",e.jsonContentToCompare)("isDiffEditor",!0)("folding",!0)}}function q(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"mat-card",6)(2,"mat-toolbar",8),t._uU(3," Resize auto "),t.qZA(),t.TgZ(4,"mat-card-content",16)(5,"deja-splitter",17)(6,"split-area",18)(7,"deja-splitter",19)(8,"split-area",18)(9,"deja-monaco-editor",20),t.NdJ("valueChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.xmlContent=n)})("valueChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onValueChange())}),t.qZA()(),t.TgZ(10,"split-area")(11,"p"),t._uU(12,"Sed ut perspiciatis unde omnis iste natus erro..."),t.qZA()()()(),t.TgZ(13,"split-area")(14,"p"),t._uU(15,"Sed ut perspiciatis unde omnis iste natus erro..."),t.qZA()()()()(),t.TgZ(16,"mat-card",6)(17,"mat-toolbar",8),t._uU(18," Modification du text et du language "),t.qZA(),t.TgZ(19,"mat-card-content")(20,"mat-form-field")(21,"mat-select",21),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.updateLanguage(n))}),t.TgZ(22,"mat-option",22),t._uU(23,"XML"),t.qZA(),t.TgZ(24,"mat-option",23),t._uU(25,"JSON"),t.qZA()()(),t.TgZ(26,"div",11)(27,"deja-monaco-editor",24),t.NdJ("valueChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.dynamicContent=n)}),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(6),t.Q6J("size",75),t.xp6(2),t.Q6J("size",75),t.xp6(1),t.Q6J("value",e.xmlContent)("readOnly",e.readOnly)("folding",!0),t.xp6(12),t.Q6J("ngModel",e.dynamicLanguage),t.xp6(6),t.Q6J("value",e.dynamicContent)("folding",!0)("language",e.dynamicLanguage)}}const Y=[{path:"",component:(()=>{class o extends j.yl{constructor(e){super(),this.fileService=e,this.tabIndex=1,this.readOnly=!1}ngOnInit(){this.fileService.getFile$("xmlFile.xml").pipe((0,g.R)(this.destroyed$)).subscribe(e=>this.xmlContent=e),this.fileService.getFile$("xmlFileToCompare.xml").pipe((0,g.R)(this.destroyed$)).subscribe(e=>this.xmlContentToCompare=e),this.fileService.getFile$("jsonFile.json").pipe((0,g.R)(this.destroyed$)).subscribe(e=>this.jsonContent=e),this.fileService.getFile$("jsonFileToCompare.json").pipe((0,g.R)(this.destroyed$)).subscribe(e=>this.jsonContentToCompare=e),this.updateLanguage("xml")}onValueChange(){}onValueToCompareChange(){}updateLanguage(e){"json"===e?(this.dynamicLanguage=e,this.dynamicContent=this.jsonContent):(this.dynamicLanguage="xml",this.dynamicContent=this.xmlContent)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["deja-monaco-editor-demo"]],features:[t.qOj],decls:8,vars:4,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["label","AUTO RESIZE"],["class","demo-card demo-basic",4,"ngIf"],[4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],["color","primary"],["flex",""],[3,"ngModel","ngModelChange"],[1,"viewer"],["language","xml","theme","vs",3,"value","readOnly","folding","valueChange"],["language","xml",3,"value","valueToCompare","isDiffEditor","folding","valueChange","valueToCompareChange"],["language","json",3,"value","folding","valueChange"],["language","json",3,"value","valueToCompare","isDiffEditor","folding","valueChange"],[2,"height","500px"],["direction","vertical"],[3,"size"],["direction","horizontal"],["language","xml","theme","vs",2,"height","100%",3,"value","readOnly","folding","valueChange"],["placeholder","Language",3,"ngModel","ngModelChange"],["value","xml"],["value","json"],[3,"value","folding","language","valueChange"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group",0),t.NdJ("selectedTabChange",function(a){return i.tabIndex=a.index}),t._uU(1,"> "),t._UZ(2,"mat-tab",1)(3,"mat-tab",2)(4,"mat-tab",3),t.qZA(),t.YNc(5,V,2,1,"mat-card",4),t.YNc(6,$,28,14,"div",5),t.YNc(7,q,28,9,"div",5)),2&e&&(t.Q6J("selectedIndex",i.tabIndex),t.xp6(5),t.Q6J("ngIf",0===i.tabIndex),t.xp6(1),t.Q6J("ngIf",1===i.tabIndex),t.xp6(1),t.Q6J("ngIf",2===i.tabIndex))},dependencies:[p.O5,R.F,F,P.t,G.z,m.JJ,m.On,C.a8,C.dn,x.oG,U.KE,S.gD,Q.ey,f.SP,f.uX,D.Ye],styles:["[_nghost-%COMP%]   .viewer[_ngcontent-%COMP%]{height:500px;display:flex;flex:1 1 100%}[_nghost-%COMP%]   .viewer[_ngcontent-%COMP%]   deja-monaco-editor[_ngcontent-%COMP%]{display:flex;flex:1 1 100%}[_nghost-%COMP%]   span[flex][_ngcontent-%COMP%]{flex:1 1 auto}"]}),o})()}];let X=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,W.O,Z,H.dp,m.u5,C.QW,x.p9,S.LD,f.Nh,D.g0,z.Bz.forChild(Y)]}),o})()}}]);