(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"0+Qo":function(t,e,s){},KBFj:function(t,e,s){"use strict";var n=s("KCVW"),o=s("8Y7J"),i=(s("fYS1"),s("xgIS")),r=s("XNiG"),l=s("VRyK"),u=s("GJmQ"),c=s("pLZG"),a=s("SxV6"),h=s("1G5W"),m=s("D0XW");function p(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}p.prototype=Object.create(Error.prototype);const g=p;var d=s("mlxB"),f=s("l7GE"),b=s("ZUHj");class C{constructor(t,e,s,n){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=s,this.scheduler=n}call(t,e){return e.subscribe(new L(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class L extends f.a{constructor(t,e,s,n,o){super(t),this.absoluteTimeout=e,this.waitFor=s,this.withObservable=n,this.scheduler=o,this.action=null,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(Object(b.a)(t,e))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(L.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}var w=s("z6cu");s("0+Qo"),s.d(e,"a",function(){return v});class v{constructor(t,e,s){this.changeDetectorRef=e,this.clipboardService=s,this.columnSizeChanged=new o.EventEmitter,this.columnLayoutChanged=new o.EventEmitter,this.columnHeaderClicked=new o.EventEmitter,this.columnDragEnd=new o.EventEmitter,this._columnsDraggable=!1,this._columnsSortable=!1,this._columnsSizable=!1,this._columnLayout={},this.backupColumnOrder=[],this.columnGroupKey="deja-grid-column",this.isAlive=!0;const n=t.nativeElement;Object(i.a)(n,"mousedown").pipe(Object(u.a)(()=>this.isAlive),Object(c.a)(t=>1===t.buttons)).subscribe(t=>{const e=t.target,s=this.getColumnFromHTMLElement(t.target);if(e.hasAttribute("separator")){if(this.columnsSizable&&!1!==s.sizeable){this._sizedColumn=s;const e=t.screenX,o=new r.a,u=Object(i.a)(n.ownerDocument,"mouseup");return u.pipe(Object(a.a)()).subscribe(()=>{this.columnSizeChanged.emit({column:null}),this.changeDetectorRef.markForCheck(),this._sizedColumn=void 0}),Object(i.a)(n.ownerDocument,"mousemove").pipe(Object(h.a)(Object(l.a)(u,o))).subscribe(t=>{1===t.buttons?(this.columnSizeChanged.emit({column:this._sizedColumn,offsetWidth:t.screenX-e,originalEvent:t}),this.changeDetectorRef.markForCheck()):o.next()}),t.stopPropagation(),!1}}else{const t=s;Object(i.a)(n,"mouseup").pipe(Object(a.a)(),function(t,e=m.a){return function(t,e,s=m.a){return t=>{let n=Object(d.a)(1e3),o=n?1e3-s.now():Math.abs(1e3);return t.lift(new C(o,n,e,s))}}(0,Object(w.a)(new g),e)}()).subscribe(e=>{const s=this.getColumnElementFromHTMLElement(e.target);if((s&&s.getAttribute("colname"))===t.name){const n=+s.getAttribute("index");this.columnHeaderClicked.emit({column:t,originalEvent:e,index:n}),this.changeDetectorRef.markForCheck()}},t=>{})}})}set columnsDraggable(t){this._columnsDraggable=Object(n.b)(t)}get columnsDraggable(){return this._columnsDraggable}set columnsSortable(t){this._columnsSortable=Object(n.b)(t)}get columnsSortable(){return this._columnsSortable}get sizedColumn(){return this._sizedColumn}set columnsSizable(t){this._columnsSizable=Object(n.b)(t)}get columnsSizable(){return this._columnsSizable}set columnLayout(t){this._columnLayout=t||{columns:[],scrollLeft:0,vpAfterWidth:0,vpBeforeWidth:0,refresh$:new r.a},this.changeDetectorRef.markForCheck()}get columnLayout(){return this._columnLayout}get columnHeaderTemplate(){return this.columnHeaderTemplateExternal||this.columnHeaderTemplateInternal}ngOnDestroy(){this.isAlive=!1}refresh(){this.changeDetectorRef.markForCheck()}getDragContext(t){return this.clipboardService&&(this.columnsDraggable||this.columnsSortable)&&!1!==t.draggable?{dragendcallback:e=>{e.dragInfo.hasOwnProperty(this.columnGroupKey)&&(t.dragged=!1,this.backupColumnOrder=[],this.columnDragEnd.emit(),this.changeDetectorRef.markForCheck())},dragstartcallback:e=>{this._sizedColumn?e.preventDefault():(e.dragInfo[this.columnGroupKey]=t,t.dragged=!0,this.backupColumnOrder=this._columnLayout.columns.map(t=>t))}}:null}getDropContext(){if(!this.clipboardService)return null;const t=t=>{if(!this.columnsSortable||!t.dragInfo.hasOwnProperty(this.columnGroupKey))return;const e=this.getColumnElementFromHTMLElement(t.target),s=e&&e.getBoundingClientRect(),n=e&&+e.getAttribute("index");if(void 0===n)return;const o=t.dragInfo[this.columnGroupKey],i=this._columnLayout.columns.findIndex(t=>t===o);if(i!==n){if(n===i+1){if(t.x<=s.left+s.width/2)return void t.preventDefault()}else if(n===i-1&&t.x>=s.left+s.width/2)return void t.preventDefault();this.columnLayoutChanged.emit({column:o,index:i,originalEvent:t,target:this._columnLayout.columns[n],targetIndex:n}),t.preventDefault()}else t.preventDefault()};return{dragleavecallback:()=>{this.backupColumnOrder.length&&(this._columnLayout.columns=this.backupColumnOrder.map(t=>t))},dragentercallback:t,dragovercallback:t,dropcallback:t}}getColumnElementFromHTMLElement(t){let e=t;for(;e&&!e.hasAttribute("colname");)t=e,e=e.parentElement;if(e)return e}getColumnFromHTMLElement(t){const e=this.getColumnElementFromHTMLElement(t),s=e&&e.getAttribute("colname");return s&&this._columnLayout.columns.find(t=>t.name===s)}}},"N/UG":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s("fYS1"),o=s("Cfvw");s("0+Qo");class i{constructor(t){this.changeDetectorRef=t,this._columnLayout={}}set columnLayout(t){this.refresh$sub&&(this.refresh$sub.unsubscribe(),this.refresh$sub=void 0),this._columnLayout=t||{columns:[],scrollLeft:0,vpAfterWidth:0,vpBeforeWidth:0,refresh$:void 0},this._columnLayout.refresh$&&(this.refresh$sub=Object(o.a)(this._columnLayout.refresh$).subscribe(()=>this.changeDetectorRef.markForCheck()))}get columnLayout(){return this._columnLayout}get cellTemplate(){return this.cellTemplateExternal||this.cellTemplateInternal}ngOnDestroy(){this.refresh$sub&&this.refresh$sub.unsubscribe()}getCellText(t,e){return n.i.getItemText(t,e)}}},OJvb:function(t,e,s){},TBfx:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("fYS1");s("OJvb");class o{constructor(t){this.changeDetectorRef=t,this._columnLayout={}}get columnLayoutOfColumn0(){return this._columnLayout.column0}get columnLayoutOfColumns(){return this._columnLayout.columns}set columns(t){let e=0;this._columnLayout.columns=[],t.forEach(t=>{this.getCellText(this.row,t.name)&&(0===this._columnLayout.column0&&(this._columnLayout.column0=e),this._columnLayout.columns.push({column:t,left:e})),e+=t.w}),this._columnLayout.column0=e,this.changeDetectorRef.markForCheck()}get cellTemplate(){return this.cellTemplateExternal||this.cellTemplateInternal}get parentTitleTemplate(){return this.parentTitleTemplateExternal||this.parentTitleTemplateInternal}getCellText(t,e){return n.i.getItemText(t,e)}}},ZmAE:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("fYS1");class o{constructor(t){this.columnsWidth={},this.percentColumns=[],this.fixedColumns=[],this.responsiveColumns=[],this.totalFixedWidth=0,this.totalPercentWidth=0,t.forEach(t=>{let e=new n.p(t.width);if(void 0===e.value&&(e=new n.p(10,"%")),e.isInvalid())throw new Error("Invalid column width unit can be for example: 11px or 23%");if(e.unit&&"px"!==e.unit&&"%"!==e.unit)throw new Error("Column width unit can be only px or %");"%"===e.unit?(this.percentColumns.push(t),this.totalPercentWidth+=e.value):(this.fixedColumns.push(t),this.totalFixedWidth+=e.value),"number"!=typeof t.responsive&&!0!==t.responsive||this.responsiveColumns.push(t),this.columnsWidth[t.name]=e}),this.responsiveColumns.sort((t,e)=>!0===t.responsive?1:!0===e.responsive?-1:+t.responsive-+e.responsive)}}},dH7s:function(t,e,s){"use strict";s("0+Qo"),s("ZmAE"),s("fYS1"),s("OJvb"),s("yL1F"),s("KBFj"),s("TBfx"),s("N/UG"),s("iXFx"),s.d(e,"a",function(){return n});class n{}},iXFx:function(t,e,s){"use strict";s.d(e,"a",function(){return v});var n=s("KCVW"),o=s("8Y7J"),i=(s("6Rdh"),s("fYS1")),r=s("XNiG"),l=s("jtHE"),u=s("itXk"),c=s("Cfvw"),a=s("xgIS"),h=s("PqYM"),m=s("GJmQ"),p=s("lJxs"),g=s("eIep"),d=s("vkgz"),f=s("Kj3r"),b=s("pLZG"),C=s("SxV6"),L=s("ZmAE");s("KBFj");const w=()=>{};class v{constructor(t,e,s){this.changeDetectorRef=t,this.elementRef=e,this.clipboardService=s,this.minSearchLength=0,this.query="",this.maxHeight=0,this.pageSize=0,this.viewPortRowHeight=i.q.itemDefaultSize,this.viewportMode=i.s.fixed,this.columnsMinWidth=15,this.itemDragEnd=new o.EventEmitter,this.itemDragStart=new o.EventEmitter,this.selectedChange=new o.EventEmitter,this.columnLayoutChanged=new o.EventEmitter,this.columnSizeChanged=new o.EventEmitter,this.viewPortChanged=new o.EventEmitter,this.sortChanged=new o.EventEmitter,this.groupChanged=new o.EventEmitter,this.rowsWidth=null,this._columnLayout={scrollLeft:0,vpBeforeWidth:0,vpAfterWidth:0,columns:[],refresh$:new r.a},this.lastScrollLeft=0,this.printColumnLayout$=new r.a,this.disableUserSelection$=new r.a,this._noHorizontalScroll=!1,this.isAlive=!0,this.hasPercentageColumns=!1,this._sortable=!1,this._searchArea=!1,this._groupArea=!1,this._rowsDraggable=!1,this._rowsSortable=!1,this._columnsDraggable=!1,this._columnsSortable=!1,this._columnsSizable=!1,this._multiSelect=!1,this.noColumnsSpecified=!1,this.columnGroups$=new r.a,this.columns$=new l.a(1),this._columnGroups=[];const n=this.elementRef.nativeElement;this.clearColumnLayout(),Object(u.b)(this.columns$,this.columnGroups$).pipe(Object(m.a)(()=>this.isAlive),Object(p.a)(([t,e])=>{if("string"==typeof e){const s=e.split(",").map(t=>t.trim());return this._columnGroups=s.map(e=>t.find(t=>t.name===e))}return this._columnGroups=e}),Object(p.a)(t=>{const e=[],s=this.treeListComponent.sortInfos;return t.forEach(t=>{const n={};s&&s.name===t.name&&(n.sortInfos=s),n.groupByField=t.groupByField||t.name,n.groupTextField=t.groupTextField||t.name,e.push(n)}),e}),Object(g.a)(t=>this.treeListComponent.group$(t).pipe(Object(p.a)(()=>t)))).subscribe(t=>{this.groupChanged.emit(t),this.changeDetectorRef.markForCheck()}),Object(c.a)(this.columns$).pipe(Object(m.a)(()=>this.isAlive),Object(d.a)(t=>this._columns=t),Object(f.a)(1)).subscribe(()=>this.calcColumnsLayout()),Object(c.a)(this.printColumnLayout$).pipe(Object(m.a)(()=>this.isAlive),Object(f.a)(1e3)).subscribe(()=>{console.log(""),console.log("Auto columns layout:"),console.log(JSON.stringify(this._columns,null,4)),console.log("")}),Object(c.a)(this.disableUserSelection$).pipe(Object(m.a)(()=>this.isAlive),Object(d.a)(()=>n.setAttribute("disableselection","")),Object(f.a)(1e3)).subscribe(()=>n.removeAttribute("disableselection")),Object(a.a)(window,"resize").pipe(Object(m.a)(()=>this.isAlive),Object(b.a)(()=>this.hasPercentageColumns),Object(f.a)(5)).subscribe(()=>{this.calcColumnsLayout()}),Object(a.a)(n,"keydown").pipe(Object(m.a)(()=>this.isAlive)).subscribe(t=>{const e=t=>{for(-1===t&&(t=this.columns.length);--t>=0;){const e=this.columns[t];if(e.w>0)return e}return this.currentColumn},s=t=>{for(;++t<this.columns.length;){const e=this.columns[t];if(e.w>0)return e}return this.currentColumn};switch(t.keyCode||i.j[t.code]){case i.j.LeftArrow:return this.currentColumn=this.columns&&e(this.columns.findIndex(t=>t.isCurrent)),t.preventDefault(),!1;case i.j.RightArrow:return this.currentColumn=this.columns&&s(this.columns.findIndex(t=>t.isCurrent)),t.preventDefault(),!1;default:return!0}}),Object(a.a)(n,"mousedown").pipe(Object(m.a)(()=>this.isAlive),Object(b.a)(t=>1===t.buttons)).subscribe(t=>{const e=this.getColumnFromHTMLElement(t.target);Object(a.a)(n,"mouseup").pipe(Object(C.a)(),Object(b.a)(()=>!!e)).subscribe(t=>{const s=this.getColumnElementFromHTMLElement(t.target);(s&&s.getAttribute("colname"))===e.name&&(this.currentColumn=e)})})}set sortable(t){this._sortable=Object(n.b)(t)}get sortable(){return this._sortable}get columnGroups(){return this._columnGroups}get noHorizontalScroll(){return this._noHorizontalScroll}set searchArea(t){this._searchArea=Object(n.b)(t)}get searchArea(){return this._searchArea}set groupArea(t){if(this._groupArea=Object(n.b)(t),this._columnsSortable&&!this.clipboardService)throw new Error("To use the DejaGrid.groupArea feature, please import and provide the DejaClipboardService in your application.")}get groupArea(){return this._groupArea}set rowsDraggable(t){this._rowsDraggable=Object(n.b)(t)}get rowsDraggable(){return this._rowsDraggable}set rowsSortable(t){this._rowsSortable=Object(n.b)(t)}get rowsSortable(){return this._rowsSortable}set columnsDraggable(t){this._columnsDraggable=Object(n.b)(t)}get columnsDraggable(){return this._columnsDraggable}set columnsSortable(t){if(this._columnsSortable=Object(n.b)(t),this._columnsSortable&&!this.clipboardService)throw new Error("To use the DejaGrid.columnsSortable feature, please import and provide the DejaClipboardService in your application.")}get columnsSortable(){return this._columnsSortable}set columnsSizable(t){this._columnsSizable=Object(n.b)(t)}get columnsSizable(){return this._columnsSizable}set multiSelect(t){this._multiSelect=Object(n.b)(t)}get multiSelect(){return this._multiSelect}set columns(t){this.columns$.next(t)}get columns(){return this._columns}set rows(t){if(this._rows=t,this._rows&&!this._columns)if(this._rows instanceof Array)this.calcColumnsLayout(this._rows);else{let t=this._rows;if(!t.subscribe){const e=this._rows;t=Object(c.a)(e)}this.viewPortChanged.pipe(Object(b.a)(t=>t&&t.items&&t.items.length>0),Object(C.a)()).subscribe(t=>this.calcColumnsLayout(t.items))}this.changeDetectorRef.markForCheck()}get rows(){return this._rows}set currentColumn(t){this.columns.forEach(t=>t.isCurrent=!1),t&&(t.isCurrent=!0,this.ensureColumnVisible(t)),this._columnLayout&&this._columnLayout.refresh$.next()}get currentColumn(){return this.columns.find(t=>t.isCurrent)}set itemListService(t){this._itemListService=t}get itemListService(){return this._itemListService||this.treeListComponent.itemListService}get depthMax(){return this.treeListComponent.depthMax}get viewPort(){return this.treeListComponent.viewPort}set columnGroups(t){this.columnGroups$.next(t)}get searchPrefixTemplate(){return this.searchPrefixTemplateExternal||this.searchPrefixTemplateInternal}get searchSuffixTemplate(){return this.searchSuffixTemplateExternal||this.searchSuffixTemplateInternal}get rowTemplate(){return this.rowTemplateExternal||this.rowTemplateInternal}get parentRowTemplate(){return this.parentRowTemplateExternal||this.parentRowTemplateInternal}get cellTemplate(){return this._cellTemplate}get parentTitleTemplate(){return this._parentTitleTemplate}get columnsHeaderTemplate(){return this.headerTemplateExternal||this.headerTemplateInternal}get columnHeaderTemplate(){return this.columnHeaderTemplateExternal||this._columnHeaderTemplate}get columnLayout(){return this._columnLayout}ngOnDestroy(){this.isAlive=!1}get value(){return this.rows}set value(t){this.rows=t}refresh(){this.treeListComponent&&this.treeListComponent.refresh(),this.columnLayout&&(this.hasPercentageColumns?this.calcColumnsLayout():this.columnLayout.refresh$.next()),this.changeDetectorRef.markForCheck()}refreshViewPort(t){this.treeListComponent.refreshViewPort(t)}clearRowsHeight(){this.treeListComponent&&this.treeListComponent.clearRowsHeight()}clearViewPort(){this.treeListComponent&&this.treeListComponent.clearViewPort()}ensureColumnVisible(t){if(void 0===t||!this.columns||0===this.columns.length||this._noHorizontalScroll)return;const e=this.treeListComponent.listElement,s=e.scrollLeft;let n=0;this.columns.find(e=>{if(t===e)return!0;n+=e.w}),n<s?e.scrollLeft=n:s<n+t.w-e.clientWidth&&(e.scrollLeft=n+t.w-e.clientWidth)}scroll(t){this.lastScrollLeft!==t.scrollLeft&&(this.lastScrollLeft=t.scrollLeft,this.calcColumnsLayout())}sort(t){this.treeListComponent.sort(t)}sort$(t){return this.treeListComponent.sort$(t)}group$(t){return this.treeListComponent.group$(t)}ungroup$(t){return this.treeListComponent.ungroup$(t)}onColumnHeaderClicked(t){if(this.treeListComponent&&!this.sortable||!1===t.column.sortable)return;const e=()=>{t.column.sorting=!1,this.changeDetectorRef.markForCheck(),this.header.refresh()};t.column.sorting=!0,this.changeDetectorRef.markForCheck(),Object(h.a)(1).pipe(Object(C.a)(),Object(g.a)(()=>this.sort$(t.column.name))).subscribe(()=>{e(),this.sortChanged.emit(this.treeListComponent.sortInfos)},t=>{throw e(),t.toString()})}onColumnDragEnd(){this.columnLayout.refresh$.next()}onColumnLayoutChanged(t){this.columns.splice(t.index,1),t.target?this.columns.splice(t.targetIndex,0,t.column):this.columns.push(t.column),this.calcColumnsLayout(),this.ensureColumnVisible(t.column),this.columnLayoutChanged.emit(t),this.changeDetectorRef.markForCheck()}onColumnSizeChanged(t){if(!this.columnsLayoutInfos)return;if(this.sizingLayoutInfos||(this.sizingLayoutInfos=this.columnsLayoutInfos),!t.column)return void delete this.sizingLayoutInfos;const e=this.sizingLayoutInfos.columnsWidth[t.column.name],s=t.column.minWidth||this.columnsMinWidth;if("%"===e.unit){const n=this.treeListComponent.listElement.clientWidth;t.column.width=`${Math.max(100*s/n,e.value+t.offsetWidth*this.sizingLayoutInfos.totalPercentWidth/(n-this.sizingLayoutInfos.totalFixedWidth)*2)}%`}else t.column.width=`${Math.max(s,e.value+t.offsetWidth)}px`;this.calcColumnsLayout(),this.disableUserSelection$.next(),this.ensureSizingVisible(t.column),this.columnSizeChanged.emit(t)}onGroupRemoved(t){const e=t.item;this.treeListComponent.ungroup$({groupByField:e.groupByField||e.name,groupTextField:e.groupTextField||e.name}).pipe(Object(C.a)()).subscribe(w)}onGroupsChanged(t){this.columnGroups$.next(t.columns)}calcColumnsLayout(t){if(this.noColumnsSpecified=!1,(!this._columns||!this._columns.length)&&t&&t.length){const e=t=>t.find(t=>{if(!t.$items)return!!t;{const s=e(t.$items);if(s)return!!s}}),s=e(t);s&&(this.noColumnsSpecified=!0,this._columns=Object.keys(s).map(t=>({label:t,name:t,width:"130px"})))}if(this.noColumnsSpecified&&this.printColumnLayout$.next(),this.clearColumnLayout(),!this._columns||!this._columns.length)return this.header&&this.header.refresh(),void this._columnLayout.refresh$.next();const e=this.treeListComponent&&this.treeListComponent.listElement;if(!e)return;this._columnLayout.scrollLeft=-this.lastScrollLeft;let s=-this.lastScrollLeft;const n=e.clientWidth;this.columnsLayoutInfos=new L.a(this._columns),this._columns.forEach(t=>delete t.w);const o=()=>{let t=0;this.columnsLayoutInfos.fixedColumns.filter(t=>0!==t.w).forEach(e=>{e.w=Math.max(e.minWidth||this.columnsMinWidth,this.columnsLayoutInfos.columnsWidth[e.name].value),t+=e.w}),this.columnsLayoutInfos.totalFixedWidth=t;const e=this.columnsLayoutInfos.percentColumns.filter(t=>0!==t.w);let s=n-t;e.forEach(t=>s-=t.minWidth||this.columnsMinWidth);let o=s;return e.forEach(t=>{let e=t.minWidth||this.columnsMinWidth;if(s>0){const n=Math.floor(s*this.columnsLayoutInfos.columnsWidth[t.name].value/this.columnsLayoutInfos.totalPercentWidth);o-=n,e+=n}t.w=e}),o};let i=o();i<0&&this.columnsLayoutInfos.responsiveColumns.length&&(this.columnsLayoutInfos.responsiveColumns.find(t=>(i+=t.w,t.w=0,i>=0)),i=o()),this._noHorizontalScroll=i>=0,this.hasPercentageColumns=this.columnsLayoutInfos&&this.columnsLayoutInfos.percentColumns.length>0,this._columnLayout.vpBeforeWidth=0,this._columnLayout.vpAfterWidth=0;let r=0;this._columns.filter(t=>t.w>0).forEach(t=>{r+=t.w,s>n?(this._columnLayout.vpAfterWidth+=t.w,s+=t.w):(s+=t.w)<0?this._columnLayout.vpBeforeWidth+=t.w:this._columnLayout.columns.push(t)}),this.rowsWidth=r>n?r:n,this.header&&this.header.refresh(),this._columnLayout.refresh$.next()}ensureSizingVisible(t){if(void 0===t||!this.columns||0===this.columns.length||this._noHorizontalScroll)return;const e=this.treeListComponent.listElement,s=e.scrollLeft;let n=0;this.columns.find(e=>{if(t===e)return!0;n+=e.w}),n+t.w<s?e.scrollLeft=n+t.w:s<n+t.w-e.clientWidth&&(e.scrollLeft=n+t.w-e.clientWidth)}clearColumnLayout(){this._columnLayout.scrollLeft=0,this._columnLayout.vpAfterWidth=0,this._columnLayout.vpBeforeWidth=0,this._columnLayout.columns=[]}getColumnElementFromHTMLElement(t){let e=t;for(;e&&!e.hasAttribute("colname");)t=e,e=e.parentElement;if(e)return e}getColumnFromHTMLElement(t){const e=this.getColumnElementFromHTMLElement(t),s=e&&e.getAttribute("colname");return s&&this._columnLayout.columns.find(t=>t.name===s)}}},wmqg:function(t,e,s){"use strict";s.d(e,"a",function(){return n});class n{}},yL1F:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var n=s("8Y7J");s("fYS1");class o{constructor(t,e){this.changeDetectorRef=t,this.clipboardService=e,this.groupsChanged=new n.EventEmitter,this.groupRemoved=new n.EventEmitter,this._groups=[],this.columnGroupKey="deja-grid-column",this.groupGroupKey="deja-grid-group"}get groups(){return this._groups}set groups(t){this._groups=t||[]}getDragContext(t){return this.clipboardService?{dragendcallback:t=>{t.dragInfo.hasOwnProperty(this.columnGroupKey)},dragstartcallback:e=>{e.dragInfo[this.groupGroupKey]=t}}:null}getDropContext(){if(!this.clipboardService)return null;const t=t=>{const e={column:t,columns:this.groups,originalEvent:event};this.groupsChanged.emit(e),event.preventDefault()},e=e=>{if(e.dragInfo.hasOwnProperty(this.columnGroupKey)){const t=e.dragInfo[this.columnGroupKey];this.groups.find(e=>e===t)||e.preventDefault()}else{if(!e.dragInfo.hasOwnProperty(this.groupGroupKey))return;{const s=this.getGroupElementFromHTMLElement(e.target),n=s&&s.getAttribute("index")||null,o=null!==n?+n:null;if(null===o)return;const i=e.dragInfo[this.groupGroupKey],r=this.groups.findIndex(t=>t===i);if(r===o)return void e.preventDefault();this.groups.splice(r,1),this.groups.splice(o,0,i),t(i),this.changeDetectorRef.markForCheck(),e.preventDefault()}}};return{dragentercallback:e,dragovercallback:e,dropcallback:e=>{if(e.dragInfo.hasOwnProperty(this.columnGroupKey)){const s=e.dragInfo[this.columnGroupKey],n=this.getGroupElementFromHTMLElement(e.target),o=n&&n.getAttribute("index")||null,i=null!==o?+o:null;if(null!==i){const t=n.getBoundingClientRect();e.x<=t.left+t.width/2?this.groups.splice(i,0,s):i<this.groups.length-1?this.groups.splice(i+1,0,s):this.groups.push(s)}else this.groups.push(s);t(s)}else e.dragInfo.hasOwnProperty(this.groupGroupKey)&&t(e.dragInfo[this.groupGroupKey]);this.changeDetectorRef.markForCheck()}}}removeGroup(t){return this.groupRemoved.emit(t),t.stopPropagation(),!1}getGroupElementFromHTMLElement(t){let e=t;for(;e&&!e.hasAttribute("groupname");)t=e,e=e.parentElement;if(e)return e}}}}]);