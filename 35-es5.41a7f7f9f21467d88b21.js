function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _get(e,t,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"ToA/":function(e,t,i){"use strict";i.r(t);var n=i("SVse"),o=i("s7LF"),r=i("Dxy4"),s=i("PDjf"),a=i("pMoy"),l=i("M9ds"),c=i("l0rg"),d=i("650w"),u=i("PO1J"),h=i("KUKF"),p=(i("mrSG"),i("8Y7J")),f=i("Ynp+"),m=i("Q2Ze"),g=i("Tj54"),b=i("UhP/"),v=i("8LU1"),y=i("omvX"),_=i("SCoL");function x(e,t){if(1&e&&(p["\u0275\u0275namespaceSVG"](),p["\u0275\u0275element"](0,"circle",3)),2&e){var i=p["\u0275\u0275nextContext"]();p["\u0275\u0275styleProp"]("animation-name","mat-progress-spinner-stroke-rotate-"+i.diameter)("stroke-dashoffset",i._strokeDashOffset,"px")("stroke-dasharray",i._strokeCircumference,"px")("stroke-width",i._circleStrokeWidth,"%"),p["\u0275\u0275attribute"]("r",i._circleRadius)}}function k(e,t){if(1&e&&(p["\u0275\u0275namespaceSVG"](),p["\u0275\u0275element"](0,"circle",3)),2&e){var i=p["\u0275\u0275nextContext"]();p["\u0275\u0275styleProp"]("stroke-dashoffset",i._strokeDashOffset,"px")("stroke-dasharray",i._strokeCircumference,"px")("stroke-width",i._circleStrokeWidth,"%"),p["\u0275\u0275attribute"]("r",i._circleRadius)}}var w,C,j,M,O=Object(b.r)((function e(t){_classCallCheck(this,e),this._elementRef=t}),"primary"),T=new p.InjectionToken("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}}),P=((C=function(e){function t(e,i,n,o,r){var s;_classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._elementRef=e,s._document=n,s._diameter=100,s._value=0,s._fallbackAnimation=!1,s.mode="determinate";var a=t._diameters;return a.has(n.head)||a.set(n.head,new Set([100])),s._fallbackAnimation=i.EDGE||i.TRIDENT,s._noopAnimations="NoopAnimations"===o&&!!r&&!r._forceAnimations,r&&(r.diameter&&(s.diameter=r.diameter),r.strokeWidth&&(s.strokeWidth=r.strokeWidth)),s}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){var e=this._elementRef.nativeElement;this._styleRoot=function(e,t){if("undefined"!=typeof window){var i=t.head;if(i&&(i.createShadowRoot||i.attachShadow)){var n=e.getRootNode?e.getRootNode():null;if(n instanceof window.ShadowRoot)return n}}return null}(e,this._document)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate".concat(this._fallbackAnimation?"-fallback":"","-animation"))}},{key:"_attachStyleNode",value:function(){var e=this._styleRoot,i=this._diameter,n=t._diameters,o=n.get(e);if(!o||!o.has(i)){var r=this._document.createElement("style");r.setAttribute("mat-spinner-animation",i+""),r.textContent=this._getAnimationText(),e.appendChild(r),o||(o=new Set,n.set(e,o)),o.add(i)}}},{key:"_getAnimationText",value:function(){return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,"".concat(.95*this._strokeCircumference)).replace(/END_VALUE/g,"".concat(.2*this._strokeCircumference)).replace(/DIAMETER/g,"".concat(this.diameter))}},{key:"diameter",get:function(){return this._diameter},set:function(e){this._diameter=Object(v.e)(e),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}},{key:"strokeWidth",get:function(){return this._strokeWidth||this.diameter/10},set:function(e){this._strokeWidth=Object(v.e)(e)}},{key:"value",get:function(){return"determinate"===this.mode?this._value:0},set:function(e){this._value=Math.max(0,Math.min(100,Object(v.e)(e)))}},{key:"_circleRadius",get:function(){return(this.diameter-10)/2}},{key:"_viewBox",get:function(){var e=2*this._circleRadius+this.strokeWidth;return"0 0 ".concat(e," ").concat(e)}},{key:"_strokeCircumference",get:function(){return 2*Math.PI*this._circleRadius}},{key:"_strokeDashOffset",get:function(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null}},{key:"_circleStrokeWidth",get:function(){return this.strokeWidth/this.diameter*100}}]),t}(O)).\u0275fac=function(e){return new(e||C)(p["\u0275\u0275directiveInject"](p.ElementRef),p["\u0275\u0275directiveInject"](_.a),p["\u0275\u0275directiveInject"](n.d,8),p["\u0275\u0275directiveInject"](y.a,8),p["\u0275\u0275directiveInject"](T))},C.\u0275cmp=p["\u0275\u0275defineComponent"]({type:C,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(p["\u0275\u0275attribute"]("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),p["\u0275\u0275styleProp"]("width",t.diameter,"px")("height",t.diameter,"px"),p["\u0275\u0275classProp"]("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(p["\u0275\u0275namespaceSVG"](),p["\u0275\u0275elementStart"](0,"svg",0),p["\u0275\u0275template"](1,x,1,9,"circle",1),p["\u0275\u0275template"](2,k,1,7,"circle",2),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275styleProp"]("width",t.diameter,"px")("height",t.diameter,"px"),p["\u0275\u0275property"]("ngSwitch","indeterminate"===t.mode),p["\u0275\u0275attribute"]("viewBox",t._viewBox),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngSwitchCase",!0),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngSwitchCase",!1))},directives:[n.p,n.q],styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),C._diameters=new WeakMap,C),E=((w=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:w}),w.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||w)},imports:[[b.e,n.c],b.e]}),w),D=i("1O3W"),S=i("YEUz"),B=i("Ht+U"),I=i("XNiG"),R=i("itXk"),$=i("GyhO"),A=i("HDdC"),z=i("IzEk"),F=i("7o/Q"),L=function(){function e(t){_classCallCheck(this,e),this.total=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new W(e,this.total))}}]),e}(),W=function(e){function t(e,i){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=i,n.count=0,n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){++this.count>this.total&&this.destination.next(e)}}]),t}(F.a),V=i("Kj3r"),H=i("lJxs"),X=i("JX91"),N=i("1G5W"),U=new Set,G=((M=function(){function e(t){_classCallCheck(this,e),this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):q}return _createClass(e,[{key:"matchMedia",value:function(e){return this._platform.WEBKIT&&function(e){if(!U.has(e))try{j||((j=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(j)),j.sheet&&(j.sheet.insertRule("@media ".concat(e," {.fx-query-test{ }}"),0),U.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}]),e}()).\u0275fac=function(e){return new(e||M)(p["\u0275\u0275inject"](_.a))},M.\u0275prov=Object(p["\u0275\u0275defineInjectable"])({factory:function(){return new M(Object(p["\u0275\u0275inject"])(_.a))},token:M,providedIn:"root"}),M);function q(e){return{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}var Y,K=((Y=function(){function e(t,i){_classCallCheck(this,e),this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new I.a}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(e){var t=this;return Q(Object(v.a)(e)).some((function(e){return t._registerQuery(e).mql.matches}))}},{key:"observe",value:function(e){var t=this,i=Q(Object(v.a)(e)).map((function(e){return t._registerQuery(e).observable})),n=Object(R.b)(i);return(n=Object($.a)(n.pipe(Object(z.a)(1)),n.pipe((function(e){return e.lift(new L(1))}),Object(V.a)(0)))).pipe(Object(H.a)((function(e){var t={matches:!1,breakpoints:{}};return e.forEach((function(e){t.matches=t.matches||e.matches,t.breakpoints[e.query]=e.matches})),t})))}},{key:"_registerQuery",value:function(e){var t=this;if(this._queries.has(e))return this._queries.get(e);var i=this._mediaMatcher.matchMedia(e),n={observable:new A.a((function(e){var n=function(i){return t._zone.run((function(){return e.next(i)}))};return i.addListener(n),function(){i.removeListener(n)}})).pipe(Object(X.a)(i),Object(H.a)((function(t){return{query:e,matches:t.matches}})),Object(N.a)(this._destroySubject)),mql:i};return this._queries.set(e,n),n}}]),e}()).\u0275fac=function(e){return new(e||Y)(p["\u0275\u0275inject"](G),p["\u0275\u0275inject"](p.NgZone))},Y.\u0275prov=Object(p["\u0275\u0275defineInjectable"])({factory:function(){return new Y(Object(p["\u0275\u0275inject"])(G),Object(p["\u0275\u0275inject"])(p.NgZone))},token:Y,providedIn:"root"}),Y);function Q(e){return e.map((function(e){return e.split(",")})).reduce((function(e,t){return e.concat(t)})).map((function(e){return e.trim()}))}var J=i("1z/I"),Z=i("GS7A"),ee=i("7KAL"),te=i("9gLZ"),ie={tooltipState:Object(Z.n)("state",[Object(Z.k)("initial, void, hidden",Object(Z.l)({opacity:0,transform:"scale(0)"})),Object(Z.k)("visible",Object(Z.l)({transform:"scale(1)"})),Object(Z.m)("* => visible",Object(Z.e)("200ms cubic-bezier(0, 0, 0.2, 1)",Object(Z.h)([Object(Z.l)({opacity:0,transform:"scale(0)",offset:0}),Object(Z.l)({opacity:.5,transform:"scale(0.99)",offset:.5}),Object(Z.l)({opacity:1,transform:"scale(1)",offset:1})]))),Object(Z.m)("* => hidden",Object(Z.e)("100ms cubic-bezier(0, 0, 0.2, 1)",Object(Z.l)({opacity:0})))])},ne=Object(_.f)({passive:!0});function oe(e){return Error('Tooltip position "'.concat(e,'" is invalid.'))}var re,se,ae,le=new p.InjectionToken("mat-tooltip-scroll-strategy"),ce={provide:le,deps:[D.d],useFactory:function(e){return function(){return e.scrollStrategies.reposition({scrollThrottle:20})}}},de=new p.InjectionToken("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),ue=((ae=function(){function e(t,i,n,o,r,s,a,l,c,d,u,h){var p=this;_classCallCheck(this,e),this._overlay=t,this._elementRef=i,this._scrollDispatcher=n,this._viewContainerRef=o,this._ngZone=r,this._platform=s,this._ariaDescriber=a,this._focusMonitor=l,this._dir=d,this._defaultOptions=u,this._position="below",this._disabled=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=new Map,this._destroyed=new I.a,this._handleKeydown=function(e){p._isTooltipVisible()&&e.keyCode===B.e&&!Object(B.o)(e)&&(e.preventDefault(),e.stopPropagation(),p._ngZone.run((function(){return p.hide(0)})))},this._scrollStrategy=c,u&&(u.position&&(this.position=u.position),u.touchGestures&&(this.touchGestures=u.touchGestures)),l.monitor(i).pipe(Object(N.a)(this._destroyed)).subscribe((function(e){e?"keyboard"===e&&r.run((function(){return p.show()})):r.run((function(){return p.hide(0)}))})),r.runOutsideAngular((function(){i.nativeElement.addEventListener("keydown",p._handleKeydown)}))}return _createClass(e,[{key:"ngOnInit",value:function(){this._setupPointerEvents()}},{key:"ngOnDestroy",value:function(){var e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach((function(t,i){e.removeEventListener(i,t,ne)})),this._passiveListeners.clear(),this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message),this._focusMonitor.stopMonitoring(e)}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.showDelay;if(!this.disabled&&this.message&&(!this._isTooltipVisible()||this._tooltipInstance._showTimeoutId||this._tooltipInstance._hideTimeoutId)){var i=this._createOverlay();this._detach(),this._portal=this._portal||new J.d(he,this._viewContainerRef),this._tooltipInstance=i.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Object(N.a)(this._destroyed)).subscribe((function(){return e._detach()})),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(t)}}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hideDelay;this._tooltipInstance&&this._tooltipInstance.hide(e)}},{key:"toggle",value:function(){this._isTooltipVisible()?this.hide():this.show()}},{key:"_isTooltipVisible",value:function(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}},{key:"_createOverlay",value:function(){var e=this;if(this._overlayRef)return this._overlayRef;var t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(t);return i.positionChanges.pipe(Object(N.a)(this._destroyed)).subscribe((function(t){e._tooltipInstance&&t.scrollableViewProperties.isOverlayClipped&&e._tooltipInstance.isVisible()&&e._ngZone.run((function(){return e.hide(0)}))})),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(Object(N.a)(this._destroyed)).subscribe((function(){return e._detach()})),this._overlayRef}},{key:"_detach",value:function(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}},{key:"_updatePosition",value:function(){var e=this._overlayRef.getConfig().positionStrategy,t=this._getOrigin(),i=this._getOverlayPosition();e.withPositions([Object.assign(Object.assign({},t.main),i.main),Object.assign(Object.assign({},t.fallback),i.fallback)])}},{key:"_getOrigin",value:function(){var e,t=!this._dir||"ltr"==this._dir.value,i=this.position;if("above"==i||"below"==i)e={originX:"center",originY:"above"==i?"top":"bottom"};else if("before"==i||"left"==i&&t||"right"==i&&!t)e={originX:"start",originY:"center"};else{if(!("after"==i||"right"==i&&t||"left"==i&&!t))throw oe(i);e={originX:"end",originY:"center"}}var n=this._invertPosition(e.originX,e.originY);return{main:e,fallback:{originX:n.x,originY:n.y}}}},{key:"_getOverlayPosition",value:function(){var e,t=!this._dir||"ltr"==this._dir.value,i=this.position;if("above"==i)e={overlayX:"center",overlayY:"bottom"};else if("below"==i)e={overlayX:"center",overlayY:"top"};else if("before"==i||"left"==i&&t||"right"==i&&!t)e={overlayX:"end",overlayY:"center"};else{if(!("after"==i||"right"==i&&t||"left"==i&&!t))throw oe(i);e={overlayX:"start",overlayY:"center"}}var n=this._invertPosition(e.overlayX,e.overlayY);return{main:e,fallback:{overlayX:n.x,overlayY:n.y}}}},{key:"_updateTooltipMessage",value:function(){var e=this;this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(z.a)(1),Object(N.a)(this._destroyed)).subscribe((function(){e._tooltipInstance&&e._overlayRef.updatePosition()})))}},{key:"_setTooltipClass",value:function(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}},{key:"_invertPosition",value:function(e,t){return"above"===this.position||"below"===this.position?"top"===t?t="bottom":"bottom"===t&&(t="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:t}}},{key:"_setupPointerEvents",value:function(){var e=this;if(this._platform.IOS||this._platform.ANDROID){if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();var t=function(){clearTimeout(e._touchstartTimeout),e.hide(e._defaultOptions.touchendHideDelay)};this._passiveListeners.set("touchend",t).set("touchcancel",t).set("touchstart",(function(){clearTimeout(e._touchstartTimeout),e._touchstartTimeout=setTimeout((function(){return e.show()}),500)}))}}else this._passiveListeners.set("mouseenter",(function(){return e.show()})).set("mouseleave",(function(){return e.hide()}));this._passiveListeners.forEach((function(t,i){e._elementRef.nativeElement.addEventListener(i,t,ne)}))}},{key:"_disableNativeGesturesIfNecessary",value:function(){var e=this._elementRef.nativeElement,t=e.style,i=this.touchGestures;"off"!==i&&(("on"===i||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName)&&(t.userSelect=t.msUserSelect=t.webkitUserSelect=t.MozUserSelect="none"),"on"!==i&&e.draggable||(t.webkitUserDrag="none"),t.touchAction="none",t.webkitTapHighlightColor="transparent")}},{key:"position",get:function(){return this._position},set:function(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(v.b)(e),this._disabled&&this.hide(0)}},{key:"message",get:function(){return this._message},set:function(e){var t=this;this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=null!=e?"".concat(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._updateTooltipMessage(),this._ngZone.runOutsideAngular((function(){Promise.resolve().then((function(){t._ariaDescriber.describe(t._elementRef.nativeElement,t.message)}))})))}},{key:"tooltipClass",get:function(){return this._tooltipClass},set:function(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}}]),e}()).\u0275fac=function(e){return new(e||ae)(p["\u0275\u0275directiveInject"](D.d),p["\u0275\u0275directiveInject"](p.ElementRef),p["\u0275\u0275directiveInject"](ee.b),p["\u0275\u0275directiveInject"](p.ViewContainerRef),p["\u0275\u0275directiveInject"](p.NgZone),p["\u0275\u0275directiveInject"](_.a),p["\u0275\u0275directiveInject"](S.c),p["\u0275\u0275directiveInject"](S.f),p["\u0275\u0275directiveInject"](le),p["\u0275\u0275directiveInject"](te.b,8),p["\u0275\u0275directiveInject"](de,8),p["\u0275\u0275directiveInject"](p.ElementRef))},ae.\u0275dir=p["\u0275\u0275defineDirective"]({type:ae,selectors:[["","matTooltip",""]],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),ae),he=((se=function(){function e(t,i){_classCallCheck(this,e),this._changeDetectorRef=t,this._breakpointObserver=i,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new I.a,this._isHandset=this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)")}return _createClass(e,[{key:"show",value:function(e){var t=this;this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout((function(){t._visibility="visible",t._showTimeoutId=null,t._markForCheck()}),e)}},{key:"hide",value:function(e){var t=this;this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout((function(){t._visibility="hidden",t._hideTimeoutId=null,t._markForCheck()}),e)}},{key:"afterHidden",value:function(){return this._onHide.asObservable()}},{key:"isVisible",value:function(){return"visible"===this._visibility}},{key:"ngOnDestroy",value:function(){this._onHide.complete()}},{key:"_animationStart",value:function(){this._closeOnInteraction=!1}},{key:"_animationDone",value:function(e){var t=e.toState;"hidden"!==t||this.isVisible()||this._onHide.next(),"visible"!==t&&"hidden"!==t||(this._closeOnInteraction=!0)}},{key:"_handleBodyInteraction",value:function(){this._closeOnInteraction&&this.hide(0)}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}}]),e}()).\u0275fac=function(e){return new(e||se)(p["\u0275\u0275directiveInject"](p.ChangeDetectorRef),p["\u0275\u0275directiveInject"](K))},se.\u0275cmp=p["\u0275\u0275defineComponent"]({type:se,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,t){1&e&&p["\u0275\u0275listener"]("click",(function(e){return t._handleBodyInteraction()}),!1,p["\u0275\u0275resolveBody"]),2&e&&p["\u0275\u0275styleProp"]("zoom","visible"===t._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275listener"]("@state.start",(function(e){return t._animationStart()}))("@state.done",(function(e){return t._animationDone(e)})),p["\u0275\u0275pipe"](1,"async"),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"]()),2&e){var i,n=null==(i=p["\u0275\u0275pipeBind1"](1,5,t._isHandset))?null:i.matches;p["\u0275\u0275classProp"]("mat-tooltip-handset",n),p["\u0275\u0275property"]("ngClass",t.tooltipClass)("@state",t._visibility),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](t.message)}},directives:[n.l],pipes:[n.b],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[ie.tooltipState]},changeDetection:0}),se),pe=((re=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:re}),re.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||re)},providers:[ce],imports:[[S.a,n.c,D.g,b.e],b.e]}),re),fe=i("Jql4"),me=i("6SPM"),ge=i("QmX1"),be=i("oJzz"),ve=i("bFib"),ye=i("Z5sx"),_e=i("2Vo4"),xe=i("jtHE"),ke=i("Cfvw"),we=i("PqYM"),Ce=i("VRyK"),je=i("xgIS"),Me=i("LRne"),Oe=i("pLZG"),Te=i("GJmQ"),Pe=i("SxV6"),Ee=i("vkgz"),De=i("3E0/"),Se=i("eIep"),Be=i("128B"),Ie=i("cUpR");function Re(e,t){if(1&e){var i=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"deja-editor",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"](2).onModelChanged(e)}))("blur",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"](2).onEditorBlur()})),p["\u0275\u0275elementEnd"]()}if(2&e){var n=p["\u0275\u0275nextContext"](2);p["\u0275\u0275property"]("ngModel",n.model.html)("config",n.editorConfig)}}function $e(e,t){if(1&e){var i=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",6),p["\u0275\u0275listener"]("dblclick",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"](2).edit()})),p["\u0275\u0275element"](1,"div",7),p["\u0275\u0275elementEnd"]()}if(2&e){var n=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("innerHtml",n.innerHtml,p["\u0275\u0275sanitizeHtml"])}}function Ae(e,t){if(1&e){var i=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",8),p["\u0275\u0275elementStart"](1,"em",9),p["\u0275\u0275listener"]("click",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"](2).editStyle()})),p["\u0275\u0275text"](2,"border_style"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"em",10),p["\u0275\u0275listener"]("click",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"](2).edit()})),p["\u0275\u0275text"](4,"edit"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"em",11),p["\u0275\u0275listener"]("click",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"](2).close.emit(e)})),p["\u0275\u0275text"](6,"close"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var n=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("matTooltip",n.model.borderWidth?" Edit Border":" Add Border"),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("matTooltip","Edit"),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("matTooltip","Delete")}}function ze(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",1),p["\u0275\u0275template"](1,Re,1,2,"deja-editor",2),p["\u0275\u0275template"](2,$e,2,1,"div",3),p["\u0275\u0275template"](3,Ae,7,3,"div",4),p["\u0275\u0275elementEnd"]()),2&e){var i=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",i.editing),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!i.designMode||!i.editing),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",i.designMode)}}function Fe(e,t){if(1&e){var i=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"deja-tile-group",3),p["\u0275\u0275listener"]("modelChanged",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().onGroupChanged(e)}))("close",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().close.emit(e)})),p["\u0275\u0275elementEnd"]()}if(2&e){var n=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("model",n.tile)("designMode",n.designMode)}}function Le(e,t){}var We=function(e,t){return{$implicit:e,designMode:t}};function Ve(e,t){if(1&e&&p["\u0275\u0275template"](0,Le,0,0,"ng-template",4),2&e){var i=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("ngTemplateOutlet",i.template)("ngTemplateOutletContext",p["\u0275\u0275pureFunction2"](2,We,i.tile,i.designMode))}}function He(e,t){if(1&e&&p["\u0275\u0275element"](0,"mat-progress-spinner",5),2&e){var i=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("diameter",i.progressDiameter)}}var Xe=["tileTemplate"],Ne=["tilesContainer"];function Ue(e,t){if(1&e){var i=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"deja-tile",4),p["\u0275\u0275listener"]("close",(function(e){p["\u0275\u0275restoreView"](i);var n=t.$implicit;return p["\u0275\u0275nextContext"]().onTileClosed(n)}))("groupChanged",(function(e){p["\u0275\u0275restoreView"](i);var n=t.$implicit;return p["\u0275\u0275nextContext"]().onTileGroupModelChanged(n)})),p["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit,o=t.index,r=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("id",n.id)("tile",n)("designMode",r.designMode)("template",r.tileTemplate),p["\u0275\u0275attribute"]("tile-index",o)}}var Ge,qe,Ye,Ke,Qe,Je,Ze,et,tt,it=((Ge=function(){function e(t){_classCallCheck(this,e),this.cutted$=new _e.a(!1),this.dragging$=new _e.a(!1),this.dropping$=new _e.a(!1),this.pressed$=new _e.a(!1),this.selected$=new _e.a(!1),this.hidden$=new xe.a(1),this.pixelBounds$=new _e.a(null),this.deleted$=new I.a,this.refresh$=new I.a,this.isTemporary=!1,this._isDragging=!1,this._isDropping=!1,this._isPressed=!1,this._isHidden=!1,this._id=t||"#".concat(e.currentId++)}return _createClass(e,[{key:"makeId",value:function(){this._id="#".concat(e.currentId++)}},{key:"equalsTo",value:function(e){return this._templateModel?this._templateModel===e._templateModel:this._id===e._id}},{key:"clone",value:function(t){return t||(t=new e(this.id)),t._percentBounds=this.percentBounds,t._color=this.color,t._templateModel=this.templateModel,t._cutted=this._cutted,t._selected=this._selected,t._pending=this._pending,t._fading=this._fading,t}},{key:"delete",value:function(){this.deleted$.next()}},{key:"refresh",value:function(){this.refresh$.next()}},{key:"idealBounds",get:function(){return new ye.F(0,0,15,15)}},{key:"pixelBounds",set:function(e){ye.F.equals(this._pixelBounds,e)||(this._pixelBounds=e,this.pixelBounds$.next(e))},get:function(){return this._pixelBounds}},{key:"percentBounds",set:function(e){this._percentBounds=e},get:function(){return this._percentBounds}},{key:"templateModel",set:function(e){this._templateModel=e},get:function(){return this._templateModel}},{key:"id",get:function(){return this._id}},{key:"isCutted",set:function(e){this._cutted!==e&&(this._cutted=e,this.cutted$.next(e))},get:function(){return this._cutted}},{key:"color",set:function(e){this._color=e},get:function(){return this._color}},{key:"isDragging",set:function(e){this._isDragging!==e&&(this._isDragging=e,this.dragging$.next(e))},get:function(){return this._isDragging}},{key:"isDropping",set:function(e){this._isDropping!==e&&(this._isDropping=e,this.dropping$.next(e))},get:function(){return this._isDropping}},{key:"isPressed",set:function(e){this._isPressed!==e&&(this._isPressed=e,this.pressed$.next(e))},get:function(){return this._isPressed}},{key:"isSelected",set:function(e){this._selected!==e&&(this._selected=e,this.selected$.next(e))},get:function(){return this._selected}},{key:"isHidden",set:function(e){this._isHidden!==e&&(this._isHidden=e,this.hidden$.next(e))},get:function(){return this._isHidden}},{key:"isPending",set:function(e){this._pending=e},get:function(){return this._pending}},{key:"fading",get:function(){return this._fading},set:function(e){this._fading=e}}]),e}()).currentId=0,Ge),nt=function(e){return e[e.top=1]="top",e[e.right=2]="right",e[e.bottom=4]="bottom",e[e.left=8]="left",e[e.all=15]="all",e}({}),ot=function(e){function t(e){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).color="rgb(38, 50, 56)",i.clearBorder(),i}return _inherits(t,e),_createClass(t,[{key:"clearBorder",value:function(){this.borderDirection=nt.all,this.borderWidth=0,this.borderColor="#000"}},{key:"clone",value:function(e){return e||(e=new t),_get(_getPrototypeOf(t.prototype),"clone",this).call(this,e),e.html=this.html,e.borderWidth=this.borderWidth,e.borderColor=this.borderColor,e.borderDirection=this.borderDirection,e}},{key:"idealBounds",get:function(){return new ye.F(0,0,15,5)}}]),t}(it),rt=((qe=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))).min=0,e.max=20,e.widthStep=2,e}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){this.materialColors=this.injector.get(ye.B),this.model=this.config.data}},{key:"borderColor",get:function(){return this.model&&this.model.borderColor?ye.b.fromHex(this.model.borderColor):null},set:function(e){this.model.borderColor=e.toHex(),this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection)}},{key:"borderWidth",get:function(){return this.model&&this.model.borderWidth/2||null},set:function(e){e>=this.min&&e<=this.max&&(this.model.borderWidth=e*this.widthStep,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}},{key:"topBorder",get:function(){return!!this.model&&0!=(this.model.borderDirection&nt.top)},set:function(e){this.model&&(e?this.model.borderDirection|=nt.top:this.model.borderDirection&=~nt.top,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}},{key:"rightBorder",get:function(){return!!this.model&&0!=(this.model.borderDirection&nt.right)},set:function(e){this.model&&(e?this.model.borderDirection|=nt.right:this.model.borderDirection&=~nt.right,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}},{key:"bottomBorder",get:function(){return!!this.model&&0!=(this.model.borderDirection&nt.bottom)},set:function(e){this.model&&(e?this.model.borderDirection|=nt.bottom:this.model.borderDirection&=~nt.bottom,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}},{key:"leftBorder",get:function(){return!!this.model&&0!=(this.model.borderDirection&nt.left)},set:function(e){this.model&&(e?this.model.borderDirection|=nt.left:this.model.borderDirection&=~nt.left,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}}]),t}(ve.d)).\u0275fac=function(e){return pt(e||qe)},qe.\u0275cmp=p["\u0275\u0275defineComponent"]({type:qe,selectors:[["deja-tile-group-style-editor"]],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:9,consts:[[1,"border-dimensions"],[1,"border-width"],["appearance","outline"],[3,"min","max","ngModel","ngModelChange"],[1,"border-positions"],["color","primary",3,"ngModel","ngModelChange"],[1,"border-color"],[3,"colors","ngModel","ngModelChange"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275elementStart"](1,"div",1),p["\u0275\u0275elementStart"](2,"h4"),p["\u0275\u0275text"](3,"Border Width:"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"mat-form-field",2),p["\u0275\u0275elementStart"](5,"deja-numeric-stepper",3),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.borderWidth=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"div",4),p["\u0275\u0275elementStart"](7,"h4"),p["\u0275\u0275text"](8,"Border Position:"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"mat-checkbox",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.topBorder=e})),p["\u0275\u0275text"](10,"Top"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"mat-checkbox",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.rightBorder=e})),p["\u0275\u0275text"](12,"Right"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](13,"mat-checkbox",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bottomBorder=e})),p["\u0275\u0275text"](14,"Bottom"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](15,"mat-checkbox",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.leftBorder=e})),p["\u0275\u0275text"](16,"Left"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](17,"div",6),p["\u0275\u0275elementStart"](18,"h4"),p["\u0275\u0275text"](19,"Color Selection:"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](20,"deja-color-selector",7),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.borderColor=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("min",t.min)("max",t.max)("ngModel",t.borderWidth),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngModel",t.topBorder),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",t.rightBorder),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",t.bottomBorder),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",t.leftBorder),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("colors",t.materialColors.colors)("ngModel",t.borderColor))},directives:[m.b,ge.a,o.NgControlStatus,o.NgModel,a.a,fe.a],styles:["deja-tile-group-style-editor{padding:24px 24px 0}deja-tile-group-style-editor mat-checkbox label{margin-bottom:.2rem}deja-tile-group-style-editor h4{margin:.5rem 0}deja-tile-group-style-editor .border-dimensions{display:flex;flex:1 1 auto}deja-tile-group-style-editor .border-dimensions .border-width{flex:1 1 auto}deja-tile-group-style-editor .border-dimensions .border-positions{flex:1 1 auto;display:flex;flex-direction:column}deja-tile-group-style-editor mat-form-field>div.mat-form-field-wrapper{padding-bottom:.5rem!important}"],encapsulation:2,changeDetection:0}),qe),st=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).toolbarType="window",e.title="Modifier l'apparence du groupe",e.actions=[new ve.c("confirm","Ok","done"),new ve.c("cancel","Cancel","cancel")],e.fullscreen=!1,e.hasBackdrop=!0,e.disableClose=!0,e.contentComponentRef=rt,e}return _inherits(t,e),t}(ve.e),at=((tt=Ye=function(e){function t(e,i,n){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).changeDetectorRef=e,o.dejaPopupService=i,o.sanitizer=n,o.edit$=new I.a,o.editorConfig=Ye.buildEditorConfig(),o.foregroundColor=null,o.backgroundColor=null,o.borderTop=null,o.borderRight=null,o.borderBottom=null,o.borderLeft=null,o.close=new p.EventEmitter,o.modelChanged=new p.EventEmitter,o.editing=!1,o.subscriptions=[],o._designMode=!1,Object(ke.a)(o.edit$).pipe(Object(Oe.a)((function(){return o._designMode})),Object(V.a)(100),Object(Oe.a)((function(){return!!o.editor})),Object(N.a)(o.destroyed$)).subscribe((function(){return o.editor.setFocus()})),o}return _inherits(t,e),_createClass(t,[{key:"edit",value:function(){var e=this;this.designMode&&(this.editing=!0,this.changeDetectorRef.markForCheck(),Object(we.a)(100).pipe(Object(Oe.a)((function(){return!!e.editor})),Object(N.a)(this.destroyed$)).subscribe((function(){return e.editor.setFocus()})))}},{key:"onEditorBlur",value:function(){this.editing=!1,this.changeDetectorRef.markForCheck()}},{key:"onModelChanged",value:function(e){this.model.html=e,this.modelChanged.emit(this.model)}},{key:"editStyle",value:function(){var e=this,t=new st;t.data={borderWidth:this.model.borderWidth,borderColor:this.model.borderColor,borderDirection:this.model.borderDirection,update:function(t,i,n){e.model.borderWidth=t,e.model.borderColor=i,e.model.borderDirection=n,e.updateBorderFromModel()}};var i={borderColor:this.model.borderColor,borderWidth:this.model.borderWidth,borderDirection:this.model.borderDirection};this.dejaPopupService.openAdvanced$(t).pipe(Object(N.a)(this.destroyed$)).subscribe((function(t){t.accepted?0!==e.model.borderDirection&&0!==e.model.borderWidth||(e.model.clearBorder(),e.updateBorderFromModel()):(e.model.borderColor=i.borderColor,e.model.borderDirection=i.borderDirection,e.model.borderWidth=i.borderWidth,e.updateBorderFromModel()),t.accepted&&e.modelChanged.emit(e.model)}))}},{key:"updateColorsFromModel",value:function(){this.foregroundColor=this._model?ye.b.parse(this._model.color).bestTextColor.toHex():null,this.backgroundColor=this._model?this._model.color:null,this.changeDetectorRef.markForCheck()}},{key:"updateBorderFromModel",value:function(){this._model?(this.borderTop=0!=(this._model.borderDirection&nt.top)?"solid ".concat(this._model.borderColor||"transparent"," ").concat(this._model.borderWidth||0,"px"):null,this.borderRight=0!=(this._model.borderDirection&nt.right)?"solid ".concat(this._model.borderColor||"transparent"," ").concat(this._model.borderWidth||0,"px"):null,this.borderBottom=0!=(this._model.borderDirection&nt.bottom)?"solid ".concat(this._model.borderColor||"transparent"," ").concat(this._model.borderWidth||0,"px"):null,this.borderLeft=0!=(this._model.borderDirection&nt.left)?"solid ".concat(this._model.borderColor||"transparent"," ").concat(this._model.borderWidth||0,"px"):null):(this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null),this.changeDetectorRef.markForCheck()}},{key:"model",set:function(e){var t=this;this._model=e,this.updateColorsFromModel(),this.updateBorderFromModel(),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions=[],e&&this.subscriptions.push(Object(ke.a)(this._model.refresh$).pipe(Object(Te.a)((function(){return!!t._model})),Object(V.a)(1),Object(N.a)(this.destroyed$)).subscribe((function(){t.updateColorsFromModel(),t.updateBorderFromModel(),t.modelChanged.emit(t.model)})))},get:function(){return this._model}},{key:"designMode",get:function(){return this._designMode},set:function(e){this._designMode=Object(v.b)(e),this.editing=!1,this.changeDetectorRef.markForCheck()}},{key:"innerHtml",get:function(){return this.sanitizer.bypassSecurityTrustHtml(this.model.html)}}],[{key:"buildEditorConfig",value:function(){return{coreStyles_bold:{element:"b",overrides:"strong"},coreStyles_italic:{element:"i",overrides:"em"},enterMode:3,extraPlugins:"colorbutton,justify,autogrow",language:"fr",format_tags:"p;h1;h2",removeButtons:"Styles,Subscript,Superscript,Strike",removePlugins:"magicline",toolbarGroups:[{name:"undo"},{name:"align"},{name:"colors"},{name:"font"},"/",{name:"others"},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"styles",groups:["format","formats"]},{name:"paragraph",groups:["list"]}]}}}]),t}(ye.s)).\u0275fac=function(e){return new(e||tt)(p["\u0275\u0275directiveInject"](p.ChangeDetectorRef),p["\u0275\u0275directiveInject"](ve.g),p["\u0275\u0275directiveInject"](Ie.DomSanitizer))},tt.\u0275cmp=p["\u0275\u0275defineComponent"]({type:tt,selectors:[["deja-tile-group"]],viewQuery:function(e,t){var i;1&e&&p["\u0275\u0275viewQuery"](me.a,!0),2&e&&p["\u0275\u0275queryRefresh"](i=p["\u0275\u0275loadQuery"]())&&(t.editor=i.first)},hostVars:13,hostBindings:function(e,t){2&e&&(p["\u0275\u0275attribute"]("designMode",t._designMode),p["\u0275\u0275styleProp"]("color",t.foregroundColor)("background-color",t.backgroundColor)("border-top",t.borderTop)("border-right",t.borderRight)("border-bottom",t.borderBottom)("border-left",t.borderLeft))},inputs:{model:"model",designMode:"designMode"},outputs:{close:"close",modelChanged:"modelChanged"},features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["class","tile-group-content",4,"ngIf"],[1,"tile-group-content"],[3,"ngModel","config","ngModelChange","blur",4,"ngIf"],["class","not-editing-container",3,"dblclick",4,"ngIf"],["class","button-container",4,"ngIf"],[3,"ngModel","config","ngModelChange","blur"],[1,"not-editing-container",3,"dblclick"],[1,"not-editing",3,"innerHtml"],[1,"button-container"],["id","edit-border-button",1,"material-icons",3,"matTooltip","click"],["id","edit-button",1,"material-icons",3,"matTooltip","click"],["id","close-button",1,"material-icons",3,"matTooltip","click"]],template:function(e,t){1&e&&p["\u0275\u0275template"](0,ze,4,3,"div",0),2&e&&p["\u0275\u0275property"]("ngIf",t.model)},directives:[n.n,me.a,o.NgControlStatus,o.NgModel,ue],styles:["deja-tile-group{display:flex;justify-content:space-between;align-items:center;box-sizing:border-box;height:100%;width:100%}deja-tile-group .mat-icon{display:flex;align-items:center;justify-content:center}deja-tile-group .tile-group-content{flex-grow:1;display:flex;overflow:hidden}deja-tile-group .tile-group-content .not-editing-container,deja-tile-group .tile-group-content deja-editor{padding:.8rem;width:100%}deja-tile-group .tile-group-content .not-editing-container p,deja-tile-group .tile-group-content deja-editor p{margin:0}deja-tile-group .tile-group-content deja-editor.hidden{display:none}deja-tile-group .tile-group-content deja-editor div.cke_editable{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center}deja-tile-group .tile-group-content .not-editing-container{display:flex;align-items:center;flex:1 1 auto;overflow:hidden}deja-tile-group .tile-group-content .not-editing-container .not-editing{display:flex;flex-direction:column;width:100%}deja-tile-group .tile-group-content .button-container{position:absolute;left:0;right:0;top:0;display:flex;flex-direction:row;color:#fff;background-color:rgba(0,0,0,.8);opacity:0;justify-content:flex-end;align-items:center;transition:opacity 1s ease-in-out}deja-tile-group .tile-group-content .button-container .material-icons{font-size:1rem;z-index:3;cursor:pointer;margin:.3rem;flex:0 0 auto}deja-tile-group:hover .button-container{background-color:rgba(0,0,0,.2);opacity:1}deja-tile-group:hover .button-container:hover{background-color:rgba(0,0,0,.8)}deja-tile-group #title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex-grow:1;flex-basis:auto;outline:0}deja-tile-group #title a{color:inherit!important}deja-tile-group #title[contenteditable=true]{cursor:text}deja-tile-group [fontIcon]{font-size:1rem;z-index:3;cursor:pointer;flex-basis:1rem;flex-grow:0;flex-shrink:0}deja-tile-group [fontIcon] path{fill:#777!important}deja-tile-group [fontIcon]:hover{background-color:rgba(255,255,255,.2);color:#222}deja-tile-group #close-button,deja-tile-group #edit-button{margin:.3rem;flex:0 0 auto}"],encapsulation:2,changeDetection:0}),tt),lt=((et=function(){function e(t){_classCallCheck(this,e),this.element=t.nativeElement,this.element.style.display="none"}return _createClass(e,[{key:"bounds",set:function(e){if(e){var t=e.left,i=e.top,n=e.width,o=e.height;this.element.style.left="".concat(t,"px"),this.element.style.top="".concat(i,"px"),this.element.style.width="".concat(n,"px"),this.element.style.height="".concat(o,"px"),this.element.style.display="block"}else this.element.style.display="none"}}]),e}()).\u0275fac=function(e){return new(e||et)(p["\u0275\u0275directiveInject"](p.ElementRef))},et.\u0275dir=p["\u0275\u0275defineDirective"]({type:et,selectors:[["","deja-tile-position",""]],inputs:{bounds:"bounds"}}),et),ct=((Ze=function(){function e(t,i){_classCallCheck(this,e),this.changeDetectorRef=i,this.groupChanged=new p.EventEmitter,this.close=new p.EventEmitter,this.progressDiameter=100,this.subscriptions=[],this.element=t.nativeElement,this.element.setAttribute("hidden","0")}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"onGroupChanged",value:function(e){this.groupChanged.emit(e)}},{key:"designMode",set:function(e){this._designMode=Object(v.b)(e)},get:function(){return this._designMode}},{key:"tile",set:function(e){var t=this;if(this._tile=e,this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions=[],e){var i=function(e,i){i?t.element.setAttribute(e,i.toString()):t.element.removeAttribute(e)};e.fading&&(this.element.setAttribute("fading","0"),this.changeDetectorRef.markForCheck()),this.subscriptions.push(Object(ke.a)(e.pixelBounds$).pipe(Object(Oe.a)((function(e){return!!e})),Object(Pe.a)(),Object(Oe.a)((function(){return e.fading})),Object(Ee.a)((function(){t.element.setAttribute("fading","1"),t.changeDetectorRef.markForCheck()})),Object(De.a)(200)).subscribe((function(){t.element.removeAttribute("fading"),t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(Object(ke.a)(e.pixelBounds$).pipe(Object(Oe.a)((function(e){return!!e}))).subscribe((function(i){e.isHidden||t.element.removeAttribute("hidden"),t.element.style.left="".concat(i.left,"px"),t.element.style.top="".concat(i.top,"px"),t.element.style.width="".concat(i.width,"px"),t.element.style.height="".concat(i.height,"px"),t.progressDiameter=Math.min(100,Math.round(Math.max(.4*i.width,.4*i.height))),t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(Object(ke.a)(e.pressed$).pipe(Object(Ee.a)((function(e){return i("pressed",e)}))).subscribe((function(){return t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(Object(ke.a)(e.selected$).pipe(Object(Ee.a)((function(e){return i("selected",e)}))).subscribe((function(){return t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(Object(ke.a)(e.dragging$).pipe(Object(Ee.a)((function(e){return i("drag",e)}))).subscribe((function(){return t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(Object(ke.a)(e.dropping$).pipe(Object(Ee.a)((function(e){return i("drop",e)}))).subscribe((function(){return t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(Object(ke.a)(e.cutted$).pipe(Object(Ee.a)((function(e){return i("cutted",e)}))).subscribe((function(){return t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(Object(ke.a)(e.deleted$).pipe(Object(Ee.a)((function(){return t.element.remove()}))).subscribe((function(){return t.changeDetectorRef.markForCheck()})));var n=Object(ke.a)(e.hidden$).pipe(Object(Ee.a)((function(e){return i("hidden",e?"1":"2")})));this.subscriptions.push(n.pipe(Object(V.a)(1e3),Object(Oe.a)((function(e){return e})),Object(Ee.a)((function(){return t.element.setAttribute("hidden","0")}))).subscribe((function(){return t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(n.pipe(Object(V.a)(1),Object(Oe.a)((function(e){return!e})),Object(Ee.a)((function(){return t.element.removeAttribute("hidden")}))).subscribe((function(){return t.changeDetectorRef.markForCheck()}))),this.subscriptions.push(Object(ke.a)(e.refresh$).pipe(Object(V.a)(1)).subscribe((function(){return t.changeDetectorRef.markForCheck()})))}},get:function(){return this._tile}},{key:"isGroup",get:function(){return this._tile&&this._tile instanceof ot}}]),e}()).\u0275fac=function(e){return new(e||Ze)(p["\u0275\u0275directiveInject"](p.ElementRef),p["\u0275\u0275directiveInject"](p.ChangeDetectorRef))},Ze.\u0275cmp=p["\u0275\u0275defineComponent"]({type:Ze,selectors:[["deja-tile"]],inputs:{designMode:"designMode",tile:"tile",template:"template"},outputs:{groupChanged:"groupChanged",close:"close"},decls:3,vars:3,consts:[["class","noselect",3,"model","designMode","modelChanged","close",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","class","accent",3,"diameter",4,"ngIf"],[1,"noselect",3,"model","designMode","modelChanged","close"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mode","indeterminate",1,"accent",3,"diameter"]],template:function(e,t){1&e&&(p["\u0275\u0275template"](0,Fe,1,2,"deja-tile-group",0),p["\u0275\u0275template"](1,Ve,1,5,void 0,1),p["\u0275\u0275template"](2,He,1,1,"mat-progress-spinner",2)),2&e&&(p["\u0275\u0275property"]("ngIf",t.isGroup),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!t.isGroup),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.tile&&t.tile.isPending))},directives:[n.n,at,n.s,P],styles:['[_nghost-%COMP%]{display:block;position:absolute;transition-property:left,top,opacity;transition-duration:.5s;transition-timing-function:ease;opacity:1}[expanded][_nghost-%COMP%]{transition-property:height}[cutted][_nghost-%COMP%]{opacity:.5}[drag][_nghost-%COMP%], [drop][_nghost-%COMP%]{z-index:100}[drag][_nghost-%COMP%]{opacity:.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:none}[fading="0"][_nghost-%COMP%]{opacity:0;transition:none}[fading="1"][_nghost-%COMP%]{opacity:0}[hidden="0"][_nghost-%COMP%]{visibility:hidden;transition:none}[hidden="1"][_nghost-%COMP%]{opacity:0;transition:opacity 1s ease-in-out}[hidden="2"][_nghost-%COMP%]{visibility:visible;opacity:0;transition:none}[_nghost-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{position:absolute;z-index:1;right:.2rem;bottom:.2rem;transform:translate(-60%,-60%)}'],changeDetection:0}),Ze),dt=((Je=function(e){function t(e){var i;_classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).clipboardService=e,i.refreshTiles$=new I.a,i.ensureVisible$=new I.a,i.ensureBounds$=new I.a,i.dragging$=new _e.a(!1),i.dragSelection$=new I.a,i.dragDropInfos$=new I.a,i.selectionRect$=new I.a,i.dragover$=new I.a,i.dragleave$=new I.a,i.deleteTiles$=new I.a,i.designMode=!1,i.layoutCompleted=new I.a,i.layoutChanged=new I.a,i.tilesAdded=new I.a,i.tilesDeleted=new I.a,i.selectionChanged=new I.a,i.contentAdding=new I.a,i.contentRemoving=new I.a,i._tileMinWidth=10,i._tileMinWidthUnit="%",i._tileMaxWidth=100,i._tileMaxWidthUnit="%",i._tileMinHeight=10,i._tileMinHeightUnit="%",i._tileMaxHeight=100,i._tileMaxHeightUnit="%",i._maxWidth=100,i._maxWidthUnit="%",i.tilesDic=new Map,i._targetBounds=new ye.F,i.destination=new ye.F,i.dragPageOffset=new ye.E,i.dragOriginalPosition=new ye.E,i.selectedIds=new Array,Object(ke.a)(i.refreshTiles$).pipe(Object(V.a)(30),Object(Ee.a)((function(){i.container.style.width="",i.container.style.height=""})),Object(De.a)(10),Object(N.a)(i.destroyed$)).subscribe((function(e){var t,n,o,r=new Array,s=i.container.getBoundingClientRect();((null===(t=e)||void 0===t?void 0:t.resetWidth)||!i.hundredPercentWith)&&(i.hundredPercentWith=s.width);var a=s.height-20,l=s.width-20,c=0,d=0,u=i.tiles||new Array,h=new Array;u.forEach((function(e){if(e.percentBounds&&!e.percentBounds.isEmpty()){var t=i.getPixelBounds(e.percentBounds);t.bottom>c&&(c=t.right),t.right>d&&(d=t.bottom),e.isDragging||(e.pixelBounds=t)}else r.push(e);e.isSelected&&!e.isHidden&&h.push(e.id),e.pixelBounds&&e.pixelBounds.bottom>a&&(a=e.pixelBounds.bottom)}));var p=d,f=0;if(r.forEach((function(e){e.percentBounds=e.percentBounds||new ye.F(i.getPercentSize(f),i.getPercentSize(p),3*i.getTileMinPercentWidth(),3*i.getTileMinPercentHeight());var t=i.getPixelBounds(e.percentBounds);t.right>l&&(p=d,f=0,e.percentBounds.left=0,e.percentBounds.top=i.getPercentSize(p),t=i.getPixelBounds(e.percentBounds)),t.bottom>d&&(d=t.bottom),e.pixelBounds=i.getPixelBounds(e.percentBounds),f+=t.width})),i.dragTarget){var m=i.getPixelBounds(i.dragTarget);a<=m.bottom&&(a=m.bottom+m.height),l<=m.right&&(l=m.right+m.width)}var g=i.getPixelSize(2*i._tileMinHeight,i._tileMinHeightUnit);a<g&&(a=g),i.container.style.width="".concat(l,"px"),i.container.style.height="".concat(a,"px"),(null===(n=e)||void 0===n?void 0:n.ensureVisible)&&i.ensureVisible$.next(e.ensureVisible),(null===(o=e)||void 0===o?void 0:o.ensureBounds)&&i.ensureBounds$.next(e.ensureBounds),i.selectedTiles=h;var b=new CustomEvent("DejaTilesEvent",{cancelable:!1});r.length>0&&(b.tiles=r,i.layoutChanged.next(b)),b.tiles=u,i.layoutCompleted.next(b)}));var n=Object(ke.a)(i.ensureVisible$).pipe(Object(De.a)(1),Object(H.a)((function(e){return i.tilesDic.get(e)})),Object(Oe.a)((function(e){return!!e})),Object(H.a)((function(e){return e.percentBounds})));Object(Ce.a)(i.ensureBounds$,n).pipe(Object(N.a)(i.destroyed$)).subscribe((function(e){var t=i.getPixelBounds(e),n=t.left,o=t.right,r=t.top,s=t.bottom,a=function(e){for(;e&&"DEJA-TILES"!==e.tagName;)e=e.parentElement;return e}(i.container);if(a){var l=i.container.getBoundingClientRect(),c=a.getBoundingClientRect();n+l.left<c.bottom?a.scrollLeft+=n+l.left-c.bottom:o+l.left>c.right&&(a.scrollLeft+=o+l.left-c.right),r+l.top<c.top?a.scrollTop+=r+l.top-c.top:s+l.top>c.bottom&&(a.scrollTop+=s+l.top-c.bottom)}})),Object(ke.a)(i.dragSelection$).pipe(Object(Se.a)((function(e){var t=Object(je.a)(i._container.ownerDocument,"mouseup").pipe(Object(Ee.a)((function(){return i.selectionRect$.next(null)})));return Object(je.a)(i._container,"mousemove").pipe(Object(N.a)(t),Object(Oe.a)((function(e){return 1===e.buttons})),Object(Ee.a)((function(t){var n=i._container.getBoundingClientRect();e.selectedRect=ye.F.fromPoints(e.startPosition,new ye.E(t.pageX-n.left,t.pageY-n.top)),i.selectionRect$.next(e.selectedRect);var o=i.HitTest(e.selectedRect);i.selectedTiles=o.map((function(e){return e.id}))})))})),Object(N.a)(i.destroyed$)).subscribe();var o=Object(ke.a)(i.dragleave$);return Object(ke.a)(i.dragDropInfos$).pipe(Object(Se.a)((function(e){var t=e&&(e.tiles&&e.tiles.length&&e.tiles||e.currentTile&&[e.currentTile]);if(!t)return Object(Me.a)(null);var n=!e.tiles,r=Object(je.a)(i._container,"mousemove"),s=Object(je.a)(i._container.ownerDocument,"keyup").pipe(Object(Oe.a)((function(e){return e.code===ye.A.Escape}))),a=r.pipe(Object(Oe.a)((function(e){return 1!==e.buttons}))),l=Object(Ce.a)(o,a,s).pipe(Object(Ee.a)((function(){i.removeTemporaryTile(),i.cancelDrag(t)}))),c=Object(je.a)(i._container.ownerDocument,"mouseup").pipe(Object(Ee.a)((function(){return i.drop(t)}))),d=Object(Ce.a)(c,l),u=Object(ke.a)(i.dragover$).pipe(Object(H.a)((function(e){return e.originalEvent})));return Object(Ce.a)(r,u).pipe(Object(N.a)(d),Object(Ee.a)((function(o){var r=i._container.getBoundingClientRect(),s=o.pageX-r.left,a=o.pageY-r.top;if(e.enabled)i.drag(t,s,a);else if(Math.abs(e.startX-s)>=15||Math.abs(e.startY-a)>=15)if(n){var l=e.currentTile;i.selectedTiles=[l.id];var c=l.percentBounds;c&&!c.isEmpty()||(c=new ye.F(0,0,15,15));var d=i.getFreePlace(new ye.F(i.getPercentSize(s)-c.width/2,i.getPercentSize(a)-c.height/2,c.width,c.height));e.startX=d.left-c.width/2,e.startY=d.top-c.height/2,l.percentBounds=d,l.dragging$.next(!0),i._cursor="move",i.tiles.push(l),i.tilesDic.set(l.id,l),i.dragging$.next(!0),e.enabled=!0,i.startDrag(t,i.getPixelSize(d.left+d.width/2),i.getPixelSize(d.top+d.height/2))}else i.dragging$.next(!0),e.enabled=!0,i.startDrag(t,e.startX,e.startY)})))})),Object(N.a)(i.destroyed$)).subscribe(),Object(ke.a)(i.deleteTiles$).pipe(Object(N.a)(i.destroyed$)).subscribe((function(e){return i.deleteTiles(e)})),i}return _inherits(t,e),_createClass(t,[{key:"copySelection",value:function(){var e=this.tiles.filter((function(e){return e.isSelected}));return e.length&&this.copyTiles(e,!1),e}},{key:"cutSelection",value:function(){var e=this.tiles.filter((function(e){return e.isSelected}));return e.length&&this.copyTiles(e,!0),e}},{key:"deleteSelection",value:function(){var e=this.tiles.filter((function(e){return e.isSelected}));return e.length&&this.removeTiles(e.map((function(e){return e.id}))),e}},{key:"paste",value:function(){if(!this.clipboardService||!this.clipboardService.isAvailable("tiles"))return new Array;var e,t=this.clipboardService.get("tiles");this.tiles.forEach((function(e){return e.isSelected=!1})),t.forEach((function(t){e=e?ye.F.union(e,t.percentBounds):new ye.F(t.percentBounds)}));var i=this.getFreePlace(new ye.F(0,0,e.width,e.height)),n=t.map((function(t){var n=t.clone();return n.percentBounds=new ye.F(i.left+t.percentBounds.left-e.left,i.top+t.percentBounds.top-e.top,t.percentBounds.width,t.percentBounds.height),n.isSelected=!0,n}));return this.addTiles(n),n}},{key:"getTileElementFromHTMLElement",value:function(e){for(var t=e;t&&"DEJA-TILE"!==t.tagName;)if((t=t.parentElement)===this.container)return;return t}},{key:"isElementInsideDejaEditor",value:function(e){for(var t=e;t&&t!==this.container;){if("DEJA-EDITOR"===t.tagName)return!0;t=t.parentElement}return!1}},{key:"getTileComponentFromHTMLElement",value:function(e){var t=this.getTileElementFromHTMLElement(e);return t&&this.tilesDic.get(t.id)}},{key:"deleteTiles",value:function(e){var t=this;if(e&&0!==e.length){var i=new CustomEvent("DejaTilesDeletedEvent",{cancelable:!1});i.tiles=e,e.forEach((function(e){t.tilesDic.delete(e.id),e.delete()}));for(var n=this.tiles.length;--n>=0;)this.tilesDic.has(this.tiles[n].id)||this.tiles.splice(n,1);this.refreshTiles$.next({resetWidth:!0}),i.tiles=this.tiles,this.tilesDeleted.next(i)}}},{key:"removeTiles",value:function(e){var t=this;if(e&&0!==e.length){var i=e.map((function(e){return t.tilesDic.get(e)}));i.forEach((function(e){e.isHidden=!0}));var n=new CustomEvent("DejaTilesRemoveEvent",{cancelable:!0});n.tiles=this.tiles,n.removed=i,n.cancel$=new I.a;var o=n.cancel$.pipe(Object(Pe.a)(),Object(N.a)(this.destroyed$)).subscribe((function(e){e?i.forEach((function(e){return e.isHidden=!1})):t.deleteTiles(i)}));this.contentRemoving.next(n),n.defaultPrevented||(o.unsubscribe(),this.deleteTiles(i))}}},{key:"getFreePlace",value:function(e){var t=new Array,i=this.tiles.filter((function(e){return!e.isDragging})),n=0;i.forEach((function(e){e.percentBounds.bottom>n&&(n=e.percentBounds.bottom)}));for(var o=0;o<=this._maxWidth-e.width;o+=this._tileMinWidth)for(var r=function(n){var r=new ye.F(o,n,e.width,e.height);i.find((function(e){return e.percentBounds.intersectWith(r)}))||t.push(r)},s=0;s<=n-e.height;s+=this._tileMinHeight)r(s);return t.length>0?(t.sort((function(t,i){var n=function(t){return Math.min(Math.abs(t.left-e.left),Math.abs(t.right-e.right))+200*Math.min(Math.abs(t.top-e.top),Math.abs(t.bottom-e.bottom))};return n(t)-n(i)})),t[0]):new ye.F(0,n,e.width,e.height)}},{key:"moveTile",value:function(e,t){var i=this.tiles.find((function(t){return t.id===e}));i&&(i.percentBounds=t,this.refreshTiles$.next())}},{key:"HitTest",value:function(e){var t=new ye.F(this.getPercentSize(e.left),this.getPercentSize(e.top),this.getPercentSize(e.width),this.getPercentSize(e.height));return this.tiles.filter((function(e){return e.percentBounds.intersectWith(t)}))}},{key:"getPercentSize",value:function(e){return Math.round(100*e/this.hundredPercentWith)}},{key:"dragEnter",value:function(e,t){if(!this.designMode||!this._container)return!1;var i=e.DejaTile;if(!i)return!1;var n=this._container.getBoundingClientRect(),o=t.originalEvent,r=o.pageX,s=o.pageY,a=r-n.left,l=s-n.top,c=i.clone();return c.isTemporary=!0,this.dragDropInfos$.next({enabled:!1,startX:a,startY:l,currentTile:c}),!0}},{key:"startDrag",value:function(e,t,i){var n,o=this,r=this.saveLayout();e.forEach((function(e){n=n?ye.F.union(n,e.percentBounds):e.percentBounds,e.isDragging=!0})),this.dragRelativePosition=new Map,e.forEach((function(e){return o.dragRelativePosition.set(e.id,new ye.E(e.percentBounds.left-n.left,e.percentBounds.top-n.top))})),this.dragPageOffset=new ye.E(t,i),this.dragOriginalPosition=new ye.E(n.left,n.top),this.targetBounds=r.targetBounds=r.validBounds=n,this.originalLayout=r,this.validLayout=void 0}},{key:"cancelDrag",value:function(e){this.clearMoveTimer(),Object(ke.a)(e).pipe(Object(Oe.a)((function(e){return!!e})),Object(N.a)(this.destroyed$)).subscribe((function(e){e.isDragging=!1,e.isDropping=!0})),this.originalLayout&&this.restoreLayout(this.originalLayout),this.endDrag()}},{key:"drop",value:function(e){var t,i=this;if(this.clearMoveTimer(),this.validLayout){if(this.restoreLayout(this.validLayout),"move"!==this._cursor){var n=e[0];n.percentBounds=new ye.F(this.validLayout.validBounds),n.isDragging=!1}else Object(ke.a)(e).pipe(Object(Oe.a)((function(e){return!!e})),Object(Ee.a)((function(e){var t=i.validLayout.validBounds.left+i.dragRelativePosition.get(e.id).left,n=i.validLayout.validBounds.top+i.dragRelativePosition.get(e.id).top;e.percentBounds=new ye.F(t,n,e.percentBounds.width,e.percentBounds.height),e.isDragging=!1,e.isDropping=!0,e.isTemporary&&(i.tilesDic.delete(e.id),e.makeId(),i.tilesDic.set(e.id,e),i.addTiles([e]))})),Object(De.a)(1e3),Object(N.a)(this.destroyed$)).subscribe((function(e){return e.isDropping=!1}));t=this.tiles.filter((function(e){var t;return!ye.F.equals(e.percentBounds,null===(t=i.originalLayout[e.id])||void 0===t?void 0:t.bounds)})),this.endDrag()}else this.removeTemporaryTile(),this.cancelDrag(e);if(t){var o=new CustomEvent("DejaTilesEvent",{cancelable:!0});o.tiles=this.tiles,this.layoutChanged.next(o)}return t}},{key:"endDrag",value:function(){this.originalLayout=void 0,this.validLayout=void 0,this.targetBounds=void 0,this.dragging$.next(!1),this.dragDropInfos$.next(null),this.dragTarget=void 0,this.copyTiles(null),this.refreshTiles$.next()}},{key:"drag",value:function(e,t,i){var n=this,o=new ye.E(t-this.dragPageOffset.left,i-this.dragPageOffset.top),r=o.left+this.getPixelSize(this.dragOriginalPosition.left),s=o.top+this.getPixelSize(this.dragOriginalPosition.top),a=this.getTileMinPixelSize(),l=this.getTileMaxPixelSize();if("move"!==this._cursor){var c=e[0],d=this.getPixelBounds(c.percentBounds),u=r+d.width,h=s+d.height,p=d.right,f=d.bottom;switch(this._cursor){case"nw-resize":d.left=Math.max(Math.min(r,d.right-a.width),d.right-l.width),d.right=p,d.top=Math.max(Math.min(s,d.bottom-a.height),d.bottom-l.height),d.bottom=f,this.size(c,new ye.E(r,s),ye.u.left+ye.u.top);break;case"sw-resize":d.left=Math.max(Math.min(r,d.right-a.width),d.right-l.width),d.right=p,d.bottom=Math.max(Math.min(h,d.top+l.height),d.top+a.height),this.size(c,new ye.E(r,h),ye.u.left+ye.u.bottom);break;case"w-resize":d.left=Math.max(Math.min(r,d.right-a.width),d.right-l.width),d.right=p,this.size(c,new ye.E(r,0),ye.u.left);break;case"ne-resize":d.right=Math.max(Math.min(u,d.left+l.width),d.left+a.width),d.top=Math.max(Math.min(s,d.bottom-a.height),d.bottom-l.height),d.bottom=f,this.size(c,new ye.E(u,s),ye.u.right+ye.u.top);break;case"se-resize":d.right=Math.max(Math.min(u,d.left+l.width),d.left+a.width),d.bottom=Math.max(Math.min(h,d.top+l.height),d.top+a.height),this.size(c,new ye.E(u,h),ye.u.right+ye.u.bottom);break;case"e-resize":d.right=Math.max(Math.min(u,d.left+l.width),d.left+a.width),this.size(c,new ye.E(u,0),ye.u.right);break;case"n-resize":d.top=Math.max(Math.min(s,d.bottom-a.height),d.bottom-l.height),d.bottom=f,this.size(c,new ye.E(0,s),ye.u.top);break;case"s-resize":d.bottom=Math.max(Math.min(h,d.top+l.height),d.top+a.height),this.size(c,new ye.E(0,h),ye.u.bottom)}c.pixelBounds=d}else e.forEach((function(e){e.pixelBounds=new ye.F(r+n.getPixelSize(n.dragRelativePosition.get(e.id).left),s+n.getPixelSize(n.dragRelativePosition.get(e.id).top),n.getPixelSize(e.percentBounds.width),n.getPixelSize(e.percentBounds.height))})),this.dragTarget=new ye.F(this.getPercentSize(r),this.getPercentSize(s),this.targetBounds.width,this.targetBounds.height),this.move()}},{key:"addTiles",value:function(e){var t,i=this;if(e&&0!==e.length){e.forEach((function(e){i.tiles.find((function(t){return t.id===e.id}))||(i.tiles.find((function(t){var i;return e.percentBounds&&(null===(i=t.percentBounds)||void 0===i?void 0:i.intersectWith(e.percentBounds))}))&&(e.percentBounds=void 0),e.percentBounds||(e.percentBounds=i.getFreePlace(e.idealBounds)),i.tiles.push(e),i.tilesDic.set(e.id,e))}));var n=new CustomEvent("DejaTilesAddEvent",{cancelable:!0});n.tiles=this.tiles,n.added=e,n.cancel$=new I.a;var o,r=null===(t=this.clipboardService)||void 0===t?void 0:t.get("tiles-provider");r&&(o=this.clipboardService.get("tiles")).forEach((function(e){e.isHidden=!0}));var s,a=function(e){o&&(r.next(o),i.clipboardService.clear());var t=new CustomEvent("DejaTileAddedEvent",{cancelable:!1});t.tiles=i.tiles,t.added=e,i.tilesAdded.next(t)};e.forEach((function(e){s=s?ye.F.union(s,e.percentBounds):new ye.F(e.percentBounds)})),this.refreshTiles$.next({ensureBounds:s}),this.contentAdding.next(n),n.defaultPrevented?(n.cancel$.pipe(Object(z.a)(1),Object(Oe.a)((function(e){return!e})),Object(N.a)(this.destroyed$)).subscribe(a),n.cancel$.pipe(Object(z.a)(1),Object(Oe.a)((function(e){return!!e})),Object(Se.a)((function(){return o&&o.forEach((function(e){e.isHidden=!1,e.isCutted=!0})),Object(ke.a)(e)})),Object(Ee.a)((function(e){return e.isHidden=!0})),Object(De.a)(1e3),Object(Be.a)((function(e,t){return[].concat(_toConsumableArray(e),[t])}),new Array),Object(z.a)(1),Object(N.a)(this.destroyed$)).subscribe((function(e){return i.deleteTiles(e)}))):a(e)}}},{key:"size",value:function(e,t,i){var n,o,r,s,a=new ye.E(this.getPercentSize(t.left),this.getPercentSize(t.top)),l=e.percentBounds.clone(),c=e.percentBounds.clone();if(i&ye.u.left){n=this.getTileMinPercentWidth(),r=this.getTileMaxPercentWidth();var d=a.left,u=l.left<d?n*Math.ceil(d/n):n*Math.floor(d/n),h=Math.min(r,Math.max(n,c.right-u));l.width=l.right-d,l.left=d,c.left=c.right-h,c.width=h}if(i&ye.u.right){n=n||this.getTileMinPercentWidth(),r=r||this.getTileMaxPercentWidth();var p=a.left,f=l.right<p?n*Math.ceil(p/n):n*Math.floor(p/n);l.width=p-l.left,c.width=Math.min(r,Math.max(n,f-c.left))}if(i&ye.u.top){o=this.getTileMinPercentHeight(),s=this.getTileMaxPercentHeight();var m=a.top,g=l.top<m?o*Math.ceil(m/o):o*Math.floor(m/o),b=Math.min(s,Math.max(o,c.bottom-g));l.height=l.bottom-m,l.top=m,c.top=c.bottom-b,c.height=b}if(i&ye.u.bottom){o=o||this.getTileMinPercentHeight(),s=s||this.getTileMaxPercentHeight();var v=a.top,y=l.bottom<v?o*Math.ceil(v/o):o*Math.floor(v/o);l.height=v-l.top,c.height=Math.min(s,Math.max(o,y-c.top))}if(!ye.F.equals(c,this.destination))if(this.restoreLayout(this.originalLayout),this.destination=c.clone(),this.tiles.find((function(e){return!e.isDragging&&e.percentBounds.intersectWith(c)}))){if(c){var _=this.ensureTarget(c,l,i);_&&(this.targetBounds=_,this.validLayout=this.saveLayout(),this.validLayout.targetBounds=c,this.validLayout.validBounds=_,this.refreshTiles$.next())}}else this.targetBounds=c,this.validLayout=this.saveLayout(),this.validLayout.targetBounds=this.validLayout.validBounds=c,this.refreshTiles$.next()}},{key:"clearMoveTimer",value:function(){this.moveTimOut&&(this.moveTimOut.unsubscribe(),this.moveTimOut=void 0)}},{key:"move",value:function(){var e=this,t=this.getTileMinPercentWidth(),i=this.getTileMinPercentHeight(),n=this.ensureContainer(new ye.F(t*Math.round(this.dragTarget.left/t),i*Math.round(this.dragTarget.top/i),this.dragTarget.width,this.dragTarget.height));if(!(this.lastTargetBounds&&Math.abs(n.left-this.lastTargetBounds.left)<t&&Math.abs(n.top-this.lastTargetBounds.top)<i)){this.lastTargetBounds=n;var o=this.tiles.filter((function(e){return!e.isDragging})).reduce((function(e,t){var i=ye.F.overlapInfos(t.percentBounds,n);return Math.max(Math.min(i.height,i.width),e)}),0);if(this.tiles.find((function(t){var i;return null===(i=e.originalLayout[t.id])||void 0===i?void 0:i.bounds.intersectWith(n)}))||this.restoreLayout(this.originalLayout),0===o)this.clearMoveTimer(),this.targetBounds=n.clone(),this.destination=n.clone(),this.validLayout=this.saveLayout(),this.validLayout.targetBounds=this.validLayout.validBounds=n,this.refreshTiles$.next();else{if(ye.F.equals(this.targetBounds,n)||this.clearMoveTimer(),o>3){var r=n.clone();this.moveTimOut=Object(we.a)(500).pipe(Object(z.a)(1),Object(N.a)(this.destroyed$)).subscribe((function(){e.restoreLayout(e.originalLayout),e.destination=r;var t=e.ensureTarget(r,e.dragTarget,ye.u.all);t&&(e.targetBounds=t,e.validLayout=e.saveLayout(),e.validLayout.targetBounds=r,e.validLayout.validBounds=t,e.refreshTiles$.next())}))}for(var s=new Array,a=this.tiles.filter((function(e){return!e.isDragging})),l=Math.min(this.targetBounds.left,n.left);l<=Math.max(this.targetBounds.left,n.left);l++)for(var c=function(e){var t=new ye.F(l,e,n.width,n.height);a.find((function(e){return e.percentBounds.intersectWith(t)}))||s.push(t)},d=Math.min(this.targetBounds.top,n.top);d<=Math.max(this.targetBounds.top,n.top);d++)c(d);s.length>0&&(s.sort((function(e,t){var i=function(e){return Math.min(Math.abs(e.left-n.left),Math.abs(e.right-n.right))+200*Math.min(Math.abs(e.top-n.top),Math.abs(e.bottom-n.bottom))};return i(e)-i(t)})),n=s[0],this.targetBounds=n.clone(),this.destination=n.clone(),this.validLayout=this.saveLayout(),this.validLayout.targetBounds=this.validLayout.validBounds=n,this.refreshTiles$.next())}}}},{key:"ensureContainer",value:function(e){e.left<0&&(e=e.offset(-e.left,0)),e.top<0&&(e=e.offset(0,-e.top));var t=this.getMaxPercentWidth();t&&e.right>t&&(e=e.offset(t-e.right,0));var i=this.getMaxPercentHeight();return i&&e.bottom>i&&(e=e.offset(0,i-e.bottom)),e}},{key:"ensureTarget",value:function(e,t,i,n){var o=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;t||(t=e),n||(n=e.clone()),i||(i=ye.u.all);var s=new Array,a=new Array,l=new Array,c=new Array;if(this.tiles.filter((function(t){return!t.isDragging&&t.percentBounds.intersectWith(e)})).find((function(n){var r=new ye.F(o.dragOriginalPosition.left,o.dragOriginalPosition.top,e.width,e.height);if(Math.abs(n.percentBounds.left-t.left)<1&&Math.abs(n.percentBounds.top-t.top)<1&&Math.abs(n.percentBounds.width-t.width)<1&&Math.abs(n.percentBounds.height-t.height)<1&&(Math.abs(t.left-r.right)<=4||Math.abs(t.right-r.left)<=4||Math.abs(t.top-r.bottom)<=4||Math.abs(t.bottom-r.top)<=4))return n.percentBounds=r,!0;var d,u=n.percentBounds.left-t.left,h=t.right-n.percentBounds.right,p=n.percentBounds.top-t.top,f=t.bottom-n.percentBounds.bottom,m=Math.max(0,Math.min(n.percentBounds.right,t.right)-Math.max(n.percentBounds.left,t.left))/Math.min(n.percentBounds.width,t.width);switch(Math.max(0,Math.min(n.percentBounds.bottom,t.bottom)-Math.max(n.percentBounds.top,t.top))/Math.min(n.percentBounds.height,t.height)>=m&&i&ye.u.horizontal?d=h>=u&&i&ye.u.left?ye.u.left:ye.u.right:i&ye.u.vertical&&(d=f>=p&&i&ye.u.top?ye.u.top:ye.u.bottom),d){case ye.u.left:s.push(n);break;case ye.u.top:l.push(n);break;case ye.u.right:a.push(n);break;default:c.push(n)}})))return e;var d=0;return s.length&&(d=this.pushHorizontal(e,-1,s))?(e=this.ensureContainer(e.offset(d,0)),r?this.ensureTarget(e,t,i&~ye.u.left,n,r-1):null):(a.length&&(d=this.pushHorizontal(e,1,a)),d>0?(this.restoreLayout(this.originalLayout),r?this.ensureTarget(n,t,i&ye.u.vertical,void 0,r-1):null):l.length&&(d=this.pushVertical(e,-1,l))?(e=this.ensureContainer(e.offset(0,d)),r?this.ensureTarget(e,t,ye.u.bottom,void 0,r-1):null):(d=this.pushVertical(e,1,c))?null:e)}},{key:"saveLayout",value:function(){var e=this,t={};return t.height=this.getTileMinPercentHeight(),this.tiles.forEach((function(i){var n=e.getPixelSize(i.percentBounds.top||0),o=e.getPixelSize(i.percentBounds.height||e._tileMinHeight);n+o>t.height&&(t.height=n+o),t[i.id]={bounds:i.percentBounds.clone(),id:i.id}})),t}},{key:"getPixelBounds",value:function(e){return ye.F.fromLTRB(Math.round(e.left*this.hundredPercentWith/100),Math.round(e.top*this.hundredPercentWith/100),Math.round(e.right*this.hundredPercentWith/100),Math.round(e.bottom*this.hundredPercentWith/100))}},{key:"getPixelSize",value:function(e,t){return t&&"%"!==t?e:Math.round(e*this.hundredPercentWith/100)}},{key:"getSizePercentLimit",value:function(e){var t=this["".concat(e,"Unit")];return t&&"px"!==t?this[e]:this.getPercentSize(this[e])}},{key:"getSizePixelLimit",value:function(e){var t=this["".concat(e,"Unit")];return t&&"px"!==t?this.getPixelSize(this[e]):this[e]}},{key:"getTileMinPixelSize",value:function(){return new ye.H(this.getSizePixelLimit("_tileMinWidth"),this.getSizePixelLimit("_tileMinHeight"))}},{key:"getTileMaxPixelSize",value:function(){return new ye.H(this.getSizePixelLimit("_tileMaxWidth"),this.getSizePixelLimit("_tileMaxHeight"))}},{key:"getTileMinPercentWidth",value:function(){return Math.max(1,this.getSizePercentLimit("_tileMinWidth"))}},{key:"getTileMaxPercentWidth",value:function(){return Math.max(5,this.getSizePercentLimit("_tileMaxWidth"))}},{key:"getTileMinPercentHeight",value:function(){return Math.max(1,this.getSizePercentLimit("_tileMinHeight"))}},{key:"getTileMaxPercentHeight",value:function(){return Math.max(5,this.getSizePercentLimit("_tileMaxHeight"))}},{key:"getMaxPercentWidth",value:function(){return Math.max(5,this.getSizePercentLimit("_maxWidth"))}},{key:"getMaxPercentHeight",value:function(){return Math.max(5,this.getSizePercentLimit("_maxHeight"))}},{key:"getCursorFromHTMLElement",value:function(e,t,i){var n=this.getTileElementFromHTMLElement(i);if(!n)return null;var o=n.getBoundingClientRect();return e<o.left+15?t<o.top+15?"nw-resize":t>o.bottom-15?"sw-resize":"w-resize":e>o.right-15?t<o.top+15?"ne-resize":t>o.bottom-15?"se-resize":"e-resize":t<o.top+15?"n-resize":t>o.bottom-15?"s-resize":"move"}},{key:"extractValueAndUnit",value:function(e,t){var i,n=/(\d+)(.*)/i.exec(t);(null===(i=n)||void 0===i?void 0:i.length)>=1&&(this[e]=parseInt(n[1],10),this["".concat(e,"Unit")]=n.length>=2?n[2]:"px")}},{key:"restoreLayout",value:function(e){this.tiles.forEach((function(t){var i=e[t.id];i&&(t.percentBounds=i.bounds.clone())}))}},{key:"calcHorizontalOverflow",value:function(e,t,i,n){var o=this,r=0;return n=n||new Set,t.forEach((function(t){if(!n.has(t.id)){n.add(t.id);var s=t.percentBounds.offset(e*i,0),a=0,l=o.getMaxPercentWidth();s.left<0?a=-s.left:l&&s.right>l&&(a=s.right-l);var c=o.tiles.filter((function(e){return!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(s)}));c.length&&(a+=o.calcHorizontalOverflow(e,c,i,n)),a>r&&(r=a)}})),r}},{key:"moveHorizontal",value:function(e,t,i,n){var o=this;t.forEach((function(t){if(!n.has(t.id)){var r=t.percentBounds.offset(e*i,0);n.set(t.id,r);var s=o.tiles.filter((function(e){return!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(r)}));s.length&&o.moveHorizontal(e,s,i,n)}}))}},{key:"pushHorizontal",value:function(e,t,i,n){var o=0,r=new Map;return n||(n=0,i.forEach((function(i){var o=t>0?Math.max(0,e.right-i.percentBounds.left):Math.max(0,i.percentBounds.right-e.left);o>n&&(n=o)}))),n>0&&(o=this.calcHorizontalOverflow(t,i,n),(n-=o)>0&&(this.moveHorizontal(t,i,n,r),this.tiles.forEach((function(e){r.has(e.id)&&(e.percentBounds=r.get(e.id))})))),o}},{key:"calcVerticalOverflow",value:function(e,t,i,n){var o=this,r=0;return n=n||new Set,t.forEach((function(t){if(!n.has(t.id)){n.add(t.id);var s=t.percentBounds.offset(0,e*i),a=0,l=o.getMaxPercentHeight();s.top<0?a=-s.top:l&&s.bottom>l&&(a=s.bottom-l);var c=o.tiles.filter((function(e){return!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(s)}));c.length&&(a+=o.calcVerticalOverflow(e,c,i,n)),a>r&&(r=a)}})),r}},{key:"moveVertical",value:function(e,t,i,n){var o=this;t.forEach((function(t){if(!n.has(t.id)){var r=t.percentBounds.offset(0,e*i);n.set(t.id,r);var s=o.tiles.filter((function(e){return!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(r)}));s.length&&o.moveVertical(e,s,i,n)}}))}},{key:"pushVertical",value:function(e,t,i,n){var o=0,r=new Map;return n||(n=0,i.forEach((function(i){var o=t>0?Math.max(0,e.bottom-i.percentBounds.top):Math.max(0,i.percentBounds.bottom-e.top);o>n&&(n=o)}))),n>0&&(o=this.calcVerticalOverflow(t,i,n),(n-=o)>0&&(this.moveVertical(t,i,n,r),this.tiles.forEach((function(e){return r.has(e.id)&&(e.percentBounds=r.get(e.id))})))),o}},{key:"copyTiles",value:function(e,t){if(!this.clipboardService){if(!e)return;throw new Error("DejaClipboardService must be imported by your application to use the copyTiles methode of DejaTilesComponent.")}var i=this.clipboardService.get("tiles");i&&i.forEach((function(e){return e.isCutted=!1})),this.clipboardService.set("tiles",e),t?(e.forEach((function(e){return e.isCutted=!0})),this.clipboardService.set("tiles-provider",this.deleteTiles$)):this.clipboardService.set("tiles-provider",void 0)}},{key:"removeTemporaryTile",value:function(){for(var e=this.tiles.length;--e>=0;){var t=this.tiles[e];t.isTemporary&&(this.tilesDic.delete(t.id),this.tiles.splice(e,1))}}},{key:"container",set:function(e){var t=this;if(this._container=e,this._container){var i=Object(je.a)(e,"mouseleave"),n=Object(je.a)(e.ownerDocument,"mouseup"),o=Object(je.a)(e,"mouseenter");o.pipe(Object(Se.a)((function(){if(t.designMode){var n=i.pipe(Object(Ee.a)((function(){return t.container.style.cursor=""})));return Object(je.a)(e,"mousemove").pipe(Object(N.a)(n),Object(Oe.a)((function(e){return!!t.container&&0===e.buttons})),Object(H.a)((function(e){return t._cursor=t.getCursorFromHTMLElement(e.pageX,e.pageY,e.target)})))}return Object(Me.a)("")})),Object(N.a)(this.destroyed$)).subscribe((function(e){return t.container.style.cursor=e})),o.pipe(Object(Se.a)((function(){return Object(je.a)(e,"mousedown").pipe(Object(Oe.a)((function(e){return 1===e.buttons})),Object(Oe.a)((function(e){return!t.isElementInsideDejaEditor(e.target)})),Object(H.a)((function(e){return{event:e,clickedTile:t.getTileComponentFromHTMLElement(e.target)}}))).pipe(Object(N.a)(i),Object(Se.a)((function(e){var i=e.event,o=e.clickedTile,r=i.target;if(t.currentTile&&(t.currentTile.isPressed=!1),t.currentTile=o,t.currentTile){if(t.currentTile.isPressed=!0,i.ctrlKey);else if(t.currentTile.isSelected&&"move"===t._cursor||(t.selectedTiles=[t.currentTile.id]),t.designMode){var s=t._container.getBoundingClientRect();t.dragDropInfos$.next({enabled:!1,startX:i.pageX-s.left,startY:i.pageY-s.top,currentTile:t.currentTile,tiles:t.tiles.filter((function(e){return e.isSelected}))})}return n.pipe(Object(z.a)(1),Object(Oe.a)((function(){return!!t.currentTile})))}if(r===t.container||r.parentElement===t.container){if(1===i.buttons){var a=t._container.getBoundingClientRect();t.dragSelection$.next({startPosition:new ye.E(i.pageX-a.left,i.pageY-a.top),selectedRect:new ye.F})}t.currentTile&&(t.currentTile.isPressed=!1),t.selectedTiles=[]}return Object(Me.a)(null)})))})),Object(Oe.a)((function(e){return!!e})),Object(N.a)(this.destroyed$)).subscribe((function(e){t.currentTile.isPressed&&(t.currentTile.isPressed=!1,e.ctrlKey&&(t.currentTile.isSelected=!t.currentTile.isSelected,t.selectedTiles=t.tiles.filter((function(e){return e.isSelected})).map((function(e){return e.id})))),t.designMode&&(t._cursor=t.getCursorFromHTMLElement(e.pageX,e.pageY,e.target),t.container.style.cursor=t._cursor),t.currentTile=void 0}))}},get:function(){return this._container}},{key:"tiles",set:function(e){this._tiles=e,this.tilesDic=this.tiles.reduce((function(e,t){return e.set(t.id,t)}),new Map),this.refreshTiles$.next({resetWidth:!0})},get:function(){return this._tiles||(this._tiles=new Array)}},{key:"selectedTiles",set:function(e){var t,i=new Array,n=!1,o=e.reduce((function(e,t){return e.add(t)}),new Set),r=this.selectedIds.reduce((function(e,t){return e.add(t)}),new Set);if((null===(t=this.tiles)||void 0===t?void 0:t.length)?this.tiles.forEach((function(e){o.has(e.id)!==r.has(e.id)&&(n=!0),e.isSelected=o.has(e.id),e.isSelected&&i.push(e)})):n=this.selectedIds.length>0,this.selectedIds=e,n){var s=new CustomEvent("DejaTilesAddEvent",{cancelable:!1});s.tiles=i,this.selectionChanged.next(s)}}},{key:"tileMinWidth",set:function(e){this.extractValueAndUnit("_tileMinWidth",e)}},{key:"tileMaxWidth",set:function(e){this.extractValueAndUnit("_tileMaxWidth",e)}},{key:"tileMinHeight",set:function(e){this.extractValueAndUnit("_tileMinHeight",e)}},{key:"tileMaxHeight",set:function(e){this.extractValueAndUnit("_tileMaxHeight",e)}},{key:"maxWidth",set:function(e){this.extractValueAndUnit("_maxWidth",e)}},{key:"targetBounds",get:function(){return this._targetBounds},set:function(e){this._targetBounds=e,e?this.selectionRect$.next(new ye.F({height:this.getPixelSize(e.height||0),left:this.getPixelSize(e.left||0),top:this.getPixelSize(e.top||0),width:this.getPixelSize(e.width||0)})):this.selectionRect$.next()}}]),t}(ye.s)).\u0275fac=function(e){return new(e||Je)(p["\u0275\u0275inject"](ye.e,8))},Je.\u0275prov=p["\u0275\u0275defineInjectable"]({token:Je,factory:Je.\u0275fac}),Je),ut=((Qe=function(e){function t(e,i,n,o){var r;_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).changeDetectorRef=i,r.layoutProvider=n,r._control=o,r.selectionChanged=new p.EventEmitter,r.layoutChanged=new p.EventEmitter,r.layoutCompleted=new p.EventEmitter,r.contentAdding=new p.EventEmitter,r.contentRemoving=new p.EventEmitter,r.tileGroupChanged=new p.EventEmitter,r.tilesAdded=new p.EventEmitter,r.tilesDeleted=new p.EventEmitter,r.contentCopied=new p.EventEmitter,r.tabIndex=0,r._models=[],r.hasFocus=!1,r.onTouchedCallback=function(e){},r.onChangeCallback=function(e){},r._control&&(r._control.valueAccessor=_assertThisInitialized(r));var s=e.nativeElement;return Object(ke.a)(r.layoutProvider.selectionChanged).pipe(Object(N.a)(r.destroyed$)).subscribe((function(e){return r.selectionChanged.emit(e)})),Object(ke.a)(r.layoutProvider.contentAdding).pipe(Object(N.a)(r.destroyed$)).subscribe((function(e){return r.contentAdding.emit(e)})),Object(ke.a)(r.layoutProvider.contentRemoving).pipe(Object(N.a)(r.destroyed$)).subscribe((function(e){return r.contentRemoving.emit(e)})),Object(ke.a)(r.layoutProvider.tilesAdded).pipe(Object(N.a)(r.destroyed$)).subscribe((function(e){r.tilesAdded.emit(e),r.onChangeCallback(e.tiles)})),Object(ke.a)(r.layoutProvider.tilesDeleted).pipe(Object(N.a)(r.destroyed$)).subscribe((function(e){r.tilesDeleted.emit(e),r.onChangeCallback(e.tiles)})),Object(ke.a)(r.layoutProvider.layoutChanged).pipe(Object(N.a)(r.destroyed$)).subscribe((function(e){r.layoutChanged.emit(e),r.onChangeCallback(e.tiles)})),Object(ke.a)(r.layoutProvider.layoutCompleted).pipe(Object(N.a)(r.destroyed$)).subscribe((function(e){return r.layoutCompleted.emit(e)})),r.keyup$=Object(je.a)(s.ownerDocument,"keyup"),Object(je.a)(window,"resize").pipe(Object(V.a)(5),Object(N.a)(r.destroyed$)).subscribe((function(){return r.refresh({resetWidth:!0})})),r}return _inherits(t,e),_createClass(t,[{key:"writeValue",value:function(e){this._models=e||[],this.layoutProvider.tiles=this._models,this.changeDetectorRef.markForCheck()}},{key:"registerOnChange",value:function(e){this.onChangeCallback=e}},{key:"registerOnTouched",value:function(e){this.onTouchedCallback=e}},{key:"ngAfterViewInit",value:function(){this.layoutProvider.container=this.tilesContainer.nativeElement,this.refresh({resetWidth:!0})}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(t.prototype),"ngOnDestroy",this).call(this),this.canCopy=!1,this.canCut=!1,this.canDelete=!1,this.canPaste=!1}},{key:"copySelection",value:function(){var e,t=this.layoutProvider.copySelection();if(null===(e=t)||void 0===e?void 0:e.length){var i=new CustomEvent("DejaTilesCopied",{cancelable:!0});i.tiles=t,this.contentCopied.emit(i)}}},{key:"cutSelection",value:function(){var e,t=this.layoutProvider.cutSelection();if(null===(e=t)||void 0===e?void 0:e.length){var i=new CustomEvent("DejaTilesCutted",{cancelable:!0});i.tiles=t,this.contentCopied.emit(i)}}},{key:"deleteSelection",value:function(){var e=this.layoutProvider.deleteSelection();return this.changeDetectorRef.markForCheck(),e}},{key:"paste",value:function(){var e=this.layoutProvider.paste();return this.changeDetectorRef.markForCheck(),e}},{key:"ensureVisible",value:function(e){this.layoutProvider.ensureVisible$.next(e)}},{key:"refresh",value:function(e){this.layoutProvider.refreshTiles$.next(e)}},{key:"addTiles",value:function(e){this.layoutProvider.addTiles(e)}},{key:"removeTiles",value:function(e){this.layoutProvider.removeTiles(e)}},{key:"HitTest",value:function(e,t){var i=this.tilesContainer.nativeElement.getBoundingClientRect(),n=e-i.left,o=t-i.top;return this.tiles.find((function(e){var t;return null===(t=e.pixelBounds)||void 0===t?void 0:t.containsPoint(new ye.E(n,o))}))}},{key:"getFreePlace",value:function(e,t,i,n){if(!this._models||0===this._models.length)return new ye.F(0,0,i,n);var o=this.tilesContainer.nativeElement.getBoundingClientRect(),r=t?t-o.top:0,s=new ye.F(this.layoutProvider.getPercentSize(e?e-o.left:0),this.layoutProvider.getPercentSize(r),i,n);return this.layoutProvider.getFreePlace(s)}},{key:"moveTile",value:function(e,t){this.layoutProvider.moveTile(e,t)}},{key:"getDropContext",value:function(){var e=this;return{dragEnter:function(t,i){return e.layoutProvider.dragEnter(t,i)&&{className:"hidden"}},dragOver:function(t,i){e.layoutProvider.dragover$.next(i)},dragLeave:function(t){e.layoutProvider.dragleave$.next()}}}},{key:"onTileClosed",value:function(e){this.layoutProvider.removeTiles([e.id])}},{key:"onTileGroupModelChanged",value:function(e){var t=new CustomEvent("DejaTileGroupModelEvent",{cancelable:!1});t.tileGroup=e,this.tileGroupChanged.emit(t)}},{key:"onFocus",value:function(){this.hasFocus=!0}},{key:"onBlur",value:function(){this.hasFocus=!1}},{key:"tiles",get:function(){return this.layoutProvider.tiles}},{key:"selectionRect$",get:function(){return this.layoutProvider.selectionRect$}},{key:"tileminwidth",set:function(e){this.layoutProvider.tileMinWidth=e}},{key:"tilemaxwidth",set:function(e){this.layoutProvider.tileMaxWidth=e}},{key:"tileminheight",set:function(e){this.layoutProvider.tileMinHeight=e}},{key:"tilemaxheight",set:function(e){this.layoutProvider.tileMaxHeight=e}},{key:"maxwidth",set:function(e){this.layoutProvider.maxWidth=e}},{key:"designMode",set:function(e){this.layoutProvider.designMode=Object(v.b)(e)},get:function(){return this.layoutProvider.designMode}},{key:"models",set:function(e){this.writeValue(e)}},{key:"canDelete",set:function(e){var t=this;Object(v.b)(e)&&!this.delete$sub?this.delete$sub=this.keyup$.pipe(Object(Oe.a)((function(e){return t.layoutProvider.designMode&&e.code===ye.A.Delete&&t.hasFocus})),Object(N.a)(this.destroyed$)).subscribe((function(){return t.layoutProvider.deleteSelection()})):this.delete$sub&&(this.delete$sub.unsubscribe(),this.delete$sub=void 0)}},{key:"canCopy",set:function(e){var t=this;Object(v.b)(e)&&!this.copy$sub?this.copy$sub=this.keyup$.pipe(Object(Oe.a)((function(e){return e.code===ye.A.KeyC&&e.ctrlKey&&t.hasFocus})),Object(N.a)(this.destroyed$)).subscribe((function(){return t.copySelection()})):this.copy$sub&&(this.copy$sub.unsubscribe(),this.copy$sub=void 0)}},{key:"canCut",set:function(e){var t=this;Object(v.b)(e)&&!this.cut$sub?this.cut$sub=this.keyup$.pipe(Object(Oe.a)((function(e){return t.layoutProvider.designMode&&e.code===ye.A.KeyX&&e.ctrlKey&&t.hasFocus})),Object(N.a)(this.destroyed$)).subscribe((function(){return t.cutSelection()})):this.cut$sub&&(this.cut$sub.unsubscribe(),this.cut$sub=void 0)}},{key:"canPaste",set:function(e){var t=this;Object(v.b)(e)&&!this.paste$sub?this.paste$sub=this.keyup$.pipe(Object(Oe.a)((function(e){return t.layoutProvider.designMode&&e.code===ye.A.KeyV&&e.ctrlKey&&t.hasFocus})),Object(N.a)(this.destroyed$)).subscribe((function(){return t.paste()})):this.paste$sub&&(this.paste$sub.unsubscribe(),this.paste$sub=void 0)}},{key:"selectedTiles",set:function(e){this.layoutProvider.selectedTiles=e.map((function(e){return"string"==typeof e?e:e.id}))}}]),t}(ye.s)).\u0275fac=function(e){return new(e||Qe)(p["\u0275\u0275directiveInject"](p.ElementRef),p["\u0275\u0275directiveInject"](p.ChangeDetectorRef),p["\u0275\u0275directiveInject"](dt),p["\u0275\u0275directiveInject"](o.NgControl,10))},Qe.\u0275cmp=p["\u0275\u0275defineComponent"]({type:Qe,selectors:[["deja-tiles"]],contentQueries:function(e,t,i){var n;1&e&&p["\u0275\u0275contentQuery"](i,Xe,!0),2&e&&p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.tileTemplate=n.first)},viewQuery:function(e,t){var i;1&e&&p["\u0275\u0275staticViewQuery"](Ne,!0),2&e&&p["\u0275\u0275queryRefresh"](i=p["\u0275\u0275loadQuery"]())&&(t.tilesContainer=i.first)},inputs:{tabIndex:"tabIndex",tileminwidth:"tileminwidth",tilemaxwidth:"tilemaxwidth",tileminheight:"tileminheight",tilemaxheight:"tilemaxheight",maxwidth:"maxwidth",designMode:"designMode",models:"models",canDelete:"canDelete",canCopy:"canCopy",canCut:"canCut",canPaste:"canPaste",selectedTiles:"selectedTiles"},outputs:{selectionChanged:"selectionChanged",layoutChanged:"layoutChanged",layoutCompleted:"layoutCompleted",contentAdding:"contentAdding",contentRemoving:"contentRemoving",tileGroupChanged:"tileGroupChanged",tilesAdded:"tilesAdded",tilesDeleted:"tilesDeleted",contentCopied:"contentCopied"},features:[p["\u0275\u0275ProvidersFeature"]([dt]),p["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:8,consts:[["id","tiles",3,"deja-mouse-droppable","focus","blur"],["tilesContainer",""],[3,"id","tile","designMode","template","close","groupChanged",4,"ngFor","ngForOf"],["deja-tile-position","",3,"bounds"],[3,"id","tile","designMode","template","close","groupChanged"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0,1),p["\u0275\u0275listener"]("focus",(function(e){return t.onFocus()}))("blur",(function(e){return t.onBlur()})),p["\u0275\u0275template"](2,Ue,1,5,"deja-tile",2),p["\u0275\u0275element"](3,"div",3),p["\u0275\u0275pipe"](4,"async"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275classProp"]("design",t.designMode),p["\u0275\u0275property"]("deja-mouse-droppable",t.getDropContext()),p["\u0275\u0275attribute"]("tabindex",t.tabIndex),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngForOf",t.tiles),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("bounds",p["\u0275\u0275pipeBind1"](4,6,t.selectionRect$)))},directives:[u.d,n.m,lt,ct],pipes:[n.b],styles:["[_nghost-%COMP%]{position:relative;overflow:auto;margin:0!important}[_nghost-%COMP%]   #tiles[_ngcontent-%COMP%]{display:block;left:0;top:0;width:100%;height:100%;position:absolute;padding:0!important;margin:0!important}[_nghost-%COMP%]   #tiles.design[_ngcontent-%COMP%]   deja-tile[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}[_nghost-%COMP%]   #tiles[_ngcontent-%COMP%]   #tile[_ngcontent-%COMP%]:hover{z-index:200}[_nghost-%COMP%]   [deja-tile-position][_ngcontent-%COMP%]{position:absolute;z-index:101;background-color:rgba(0,0,0,.5)}[drag][_nghost-%COMP%]{background-color:rgba(0,0,0,.5)}[drag][_nghost-%COMP%]   [deja-tile-position][_ngcontent-%COMP%]{transition-property:left,top,width,height;transition-duration:.35s;transition-timing-function:ease}"],changeDetection:0}),Qe),ht=((Ke=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:Ke}),Ke.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Ke)},imports:[[n.c,o.FormsModule,E,r.c,m.d,g.b,a.b,f.c,pe,fe.b,u.b,ge.b,ye.k,me.b,be.b,ve.f]]}),Ke),pt=p["\u0275\u0275getInheritedFactory"](rt),ft=i("KYkd"),mt=i("iInd"),gt=i("Kqap"),bt=i("xbPD"),vt=i("1XgV"),yt=i("iss+");function _t(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-card",5),p["\u0275\u0275element"](1,"deja-markdown",6),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/dev/projects/deja-js/component/tiles/readme.txt"))}function xt(e,t){if(1&e){var i=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"button",11),p["\u0275\u0275listener"]("click",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"](2).$implicit.cancel(!1)})),p["\u0275\u0275text"](1," Ok "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](2,"button",12),p["\u0275\u0275listener"]("click",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"](2).$implicit.cancel(!0)})),p["\u0275\u0275text"](3," Annuler "),p["\u0275\u0275elementEnd"]()}}function kt(e,t){if(1&e){var i=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"deja-snackbar",8),p["\u0275\u0275listener"]("onAnimationDone",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().$implicit.cancel(!1)})),p["\u0275\u0275elementStart"](1,"deja-message-box",9),p["\u0275\u0275text"](2),p["\u0275\u0275template"](3,xt,4,0,"ng-template",null,10,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var n=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275property"]("duration",8e3),p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate"]("type",n.type),p["\u0275\u0275propertyInterpolate"]("title",n.title),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",n.content," ")}}function wt(e,t){1&e&&p["\u0275\u0275template"](0,kt,5,4,"deja-snackbar",7),2&e&&p["\u0275\u0275property"]("ngIf",t.$implicit.gate)}function Ct(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",25),p["\u0275\u0275text"](1),p["\u0275\u0275elementStart"](2,"span",26),p["\u0275\u0275text"](3,"Selected"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"span",27),p["\u0275\u0275text"](5,"Pressed"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){var i=t.$implicit;p["\u0275\u0275styleProp"]("background-color",i.color),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate2"]("",i.templateModel.naqme," (",i.templateModel.code,") ")}}function jt(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",25),p["\u0275\u0275text"](1),p["\u0275\u0275elementStart"](2,"span",26),p["\u0275\u0275text"](3,"Selected"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"span",27),p["\u0275\u0275text"](5,"Pressed"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){var i=t.$implicit;p["\u0275\u0275styleProp"]("background-color",i.color),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate2"]("",i.templateModel.naqme," (",i.templateModel.code,") ")}}function Mt(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",25),p["\u0275\u0275text"](1),p["\u0275\u0275elementStart"](2,"span",26),p["\u0275\u0275text"](3,"Selected"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"span",27),p["\u0275\u0275text"](5,"Pressed"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){var i=t.$implicit;p["\u0275\u0275styleProp"]("background-color",i.color),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate2"]("",i.templateModel.naqme," (",i.templateModel.code,") ")}}function Ot(e,t){if(1&e){var i=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"mat-card",5),p["\u0275\u0275elementStart"](1,"mat-toolbar",13),p["\u0275\u0275text"](2,"Tiles Demo"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"mat-card-content",14),p["\u0275\u0275elementStart"](4,"mat-checkbox",15),p["\u0275\u0275listener"]("ngModelChange",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().designMode=e})),p["\u0275\u0275text"](5,"Design Mode"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"button",11),p["\u0275\u0275listener"]("click",(function(e){p["\u0275\u0275restoreView"](i);var t=p["\u0275\u0275reference"](20);return p["\u0275\u0275nextContext"]().addGroup(t)})),p["\u0275\u0275text"](7," Add Group "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"mat-card-content"),p["\u0275\u0275elementStart"](9,"span",16,17),p["\u0275\u0275text"](11," Drop Area "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"mat-card-content"),p["\u0275\u0275elementStart"](13,"deja-tiles",18,19),p["\u0275\u0275listener"]("contentAdding",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().onContentAdding(e)}))("contentRemoving",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().onContentRemoving(e)})),p["\u0275\u0275pipe"](15,"async"),p["\u0275\u0275template"](16,Ct,6,4,"ng-template",null,20,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](18,"mat-card-content"),p["\u0275\u0275elementStart"](19,"deja-tiles",21,22),p["\u0275\u0275listener"]("contentAdding",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().onContentAdding(e)}))("contentRemoving",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().onContentRemoving(e)})),p["\u0275\u0275pipe"](21,"async"),p["\u0275\u0275template"](22,jt,6,4,"ng-template",null,20,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"mat-card-content"),p["\u0275\u0275elementStart"](25,"deja-tiles",23,24),p["\u0275\u0275listener"]("contentAdding",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().onContentAdding(e)}))("contentRemoving",(function(e){return p["\u0275\u0275restoreView"](i),p["\u0275\u0275nextContext"]().onContentRemoving(e)})),p["\u0275\u0275pipe"](27,"async"),p["\u0275\u0275template"](28,Mt,6,4,"ng-template",null,20,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var n=p["\u0275\u0275reference"](10),o=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngModel",o.designMode),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("deja-mouse-droppable",o.getDropContext(n)),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("models",p["\u0275\u0275pipeBind1"](15,8,o.tiles1$))("deja-mouse-draggable",o.getDragContext()),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("models",p["\u0275\u0275pipeBind1"](21,10,o.tiles2$))("designMode",o.designMode),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("models",p["\u0275\u0275pipeBind1"](27,12,o.tiles3$))("designMode",o.designMode)}}var Tt,Pt=mt.f.forChild([{path:"",component:(Tt=function(){function e(t){_classCallCheck(this,e),this.countriesService=t,this.tabIndex=1,this.designMode=!1,this.message$=new I.a,this.messages$=Object(ke.a)(this.message$).pipe(Object(gt.a)((function(e,t){return[].concat(_toConsumableArray(e),[t])}),[]),Object(bt.a)([]))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=0,i=0,n=0,o=0;this.countriesMap=new Map;var r=this.countriesService.getCountries$().pipe(Object(Se.a)((function(e){return e})));this.tiles1$=r.pipe(Object(z.a)(12),Object(H.a)((function(n){var o=new it;return o.percentBounds=new ye.F(t,i,15,15),o.color=n.color,o.templateModel=n,(t+=15)+15>100&&(t=0,i+=15),e.countriesMap.set(o.id,n),o})),Object(Be.a)((function(e,t){return[].concat(_toConsumableArray(e),[t])}),[])),this.tiles2$=r.pipe(Object(H.a)((function(e){var t=new it;return t.percentBounds=new ye.F(n,o,15,15),t.color=e.color,t.templateModel=e,(n+=15)+15>100&&(n=0,o+=15),t})),Object(Be.a)((function(e,t){return[].concat(_toConsumableArray(e),[t])}),[]));var s=new ot;s.percentBounds=new ye.F(n,o,60,30),s.color="#aba280",s.html="<div>Tuile <b>\xe9ditable</b> de type groupe</div><div><div><p>Utilise le composant deja-editor</p></div></div></div></span></div>",this.tiles3$=Object(Me.a)([s])}},{key:"addGroup",value:function(e){var t=new ot;t.html="New Group",e.addTiles([t])}},{key:"getDragContext",value:function(){var e=this;return{target:"deja-tile",className:"deja-tile-cursor",dragStart:function(t){var i=e.countriesMap.get(t.id),n=new it;return n.percentBounds=new ye.F(0,0,15,15),n.color=i.color,n.templateModel=i,{country:i,DejaTile:n}}}}},{key:"getDropContext",value:function(e){return{dragEnter:function(e){return{width:200,height:60,className:"country-target-cursor"}},drop:function(t){var i=t.country;e.innerText="The dropped country is ".concat(i.naqme," - the code is: ").concat(i.code)}}}},{key:"onContentAdding",value:function(e){this.message$.next({title:"Tiles added",content:"".concat(e.added.length," tiles added."),type:"warn",gate:!0,cancel:function(t){this.gate=!1,e.cancel$.next(t)}}),e.preventDefault()}},{key:"onContentRemoving",value:function(e){this.message$.next({title:"Tiles deleted",content:"".concat(e.removed.length," tiles deleted."),type:"warn",gate:!0,cancel:function(t){this.gate=!1,e.cancel$.next(t)}}),e.preventDefault()}}]),e}(),Tt.\u0275fac=function(e){return new(e||Tt)(p["\u0275\u0275directiveInject"](vt.a))},Tt.\u0275cmp=p["\u0275\u0275defineComponent"]({type:Tt,selectors:[["deja-tiles-demo"]],decls:8,vars:6,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"demo-card","demo-basic"],[3,"url"],["alignment","bottom right",3,"duration","onAnimationDone",4,"ngIf"],["alignment","bottom right",3,"duration","onAnimationDone"],[3,"type","title"],["actionsTemplate",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],["color","primary"],["id","actions"],[3,"ngModel","ngModelChange"],["id","droparea",3,"deja-mouse-droppable"],["dropArea",""],["id","tiles1","maxwidth","100%","tileminwidth","5%","tileminheight","5%","tilemaxheight","50%","tilemaxwidth","50%",3,"models","deja-mouse-draggable","contentAdding","contentRemoving"],["tiles1",""],["tileTemplate",""],["id","tiles2","canDelete","","canCopy","","canCut","","canPaste","","maxwidth","100%","tileminwidth","5%","tileminheight","5%","tilemaxheight","50%","tilemaxwidth","50%",3,"models","designMode","contentAdding","contentRemoving"],["tiles2",""],["id","tiles3","canDelete","","canCopy","","canCut","","canPaste","","maxwidth","100%","tileminwidth","5%","tileminheight","5%","tilemaxheight","50%","tilemaxwidth","50%",3,"models","designMode","contentAdding","contentRemoving"],["tiles3",""],[1,"tile-content","noselect"],["id","selected"],["id","pressed"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-tab-group",0),p["\u0275\u0275listener"]("selectedTabChange",(function(e){return t.tabIndex=e.index})),p["\u0275\u0275element"](1,"mat-tab",1),p["\u0275\u0275element"](2,"mat-tab",2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](3,_t,2,1,"mat-card",3),p["\u0275\u0275template"](4,wt,1,1,"ng-template",4),p["\u0275\u0275pipe"](5,"async"),p["\u0275\u0275template"](6,Ot,30,14,"mat-card",3),p["\u0275\u0275element"](7,"deja-mouse-dragdrop-cursor")),2&e&&(p["\u0275\u0275property"]("selectedIndex",t.tabIndex),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",0===t.tabIndex),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",p["\u0275\u0275pipeBind1"](5,4,t.messages$)),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",1===t.tabIndex))},directives:[l.b,l.a,n.n,n.m,u.a,s.a,yt.a,h.a,d.a,r.b,c.a,s.c,a.a,o.NgControlStatus,o.NgModel,u.d,ut,u.c],pipes:[n.b],styles:["deja-tiles-demo .demo-basic{padding:0}deja-tiles-demo .demo-full-width{width:100%}deja-tiles-demo .demo-icons{font-size:100%;height:inherit;vertical-align:top;width:inherit}deja-tiles-demo .demo-card{margin:16px}deja-tiles-demo .demo-card mat-card-content{display:flex;flex-direction:column;margin:2rem}deja-tiles-demo #actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between}deja-tiles-demo #droparea{height:5rem;background-color:#f57c00;width:50%;display:block}deja-tiles-demo #tiles1{height:370px;display:block}deja-tiles-demo #tiles2{height:1000px;display:block}deja-tiles-demo deja-tile{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}deja-tiles-demo deja-tile #pressed,deja-tiles-demo deja-tile #selected{display:none}deja-tiles-demo deja-tile[pressed] #pressed,deja-tiles-demo deja-tile[selected] #selected{display:block}deja-tiles-demo deja-tile .tile-content{width:100%;height:100%;display:block}@media screen and (min-width:1401px){deja-tiles-demo deja-tiles{font-size:100%}}@media screen and (max-width:1400px){deja-tiles-demo deja-tiles{font-size:90%}}@media screen and (max-width:1200px){deja-tiles-demo deja-tiles{font-size:85%}}@media screen and (max-width:768px){deja-tiles-demo deja-tiles{font-size:80%}}@media screen and (max-width:640px){deja-tiles-demo deja-tiles{font-size:70%}}@media screen and (max-width:320px){deja-tiles-demo deja-tiles{font-size:60%}}.country-target-cursor .tile-content,.deja-tile-cursor .tile-content{width:100%;height:100%;display:block;opacity:.8}.country-target-cursor .tile-content{background-color:#f4a460!important}"],encapsulation:2}),Tt)},{path:"**",redirectTo:"",pathMatch:"full"}]);i.d(t,"DejaTilesDemoModule",(function(){return Dt}));var Et,Dt=((Et=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:Et}),Et.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Et)},providers:[],imports:[[n.c,o.FormsModule,s.d,l.c,c.b,r.c,a.b,ht,ft.a,h.b,u.b,d.b,Pt]]}),Et)}}]);