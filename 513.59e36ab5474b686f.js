"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[513,779],{5857:(_e,te,d)=>{d.d(te,{H:()=>B});var g=d(5e3),O=d(8966),U=(d(7514),d(9808));function ie(z,v){if(1&z){const p=g.EpF();g.TgZ(0,"img",11),g.NdJ("load",function(){return g.CHM(p),g.oxw(2).imageLoaded.emit()}),g.qZA()}if(2&z){const p=g.oxw(2);g.uIk("src",p.item.urlToImage,g.LSH)}}function Y(z,v){if(1&z&&(g.TgZ(0,"span",1)(1,"span",2),g.YNc(2,ie,1,1,"img",3),g.qZA(),g.TgZ(3,"span",4)(4,"span",5),g._uU(5),g.qZA(),g.TgZ(6,"span",6),g._uU(7),g.qZA(),g.TgZ(8,"span",7)(9,"a",8),g._uU(10),g.qZA(),g.TgZ(11,"span",9),g._uU(12),g.qZA(),g.TgZ(13,"span",10),g._uU(14),g.qZA()()()()),2&z){const p=g.oxw();g.xp6(2),g.Q6J("ngIf",p.item.urlToImage),g.xp6(3),g.Oqu(p.item.title),g.xp6(2),g.Oqu(p.item.description),g.xp6(2),g.uIk("href",p.item.url,g.LSH),g.xp6(1),g.Oqu(p.item.url),g.xp6(2),g.Oqu(p.item.author),g.xp6(2),g.Oqu(p.item.publishedAt)}}let B=(()=>{class z{constructor(p,H){this.elementRef=p,this.imageLoaded=new g.vpe,H&&(this.item=H)}}return z.\u0275fac=function(p){return new(p||z)(g.Y36(g.SBq),g.Y36(O.WI,8))},z.\u0275cmp=g.Xpm({type:z,selectors:[["news-card"]],inputs:{item:"item"},outputs:{imageLoaded:"imageLoaded"},decls:1,vars:1,consts:[["class","news",4,"ngIf"],[1,"news"],[1,"logo"],[3,"load",4,"ngIf"],[1,"text"],[1,"title"],[1,"description"],[1,"footer"],[1,"url"],[1,"author"],[1,"publishedAt"],[3,"load"]],template:function(p,H){1&p&&g.YNc(0,Y,15,7,"span",0),2&p&&g.Q6J("ngIf",H.item)},directives:[U.O5],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]{padding:5px;overflow:hidden;display:flex;flex-direction:row}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{flex:0 0 25%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:auto;object-fit:contain;max-width:100%;max-height:100%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px #aaa solid;padding-left:.3rem;margin-left:.3rem;flex:0 0 75%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:200%;margin:0 1rem .3rem .3rem;white-space:normal}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:120%;margin:.3rem 1rem .3rem .3rem;white-space:normal}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem 1rem 0 .3rem;overflow:hidden;justify-content:space-between;flex-wrap:wrap}"]}),z})()},4779:(_e,te,d)=>{d.r(te),d.d(te,{NewsCardModule:()=>ie});var g=d(9808),O=d(1636),j=d(5857),U=d(5e3);let ie=(()=>{class Y extends O.sw{constructor(){super(j.H)}}return Y.\u0275fac=function(z){return new(z||Y)},Y.\u0275mod=U.oAB({type:Y}),Y.\u0275inj=U.cJS({providers:[],imports:[[g.ez]]}),Y})()},7514:(_e,te,d)=>{d.d(te,{ef:()=>ie,wg:()=>Y});var g=d(655),O=d(8767);class ie{constructor(){this.sources=void 0,this.status=void 0}}(0,g.gn)([(0,O.ep)({type:class U{constructor(){this.id=void 0,this.name=void 0,this.category=void 0,this.language=void 0,this.country=void 0,this.sortBysAvailable=void 0}}}),(0,g.w6)("design:type",Array)],ie.prototype,"sources",void 0);class Y{constructor(){this.articles=void 0,this.status=void 0,this.sources=void 0}}(0,g.gn)([(0,O.ep)({type:class j{constructor(){this.author=void 0,this.title=void 0,this.description=void 0,this.url=void 0,this.urlToImage=void 0,this.publishedAt=void 0}}}),(0,g.w6)("design:type",Array)],Y.prototype,"articles",void 0)},1857:(_e,te,d)=>{d.d(te,{Y:()=>p});var g=d(8767),O=d(6698),j=d(4004),U=d(3900),ie=d(8505),Y=d(4782),B=d(7514),z=d(5e3),v=d(520);let p=(()=>{class H{constructor(se){this.httpClient=se,this.news$=this.httpClient.get("https://newsapi.org/v1/sources?language=en").pipe((0,j.U)($=>g.cV.deserialize(B.ef,$)),(0,j.U)($=>{if("ok"!==$.status)throw new Error("Fail to get news");return $.sources}),(0,j.U)($=>$.filter(le=>"technology"===le.category||"gaming"===le.category)),(0,U.w)($=>{const le=$[Math.round(Math.random()*($.length-1))];return this.httpClient.get(`https://newsapi.org/v1/articles?source=${le.id}&apiKey=228bc9410a2a4f608d2ad2e5626896f3`)}),(0,j.U)($=>g.cV.deserialize(B.wg,$)),(0,j.U)($=>{if("ok"!==$.status)throw new Error("Fail to get news");return $.articles}),(0,ie.b)($=>{console.log("x",$)}),(0,Y.d)({bufferSize:1,refCount:!1}))}getNews$(se){return this.news$.pipe((0,j.U)($=>{let le=$;if(se)for(;se>0;)le=le.concat((0,O.Z)($)),se-=$.length;return le}))}}return H.\u0275fac=function(se){return new(se||H)(z.LFG(v.eN))},H.\u0275prov=z.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})()},2718:(_e,te,d)=>{d.d(te,{V:()=>z});var g=d(9841),O=d(4482),j=d(5797),U=d(3268),ie=d(9635),Y=d(3269);function B(...v){const p=(0,Y.jO)(v);return p?(0,ie.z)(B(...v),(0,U.Z)(p)):(0,O.e)((H,T)=>{(0,g.l)([H,...(0,j.k)(v)])(T)})}function z(...v){return B(...v)}},2729:(_e,te,d)=>{d.d(te,{ZV:()=>Ee,tN:()=>Be,_h:()=>Oe,NA:()=>Ae,uC:()=>be,ZE:()=>Re,NJ:()=>ye,Z2:()=>Le});var g=d(9808),O=d(5e3),j=d(3191),U=d(1636),ie=d(9770),B=d(1135),z=d(4707),v=d(9646),p=d(3900),H=d(5963),T=d(8505),se=d(2718),$=d(4004),le=d(1884),ne=d(9300),ve=d(2722),Me=d(8372),fe=d(207),de=d(2076),k=d(9751),J=d(7272),q=d(5698),Ie=d(1677),ue=d(5245);let Ee=(()=>{class m{set selected(e){this._selected=(0,j.Ig)(e)}get selected(){return this._selected}}return m.\u0275fac=function(e){return new(e||m)},m.\u0275cmp=O.Xpm({type:m,selectors:[["deja-item"]],inputs:{value:"value",text:"text",selected:"selected"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),m})(),Le=(()=>{class m extends U.yl{constructor(){super(),this.emptyViewPort={beforeSize:0,afterSize:0,viewPortSize:0,listSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:0,items:[]},this.mode$=new B.X("fixed"),this.items$=new B.X([]),this.maxSize$=new B.X(0),this.ensureItem$=new B.X(null),this.scrollPosition$=new B.X(0),this.element$=new z.t(1),this.itemsSize$=new B.X(0),this.direction$=new B.X("vertical"),this.viewPortResult$=new B.X(this.emptyViewPort),this.refresh$=new B.X(null),this.deleteSizeCache$=new B.X(!0),this.measureViewPort={beforeSize:0,afterSize:2e5,viewPortSize:0,listSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:void 0,items:[]},this._mode="fixed",this._itemsSize=m.itemDefaultSize,this._direction="vertical",this._scrollPosition=0,this.ignoreScrollCount=0,this.viewPort$=this.viewPortResult$;const e=()=>"horizontal"===this._direction?window.innerWidth:window.innerHeight,t=a=>Math.ceil("horizontal"===this._direction?a.clientWidth:a.clientHeight),o=(a,w,P,b,E)=>{const G=[];let N,C,K,A=0,M=0,X=0;if(E&&void 0!==E.index&&E.atEnd){let V=a.length;for(;--V>=0;){const ee=a[V],ae=ee.size||b;E.index===V&&(C=V),void 0!==C?void 0===N?(M+=ae,G.unshift(ee),(M>w||0===V)&&(N=V,K=M-w)):(K+=ae,A+=ae):X+=ae}}else a.forEach((V,ee)=>{const ae=V.size||b;E&&E.index===ee&&(N=ee,K=A),void 0===N&&(A+ae>=P?N=ee:A+=ae),void 0!==N&&void 0===C&&(M+=ae,G.push(V)),void 0===C?(A+M>(K||P)+w||ee===a.length-1)&&(C=ee):X+=ae});return void 0!==(null==E?void 0:E.index)&&M<w&&G.length<a.length?o(a,w,P,b,E.atEnd?{index:0,atEnd:!1}:{index:a.length-1,atEnd:!0}):(0,v.of)({beforeSize:A,afterSize:X,listSize:w,viewPortSize:M,visibleItems:G,startIndex:N||0,endIndex:C,scrollPos:K,items:a})},l=(a,w,P,b,E,G,N)=>o(a,w,P,E,G).pipe((0,p.w)(C=>!N&&C.visibleItems.find(M=>!M.size)?(this.viewPortResult$.next(C),(0,H.H)(1).pipe((0,T.b)(()=>{const M=b.getElementsByClassName("listitem");for(let X=0;X<M.length;X++){const K=M[X],V=+K.getAttribute("flat"),ee=C.visibleItems[V-C.startIndex];ee&&(ee.size=t(K))}C.viewPortSize=C.visibleItems.reduce((X,K)=>X+(K.size||E),0)}),(0,p.w)(()=>o(a,w,C.scrollPos||P,E,G)))):(0,v.of)(C))),c=(a,w,P,b,E,G)=>{let C,A,M,N=0;const X=b.getElementsByClassName("listitem");let K={beforeSize:0,afterSize:0,listSize:w,viewPortSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:0,items:a};if(X.length!==a.length&&(null==G||G))return this.viewPortResult$.next(K),(0,H.H)(1).pipe((0,p.w)(()=>c(a,w,P,b,E,!1)));if(E&&void 0!==E.index&&E.atEnd){M=0;let V=0,ee=X.length;for(;--ee>=0;){const Pe=a[ee].size=t(X[ee]);E.index===ee&&(A=ee),void 0!==A&&(void 0===C?(V+=Pe,V>w&&(C=ee,M=V-w)):M+=Pe),N+=Pe}}else for(let V=0;V<X.length;V++){const ae=a[V].size=t(X[V]);E&&E.index===V&&(C=V,M=N),N+=ae,void 0===C&&N>P&&(C=V),void 0===A&&N>(M||P)+w&&(A=V)}return C=C||0,A=A||0,K={beforeSize:0,afterSize:0,listSize:w,viewPortSize:N,visibleItems:a.slice(C,1+A),startIndex:C,endIndex:A,scrollPos:M,items:a},(0,v.of)(K)},_=(a,w,P,b,E,G,N)=>{if(!(null==a?void 0:a.length))return(0,v.of)(this.emptyViewPort);let A,C=w||t(b);switch(C<=m.itemDefaultSize&&(C=e()),void 0!==G.index?this.ignoreScrollCount++:this.ignoreScrollCount=0,this.mode){case"disabled":A=c(a,C,P,b,G,!0);break;case"variable":A=o(a,C,P,E,G);break;case"auto":A=l(a,C,P,b,E,G);break;case"fixed":A=((a,w,P,b,E)=>{const G=Math.ceil(w/b)+1,N=Math.floor(P/b),C=Math.min(a.length-N,G);let A,M,X;E&&void 0!==E.index&&E.atEnd?(A=Math.max(0,E.index+1-Math.min(a.length,G)),M=Math.max(E.index,C-1),X=(M+1)*b-w):C<0?(M=a.length-1,A=M+1-Math.min(a.length,G)):void 0!==E.index?(A=E.index,M=A+C-1,X=A*b):(A=N,M=A+C-1);const K=a.slice(A,M+1);return(0,v.of)({beforeSize:A*b,afterSize:(a.length-M-1)*b,listSize:w,viewPortSize:K.length*b,visibleItems:K,startIndex:A,endIndex:M,scrollPos:X,items:a})})(a,C,P,E,G);break;default:throw new Error("ViewPortService, invalide mode. The value can be disabled, variable, auto and fixed.")}return A.pipe((0,p.w)(M=>{if(!N){const X=M.beforeSize+M.viewPortSize+M.afterSize-M.listSize;if("disabled"!==this.mode&&C<2*m.itemDefaultSize)return this.viewPortResult$.next(this.measureViewPort),(0,H.H)(1).pipe((0,p.w)(()=>_(a,w,P,b,E,G,!0)));if(X<0||a.length&&X>0&&(M.scrollPos||P)>X)return _(a,w,0,b,E,{index:a.length-1,atEnd:!0},!0);if("auto"===this.mode&&M.viewPortSize<C)return _(a,w,0,b,E,{index:a.length-1,atEnd:!0},!0)}return(0,v.of)(M)}),(0,T.b)(()=>{G.index=void 0}))},S=this.items$;this.ensureParams$=this.ensureItem$.pipe((0,se.V)(S),(0,$.U)(([a,w])=>{this.ignoreScrollCount=0;const P={};if(null!=a&&(null==w?void 0:w.length)){let b=a;isNaN(b)&&(b=w.findIndex(E=>a===E)),b>=0&&(this.viewPort&&b<=this.viewPort.startIndex?(P.index=b,P.atEnd=!1):(!this.viewPort||b>=this.viewPort.endIndex)&&(P.index=b,P.atEnd=!0))}return P}));const x=this.maxSize$.pipe((0,le.x)()),R=this.refresh$.pipe((0,p.w)(a=>{if(this.ignoreScrollCount=0,a){if(a.clearMeasuredSize)return this.items$.pipe((0,T.b)(w=>{this.lastCalculatedSize=void 0,w.forEach(P=>P.size=void 0)}),(0,$.U)(()=>a));a.items&&a.items.forEach(w=>w.size=void 0)}return(0,v.of)(a)})),D=this.scrollPosition$.pipe((0,$.U)(a=>this._scrollPosition=a||0),(0,$.U)(a=>Math.max(a,0)),(0,ne.h)(()=>!(this.ignoreScrollCount>0&&(this.ignoreScrollCount--,1))),(0,le.x)()),re=this.mode$.pipe((0,$.U)(a=>this._mode=a),(0,le.x)()),L=this.direction$.pipe((0,$.U)(a=>this._direction=a),(0,le.x)()),he=this.itemsSize$.pipe((0,le.x)(),(0,T.b)(a=>this._itemsSize=a)),Z=this.element$.pipe((0,T.b)(a=>{a||(this.viewPort=void 0,this.ignoreScrollCount=0,this.lastCalculatedSize=void 0)}));L.pipe((0,se.V)(S,re,this.deleteSizeCache$),(0,ne.h)(([a,w,P])=>(null==w?void 0:w.length)&&"auto"===P),(0,p.w)(([a,w])=>w),(0,ve.R)(this.destroyed$)).subscribe(a=>a.size=void 0),Z.pipe((0,se.V)(S,R,this.ensureParams$,L,re,he,x),(0,Me.b)(1),(0,se.V)(D),(0,ne.h)(([[a]])=>!!a),(0,p.w)(([[a,w,P,b,E,G,N,C],A])=>{N||(N=m.itemDefaultSize);const M=this.lastCalculatedSize||C||t(a),X=this._scrollPosition;let K="auto"===C?0:+C;return(null==w?void 0:w.length)&&("auto"===M||M<2*m.itemDefaultSize)?(this.viewPortResult$.next(this.measureViewPort),(0,H.H)(1).pipe((0,$.U)(()=>{if(K=this.lastCalculatedSize=t(a),"fixed"===this.mode)w.length*N<K&&(K=w.length*N);else if("variable"===this.mode){let V=0;w.find(ee=>(V+=ee.size||N,V>K)),V<K&&(K=V)}return{element:a,scrollPos:X,items:w,maxSizeValue:K,itemDefaultSize:N,ensureParams:b}}))):(K=K||this.lastCalculatedSize,(0,v.of)({element:a,scrollPos:X,items:w,maxSizeValue:K,itemDefaultSize:N,ensureParams:b}))}),(0,p.w)(({element:a,scrollPos:w,items:P,maxSizeValue:b,itemDefaultSize:E,ensureParams:G})=>_(P,b,w,a,E,G)),(0,ve.R)(this.destroyed$)).subscribe(a=>{this.viewPortResult$.next(a)},a=>console.error(a)),this.viewPortResult$.pipe((0,ve.R)(this.destroyed$)).subscribe(a=>this.viewPort=a)}get mode(){return this._mode}get itemsSize(){return this._itemsSize}get direction(){return this._direction}deleteSizeCache(){this.deleteSizeCache$.next(!0)}clear(){this.viewPortResult$.next(this.emptyViewPort)}refresh(e){this.refresh$.next(e||null)}}return m.itemDefaultSize=40,m.\u0275fac=function(e){return new(e||m)},m.\u0275prov=O.Yz7({token:m,factory:m.\u0275fac}),m})(),we=(()=>{class m{constructor(){console.warn("@deja-js/component/core/SortingService is deprecated, and will be removed in a further version. Please use @deja-js/component/v2/tem-list/SortingService instead.")}sort$(e,t){return(0,v.of)(this.sort(e,t))}sort(e,t){if(null==e?void 0:e.length){const r=t instanceof Array?t:[t];let o=r.length;for(;--o>=0;){const l=r[o];e=(0,Ie.Z)(e,l.name),"descending"===l.order&&(e=e.reverse())}}return e}sortTree$(e,t,r){return r=r||"items",this.sort$(e,t).pipe((0,p.w)(o=>o),(0,p.w)(o=>o&&o[r]?this.sortTree$(o[r],t,r).pipe((0,$.U)(l=>(o[r]=l,o))):(0,v.of)(o)),(0,fe.u)((o,l)=>[...o,l],[]))}}return m.\u0275fac=function(e){return new(e||m)},m.\u0275prov=O.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),be=(()=>{class m{group$(e,t,r="items"){if(!e||0===e.length||!t)return(0,v.of)(e);if(t instanceof Array){let o=(0,v.of)(e);return t.forEach(l=>o=o.pipe((0,p.w)(c=>this.group$(c,l,r)))),o}{const o=t;if(!e[0][r])return this.groupChildren$(e,o,0,r);const l=(c,_)=>(0,de.D)(c).pipe((0,p.w)(S=>{var x;const R=S[r];return(null===(x=R[0])||void 0===x?void 0:x[r])?l(R,_+1).map(()=>S):this.groupChildren$(R,o,_,r).pipe((0,$.U)(D=>(S[r]=D,S)))}),(0,fe.u)((S,x)=>[...S,x],[]));return l(e,1)}}groupChildren$(e,t,r,o){return(0,de.D)(e).pipe((0,fe.u)((l,c)=>{let _="function"==typeof t.groupByField?t.groupByField(c):c[t.groupByField];"function"==typeof c[_]&&(_=c[_]()),_||(_=this.getTextValue(c));let S=l[_];if(!S){const x=t.groupTextField&&("function"==typeof t.groupTextField?t.groupTextField(c):c[t.groupTextField])||_;S=l[_]={depth:r,toString:()=>x,$text:x},S[o]=[]}return S[o].push(c),l},{}),(0,$.U)(l=>Object.keys(l).map(c=>l[c])),(0,T.b)(l=>l.forEach(c=>{var _;return c.sortField=(null===(_=t.sortInfos)||void 0===_?void 0:_.name)||"toString"})),(0,p.w)(l=>t.sortInfos?(new we).sort$(l,t.sortInfos):(0,v.of)(l)))}getTextValue(e){return e?e.displayName?"string"==typeof e.displayName?e.displayName:e.displayName():"function"==typeof e.toString?e.toString():"":""}}return m.\u0275fac=function(e){return new(e||m)},m.\u0275prov=O.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),ye=(()=>{class m{constructor(){this._waiter$=new B.X(!1),this._cache={},this._childrenField=m.defaultChildrenField,this.compareItems=(e,t)=>{const r=o=>null!=o;if(!r(e)||!r(t))return!1;if(e.equals)return e.equals(t);if(t.equals)return t.equals(e);{const o=e.model,l=e.model;return(null==o?void 0:o.equals)?o.equals(t.model):(null==l?void 0:l.equals)?l.equals(e.model):this.getValue(e,this._valueField)===this.getValue(t,this._valueField)}}}static getItemValue(e,t){var r;const o=l=>null!=l;if(t){const l=t.split(".");let c=void 0!==(null===(r=e.model)||void 0===r?void 0:r[l[0]])?e.model:e;if(l.forEach(_=>{c=null==c?void 0:c[_]}),o(c))return"function"==typeof c?c():c}return o(e.value)?e.value:o(e.model)&&e.model||e}static getItemText(e,t){var r;if(e){if(t){const o=t.split(".");let l=void 0!==(null===(r=e.model)||void 0===r?void 0:r[o[0]])?e.model:e;return o.forEach(c=>{l=null==l?void 0:l[c]}),void 0!==l?"function"==typeof l?l():l:""}if(e.displayName)return"string"==typeof e.displayName?e.displayName:e.displayName();if("function"==typeof e.toString)return e.toString()}return""}get lastQuery(){return this._lastQuery}setLoadingItems(e){this.loadingItems$=e}setSelectingItem(e){this.selectingItem$=e}setUnselectingItem(e){this.unselectingItem$=e}setExpandingItem(e){this.expandingItem$=e}setCollapsingItem(e){this.collapsingItem$=e}get waiter$(){return this._waiter$}set childrenField(e){this._childrenField=e||m.defaultChildrenField,this.invalidateCache()}get childrenField(){return this._childrenField}set hideSelected(e){this._hideSelected=e}get hideSelected(){return this._hideSelected}set valueField(e){this._valueField=e}get valueField(){return this._valueField}get hasCache(){return this._cache&&!!this._cache.visibleList}set items(e){this._items=e,this.invalidateCache()}get items(){return this._items}setItems$(e){if(e){if(e instanceof Array)return this.ensureChildrenProperties(e),this.ensureSelectedItems(e),this.items=e,this._waiter$.next(!1),(0,v.of)(e);{this.items=void 0,this._waiter$.next(!0);let t=e;return void 0===t.subscribe&&(t=(0,de.D)(e)),t.pipe((0,$.U)(r=>r?(this.ensureChildrenProperties(r),this.ensureSelectedItems(r),this.items=[...this.items||[],...r],this._waiter$.next(!1),r):(this.items=[],this._waiter$.next(!1),[])))}}return this.items=void 0,(0,v.of)(null)}setModels$(e){return this.setItems$(e)}get groupInfos(){return this._groupInfos}getItems(){return this.items}getItemFromIndex(e){return this._cache.visibleList?this._cache.visibleList[e]:null}getItemIndex(e){return this._cache.visibleList?this._cache.visibleList.findIndex(t=>this.compareItems(e,t)):-1}getSortingService(){return this._sortingService||(this._sortingService=new we),this._sortingService}setSortingService(e){this._sortingService=e}getGroupingService(){return this._groupingService||(this._groupingService=new be),this._groupingService}setGroupingService(e){this._groupingService=e}getTextValue(e,t){return m.getItemText(e,t)}getValue(e,t){return m.getItemValue(e,t)}drop$(){return new k.y(e=>{if(!this._ddList||!this.items)return void e.next(!1);const t=this._ddCurrentIndex,r=this._ddList[t];if(!r)throw new Error("invalid drag infos stored in cache.");const o=this._ddList[t-1];let l,c=this._cache.flatList.findIndex(D=>D===o),_=0;for(;c>=0;){const D=this._cache.flatList[c];if(void 0===D.depth){_=c;break}if(D.depth===r.depth-1){l=D;break}D.depth===r.depth&&++_,--c}const S=(D,re)=>{for(let L=0;L<re.length;L++){const he=re[L];if(he===D)return{index:L,list:re};if(void 0!==he.$items){const Z=S(D,he.$items);if(Z)return Z}}},x=S(r,this.items);x.list.splice(x.index,1);const R=l?l.$items:this.items;_>x.index&&x.list===R&&--_,R.splice(_,0,r),this.invalidateCache(),e.next(!0)})}calcDragTargetIndex$(e,t){return new k.y(r=>{const o=this._ddList||this._cache.visibleList;if(!o)throw new Error("Empty cache on calcDragTargetIndex");const l=void 0!==this._ddCurrentIndex?this._ddCurrentIndex:e;if(l>=o.length)return void r.next(o.length-1);const c=o[l],_=l;if(void 0!==c.depth&&t!==l){if(t<l){let S=0;for(let x=l-1;x>=0;x--)if(o[x].depth<=c.depth){S=x;break}if(t<=S)for(let x=t;x<=S;x++){const R=o[x];if(R.depth===c.depth)return void r.next(x);if(R.depth===c.depth-1)return void r.next(x+1)}}if(t>l){let S=o.length-1;for(let x=l+1;x<o.length;x++)if(o[x].depth<=c.depth){S=x;break}if(t>=S){for(let R=t+1;R<o.length;R++){const D=o[R];if(D.depth===c.depth)return void r.next(R);if(D.depth===c.depth-1)return void r.next(R-1)}if(o[S].depth===c.depth)return void r.next(S)}}}r.next(_)})}toggleAll$(e){return(0,v.of)(this._cache.flatList).pipe((0,$.U)(t=>t.filter(r=>{var o;return r.$items&&(null===(o=r.collapsible)||void 0===o||o)})),(0,T.b)(()=>delete this._cache.visibleList),(0,p.w)(t=>e?this.collapseItems$(t):this.expandItems$(t)))}toggleCollapse$(e,t){var r;const o=this._cache.visibleList;if(!o||!o.length)throw new Error("Empty cache on toggleCollapse");const l=o[e];return!l||null!==(r=l.collapsible)&&void 0!==r&&!r?(0,v.of)([]):(void 0!==t?t:!l.collapsed)?this.collapseItem$(l):this.expandItem$(l)}expandItems$(e){return(0,de.D)(e||[]).pipe((0,p.w)(t=>this.expandItem$(t)),(0,fe.u)((t,r)=>[...t,r],[]))}collapseItems$(e){return(0,de.D)(e||[]).pipe((0,p.w)(t=>this.collapseItem$(t)),(0,fe.u)((t,r)=>[...t,r],[]))}expandItem$(e){return(0,v.of)(e).pipe((0,ne.h)(t=>!!t),(0,p.w)(t=>this.expandingItem$?this.expandingItem$(t):(0,v.of)(t)),(0,ne.h)(t=>!!t),(0,T.b)(t=>{t.collapsed=!1,delete this._cache.visibleList}))}collapseItem$(e){return(0,v.of)(e).pipe((0,ne.h)(t=>!!t),(0,p.w)(t=>this.collapsingItem$?this.collapsingItem$(t):(0,v.of)(t)),(0,ne.h)(t=>!!t),(0,T.b)(t=>{t.collapsed=!0,delete this._cache.visibleList}))}getSelectedItems(){return this.selectedList||[]}setSelectedItems(e){this.selectedList&&this.selectedList.forEach(t=>{t.selected=!1}),this.selectedList=e,this.hideSelected&&delete this._cache.visibleList,this.ensureSelectedItems(this.items)}unselectAll$(){this.hideSelected&&delete this._cache.visibleList;const e=this.selectedList;return this.selectedList=[],this.unSelectItems$(e)}selectRange$(e,t){void 0===t&&(t=e);const r=this._cache.visibleList;if(!r||!r.length)throw new Error("Empty cache on selection");return this.unselectAll$().pipe((0,$.U)(()=>r.slice(Math.min(e,t),1+Math.max(e,t))),(0,$.U)(o=>o.filter(l=>{var c;return null===(c=l.selectable)||void 0===c||c})),(0,T.b)(()=>{this.hideSelected&&delete this._cache.visibleList}),(0,p.w)(o=>this.selectItems$(o).pipe((0,$.U)(l=>l.length))))}toggleSelect$(e,t){return function Y(m,s,e){return(0,ie.P)(()=>m()?s:e)}(()=>t,this.selectItems$(e=e||[]),this.unSelectItems$(e)).pipe((0,$.U)(()=>(this.hideSelected&&delete this._cache.visibleList,this.selectedList)))}selectItems$(e){return(0,de.D)(e||[]).pipe((0,p.w)(t=>this.selectItem$(t)),(0,fe.u)((t,r)=>[...t,r],[]))}unSelectItems$(e){return(0,de.D)(e||[]).pipe((0,ne.h)(t=>t.selected),(0,p.w)(t=>this.unSelectItem$(t)),(0,fe.u)((t,r)=>[...t,r],[]))}selectItem$(e){return(0,v.of)(e).pipe((0,ne.h)(t=>!!t),(0,p.w)(t=>this.selectingItem$?this.selectingItem$(t):(0,v.of)(t)),(0,ne.h)(t=>!!t),(0,T.b)(t=>{this.selectedList||(this.selectedList=[]),t.selected=!0,this.selectedList.push(t)}))}unSelectItem$(e){return(0,v.of)(e).pipe((0,ne.h)(t=>!!t),(0,p.w)(t=>this.unselectingItem$?this.unselectingItem$(t):(0,v.of)(t)),(0,ne.h)(t=>!!t),(0,T.b)(t=>{var r;if(t.selected=!1,null===(r=this.selectedList)||void 0===r?void 0:r.length){const o=this.selectedList.findIndex(l=>this.compareItems(l,t));o>=0&&this.selectedList.splice(o,1)}}))}findNextMatch$(e,t){let r={index:-1};const o=this._cache.visibleList;if(!o||!o.length)throw new Error("Empty cache on findNextMatch");if(o.length){(t<0||t>=o.length)&&(t=-1);let l=t+1;for(;l!==t;){const c=o[l];if(e(c,l)){r={index:l,item:c};break}if(l++,l>=o.length){if(-1===t)break;l=0}}}return(0,v.of)(r)}sort$(e){if(!this.items)throw new Error("No Items");const t=this.getSortingService().sortTree$(this._cache.groupedList,e,"$items").pipe((0,T.b)(r=>{this._cache.groupedList=r,this.invalidateViewCache()}));return this._cache.groupedList&&0!==this._cache.groupedList.length?t:this.getGroupedList$(this.items).pipe((0,T.b)(r=>this._cache.groupedList=r),(0,p.w)(()=>t))}group$(e){return this._groupInfos=e,this.invalidateCache(),this.ensureChildrenProperties(this.items),(0,v.of)(e)}ungroup$(e){const t=this._groupInfos?this._groupInfos.findIndex(r=>r.groupByField===e.groupByField):-1;return t>=0&&this._groupInfos.splice(t,1),this.invalidateCache(),this.ensureChildrenProperties(this.items),(0,v.of)(e)}getParentListInfos$(e,t){return this.ensureFlatListCache$(!0,t).pipe((0,p.w)(o=>{let c,l=o.findIndex(_=>_===e);if(l<0)throw new Error("Item not found.");if(e.depth){let _=0;for(;--l>=0;){const S=o[l];S.depth<e.depth&&(c={index:_,parent:S}),_++}}else c={index:this.items.findIndex(S=>S===e)};return(0,v.of)(c)}))}invalidateCache(){this._cache={},this.ensureChildrenProperties(this.items)}invalidateRowsHeightCache(){this._items&&this._items.forEach(e=>e.size=void 0)}getViewList$(e,t,r,o,l,c){var _;const S={},x=(null==t?void 0:t.toString())!==(null===(_=this._lastQuery)||void 0===_?void 0:_.toString());let D;if(r=r||x||!this.items||!this.items.length,this._lastQuery=t,t)if("string"==typeof t)try{const L=(L=>(["\\","/","|","&",";","$","%","@",'"',"<",">","(",")","+"].forEach(Z=>L=L.replace(Z,`\\${Z}`)),L))(t=(new U.R5).remove(t));D=new RegExp(L,"i")}catch(L){console.log("Invalid search parameters")}else D=t,void 0===D.test&&(D=void 0);const re=()=>{let L;if(void 0!==o&&void 0!==l&&o!==l){if(!this._ddList){this._ddList=[...this._cache.visibleList];const a=this._ddList[o].depth;let w=o;if(void 0!==a)for(let P=o+1;P<this._ddList.length&&!(this._ddList[P].depth<=a);P++)w=P;this._ddChildCount=w-o+1,this._ddCurrentIndex=o}const he=this._ddList.splice(this._ddCurrentIndex,this._ddChildCount);l>this._ddCurrentIndex&&(l-=this._ddChildCount,++l),this._ddCurrentIndex=l,he.forEach(Z=>this._ddList.splice(l++,0,Z)),L=this._ddList}else delete this._ddList,delete this._ddCurrentIndex,delete this._ddChildCount,L=this._cache.visibleList||[];return S.depthMax=this._cache.depthMax,S.visibleList=L,S};return r?(this.waiter$.next(!0),(x||!this.items||!this.items.length)&&(this.internalQuery=D),this.getItemList$(t,this.selectedList).pipe((0,T.b)(L=>{(!this.items||!this.items.length)&&this.ensureSelectedItems(L),L!==this.items&&(this.items=L,this.internalQuery=void 0,this.ensureChildrenProperties(L)),delete this._cache.visibleList,this.waiter$.next(void 0===this.items)}),(0,p.w)(()=>this.ensureVisibleListCache$(e,this.internalQuery,x,c)),(0,$.U)(re))):this.ensureVisibleListCache$(e,this.internalQuery,x,c).pipe((0,$.U)(re))}ensureSelection(){return this.ensureSelectedItems(this.items)}getItemList$(e,t){return this.loadingItems$?this.loadingItems$(e,t):(0,v.of)(this.items)}itemMatch(e,t,r){if(e.$items)return!0;const l=e[t],c="function"==typeof l?l():l||this.getTextValue(e,t);return c&&r.test((new U.R5).remove(c))}getGroupedList$(e){return e?this.getGroupingService().group$(this.items,this.groupInfos,"$items"):(0,v.of)([])}getVisibleList$(e,t,r,o,l){if(!e)return(0,v.of)([]);let c=[];const _=[];let S=!1;if(r){const x=(R,D,re)=>{let L;return R&&R.forEach(he=>{const Z=he;if(Z.$items){if(this.isVisible(Z)&&this.itemMatch(Z,t,r)){S=!1;const a=x(Z.$items,D+1,re);a&&(Z.collapsed&&o&&(Z.collapsed=!1),L=L?Z.collapsed&&[...L,Z]||[...L,Z,...a]:Z.collapsed&&[Z]||[Z,...a],Z.selected&&_.push(Z))}}else this.itemMatch(he,t,r)&&(Z.depth=D,L||(L=[]),!re&&this.isVisible(he)&&!(he.selected&&this.hideSelected)&&(Z.odd=S,S=!S,L.push(Z))),Z.selected&&_.push(Z)}),L};c=x(e||[],0,!1)||[]}else{const x=(R,D,re)=>{R&&R.forEach(L=>{!re&&this.isVisible(L)&&!(L.selected&&this.hideSelected)&&(L.odd=S,S=!S,c.push(L)),L.selected&&_.push(L),L.$items&&(S=!1,x(L.$items,D+1,re||L.collapsed||!this.isVisible(L)))})};x(e,0,!1)}return(0,v.of)(c).pipe((0,T.b)(()=>{l||(this.selectedList=_)}))}getFlatList$(e,t,r){if(!e)return(0,v.of)([]);const o=[],l=[];let c=0,_=!1,S=!1;const x=(R,D,re)=>(0,de.D)(R||[]).pipe((0,T.b)(L=>{D>c&&(c=D),L.depth=D,!re&&this.isVisible(L)&&!(L.selected&&this.hideSelected)&&(L.odd=S,S=!S,o.push(L)),L.selected&&l.push(L)}),(0,p.w)(L=>L.$items?(_=!0,S=!1,(0,J.z)((0,v.of)(L),x(L.$items,D+1,re||L.collapsed))):(0,v.of)(L)));return x(e,0,!1).pipe((0,T.b)(()=>{r||(this.selectedList=l),t||(this._cache.visibleList=o),this._cache.depthMax=_?c:0}),(0,fe.u)((R,D)=>(R.push(D),R),[]))}invalidateViewCache(){delete this._cache.flatList,delete this._cache.visibleList,delete this._cache.depthMax,this._cache.rowsCount=0}ensureSelectedItems(e){if(this.selectedList&&this.selectedList.length>0){if(this.selectedList.forEach(o=>o.selected=!0),!e)return this.selectedList;const t=[],r=o=>{o.forEach(l=>{const c=this.selectedList.find(_=>this.compareItems(_,l));c&&(c.selected=!1,t.push(l)),l.$items&&r(l.$items)})};r(e),this.selectedList.filter(o=>o.selected).forEach(o=>t.push(o)),this.selectedList=t,this.selectedList.forEach(o=>o.selected=!0)}else{if(this.selectedList=[],!e)return this.selectedList;const t=r=>{r.forEach(o=>{o.selected&&this.selectedList.push(o),o.$items&&t(o.$items)})};t(e)}return this.selectedList}ensureVisibleListCache$(e,t,r,o){var l;return(null===(l=this._cache.visibleList)||void 0===l?void 0:l.length)?(0,v.of)(this._cache.visibleList):this.ensureFlatListCache$(!!t,o).pipe((0,p.w)(()=>this.getVisibleList$(this._cache.groupedList,e,t,r,o)),(0,T.b)(c=>{this._cache.visibleList=c,this._cache.rowsCount=c.length}))}ensureFlatListCache$(e,t){var r;return(null===(r=this._cache.flatList)||void 0===r?void 0:r.length)?(0,v.of)(this._cache.flatList):this.ensureGroupedListCache$().pipe((0,p.w)(()=>this.getFlatList$(this._cache.groupedList,e,t)),(0,T.b)(o=>{var l;(null===(l=this._cache.flatList)||void 0===l?void 0:l.length)&&this._cache.flatList!==o&&(delete this._cache.visibleList,this._cache.rowsCount=0,this._cache.depthMax=0,o&&o.forEach(c=>{c.depth&&c.depth>this._cache.depthMax&&(this._cache.depthMax=c.depth)})),this._cache.flatList=o}))}ensureGroupedListCache$(){var e;return(null===(e=this._cache.groupedList)||void 0===e?void 0:e.length)?(0,v.of)(this._cache.groupedList):this.groupInfos&&0!==this.groupInfos.length?this.items?this.getGroupedList$(this.items).pipe((0,T.b)(t=>{var r;(null===(r=this._cache.groupedList)||void 0===r?void 0:r.length)&&this._cache.groupedList!==t&&this.invalidateViewCache(),this._cache.groupedList=t})):(0,v.of)([]):(0,v.of)(this.items).pipe((0,T.b)(t=>this._cache.groupedList=t))}ensureChildrenProperties(e){!e||e.forEach(t=>{const r=t[this.childrenField];r&&(t.$items=r,this.ensureChildrenProperties(t.$items))})}isVisible(e){var t;return null===(t=e.visible)||void 0===t||t}}return m.defaultChildrenField="items",m.defaultTextField="displayName",m.defaultValueField="value",m})();class Re extends U.yl{constructor(s,e){super(),this.changeDetectorRef=s,this.viewPort=e,this._waiter=!0,this._itemList=[],this._multiSelect=!1,this._currentItemIndex=-1,this._minSearchLength=0,this._vpBeforeHeight=0,this._vpAfterHeight=0,this._vpStartRow=0,this._vpEndRow=0,this._pageSize=0,this._depthMax=0,this.rowsCount=0,this.allCollapsed=!1,this._viewPortRowHeight=Le.itemDefaultSize,this._listElementId=`listcontainer_${(1e9*Math.random()).toString().substr(10)}`,e.viewPort$.pipe((0,p.w)(t=>{var r;let o=(0,v.of)(null);return delete this._hintLabel,"disabled"===e.mode?(this._itemList=t.items,this._vpStartRow=0,this._vpEndRow=0,this._vpBeforeHeight=0,this._vpAfterHeight=0):(this._itemList=t.visibleItems,this._vpStartRow=t.startIndex,this._vpEndRow=t.endIndex,this._vpBeforeHeight=t.beforeSize,this._vpAfterHeight=t.afterSize),void 0!==t.scrollPos&&this.listElement&&(this.listElement.getElementsByClassName("listitem").length!==t.visibleItems.length?o=(0,H.H)(1).pipe((0,ne.h)(()=>!!this.listElement),(0,T.b)(()=>this.listElement.scrollTop=t.scrollPos)):this.listElement.scrollTop=t.scrollPos),this.changeDetectorRef.markForCheck(),null===(r=this._viewPortChanged)||void 0===r||r.next(t),o}),(0,ve.R)(this.destroyed$)).subscribe()}get isMultiSelect(){return this._multiSelect}get itemList(){return this._itemList}get treeItemList(){return this._itemList}get ddStartIndex(){return this._ddStartIndex}get vpBeforeHeight(){return this._vpBeforeHeight}get vpAfterHeight(){return this._vpAfterHeight}get vpStartRow(){return this._vpStartRow}get vpEndRow(){return this._vpEndRow}get sortInfos(){return this._sortInfos}get groupInfos(){return this._itemListService.groupInfos}setHideSelected(s){this._hideSelected=s,this._itemListService&&(this._itemListService.hideSelected=s)}setChildrenField(s){this._childrenField=s,this._itemListService&&(this._itemListService.childrenField=s)}getItemIndexFromHTMLElement(s){for(;(null==s?void 0:s.parentElement)&&s.hasAttribute&&!s.hasAttribute("flat")&&s.parentElement.id!==this.listElementId;)s=s.parentElement;if(s&&s.hasAttribute("flat"))return+s.getAttribute("flat")}getItemFromHTMLElement(s){const e=this.getItemIndexFromHTMLElement(s);if(void 0!==e)return this._itemList[e-this.vpStartRow]}getItemListService(){return this._itemListService||this.setItemListService(new ye),this._itemListService}getSelectedItems(){return this.getItemListService().getSelectedItems()}setSelectedItems(s){this.getItemListService().setSelectedItems(s),this.changeDetectorRef.markForCheck()}setLoadingItems(s){this.getItemListService().setLoadingItems(s)}setSelectingItem(s){this.getItemListService().setSelectingItem(s)}setUnselectingItem(s){this.getItemListService().setUnselectingItem(s)}setExpandingItem(s){this.getItemListService().setExpandingItem(s)}setCollapsingItem(s){this.getItemListService().setCollapsingItem(s)}getTextValue(s){return this.getItemListService().getTextValue(s,this._textField)}setViewportMode(s){this.viewPort.mode$.next(s)}sort(s){this.sort$(s).pipe((0,q.q)(1),(0,ve.R)(this.destroyed$)).subscribe()}sort$(s){const e=s||this._textField;return this._sortInfos?e===this._sortInfos.name?this._sortInfos.order="ascending"===this._sortInfos.order?"descending":"ascending":(this._sortInfos.name=e,this._sortInfos.order="ascending"):this._sortInfos={name:e,order:"ascending"},this.getItemListService().sort$(this._sortInfos).pipe((0,q.q)(1),(0,p.w)(t=>this.calcViewList$().pipe((0,q.q)(1),(0,$.U)(()=>t))))}group$(s){return this.getItemListService().group$(s).pipe((0,p.w)(()=>this.calcViewList$().pipe((0,q.q)(1))))}ungroup$(s){return this.getItemListService().ungroup$(s).pipe((0,p.w)(()=>this.calcViewList$().pipe((0,q.q)(1))))}toggleAll$(s){return this.allCollapsed=void 0!==s?s:!this.allCollapsed,"disabled"===this.viewPort.mode?(0,de.D)(this._itemList).pipe((0,ne.h)(e=>{var t;return e.$items&&0===e.depth&&(null===(t=e.collapsible)||void 0===t||t)}),(0,p.w)((e,t)=>this.toggleCollapse$(t+this.vpStartRow,this.allCollapsed)),(0,fe.u)((e,t)=>(e.push(t),e),[])):this.getItemListService().toggleAll$(this.allCollapsed)}toggleCollapse$(s,e){return this.getItemListService().toggleCollapse$(s,e).pipe((0,p.w)(t=>this.calcViewList$().pipe((0,q.q)(1),(0,$.U)(()=>t))))}unselectAll$(){return this.getItemListService().unselectAll$()}refresh(){this.getItemListService().invalidateCache(),this.calcViewList$().pipe((0,q.q)(1),(0,ve.R)(this.destroyed$)).subscribe()}refreshViewPort(s,e){const t={};s&&(t.items=s instanceof Array?s:[s]),e&&(t.clearMeasuredSize=e),this.viewPort.refresh(t),this.changeDetectorRef.markForCheck()}clearViewPort(){this.viewPort.clear()}clearRowsHeight(){this.getItemListService().invalidateRowsHeightCache()}getParentListInfos$(s){return this.getItemListService().getParentListInfos$(s,this._multiSelect)}get listElementId(){return this._listElementId}get listElement(){return this._listElement||document.getElementById(this.listElementId)}set listElement(s){this._listElement=s}getViewPortRowHeight(){return this._viewPortRowHeight||Le.itemDefaultSize}getCurrentItemIndex(){return this._currentItemIndex}getCurrentItem(){return!this._currentItem&&this._currentItemIndex>=0&&(this._currentItem=this.getItemListService().getItemFromIndex(this._currentItemIndex)),this._currentItem}getItemHeight(s){return"disabled"===this.viewPort.mode?null:"fixed"===this.viewPort.mode?this.getViewPortRowHeight():"auto"===this.viewPort.mode?s.size||null:s.size&&s.size>Le.itemDefaultSize?s.size:this.getViewPortRowHeight()}getSelectedModels(){return this.getItemListService().getSelectedItems().map(s=>void 0!==s.model?s.model:s)}setSelectedModels(s){this.setSelectedItems(s&&this.mapToIItemBase(s,!0))}findNextMatch$(s,e){return this.ensureListCaches$().pipe((0,p.w)(()=>this.getItemListService().findNextMatch$(s,e)))}setViewPortRowHeight(s){this._viewPortRowHeight=(0,j.su)(s),s&&this.viewPort.itemsSize$.next(this._viewPortRowHeight)}setItemListService(s){this.waiter$sub&&(this.waiter$sub.unsubscribe(),this.waiter$sub=void 0),this._itemListService=s,this._itemListService&&(this._itemListService.hideSelected=this._hideSelected,this._itemListService.childrenField=this._childrenField,this._itemListService.valueField=this._valueField,this.waiter$sub=this._itemListService.waiter$.pipe((0,ve.R)(this.destroyed$)).subscribe(e=>{this._waiter=e,this.changeDetectorRef.markForCheck()}))}setSortingService(s){!s&&!this._itemListService||this._itemListService.setSortingService(s)}setGroupingService(s){!s&&!this._itemListService||this._itemListService.setGroupingService(s)}setHintLabel(s){this._hintLabel=s}setNodataLabel(s){this._nodataLabel=s}setCurrentItemIndex(s){this._currentItemIndex=s,this._currentItem=null}setCurrentItem(s){this._currentItemIndex=s?this.getItemListService().getItemIndex(s):-1,this._currentItem=s}getItemIndex(s){return s&&this.getItemListService()?this.getItemListService().getItemIndex(s):-1}setMultiSelect(s){this._multiSelect=s}setItems$(s){return s instanceof Array||this.clearViewPort(),this.getItemListService().setItems$(s)}setModels$(s){let e;e=s instanceof Array?(0,v.of)(s):s;const t=null==e?void 0:e.pipe((0,$.U)(r=>this.mapToIItemBase(r)));return this.setItems$(t)}getItems(){return this.getItemListService().getItems()}drop$(){return this.setCurrentItemIndex(-1),this.getItemListService().drop$()}getViewList$(s,e){if("string"==typeof s&&(s||"").length<this._minSearchLength){const t={depthMax:0,visibleList:[]};return this.getItems()?(0,v.of)(t):this.setItems$([]).pipe((0,$.U)(()=>t))}return this.getItemListService().getViewList$(this._searchField||this._textField,s,e,this._ddStartIndex,this._ddTargetIndex,this._multiSelect)}selectRange$(s,e){const t=this.getItemListService();return this.ensureListCaches$().pipe((0,p.w)(()=>t.selectRange$(s,e)))}toggleSelect$(s,e){return this.getItemListService().toggleSelect$(s,e)}isCollapsible(s){var e;return(null==s?void 0:s.$items)&&(null===(e=s.collapsible)||void 0===e||e)}isSelectable(s){var e;return s&&(null===(e=s.selectable)||void 0===e||e)}setTextField(s){this._textField=s}getTextField(){return this._textField||ye.defaultTextField}setValueField(s){this._valueField=s,this._itemListService&&(this._itemListService.valueField=s)}getValueField(){return this._valueField||ye.defaultValueField}setSearchField(s){this._searchField=s}setMaxHeight(s){this._maxHeight="auto"===s?null:+s||null,this.viewPort.maxSize$.next(s)}getMaxHeight(){return this._maxHeight}calcDragTargetIndex$(s,e){return this.ensureListCaches$().pipe((0,p.w)(()=>this.getItemListService().calcDragTargetIndex$(s,e)))}getItemTreeInfo(s,e){const t=s.findIndex(_=>_===e);if(t<0)return null;const o=e.depth;let l=t;const c=[];if(void 0!==o)for(let _=t+1;_<s.length;_++){const S=s[_];if(S.depth<=o)break;c.push(S),l=_}return{children:c,item:e,lastIndex:l,startIndex:t}}calcViewList$(s){return this.getViewList$(s).pipe((0,T.b)(e=>{void 0!==e.depthMax&&(this._depthMax=e.depthMax),this.rowsCount=e.visibleList.length,this.viewPort.items$.next(e.visibleList)}))}ensureListCaches$(){return this._itemListService.hasCache?(0,v.of)(null):this.getViewList$()}ensureItemVisible(s){this.viewPort.ensureItem$.next(s)}mapToIItemBase(s,e){return(s||[]).map(r=>{const o={};o.model=r;const l=this.getTextField(),c=this.getValueField();"string"==typeof r?(o[l]=r,o[c]=r,this._searchField&&(o[this._searchField]=r)):(o[l]=this.getTextValue(r),o[c]=r[c],this._searchField&&(o[this._searchField]=r[this._searchField]));const _=this.getItemListService().childrenField;return r[_]?o[_]=this.mapToIItemBase(r[_],e):o.selected=e||void 0,o})}getVirtualSelectedEntities(s){const e=t=>{"string"==typeof t&&(t=t.trim());const r={},o=this.getTextField(),l=this.getValueField();return r[o]=t.toString(),r[l]=t,r};if(s){const t=typeof s;if("string"===t||"number"===t)s=this._multiSelect?s.split(",").map(e):e(s);else if(s instanceof Array&&s.length){const r=typeof s[0];("string"===r||"number"===r)&&(s=this._multiSelect?s.map(e):e(s[0]))}else s instanceof Array&&!this._multiSelect&&(s=null)}return s}}let Oe=(()=>{class m{}return m.\u0275fac=function(e){return new(e||m)},m.\u0275cmp=O.Xpm({type:m,selectors:[["deja-sort-indicator"]],inputs:{sortInfos:["sort-infos","sortInfos"]},decls:3,vars:1,template:function(e,t){1&e&&(O.TgZ(0,"span")(1,"mat-icon"),O._uU(2,"arrow_upward"),O.qZA()()),2&e&&O.uIk("sortorder",t.sortInfos?t.sortInfos.order:null)},directives:[ue.Hw],styles:['[_nghost-%COMP%]{display:block;position:relative;width:1rem}[_nghost-%COMP%]   [sortorder][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);transition:all .5s linear;padding:.3rem;zoom:72%}[_nghost-%COMP%]   [sortorder="1"][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}']}),m})(),Ae=(()=>{class m{}return m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=O.oAB({type:m}),m.\u0275inj=O.cJS({imports:[[ue.Ps]]}),m})(),Be=(()=>{class m{}return m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=O.oAB({type:m}),m.\u0275inj=O.cJS({imports:[[g.ez]]}),m})()},139:(_e,te,d)=>{d.d(te,{Z:()=>U});const U=function g(ie){return function(Y,B,z){for(var v=-1,p=Object(Y),H=z(Y),T=H.length;T--;){var se=H[ie?T:++v];if(!1===B(p[se],se,p))break}return Y}}()},1531:(_e,te,d)=>{d.d(te,{Z:()=>de});var g=d(9940);const j=function O(k,J,q){switch(q.length){case 0:return k.call(J);case 1:return k.call(J,q[0]);case 2:return k.call(J,q[0],q[1]);case 3:return k.call(J,q[0],q[1],q[2])}return k.apply(J,q)};var U=Math.max;const z=function B(k){return function(){return k}};var v=d(2370),$=Date.now;const Me=function le(k){var J=0,q=0;return function(){var Ie=$(),ue=16-(Ie-q);if(q=Ie,ue>0){if(++J>=800)return arguments[0]}else J=0;return k.apply(void 0,arguments)}}(v.Z?function(k,J){return(0,v.Z)(k,"toString",{configurable:!0,enumerable:!1,value:z(J),writable:!0})}:g.Z),de=function fe(k,J){return Me(function ie(k,J,q){return J=U(void 0===J?k.length-1:J,0),function(){for(var Ie=arguments,ue=-1,Ee=U(Ie.length-J,0),Le=Array(Ee);++ue<Ee;)Le[ue]=Ie[J+ue];ue=-1;for(var we=Array(J+1);++ue<J;)we[ue]=Ie[ue];return we[J]=q(Le),j(k,this,we)}}(k,J,g.Z),k+"")}},4810:(_e,te,d)=>{d.d(te,{Z:()=>Y});var g=d(3093),O=d(8706),j=d(6667),U=d(1999);const Y=function ie(B,z,v){if(!(0,U.Z)(v))return!1;var p=typeof z;return!!("number"==p?(0,O.Z)(v)&&(0,j.Z)(z,v.length):"string"==p&&z in v)&&(0,g.Z)(v[z],B)}},9940:(_e,te,d)=>{d.d(te,{Z:()=>O});const O=function g(j){return j}},1677:(_e,te,d)=>{d.d(te,{Z:()=>$i});var g=d(6623),O=d(8492),j=d(4825),U=d(4177),ie=O.Z?O.Z.isConcatSpreadable:void 0;const B=function Y(i){return(0,U.Z)(i)||(0,j.Z)(i)||!!(ie&&i&&i[ie])},v=function z(i,n,h,u,I){var f=-1,y=i.length;for(h||(h=B),I||(I=[]);++f<y;){var F=i[f];n>0&&h(F)?n>1?z(F,n-1,h,u,I):(0,g.Z)(I,F):u||(I[I.length]=F)}return I},H=function p(i,n){for(var h=-1,u=null==i?0:i.length,I=Array(u);++h<u;)I[h]=n(i[h],h,i);return I};var T=d(7079),se=d(214);const ne=function le(i){return"symbol"==typeof i||(0,se.Z)(i)&&"[object Symbol]"==(0,T.Z)(i)};var ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Me=/^\w*$/;const de=function fe(i,n){if((0,U.Z)(i))return!1;var h=typeof i;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=i&&!ne(i))||Me.test(i)||!ve.test(i)||null!=n&&i in Object(n)};var k=d(8915);function q(i,n){if("function"!=typeof i||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var h=function(){var u=arguments,I=n?n.apply(this,u):u[0],f=h.cache;if(f.has(I))return f.get(I);var y=i.apply(this,u);return h.cache=f.set(I,y)||f,y};return h.cache=new(q.Cache||k.Z),h}q.Cache=k.Z;const Ie=q;var we=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,be=/\\(\\)?/g;const Re=function Ee(i){var n=Ie(i,function(u){return 500===h.size&&h.clear(),u}),h=n.cache;return n}(function(i){var n=[];return 46===i.charCodeAt(0)&&n.push(""),i.replace(we,function(h,u,I,f){n.push(I?f.replace(be,"$1"):u||h)}),n});var Ze=O.Z?O.Z.prototype:void 0,Oe=Ze?Ze.toString:void 0;const Be=function Ae(i){if("string"==typeof i)return i;if((0,U.Z)(i))return H(i,Ae)+"";if(ne(i))return Oe?Oe.call(i):"";var n=i+"";return"0"==n&&1/i==-1/0?"-0":n},s=function m(i){return null==i?"":Be(i)},t=function e(i,n){return(0,U.Z)(i)?i:de(i,n)?[i]:Re(s(i))},l=function o(i){if("string"==typeof i||ne(i))return i;var n=i+"";return"0"==n&&1/i==-1/0?"-0":n},_=function c(i,n){for(var h=0,u=(n=t(n,i)).length;null!=i&&h<u;)i=i[l(n[h++])];return h&&h==u?i:void 0};var S=d(5343);function he(i){var n=-1,h=null==i?0:i.length;for(this.__data__=new k.Z;++n<h;)this.add(i[n])}he.prototype.add=he.prototype.push=function R(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},he.prototype.has=function re(i){return this.__data__.has(i)};const Z=he,w=function a(i,n){for(var h=-1,u=null==i?0:i.length;++h<u;)if(n(i[h],h,i))return!0;return!1},b=function P(i,n){return i.has(n)},C=function N(i,n,h,u,I,f){var y=1&h,F=i.length,W=n.length;if(F!=W&&!(y&&W>F))return!1;var Q=f.get(i),ge=f.get(n);if(Q&&ge)return Q==n&&ge==i;var ce=-1,oe=!0,Se=2&h?new Z:void 0;for(f.set(i,n),f.set(n,i);++ce<F;){var pe=i[ce],me=n[ce];if(u)var xe=y?u(me,pe,ce,n,i,f):u(pe,me,ce,i,n,f);if(void 0!==xe){if(xe)continue;oe=!1;break}if(Se){if(!w(n,function($e,Ce){if(!b(Se,Ce)&&(pe===$e||I(pe,$e,h,u,f)))return Se.push(Ce)})){oe=!1;break}}else if(pe!==me&&!I(pe,me,h,u,f)){oe=!1;break}}return f.delete(i),f.delete(n),oe};var A=d(1630),M=d(3093);const K=function X(i){var n=-1,h=Array(i.size);return i.forEach(function(u,I){h[++n]=[I,u]}),h},ee=function V(i){var n=-1,h=Array(i.size);return i.forEach(function(u){h[++n]=u}),h};var Ne=O.Z?O.Z.prototype:void 0,Ue=Ne?Ne.valueOf:void 0;var Ve=d(8501),_t=Object.prototype.hasOwnProperty;var He=d(4116),Ke=d(5202),St=d(7583),We="[object Arguments]",Ge="[object Array]",Te="[object Object]",Xe=Object.prototype.hasOwnProperty;const Ct=function $t(i,n,h,u,I,f){var y=(0,U.Z)(i),F=(0,U.Z)(n),W=y?Ge:(0,He.Z)(i),Q=F?Ge:(0,He.Z)(n),ge=(W=W==We?Te:W)==Te,ce=(Q=Q==We?Te:Q)==Te,oe=W==Q;if(oe&&(0,Ke.Z)(i)){if(!(0,Ke.Z)(n))return!1;y=!0,ge=!1}if(oe&&!ge)return f||(f=new S.Z),y||(0,St.Z)(i)?C(i,n,h,u,I,f):function gt(i,n,h,u,I,f,y){switch(h){case"[object DataView]":if(i.byteLength!=n.byteLength||i.byteOffset!=n.byteOffset)return!1;i=i.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=n.byteLength||!f(new A.Z(i),new A.Z(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,M.Z)(+i,+n);case"[object Error]":return i.name==n.name&&i.message==n.message;case"[object RegExp]":case"[object String]":return i==n+"";case"[object Map]":var F=K;case"[object Set]":if(F||(F=ee),i.size!=n.size&&!(1&u))return!1;var Q=y.get(i);if(Q)return Q==n;u|=2,y.set(i,n);var ge=C(F(i),F(n),u,I,f,y);return y.delete(i),ge;case"[object Symbol]":if(Ue)return Ue.call(i)==Ue.call(n)}return!1}(i,n,W,h,u,I,f);if(!(1&h)){var Se=ge&&Xe.call(i,"__wrapped__"),pe=ce&&Xe.call(n,"__wrapped__");if(Se||pe){var me=Se?i.value():i,xe=pe?n.value():n;return f||(f=new S.Z),I(me,xe,h,u,f)}}return!!oe&&(f||(f=new S.Z),function It(i,n,h,u,I,f){var y=1&h,F=(0,Ve.Z)(i),W=F.length;if(W!=(0,Ve.Z)(n).length&&!y)return!1;for(var ce=W;ce--;){var oe=F[ce];if(!(y?oe in n:_t.call(n,oe)))return!1}var Se=f.get(i),pe=f.get(n);if(Se&&pe)return Se==n&&pe==i;var me=!0;f.set(i,n),f.set(n,i);for(var xe=y;++ce<W;){var $e=i[oe=F[ce]],Ce=n[oe];if(u)var it=y?u(Ce,$e,oe,n,i,f):u($e,Ce,oe,i,n,f);if(!(void 0===it?$e===Ce||I($e,Ce,h,u,f):it)){me=!1;break}xe||(xe="constructor"==oe)}if(me&&!xe){var De=i.constructor,Fe=n.constructor;De!=Fe&&"constructor"in i&&"constructor"in n&&!("function"==typeof De&&De instanceof De&&"function"==typeof Fe&&Fe instanceof Fe)&&(me=!1)}return f.delete(i),f.delete(n),me}(i,n,h,u,I,f))},Ye=function je(i,n,h,u,I){return i===n||(null==i||null==n||!(0,se.Z)(i)&&!(0,se.Z)(n)?i!=i&&n!=n:Ct(i,n,h,u,je,I))};var bt=d(1999);const Qe=function Ot(i){return i==i&&!(0,bt.Z)(i)};var Je=d(4157);const qe=function Dt(i,n){return function(h){return null!=h&&h[i]===n&&(void 0!==n||i in Object(h))}},Rt=function Ft(i){var n=function At(i){for(var n=(0,Je.Z)(i),h=n.length;h--;){var u=n[h],I=i[u];n[h]=[u,I,Qe(I)]}return n}(i);return 1==n.length&&n[0][2]?qe(n[0][0],n[0][1]):function(h){return h===i||function Mt(i,n,h,u){var I=h.length,f=I,y=!u;if(null==i)return!f;for(i=Object(i);I--;){var F=h[I];if(y&&F[2]?F[1]!==i[F[0]]:!(F[0]in i))return!1}for(;++I<f;){var W=(F=h[I])[0],Q=i[W],ge=F[1];if(y&&F[2]){if(void 0===Q&&!(W in i))return!1}else{var ce=new S.Z;if(u)var oe=u(Q,ge,W,i,n,ce);if(!(void 0===oe?Ye(ge,Q,3,u,ce):oe))return!1}}return!0}(h,i,n)}},zt=function Ut(i,n){return null!=i&&n in Object(i)};var Nt=d(6667),Vt=d(8696);const Gt=function Wt(i,n){return null!=i&&function Ht(i,n,h){for(var u=-1,I=(n=t(n,i)).length,f=!1;++u<I;){var y=l(n[u]);if(!(f=null!=i&&h(i,y)))break;i=i[y]}return f||++u!=I?f:!!(I=null==i?0:i.length)&&(0,Vt.Z)(I)&&(0,Nt.Z)(y,I)&&((0,U.Z)(i)||(0,j.Z)(i))}(i,n,zt)},Qt=function Yt(i,n){return de(i)&&Qe(n)?qe(l(i),n):function(h){var u=function Zt(i,n,h){var u=null==i?void 0:_(i,n);return void 0===u?h:u}(h,i);return void 0===u&&u===n?Gt(h,i):Ye(n,u,3)}};var ke=d(9940);const ii=function ti(i){return de(i)?function Jt(i){return function(n){return null==n?void 0:n[i]}}(l(i)):function kt(i){return function(n){return _(n,i)}}(i)},ni=function si(i){return"function"==typeof i?i:null==i?ke.Z:"object"==typeof i?(0,U.Z)(i)?Qt(i[0],i[1]):Rt(i):ii(i)};var ri=d(139);var et=d(8706);const ai=function hi(i,n){return function(h,u){if(null==h)return h;if(!(0,et.Z)(h))return i(h,u);for(var I=h.length,f=n?I:-1,y=Object(h);(n?f--:++f<I)&&!1!==u(y[f],f,y););return h}}(function oi(i,n){return i&&(0,ri.Z)(i,n,Je.Z)});var pi=d(6932);const mi=function vi(i,n){if(i!==n){var h=void 0!==i,u=null===i,I=i==i,f=ne(i),y=void 0!==n,F=null===n,W=n==n,Q=ne(n);if(!F&&!Q&&!f&&i>n||f&&y&&W&&!F&&!Q||u&&y&&W||!h&&W||!I)return 1;if(!u&&!f&&!Q&&i<n||Q&&h&&I&&!u&&!f||F&&h&&I||!y&&I||!W)return-1}return 0},Si=function Li(i,n,h){n=n.length?H(n,function(f){return(0,U.Z)(f)?function(y){return _(y,1===f.length?f[0]:f)}:f}):[ke.Z];var u=-1;n=H(n,(0,pi.Z)(ni));var I=function ci(i,n){var h=-1,u=(0,et.Z)(i)?Array(i.length):[];return ai(i,function(I,f,y){u[++h]=n(I,f,y)}),u}(i,function(f,y,F){return{criteria:H(n,function(Q){return Q(f)}),index:++u,value:f}});return function fi(i,n){var h=i.length;for(i.sort(n);h--;)i[h]=i[h].value;return i}(I,function(f,y){return function _i(i,n,h){for(var u=-1,I=i.criteria,f=n.criteria,y=I.length,F=h.length;++u<y;){var W=mi(I[u],f[u]);if(W)return u>=F?W:W*("desc"==h[u]?-1:1)}return i.index-n.index}(f,y,h)})};var wi=d(1531),tt=d(4810);const $i=(0,wi.Z)(function(i,n){if(null==i)return[];var h=n.length;return h>1&&(0,tt.Z)(i,n[0],n[1])?n=[]:h>2&&(0,tt.Z)(n[0],n[1],n[2])&&(n=[n[0]]),Si(i,v(n,1),[])})}}]);