"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[1513,4779],{5857:(me,se,a)=>{a.d(se,{H:()=>_});var g=a(5e3),A=a(2349),N=(a(7514),a(9808));function K(v,J){if(1&v){const x=g.EpF();g.TgZ(0,"img",11),g.NdJ("load",function(){g.CHM(x);const B=g.oxw(2);return g.KtG(B.imageLoaded.emit())}),g.qZA()}if(2&v){const x=g.oxw(2);g.uIk("src",x.item.urlToImage,g.LSH)}}function Q(v,J){if(1&v&&(g.TgZ(0,"span",1)(1,"span",2),g.YNc(2,K,1,1,"img",3),g.qZA(),g.TgZ(3,"span",4)(4,"span",5),g._uU(5),g.qZA(),g.TgZ(6,"span",6),g._uU(7),g.qZA(),g.TgZ(8,"span",7)(9,"a",8),g._uU(10),g.qZA(),g.TgZ(11,"span",9),g._uU(12),g.qZA(),g.TgZ(13,"span",10),g._uU(14),g.qZA()()()()),2&v){const x=g.oxw();g.xp6(2),g.Q6J("ngIf",x.item.urlToImage),g.xp6(3),g.Oqu(x.item.title),g.xp6(2),g.Oqu(x.item.description),g.xp6(2),g.uIk("href",x.item.url,g.LSH),g.xp6(1),g.Oqu(x.item.url),g.xp6(2),g.Oqu(x.item.author),g.xp6(2),g.Oqu(x.item.publishedAt)}}let _=(()=>{class v{constructor(x,X){this.elementRef=x,this.imageLoaded=new g.vpe,X&&(this.item=X)}}return v.\u0275fac=function(x){return new(x||v)(g.Y36(g.SBq),g.Y36(A.WI,8))},v.\u0275cmp=g.Xpm({type:v,selectors:[["news-card"]],inputs:{item:"item"},outputs:{imageLoaded:"imageLoaded"},decls:1,vars:1,consts:[["class","news",4,"ngIf"],[1,"news"],[1,"logo"],[3,"load",4,"ngIf"],[1,"text"],[1,"title"],[1,"description"],[1,"footer"],[1,"url"],[1,"author"],[1,"publishedAt"],[3,"load"]],template:function(x,X){1&x&&g.YNc(0,Q,15,7,"span",0),2&x&&g.Q6J("ngIf",X.item)},dependencies:[N.O5],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]{padding:5px;overflow:hidden;display:flex;flex-direction:row}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{flex:0 0 25%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:auto;object-fit:contain;max-width:100%;max-height:100%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px #aaa solid;padding-left:.3rem;margin-left:.3rem;flex:0 0 75%}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:200%;margin:0 1rem .3rem .3rem;white-space:normal}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:120%;margin:.3rem 1rem .3rem .3rem;white-space:normal}[_nghost-%COMP%]   .news[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem 1rem 0 .3rem;overflow:hidden;justify-content:space-between;flex-wrap:wrap}"]}),v})()},4779:(me,se,a)=>{a.r(se),a.d(se,{NewsCardModule:()=>K});var g=a(9808),A=a(7916),Y=a(5857),N=a(5e3);let K=(()=>{class Q extends A.sw{constructor(){super(Y.H)}}return Q.\u0275fac=function(v){return new(v||Q)},Q.\u0275mod=N.oAB({type:Q}),Q.\u0275inj=N.cJS({imports:[g.ez]}),Q})()},7514:(me,se,a)=>{a.d(se,{ef:()=>K,wg:()=>Q});var g=a(655),A=a(8767);class K{constructor(){this.sources=void 0,this.status=void 0}}(0,g.gn)([(0,A.ep)({type:class N{constructor(){this.id=void 0,this.name=void 0,this.category=void 0,this.language=void 0,this.country=void 0,this.sortBysAvailable=void 0}}}),(0,g.w6)("design:type",Array)],K.prototype,"sources",void 0);class Q{constructor(){this.articles=void 0,this.status=void 0,this.sources=void 0}}(0,g.gn)([(0,A.ep)({type:class Y{constructor(){this.author=void 0,this.title=void 0,this.description=void 0,this.url=void 0,this.urlToImage=void 0,this.publishedAt=void 0}}}),(0,g.w6)("design:type",Array)],Q.prototype,"articles",void 0)},1857:(me,se,a)=>{a.d(se,{Y:()=>x});var g=a(8767),A=a(6698),Y=a(4004),N=a(3900),K=a(8505),Q=a(4782),_=a(7514),v=a(5e3),J=a(520);let x=(()=>{class X{constructor(ie){this.httpClient=ie,this.news$=this.httpClient.get("https://newsapi.org/v1/sources?language=en").pipe((0,Y.U)(O=>g.cV.deserialize(_.ef,O)),(0,Y.U)(O=>{if("ok"!==O.status)throw new Error("Fail to get news");return O.sources}),(0,Y.U)(O=>O.filter(ne=>"technology"===ne.category||"gaming"===ne.category)),(0,N.w)(O=>{const ne=O[Math.round(Math.random()*(O.length-1))];return this.httpClient.get(`https://newsapi.org/v1/articles?source=${ne.id}&apiKey=228bc9410a2a4f608d2ad2e5626896f3`)}),(0,Y.U)(O=>g.cV.deserialize(_.wg,O)),(0,Y.U)(O=>{if("ok"!==O.status)throw new Error("Fail to get news");return O.articles}),(0,K.b)(O=>{console.log("x",O)}),(0,Q.d)({bufferSize:1,refCount:!1}))}getNews$(ie){return this.news$.pipe((0,Y.U)(O=>{let ne=O;if(ie)for(;ie>0;)ne=ne.concat((0,A.Z)(O)),ie-=O.length;return ne}))}}return X.\u0275fac=function(ie){return new(ie||X)(v.LFG(J.eN))},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})()},2729:(me,se,a)=>{a.d(se,{ZV:()=>ye,tN:()=>Be,_h:()=>Oe,NA:()=>Te,uC:()=>be,ZE:()=>Re,NJ:()=>Me,Z2:()=>_e});var g=a(9808),A=a(5e3),Y=a(3191),N=a(7916),K=a(1135),Q=a(4707),_=a(9646),v=a(3900),J=a(5963),x=a(8505),X=a(2718),B=a(4004),ie=a(1884),O=a(9300),ne=a(2722),Le=a(8372),ce=a(207),ue=a(2076),Ee=a(9751),xe=a(9770),q=a(7272),k=a(5698),ve=a(1677),ae=a(5245);let ye=(()=>{class p{set selected(e){this._selected=(0,Y.Ig)(e)}get selected(){return this._selected}}return p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=A.Xpm({type:p,selectors:[["deja-item"]],inputs:{value:"value",text:"text",selected:"selected"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),p})(),_e=(()=>{class p extends N.yl{constructor(){super(),this.emptyViewPort={beforeSize:0,afterSize:0,viewPortSize:0,listSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:0,items:[]},this.mode$=new K.X("fixed"),this.items$=new K.X([]),this.maxSize$=new K.X(0),this.ensureItem$=new K.X(null),this.scrollPosition$=new K.X(0),this.element$=new Q.t(1),this.itemsSize$=new K.X(0),this.direction$=new K.X("vertical"),this.viewPortResult$=new K.X(this.emptyViewPort),this.refresh$=new K.X(null),this.deleteSizeCache$=new K.X(!0),this.measureViewPort={beforeSize:0,afterSize:2e5,viewPortSize:0,listSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:void 0,items:[]},this._mode="fixed",this._itemsSize=p.itemDefaultSize,this._direction="vertical",this._scrollPosition=0,this.ignoreScrollCount=0,this.viewPort$=this.viewPortResult$;const e=()=>"horizontal"===this._direction?window.innerWidth:window.innerHeight,t=d=>Math.ceil("horizontal"===this._direction?d.clientWidth:d.clientHeight),o=(d,w,P,b,E)=>{const G=[];let U,C,V,T=0,M=0,W=0;if(E&&void 0!==E.index&&E.atEnd){let z=d.length;for(;--z>=0;){const ee=d[z],he=ee.size||b;E.index===z&&(C=z),void 0!==C?void 0===U?(M+=he,G.unshift(ee),(M>w||0===z)&&(U=z,V=M-w)):(V+=he,T+=he):W+=he}}else d.forEach((z,ee)=>{const he=z.size||b;E&&E.index===ee&&(U=ee,V=T),void 0===U&&(T+he>=P?U=ee:T+=he),void 0!==U&&void 0===C&&(M+=he,G.push(z)),void 0===C?(T+M>(V||P)+w||ee===d.length-1)&&(C=ee):W+=he});return void 0!==(null==E?void 0:E.index)&&M<w&&G.length<d.length?o(d,w,P,b,E.atEnd?{index:0,atEnd:!1}:{index:d.length-1,atEnd:!0}):(0,_.of)({beforeSize:T,afterSize:W,listSize:w,viewPortSize:M,visibleItems:G,startIndex:U||0,endIndex:C,scrollPos:V,items:d})},l=(d,w,P,b,E,G,U)=>o(d,w,P,E,G).pipe((0,v.w)(C=>!U&&C.visibleItems.find(M=>!M.size)?(this.viewPortResult$.next(C),(0,J.H)(1).pipe((0,x.b)(()=>{const M=b.getElementsByClassName("listitem");for(let W=0;W<M.length;W++){const V=M[W],z=+V.getAttribute("flat"),ee=C.visibleItems[z-C.startIndex];ee&&(ee.size=t(V))}C.viewPortSize=C.visibleItems.reduce((W,V)=>W+(V.size||E),0)}),(0,v.w)(()=>o(d,w,C.scrollPos||P,E,G)))):(0,_.of)(C))),c=(d,w,P,b,E,G)=>{let C,T,M,U=0;const W=b.getElementsByClassName("listitem");let V={beforeSize:0,afterSize:0,listSize:w,viewPortSize:0,visibleItems:[],startIndex:0,endIndex:0,scrollPos:0,items:d};if(W.length!==d.length&&(null==G||G))return this.viewPortResult$.next(V),(0,J.H)(1).pipe((0,v.w)(()=>c(d,w,P,b,E,!1)));if(E&&void 0!==E.index&&E.atEnd){M=0;let z=0,ee=W.length;for(;--ee>=0;){const Pe=d[ee].size=t(W[ee]);E.index===ee&&(T=ee),void 0!==T&&(void 0===C?(z+=Pe,z>w&&(C=ee,M=z-w)):M+=Pe),U+=Pe}}else for(let z=0;z<W.length;z++){const he=d[z].size=t(W[z]);E&&E.index===z&&(C=z,M=U),U+=he,void 0===C&&U>P&&(C=z),void 0===T&&U>(M||P)+w&&(T=z)}return C=C||0,T=T||0,V={beforeSize:0,afterSize:0,listSize:w,viewPortSize:U,visibleItems:d.slice(C,1+T),startIndex:C,endIndex:T,scrollPos:M,items:d},(0,_.of)(V)},m=(d,w,P,b,E,G,U)=>{if(null==d||!d.length)return(0,_.of)(this.emptyViewPort);let T,C=w||t(b);switch(C<=p.itemDefaultSize&&(C=e()),void 0!==G.index?this.ignoreScrollCount++:this.ignoreScrollCount=0,this.mode){case"disabled":T=c(d,C,P,b,G,!0);break;case"variable":T=o(d,C,P,E,G);break;case"auto":T=l(d,C,P,b,E,G);break;case"fixed":T=((d,w,P,b,E)=>{const G=Math.ceil(w/b)+1,U=Math.floor(P/b),C=Math.min(d.length-U,G);let T,M,W;E&&void 0!==E.index&&E.atEnd?(T=Math.max(0,E.index+1-Math.min(d.length,G)),M=Math.max(E.index,C-1),W=(M+1)*b-w):C<0?(M=d.length-1,T=M+1-Math.min(d.length,G)):void 0!==E.index?(T=E.index,M=T+C-1,W=T*b):(T=U,M=T+C-1);const V=d.slice(T,M+1);return(0,_.of)({beforeSize:T*b,afterSize:(d.length-M-1)*b,listSize:w,viewPortSize:V.length*b,visibleItems:V,startIndex:T,endIndex:M,scrollPos:W,items:d})})(d,C,P,E,G);break;default:throw new Error("ViewPortService, invalide mode. The value can be disabled, variable, auto and fixed.")}return T.pipe((0,v.w)(M=>{if(!U){const W=M.beforeSize+M.viewPortSize+M.afterSize-M.listSize;if("disabled"!==this.mode&&C<2*p.itemDefaultSize)return this.viewPortResult$.next(this.measureViewPort),(0,J.H)(1).pipe((0,v.w)(()=>m(d,w,P,b,E,G,!0)));if(W<0||d.length&&W>0&&(M.scrollPos||P)>W)return m(d,w,0,b,E,{index:d.length-1,atEnd:!0},!0);if("auto"===this.mode&&M.viewPortSize<C)return m(d,w,0,b,E,{index:d.length-1,atEnd:!0},!0)}return(0,_.of)(M)}),(0,x.b)(()=>{G.index=void 0}))},S=this.items$;this.ensureParams$=this.ensureItem$.pipe((0,X.V)(S),(0,B.U)(([d,w])=>{this.ignoreScrollCount=0;const P={};if(null!=d&&(null==w?void 0:w.length)){let b=d;isNaN(b)&&(b=w.findIndex(E=>d===E)),b>=0&&(this.viewPort&&b<=this.viewPort.startIndex?(P.index=b,P.atEnd=!1):(!this.viewPort||b>=this.viewPort.endIndex)&&(P.index=b,P.atEnd=!0))}return P}));const $=this.maxSize$.pipe((0,ie.x)()),R=this.refresh$.pipe((0,v.w)(d=>{if(this.ignoreScrollCount=0,d){if(d.clearMeasuredSize)return this.items$.pipe((0,x.b)(w=>{this.lastCalculatedSize=void 0,w.forEach(P=>P.size=void 0)}),(0,B.U)(()=>d));d.items&&d.items.forEach(w=>w.size=void 0)}return(0,_.of)(d)})),D=this.scrollPosition$.pipe((0,B.U)(d=>this._scrollPosition=d||0),(0,B.U)(d=>Math.max(d,0)),(0,O.h)(()=>!(this.ignoreScrollCount>0&&(this.ignoreScrollCount--,1))),(0,ie.x)()),re=this.mode$.pipe((0,B.U)(d=>this._mode=d),(0,ie.x)()),L=this.direction$.pipe((0,B.U)(d=>this._direction=d),(0,ie.x)()),le=this.itemsSize$.pipe((0,ie.x)(),(0,x.b)(d=>this._itemsSize=d)),Z=this.element$.pipe((0,x.b)(d=>{d||(this.viewPort=void 0,this.ignoreScrollCount=0,this.lastCalculatedSize=void 0)}));L.pipe((0,X.V)(S,re,this.deleteSizeCache$),(0,O.h)(([d,w,P])=>(null==w?void 0:w.length)&&"auto"===P),(0,v.w)(([d,w])=>w),(0,ne.R)(this.destroyed$)).subscribe(d=>d.size=void 0),Z.pipe((0,X.V)(S,R,this.ensureParams$,L,re,le,$),(0,Le.b)(1),(0,X.V)(D),(0,O.h)(([[d]])=>!!d),(0,v.w)(([[d,w,P,b,E,G,U,C],T])=>{U||(U=p.itemDefaultSize);const M=this.lastCalculatedSize||C||t(d),W=this._scrollPosition;let V="auto"===C?0:+C;return(null==w?void 0:w.length)&&("auto"===M||M<2*p.itemDefaultSize)?(this.viewPortResult$.next(this.measureViewPort),(0,J.H)(1).pipe((0,B.U)(()=>{if(V=this.lastCalculatedSize=t(d),"fixed"===this.mode)w.length*U<V&&(V=w.length*U);else if("variable"===this.mode){let z=0;w.find(ee=>(z+=ee.size||U,z>V)),z<V&&(V=z)}return{element:d,scrollPos:W,items:w,maxSizeValue:V,itemDefaultSize:U,ensureParams:b}}))):(V=V||this.lastCalculatedSize,(0,_.of)({element:d,scrollPos:W,items:w,maxSizeValue:V,itemDefaultSize:U,ensureParams:b}))}),(0,v.w)(({element:d,scrollPos:w,items:P,maxSizeValue:b,itemDefaultSize:E,ensureParams:G})=>m(P,b,w,d,E,G)),(0,ne.R)(this.destroyed$)).subscribe(d=>{this.viewPortResult$.next(d)},d=>console.error(d)),this.viewPortResult$.pipe((0,ne.R)(this.destroyed$)).subscribe(d=>this.viewPort=d)}get mode(){return this._mode}get itemsSize(){return this._itemsSize}get direction(){return this._direction}deleteSizeCache(){this.deleteSizeCache$.next(!0)}clear(){this.viewPortResult$.next(this.emptyViewPort)}refresh(e){this.refresh$.next(e||null)}}return p.itemDefaultSize=40,p.\u0275fac=function(e){return new(e||p)},p.\u0275prov=A.Yz7({token:p,factory:p.\u0275fac}),p})(),Se=(()=>{class p{constructor(){console.warn("@deja-js/component/core/SortingService is deprecated, and will be removed in a further version. Please use @deja-js/component/v2/tem-list/SortingService instead.")}sort$(e,t){return(0,_.of)(this.sort(e,t))}sort(e,t){if(null!=e&&e.length){const r=t instanceof Array?t:[t];let o=r.length;for(;--o>=0;){const l=r[o];e=(0,ve.Z)(e,l.name),"descending"===l.order&&(e=e.reverse())}}return e}sortTree$(e,t,r){return r=r||"items",this.sort$(e,t).pipe((0,v.w)(o=>o),(0,v.w)(o=>o&&o[r]?this.sortTree$(o[r],t,r).pipe((0,B.U)(l=>(o[r]=l,o))):(0,_.of)(o)),(0,ce.u)((o,l)=>[...o,l],[]))}}return p.\u0275fac=function(e){return new(e||p)},p.\u0275prov=A.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),be=(()=>{class p{group$(e,t,r="items"){if(!e||0===e.length||!t)return(0,_.of)(e);if(t instanceof Array){let o=(0,_.of)(e);return t.forEach(l=>o=o.pipe((0,v.w)(c=>this.group$(c,l,r)))),o}{const o=t;if(!e[0][r])return this.groupChildren$(e,o,0,r);const l=(c,m)=>(0,ue.D)(c).pipe((0,v.w)(S=>{var $;const R=S[r];return null!==($=R[0])&&void 0!==$&&$[r]?l(R,m+1).map(()=>S):this.groupChildren$(R,o,m,r).pipe((0,B.U)(D=>(S[r]=D,S)))}),(0,ce.u)((S,$)=>[...S,$],[]));return l(e,1)}}groupChildren$(e,t,r,o){return(0,ue.D)(e).pipe((0,ce.u)((l,c)=>{let m="function"==typeof t.groupByField?t.groupByField(c):c[t.groupByField];"function"==typeof c[m]&&(m=c[m]()),m||(m=this.getTextValue(c));let S=l[m];if(!S){const $=t.groupTextField&&("function"==typeof t.groupTextField?t.groupTextField(c):c[t.groupTextField])||m;S=l[m]={depth:r,toString:()=>$,$text:$},S[o]=[]}return S[o].push(c),l},{}),(0,B.U)(l=>Object.keys(l).map(c=>l[c])),(0,x.b)(l=>l.forEach(c=>{var m;return c.sortField=(null===(m=t.sortInfos)||void 0===m?void 0:m.name)||"toString"})),(0,v.w)(l=>t.sortInfos?(new Se).sort$(l,t.sortInfos):(0,_.of)(l)))}getTextValue(e){return e?e.displayName?"string"==typeof e.displayName?e.displayName:e.displayName():"function"==typeof e.toString?e.toString():"":""}}return p.\u0275fac=function(e){return new(e||p)},p.\u0275prov=A.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),Me=(()=>{class p{constructor(){this._waiter$=new K.X(!1),this._cache={},this._childrenField=p.defaultChildrenField,this.compareItems=(e,t)=>{const r=o=>null!=o;if(!r(e)||!r(t))return!1;if(e.equals)return e.equals(t);if(t.equals)return t.equals(e);{const o=e.model,l=e.model;return null!=o&&o.equals?o.equals(t.model):null!=l&&l.equals?l.equals(e.model):this.getValue(e,this._valueField)===this.getValue(t,this._valueField)}}}static getItemValue(e,t){var r;const o=l=>null!=l;if(t){const l=t.split(".");let c=void 0!==(null===(r=e.model)||void 0===r?void 0:r[l[0]])?e.model:e;if(l.forEach(m=>{c=null==c?void 0:c[m]}),o(c))return"function"==typeof c?c():c}return o(e.value)?e.value:o(e.model)&&e.model||e}static getItemText(e,t){var r;if(e){if(t){const o=t.split(".");let l=void 0!==(null===(r=e.model)||void 0===r?void 0:r[o[0]])?e.model:e;return o.forEach(c=>{l=null==l?void 0:l[c]}),void 0!==l?"function"==typeof l?l():l:""}if(e.displayName)return"string"==typeof e.displayName?e.displayName:e.displayName();if("function"==typeof e.toString)return e.toString()}return""}get lastQuery(){return this._lastQuery}setLoadingItems(e){this.loadingItems$=e}setSelectingItem(e){this.selectingItem$=e}setUnselectingItem(e){this.unselectingItem$=e}setExpandingItem(e){this.expandingItem$=e}setCollapsingItem(e){this.collapsingItem$=e}get waiter$(){return this._waiter$}set childrenField(e){this._childrenField=e||p.defaultChildrenField,this.invalidateCache()}get childrenField(){return this._childrenField}set hideSelected(e){this._hideSelected=e}get hideSelected(){return this._hideSelected}set valueField(e){this._valueField=e}get valueField(){return this._valueField}get hasCache(){return this._cache&&!!this._cache.visibleList}set items(e){this._items=e,this.invalidateCache()}get items(){return this._items}setItems$(e){if(e){if(e instanceof Array)return this.ensureChildrenProperties(e),this.ensureSelectedItems(e),this.items=e,this._waiter$.next(!1),(0,_.of)(e);{this.items=void 0,this._waiter$.next(!0);let t=e;return void 0===t.subscribe&&(t=(0,ue.D)(e)),t.pipe((0,B.U)(r=>r?(this.ensureChildrenProperties(r),this.ensureSelectedItems(r),this.items=[...this.items||[],...r],this._waiter$.next(!1),r):(this.items=[],this._waiter$.next(!1),[])))}}return this.items=void 0,(0,_.of)(null)}setModels$(e){return this.setItems$(e)}get groupInfos(){return this._groupInfos}getItems(){return this.items}getItemFromIndex(e){return this._cache.visibleList?this._cache.visibleList[e]:null}getItemIndex(e){return this._cache.visibleList?this._cache.visibleList.findIndex(t=>this.compareItems(e,t)):-1}getSortingService(){return this._sortingService||(this._sortingService=new Se),this._sortingService}setSortingService(e){this._sortingService=e}getGroupingService(){return this._groupingService||(this._groupingService=new be),this._groupingService}setGroupingService(e){this._groupingService=e}getTextValue(e,t){return p.getItemText(e,t)}getValue(e,t){return p.getItemValue(e,t)}drop$(){return new Ee.y(e=>{if(!this._ddList||!this.items)return void e.next(!1);const t=this._ddCurrentIndex,r=this._ddList[t];if(!r)throw new Error("invalid drag infos stored in cache.");const o=this._ddList[t-1];let l,c=this._cache.flatList.findIndex(D=>D===o),m=0;for(;c>=0;){const D=this._cache.flatList[c];if(void 0===D.depth){m=c;break}if(D.depth===r.depth-1){l=D;break}D.depth===r.depth&&++m,--c}const S=(D,re)=>{for(let L=0;L<re.length;L++){const le=re[L];if(le===D)return{index:L,list:re};if(void 0!==le.$items){const Z=S(D,le.$items);if(Z)return Z}}},$=S(r,this.items);$.list.splice($.index,1);const R=l?l.$items:this.items;m>$.index&&$.list===R&&--m,R.splice(m,0,r),this.invalidateCache(),e.next(!0)})}calcDragTargetIndex$(e,t){return new Ee.y(r=>{const o=this._ddList||this._cache.visibleList;if(!o)throw new Error("Empty cache on calcDragTargetIndex");const l=void 0!==this._ddCurrentIndex?this._ddCurrentIndex:e;if(l>=o.length)return void r.next(o.length-1);const c=o[l],m=l;if(void 0!==c.depth&&t!==l){if(t<l){let S=0;for(let $=l-1;$>=0;$--)if(o[$].depth<=c.depth){S=$;break}if(t<=S)for(let $=t;$<=S;$++){const R=o[$];if(R.depth===c.depth)return void r.next($);if(R.depth===c.depth-1)return void r.next($+1)}}if(t>l){let S=o.length-1;for(let $=l+1;$<o.length;$++)if(o[$].depth<=c.depth){S=$;break}if(t>=S){for(let R=t+1;R<o.length;R++){const D=o[R];if(D.depth===c.depth)return void r.next(R);if(D.depth===c.depth-1)return void r.next(R-1)}if(o[S].depth===c.depth)return void r.next(S)}}}r.next(m)})}toggleAll$(e){return(0,_.of)(this._cache.flatList).pipe((0,B.U)(t=>t.filter(r=>{var o;return r.$items&&(null===(o=r.collapsible)||void 0===o||o)})),(0,x.b)(()=>delete this._cache.visibleList),(0,v.w)(t=>e?this.collapseItems$(t):this.expandItems$(t)))}toggleCollapse$(e,t){var r;const o=this._cache.visibleList;if(!o||!o.length)throw new Error("Empty cache on toggleCollapse");const l=o[e];return!l||null!==(r=l.collapsible)&&void 0!==r&&!r?(0,_.of)([]):(void 0!==t?t:!l.collapsed)?this.collapseItem$(l):this.expandItem$(l)}expandItems$(e){return(0,ue.D)(e||[]).pipe((0,v.w)(t=>this.expandItem$(t)),(0,ce.u)((t,r)=>[...t,r],[]))}collapseItems$(e){return(0,ue.D)(e||[]).pipe((0,v.w)(t=>this.collapseItem$(t)),(0,ce.u)((t,r)=>[...t,r],[]))}expandItem$(e){return(0,_.of)(e).pipe((0,O.h)(t=>!!t),(0,v.w)(t=>this.expandingItem$?this.expandingItem$(t):(0,_.of)(t)),(0,O.h)(t=>!!t),(0,x.b)(t=>{t.collapsed=!1,delete this._cache.visibleList}))}collapseItem$(e){return(0,_.of)(e).pipe((0,O.h)(t=>!!t),(0,v.w)(t=>this.collapsingItem$?this.collapsingItem$(t):(0,_.of)(t)),(0,O.h)(t=>!!t),(0,x.b)(t=>{t.collapsed=!0,delete this._cache.visibleList}))}getSelectedItems(){return this.selectedList||[]}setSelectedItems(e){this.selectedList&&this.selectedList.forEach(t=>{t.selected=!1}),this.selectedList=e,this.hideSelected&&delete this._cache.visibleList,this.ensureSelectedItems(this.items)}unselectAll$(){this.hideSelected&&delete this._cache.visibleList;const e=this.selectedList;return this.selectedList=[],this.unSelectItems$(e)}selectRange$(e,t){void 0===t&&(t=e);const r=this._cache.visibleList;if(!r||!r.length)throw new Error("Empty cache on selection");return this.unselectAll$().pipe((0,B.U)(()=>r.slice(Math.min(e,t),1+Math.max(e,t))),(0,B.U)(o=>o.filter(l=>{var c;return null===(c=l.selectable)||void 0===c||c})),(0,x.b)(()=>{this.hideSelected&&delete this._cache.visibleList}),(0,v.w)(o=>this.selectItems$(o).pipe((0,B.U)(l=>l.length))))}toggleSelect$(e,t){return function te(p,s,e){return(0,xe.P)(()=>p()?s:e)}(()=>t,this.selectItems$(e=e||[]),this.unSelectItems$(e)).pipe((0,B.U)(()=>(this.hideSelected&&delete this._cache.visibleList,this.selectedList)))}selectItems$(e){return(0,ue.D)(e||[]).pipe((0,v.w)(t=>this.selectItem$(t)),(0,ce.u)((t,r)=>[...t,r],[]))}unSelectItems$(e){return(0,ue.D)(e||[]).pipe((0,O.h)(t=>t.selected),(0,v.w)(t=>this.unSelectItem$(t)),(0,ce.u)((t,r)=>[...t,r],[]))}selectItem$(e){return(0,_.of)(e).pipe((0,O.h)(t=>!!t),(0,v.w)(t=>this.selectingItem$?this.selectingItem$(t):(0,_.of)(t)),(0,O.h)(t=>!!t),(0,x.b)(t=>{this.selectedList||(this.selectedList=[]),t.selected=!0,this.selectedList.push(t)}))}unSelectItem$(e){return(0,_.of)(e).pipe((0,O.h)(t=>!!t),(0,v.w)(t=>this.unselectingItem$?this.unselectingItem$(t):(0,_.of)(t)),(0,O.h)(t=>!!t),(0,x.b)(t=>{var r;if(t.selected=!1,null!==(r=this.selectedList)&&void 0!==r&&r.length){const o=this.selectedList.findIndex(l=>this.compareItems(l,t));o>=0&&this.selectedList.splice(o,1)}}))}findNextMatch$(e,t){let r={index:-1};const o=this._cache.visibleList;if(!o||!o.length)throw new Error("Empty cache on findNextMatch");if(o.length){(t<0||t>=o.length)&&(t=-1);let l=t+1;for(;l!==t;){const c=o[l];if(e(c,l)){r={index:l,item:c};break}if(l++,l>=o.length){if(-1===t)break;l=0}}}return(0,_.of)(r)}sort$(e){if(!this.items)throw new Error("No Items");const t=this.getSortingService().sortTree$(this._cache.groupedList,e,"$items").pipe((0,x.b)(r=>{this._cache.groupedList=r,this.invalidateViewCache()}));return this._cache.groupedList&&0!==this._cache.groupedList.length?t:this.getGroupedList$(this.items).pipe((0,x.b)(r=>this._cache.groupedList=r),(0,v.w)(()=>t))}group$(e){return this._groupInfos=e,this.invalidateCache(),this.ensureChildrenProperties(this.items),(0,_.of)(e)}ungroup$(e){const t=this._groupInfos?this._groupInfos.findIndex(r=>r.groupByField===e.groupByField):-1;return t>=0&&this._groupInfos.splice(t,1),this.invalidateCache(),this.ensureChildrenProperties(this.items),(0,_.of)(e)}getParentListInfos$(e,t){return this.ensureFlatListCache$(!0,t).pipe((0,v.w)(o=>{let c,l=o.findIndex(m=>m===e);if(l<0)throw new Error("Item not found.");if(e.depth){let m=0;for(;--l>=0;){const S=o[l];S.depth<e.depth&&(c={index:m,parent:S}),m++}}else c={index:this.items.findIndex(S=>S===e)};return(0,_.of)(c)}))}invalidateCache(){this._cache={},this.ensureChildrenProperties(this.items)}invalidateRowsHeightCache(){this._items&&this._items.forEach(e=>e.size=void 0)}getViewList$(e,t,r,o,l,c){var m;const S={},$=(null==t?void 0:t.toString())!==(null===(m=this._lastQuery)||void 0===m?void 0:m.toString());let D;if(r=r||$||!this.items||!this.items.length,this._lastQuery=t,t)if("string"==typeof t)try{const L=(L=>(["\\","/","|","&",";","$","%","@",'"',"<",">","(",")","+"].forEach(Z=>L=L.replace(Z,`\\${Z}`)),L))(t=(new N.R5).remove(t));D=new RegExp(L,"i")}catch(L){console.log("Invalid search parameters")}else D=t,void 0===D.test&&(D=void 0);const re=()=>{let L;if(void 0!==o&&void 0!==l&&o!==l){if(!this._ddList){this._ddList=[...this._cache.visibleList];const d=this._ddList[o].depth;let w=o;if(void 0!==d)for(let P=o+1;P<this._ddList.length&&!(this._ddList[P].depth<=d);P++)w=P;this._ddChildCount=w-o+1,this._ddCurrentIndex=o}const le=this._ddList.splice(this._ddCurrentIndex,this._ddChildCount);l>this._ddCurrentIndex&&(l-=this._ddChildCount,++l),this._ddCurrentIndex=l,le.forEach(Z=>this._ddList.splice(l++,0,Z)),L=this._ddList}else delete this._ddList,delete this._ddCurrentIndex,delete this._ddChildCount,L=this._cache.visibleList||[];return S.depthMax=this._cache.depthMax,S.visibleList=L,S};return r?(this.waiter$.next(!0),($||!this.items||!this.items.length)&&(this.internalQuery=D),this.getItemList$(t,this.selectedList).pipe((0,x.b)(L=>{(!this.items||!this.items.length)&&this.ensureSelectedItems(L),L!==this.items&&(this.items=L,this.internalQuery=void 0,this.ensureChildrenProperties(L)),delete this._cache.visibleList,this.waiter$.next(void 0===this.items)}),(0,v.w)(()=>this.ensureVisibleListCache$(e,this.internalQuery,$,c)),(0,B.U)(re))):this.ensureVisibleListCache$(e,this.internalQuery,$,c).pipe((0,B.U)(re))}ensureSelection(){return this.ensureSelectedItems(this.items)}getItemList$(e,t){return this.loadingItems$?this.loadingItems$(e,t):(0,_.of)(this.items)}itemMatch(e,t,r){if(e.$items)return!0;const l=e[t],c="function"==typeof l?l():l||this.getTextValue(e,t);return c&&r.test((new N.R5).remove(c))}getGroupedList$(e){return e?this.getGroupingService().group$(this.items,this.groupInfos,"$items"):(0,_.of)([])}getVisibleList$(e,t,r,o,l){if(!e)return(0,_.of)([]);let c=[];const m=[];let S=!1;if(r){const $=(R,D,re)=>{let L;return R&&R.forEach(le=>{const Z=le;if(Z.$items){if(this.isVisible(Z)&&this.itemMatch(Z,t,r)){S=!1;const d=$(Z.$items,D+1,re);d&&(Z.collapsed&&o&&(Z.collapsed=!1),L=L?Z.collapsed&&[...L,Z]||[...L,Z,...d]:Z.collapsed&&[Z]||[Z,...d],Z.selected&&m.push(Z))}}else this.itemMatch(le,t,r)&&(Z.depth=D,L||(L=[]),!re&&this.isVisible(le)&&!(le.selected&&this.hideSelected)&&(Z.odd=S,S=!S,L.push(Z))),Z.selected&&m.push(Z)}),L};c=$(e||[],0,!1)||[]}else{const $=(R,D,re)=>{R&&R.forEach(L=>{!re&&this.isVisible(L)&&!(L.selected&&this.hideSelected)&&(L.odd=S,S=!S,c.push(L)),L.selected&&m.push(L),L.$items&&(S=!1,$(L.$items,D+1,re||L.collapsed||!this.isVisible(L)))})};$(e,0,!1)}return(0,_.of)(c).pipe((0,x.b)(()=>{l||(this.selectedList=m)}))}getFlatList$(e,t,r){if(!e)return(0,_.of)([]);const o=[],l=[];let c=0,m=!1,S=!1;const $=(R,D,re)=>(0,ue.D)(R||[]).pipe((0,x.b)(L=>{D>c&&(c=D),L.depth=D,!re&&this.isVisible(L)&&!(L.selected&&this.hideSelected)&&(L.odd=S,S=!S,o.push(L)),L.selected&&l.push(L)}),(0,v.w)(L=>L.$items?(m=!0,S=!1,(0,q.z)((0,_.of)(L),$(L.$items,D+1,re||L.collapsed))):(0,_.of)(L)));return $(e,0,!1).pipe((0,x.b)(()=>{r||(this.selectedList=l),t||(this._cache.visibleList=o),this._cache.depthMax=m?c:0}),(0,ce.u)((R,D)=>(R.push(D),R),[]))}invalidateViewCache(){delete this._cache.flatList,delete this._cache.visibleList,delete this._cache.depthMax,this._cache.rowsCount=0}ensureSelectedItems(e){if(this.selectedList&&this.selectedList.length>0){if(this.selectedList.forEach(o=>o.selected=!0),!e)return this.selectedList;const t=[],r=o=>{o.forEach(l=>{const c=this.selectedList.find(m=>this.compareItems(m,l));c&&(c.selected=!1,t.push(l)),l.$items&&r(l.$items)})};r(e),this.selectedList.filter(o=>o.selected).forEach(o=>t.push(o)),this.selectedList=t,this.selectedList.forEach(o=>o.selected=!0)}else{if(this.selectedList=[],!e)return this.selectedList;const t=r=>{r.forEach(o=>{o.selected&&this.selectedList.push(o),o.$items&&t(o.$items)})};t(e)}return this.selectedList}ensureVisibleListCache$(e,t,r,o){var l;return null!==(l=this._cache.visibleList)&&void 0!==l&&l.length?(0,_.of)(this._cache.visibleList):this.ensureFlatListCache$(!!t,o).pipe((0,v.w)(()=>this.getVisibleList$(this._cache.groupedList,e,t,r,o)),(0,x.b)(c=>{this._cache.visibleList=c,this._cache.rowsCount=c.length}))}ensureFlatListCache$(e,t){var r;return null!==(r=this._cache.flatList)&&void 0!==r&&r.length?(0,_.of)(this._cache.flatList):this.ensureGroupedListCache$().pipe((0,v.w)(()=>this.getFlatList$(this._cache.groupedList,e,t)),(0,x.b)(o=>{var l;(null===(l=this._cache.flatList)||void 0===l?void 0:l.length)&&this._cache.flatList!==o&&(delete this._cache.visibleList,this._cache.rowsCount=0,this._cache.depthMax=0,o&&o.forEach(c=>{c.depth&&c.depth>this._cache.depthMax&&(this._cache.depthMax=c.depth)})),this._cache.flatList=o}))}ensureGroupedListCache$(){var e;return null!==(e=this._cache.groupedList)&&void 0!==e&&e.length?(0,_.of)(this._cache.groupedList):this.groupInfos&&0!==this.groupInfos.length?this.items?this.getGroupedList$(this.items).pipe((0,x.b)(t=>{var r;(null===(r=this._cache.groupedList)||void 0===r?void 0:r.length)&&this._cache.groupedList!==t&&this.invalidateViewCache(),this._cache.groupedList=t})):(0,_.of)([]):(0,_.of)(this.items).pipe((0,x.b)(t=>this._cache.groupedList=t))}ensureChildrenProperties(e){!e||e.forEach(t=>{const r=t[this.childrenField];r&&(t.$items=r,this.ensureChildrenProperties(t.$items))})}isVisible(e){var t;return null===(t=e.visible)||void 0===t||t}}return p.defaultChildrenField="items",p.defaultTextField="displayName",p.defaultValueField="value",p})();class Re extends N.yl{constructor(s,e){super(),this.changeDetectorRef=s,this.viewPort=e,this._waiter=!0,this._itemList=[],this._multiSelect=!1,this._currentItemIndex=-1,this._minSearchLength=0,this._vpBeforeHeight=0,this._vpAfterHeight=0,this._vpStartRow=0,this._vpEndRow=0,this._pageSize=0,this._depthMax=0,this.rowsCount=0,this.allCollapsed=!1,this._viewPortRowHeight=_e.itemDefaultSize,this._listElementId=`listcontainer_${(1e9*Math.random()).toString().substr(10)}`,e.viewPort$.pipe((0,v.w)(t=>{var r;let o=(0,_.of)(null);return delete this._hintLabel,"disabled"===e.mode?(this._itemList=t.items,this._vpStartRow=0,this._vpEndRow=0,this._vpBeforeHeight=0,this._vpAfterHeight=0):(this._itemList=t.visibleItems,this._vpStartRow=t.startIndex,this._vpEndRow=t.endIndex,this._vpBeforeHeight=t.beforeSize,this._vpAfterHeight=t.afterSize),void 0!==t.scrollPos&&this.listElement&&(this.listElement.getElementsByClassName("listitem").length!==t.visibleItems.length?o=(0,J.H)(1).pipe((0,O.h)(()=>!!this.listElement),(0,x.b)(()=>this.listElement.scrollTop=t.scrollPos)):this.listElement.scrollTop=t.scrollPos),this.changeDetectorRef.markForCheck(),null===(r=this._viewPortChanged)||void 0===r||r.next(t),o}),(0,ne.R)(this.destroyed$)).subscribe()}get isMultiSelect(){return this._multiSelect}get itemList(){return this._itemList}get treeItemList(){return this._itemList}get ddStartIndex(){return this._ddStartIndex}get vpBeforeHeight(){return this._vpBeforeHeight}get vpAfterHeight(){return this._vpAfterHeight}get vpStartRow(){return this._vpStartRow}get vpEndRow(){return this._vpEndRow}get sortInfos(){return this._sortInfos}get groupInfos(){return this._itemListService.groupInfos}setHideSelected(s){this._hideSelected=s,this._itemListService&&(this._itemListService.hideSelected=s)}setChildrenField(s){this._childrenField=s,this._itemListService&&(this._itemListService.childrenField=s)}getItemIndexFromHTMLElement(s){for(;(null==s?void 0:s.parentElement)&&s.hasAttribute&&!s.hasAttribute("flat")&&s.parentElement.id!==this.listElementId;)s=s.parentElement;if(s&&s.hasAttribute("flat"))return+s.getAttribute("flat")}getItemFromHTMLElement(s){const e=this.getItemIndexFromHTMLElement(s);if(void 0!==e)return this._itemList[e-this.vpStartRow]}getItemListService(){return this._itemListService||this.setItemListService(new Me),this._itemListService}getSelectedItems(){return this.getItemListService().getSelectedItems()}setSelectedItems(s){this.getItemListService().setSelectedItems(s),this.changeDetectorRef.markForCheck()}setLoadingItems(s){this.getItemListService().setLoadingItems(s)}setSelectingItem(s){this.getItemListService().setSelectingItem(s)}setUnselectingItem(s){this.getItemListService().setUnselectingItem(s)}setExpandingItem(s){this.getItemListService().setExpandingItem(s)}setCollapsingItem(s){this.getItemListService().setCollapsingItem(s)}getTextValue(s){return this.getItemListService().getTextValue(s,this._textField)}setViewportMode(s){this.viewPort.mode$.next(s)}sort(s){this.sort$(s).pipe((0,k.q)(1),(0,ne.R)(this.destroyed$)).subscribe()}sort$(s){const e=s||this._textField;return this._sortInfos?e===this._sortInfos.name?this._sortInfos.order="ascending"===this._sortInfos.order?"descending":"ascending":(this._sortInfos.name=e,this._sortInfos.order="ascending"):this._sortInfos={name:e,order:"ascending"},this.getItemListService().sort$(this._sortInfos).pipe((0,k.q)(1),(0,v.w)(t=>this.calcViewList$().pipe((0,k.q)(1),(0,B.U)(()=>t))))}group$(s){return this.getItemListService().group$(s).pipe((0,v.w)(()=>this.calcViewList$().pipe((0,k.q)(1))))}ungroup$(s){return this.getItemListService().ungroup$(s).pipe((0,v.w)(()=>this.calcViewList$().pipe((0,k.q)(1))))}toggleAll$(s){return this.allCollapsed=void 0!==s?s:!this.allCollapsed,"disabled"===this.viewPort.mode?(0,ue.D)(this._itemList).pipe((0,O.h)(e=>{var t;return e.$items&&0===e.depth&&(null===(t=e.collapsible)||void 0===t||t)}),(0,v.w)((e,t)=>this.toggleCollapse$(t+this.vpStartRow,this.allCollapsed)),(0,ce.u)((e,t)=>(e.push(t),e),[])):this.getItemListService().toggleAll$(this.allCollapsed)}toggleCollapse$(s,e){return this.getItemListService().toggleCollapse$(s,e).pipe((0,v.w)(t=>this.calcViewList$().pipe((0,k.q)(1),(0,B.U)(()=>t))))}unselectAll$(){return this.getItemListService().unselectAll$()}refresh(){this.getItemListService().invalidateCache(),this.calcViewList$().pipe((0,k.q)(1),(0,ne.R)(this.destroyed$)).subscribe()}refreshViewPort(s,e){const t={};s&&(t.items=s instanceof Array?s:[s]),e&&(t.clearMeasuredSize=e),this.viewPort.refresh(t),this.changeDetectorRef.markForCheck()}clearViewPort(){this.viewPort.clear()}clearRowsHeight(){this.getItemListService().invalidateRowsHeightCache()}getParentListInfos$(s){return this.getItemListService().getParentListInfos$(s,this._multiSelect)}get listElementId(){return this._listElementId}get listElement(){return this._listElement||document.getElementById(this.listElementId)}set listElement(s){this._listElement=s}getViewPortRowHeight(){return this._viewPortRowHeight||_e.itemDefaultSize}getCurrentItemIndex(){return this._currentItemIndex}getCurrentItem(){return!this._currentItem&&this._currentItemIndex>=0&&(this._currentItem=this.getItemListService().getItemFromIndex(this._currentItemIndex)),this._currentItem}getItemHeight(s){return"disabled"===this.viewPort.mode?null:"fixed"===this.viewPort.mode?this.getViewPortRowHeight():"auto"===this.viewPort.mode?s.size||null:s.size&&s.size>_e.itemDefaultSize?s.size:this.getViewPortRowHeight()}getSelectedModels(){return this.getItemListService().getSelectedItems().map(s=>void 0!==s.model?s.model:s)}setSelectedModels(s){this.setSelectedItems(s&&this.mapToIItemBase(s,!0))}findNextMatch$(s,e){return this.ensureListCaches$().pipe((0,v.w)(()=>this.getItemListService().findNextMatch$(s,e)))}setViewPortRowHeight(s){this._viewPortRowHeight=(0,Y.su)(s),s&&this.viewPort.itemsSize$.next(this._viewPortRowHeight)}setItemListService(s){this.waiter$sub&&(this.waiter$sub.unsubscribe(),this.waiter$sub=void 0),this._itemListService=s,this._itemListService&&(this._itemListService.hideSelected=this._hideSelected,this._itemListService.childrenField=this._childrenField,this._itemListService.valueField=this._valueField,this.waiter$sub=this._itemListService.waiter$.pipe((0,ne.R)(this.destroyed$)).subscribe(e=>{this._waiter=e,this.changeDetectorRef.markForCheck()}))}setSortingService(s){!s&&!this._itemListService||this._itemListService.setSortingService(s)}setGroupingService(s){!s&&!this._itemListService||this._itemListService.setGroupingService(s)}setHintLabel(s){this._hintLabel=s}setNodataLabel(s){this._nodataLabel=s}setCurrentItemIndex(s){this._currentItemIndex=s,this._currentItem=null}setCurrentItem(s){this._currentItemIndex=s?this.getItemListService().getItemIndex(s):-1,this._currentItem=s}getItemIndex(s){return s&&this.getItemListService()?this.getItemListService().getItemIndex(s):-1}setMultiSelect(s){this._multiSelect=s}setItems$(s){return s instanceof Array||this.clearViewPort(),this.getItemListService().setItems$(s)}setModels$(s){let e;e=s instanceof Array?(0,_.of)(s):s;const t=null==e?void 0:e.pipe((0,B.U)(r=>this.mapToIItemBase(r)));return this.setItems$(t)}getItems(){return this.getItemListService().getItems()}drop$(){return this.setCurrentItemIndex(-1),this.getItemListService().drop$()}getViewList$(s,e){if("string"==typeof s&&(s||"").length<this._minSearchLength){const t={depthMax:0,visibleList:[]};return this.getItems()?(0,_.of)(t):this.setItems$([]).pipe((0,B.U)(()=>t))}return this.getItemListService().getViewList$(this._searchField||this._textField,s,e,this._ddStartIndex,this._ddTargetIndex,this._multiSelect)}selectRange$(s,e){const t=this.getItemListService();return this.ensureListCaches$().pipe((0,v.w)(()=>t.selectRange$(s,e)))}toggleSelect$(s,e){return this.getItemListService().toggleSelect$(s,e)}isCollapsible(s){var e;return(null==s?void 0:s.$items)&&(null===(e=s.collapsible)||void 0===e||e)}isSelectable(s){var e;return s&&(null===(e=s.selectable)||void 0===e||e)}setTextField(s){this._textField=s}getTextField(){return this._textField||Me.defaultTextField}setValueField(s){this._valueField=s,this._itemListService&&(this._itemListService.valueField=s)}getValueField(){return this._valueField||Me.defaultValueField}setSearchField(s){this._searchField=s}setMaxHeight(s){this._maxHeight="auto"===s?null:+s||null,this.viewPort.maxSize$.next(s)}getMaxHeight(){return this._maxHeight}calcDragTargetIndex$(s,e){return this.ensureListCaches$().pipe((0,v.w)(()=>this.getItemListService().calcDragTargetIndex$(s,e)))}getItemTreeInfo(s,e){const t=s.findIndex(m=>m===e);if(t<0)return null;const o=e.depth;let l=t;const c=[];if(void 0!==o)for(let m=t+1;m<s.length;m++){const S=s[m];if(S.depth<=o)break;c.push(S),l=m}return{children:c,item:e,lastIndex:l,startIndex:t}}calcViewList$(s){return this.getViewList$(s).pipe((0,x.b)(e=>{void 0!==e.depthMax&&(this._depthMax=e.depthMax),this.rowsCount=e.visibleList.length,this.viewPort.items$.next(e.visibleList)}))}ensureListCaches$(){return this._itemListService.hasCache?(0,_.of)(null):this.getViewList$()}ensureItemVisible(s){this.viewPort.ensureItem$.next(s)}mapToIItemBase(s,e){return(s||[]).map(r=>{const o={};o.model=r;const l=this.getTextField(),c=this.getValueField();"string"==typeof r?(o[l]=r,o[c]=r,this._searchField&&(o[this._searchField]=r)):(o[l]=this.getTextValue(r),o[c]=r[c],this._searchField&&(o[this._searchField]=r[this._searchField]));const m=this.getItemListService().childrenField;return r[m]?o[m]=this.mapToIItemBase(r[m],e):o.selected=e||void 0,o})}getVirtualSelectedEntities(s){const e=t=>{"string"==typeof t&&(t=t.trim());const r={},o=this.getTextField(),l=this.getValueField();return r[o]=t.toString(),r[l]=t,r};if(s){const t=typeof s;if("string"===t||"number"===t)s=this._multiSelect?s.split(",").map(e):e(s);else if(s instanceof Array&&s.length){const r=typeof s[0];("string"===r||"number"===r)&&(s=this._multiSelect?s.map(e):e(s[0]))}else s instanceof Array&&!this._multiSelect&&(s=null)}return s}}let Oe=(()=>{class p{}return p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=A.Xpm({type:p,selectors:[["deja-sort-indicator"]],inputs:{sortInfos:["sort-infos","sortInfos"]},decls:3,vars:1,template:function(e,t){1&e&&(A.TgZ(0,"span")(1,"mat-icon"),A._uU(2,"arrow_upward"),A.qZA()()),2&e&&A.uIk("sortorder",t.sortInfos?t.sortInfos.order:null)},dependencies:[ae.Hw],styles:['[_nghost-%COMP%]{display:block;position:relative;width:1rem}[_nghost-%COMP%]   [sortorder][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%);transition:all .5s linear;padding:.3rem;zoom:72%}[_nghost-%COMP%]   [sortorder="1"][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}']}),p})(),Te=(()=>{class p{}return p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=A.oAB({type:p}),p.\u0275inj=A.cJS({imports:[ae.Ps]}),p})(),Be=(()=>{class p{}return p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=A.oAB({type:p}),p.\u0275inj=A.cJS({imports:[g.ez]}),p})()},139:(me,se,a)=>{a.d(se,{Z:()=>N});const N=function g(K){return function(Q,_,v){for(var J=-1,x=Object(Q),X=v(Q),B=X.length;B--;){var ie=X[K?B:++J];if(!1===_(x[ie],ie,x))break}return Q}}()},1531:(me,se,a)=>{a.d(se,{Z:()=>xe});var g=a(9940);const Y=function A(te,q,k){switch(k.length){case 0:return te.call(q);case 1:return te.call(q,k[0]);case 2:return te.call(q,k[0],k[1]);case 3:return te.call(q,k[0],k[1],k[2])}return te.apply(q,k)};var N=Math.max;const v=function _(te){return function(){return te}};var J=a(2370),O=Date.now;const ue=function ne(te){var q=0,k=0;return function(){var ve=O(),ae=16-(ve-k);if(k=ve,ae>0){if(++q>=800)return arguments[0]}else q=0;return te.apply(void 0,arguments)}}(J.Z?function(te,q){return(0,J.Z)(te,"toString",{configurable:!0,enumerable:!1,value:v(q),writable:!0})}:g.Z),xe=function Ee(te,q){return ue(function K(te,q,k){return q=N(void 0===q?te.length-1:q,0),function(){for(var ve=arguments,ae=-1,ye=N(ve.length-q,0),_e=Array(ye);++ae<ye;)_e[ae]=ve[q+ae];ae=-1;for(var Se=Array(q+1);++ae<q;)Se[ae]=ve[ae];return Se[q]=k(_e),Y(te,this,Se)}}(te,q,g.Z),te+"")}},4810:(me,se,a)=>{a.d(se,{Z:()=>Q});var g=a(3093),A=a(8706),Y=a(6667),N=a(1999);const Q=function K(_,v,J){if(!(0,N.Z)(J))return!1;var x=typeof v;return!!("number"==x?(0,A.Z)(J)&&(0,Y.Z)(v,J.length):"string"==x&&v in J)&&(0,g.Z)(J[v],_)}},9940:(me,se,a)=>{a.d(se,{Z:()=>A});const A=function g(Y){return Y}},1677:(me,se,a)=>{a.d(se,{Z:()=>$i});var g=a(6623),A=a(8492),Y=a(4825),N=a(4177),K=A.Z?A.Z.isConcatSpreadable:void 0;const _=function Q(i){return(0,N.Z)(i)||(0,Y.Z)(i)||!!(K&&i&&i[K])},J=function v(i,n,h,u,I){var f=-1,y=i.length;for(h||(h=_),I||(I=[]);++f<y;){var F=i[f];n>0&&h(F)?n>1?v(F,n-1,h,u,I):(0,g.Z)(I,F):u||(I[I.length]=F)}return I},X=function x(i,n){for(var h=-1,u=null==i?0:i.length,I=Array(u);++h<u;)I[h]=n(i[h],h,i);return I};var B=a(7079),ie=a(214);const Le=function ne(i){return"symbol"==typeof i||(0,ie.Z)(i)&&"[object Symbol]"==(0,B.Z)(i)};var ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ue=/^\w*$/;const xe=function Ee(i,n){if((0,N.Z)(i))return!1;var h=typeof i;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=i&&!Le(i))||ue.test(i)||!ce.test(i)||null!=n&&i in Object(n)};var te=a(8915);function k(i,n){if("function"!=typeof i||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var h=function(){var u=arguments,I=n?n.apply(this,u):u[0],f=h.cache;if(f.has(I))return f.get(I);var y=i.apply(this,u);return h.cache=f.set(I,y)||f,y};return h.cache=new(k.Cache||te.Z),h}k.Cache=te.Z;const ve=k;var Se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,be=/\\(\\)?/g;const Re=function ye(i){var n=ve(i,function(u){return 500===h.size&&h.clear(),u}),h=n.cache;return n}(function(i){var n=[];return 46===i.charCodeAt(0)&&n.push(""),i.replace(Se,function(h,u,I,f){n.push(I?f.replace(be,"$1"):u||h)}),n});var Ze=A.Z?A.Z.prototype:void 0,Oe=Ze?Ze.toString:void 0;const Be=function Te(i){if("string"==typeof i)return i;if((0,N.Z)(i))return X(i,Te)+"";if(Le(i))return Oe?Oe.call(i):"";var n=i+"";return"0"==n&&1/i==-1/0?"-0":n},s=function p(i){return null==i?"":Be(i)},t=function e(i,n){return(0,N.Z)(i)?i:xe(i,n)?[i]:Re(s(i))},l=function o(i){if("string"==typeof i||Le(i))return i;var n=i+"";return"0"==n&&1/i==-1/0?"-0":n},m=function c(i,n){for(var h=0,u=(n=t(n,i)).length;null!=i&&h<u;)i=i[l(n[h++])];return h&&h==u?i:void 0};var S=a(5343);function le(i){var n=-1,h=null==i?0:i.length;for(this.__data__=new te.Z;++n<h;)this.add(i[n])}le.prototype.add=le.prototype.push=function R(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},le.prototype.has=function re(i){return this.__data__.has(i)};const Z=le,w=function d(i,n){for(var h=-1,u=null==i?0:i.length;++h<u;)if(n(i[h],h,i))return!0;return!1},b=function P(i,n){return i.has(n)},C=function U(i,n,h,u,I,f){var y=1&h,F=i.length,H=n.length;if(F!=H&&!(y&&H>F))return!1;var j=f.get(i),fe=f.get(n);if(j&&fe)return j==n&&fe==i;var de=-1,oe=!0,Ie=2&h?new Z:void 0;for(f.set(i,n),f.set(n,i);++de<F;){var ge=i[de],pe=n[de];if(u)var we=y?u(pe,ge,de,n,i,f):u(ge,pe,de,i,n,f);if(void 0!==we){if(we)continue;oe=!1;break}if(Ie){if(!w(n,function($e,Ce){if(!b(Ie,Ce)&&(ge===$e||I(ge,$e,h,u,f)))return Ie.push(Ce)})){oe=!1;break}}else if(ge!==pe&&!I(ge,pe,h,u,f)){oe=!1;break}}return f.delete(i),f.delete(n),oe};var T=a(1630),M=a(3093);const V=function W(i){var n=-1,h=Array(i.size);return i.forEach(function(u,I){h[++n]=[I,u]}),h},ee=function z(i){var n=-1,h=Array(i.size);return i.forEach(function(u){h[++n]=u}),h};var Ne=A.Z?A.Z.prototype:void 0,Ue=Ne?Ne.valueOf:void 0;var Ve=a(8501),_t=Object.prototype.hasOwnProperty;var He=a(4116),Ke=a(5202),St=a(7583),Ge="[object Arguments]",We="[object Array]",Ae="[object Object]",Xe=Object.prototype.hasOwnProperty;const Ct=function $t(i,n,h,u,I,f){var y=(0,N.Z)(i),F=(0,N.Z)(n),H=y?We:(0,He.Z)(i),j=F?We:(0,He.Z)(n),fe=(H=H==Ge?Ae:H)==Ae,de=(j=j==Ge?Ae:j)==Ae,oe=H==j;if(oe&&(0,Ke.Z)(i)){if(!(0,Ke.Z)(n))return!1;y=!0,fe=!1}if(oe&&!fe)return f||(f=new S.Z),y||(0,St.Z)(i)?C(i,n,h,u,I,f):function gt(i,n,h,u,I,f,y){switch(h){case"[object DataView]":if(i.byteLength!=n.byteLength||i.byteOffset!=n.byteOffset)return!1;i=i.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(i.byteLength!=n.byteLength||!f(new T.Z(i),new T.Z(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,M.Z)(+i,+n);case"[object Error]":return i.name==n.name&&i.message==n.message;case"[object RegExp]":case"[object String]":return i==n+"";case"[object Map]":var F=V;case"[object Set]":if(F||(F=ee),i.size!=n.size&&!(1&u))return!1;var j=y.get(i);if(j)return j==n;u|=2,y.set(i,n);var fe=C(F(i),F(n),u,I,f,y);return y.delete(i),fe;case"[object Symbol]":if(Ue)return Ue.call(i)==Ue.call(n)}return!1}(i,n,H,h,u,I,f);if(!(1&h)){var Ie=fe&&Xe.call(i,"__wrapped__"),ge=de&&Xe.call(n,"__wrapped__");if(Ie||ge){var pe=Ie?i.value():i,we=ge?n.value():n;return f||(f=new S.Z),I(pe,we,h,u,f)}}return!!oe&&(f||(f=new S.Z),function It(i,n,h,u,I,f){var y=1&h,F=(0,Ve.Z)(i),H=F.length;if(H!=(0,Ve.Z)(n).length&&!y)return!1;for(var de=H;de--;){var oe=F[de];if(!(y?oe in n:_t.call(n,oe)))return!1}var Ie=f.get(i),ge=f.get(n);if(Ie&&ge)return Ie==n&&ge==i;var pe=!0;f.set(i,n),f.set(n,i);for(var we=y;++de<H;){var $e=i[oe=F[de]],Ce=n[oe];if(u)var it=y?u(Ce,$e,oe,n,i,f):u($e,Ce,oe,i,n,f);if(!(void 0===it?$e===Ce||I($e,Ce,h,u,f):it)){pe=!1;break}we||(we="constructor"==oe)}if(pe&&!we){var De=i.constructor,Fe=n.constructor;De!=Fe&&"constructor"in i&&"constructor"in n&&!("function"==typeof De&&De instanceof De&&"function"==typeof Fe&&Fe instanceof Fe)&&(pe=!1)}return f.delete(i),f.delete(n),pe}(i,n,h,u,I,f))},Ye=function je(i,n,h,u,I){return i===n||(null==i||null==n||!(0,ie.Z)(i)&&!(0,ie.Z)(n)?i!=i&&n!=n:Ct(i,n,h,u,je,I))};var bt=a(1999);const Qe=function Ot(i){return i==i&&!(0,bt.Z)(i)};var Je=a(4157);const qe=function Dt(i,n){return function(h){return null!=h&&h[i]===n&&(void 0!==n||i in Object(h))}},Rt=function Ft(i){var n=function Tt(i){for(var n=(0,Je.Z)(i),h=n.length;h--;){var u=n[h],I=i[u];n[h]=[u,I,Qe(I)]}return n}(i);return 1==n.length&&n[0][2]?qe(n[0][0],n[0][1]):function(h){return h===i||function Mt(i,n,h,u){var I=h.length,f=I,y=!u;if(null==i)return!f;for(i=Object(i);I--;){var F=h[I];if(y&&F[2]?F[1]!==i[F[0]]:!(F[0]in i))return!1}for(;++I<f;){var H=(F=h[I])[0],j=i[H],fe=F[1];if(y&&F[2]){if(void 0===j&&!(H in i))return!1}else{var de=new S.Z;if(u)var oe=u(j,fe,H,i,n,de);if(!(void 0===oe?Ye(fe,j,3,u,de):oe))return!1}}return!0}(h,i,n)}},zt=function Ut(i,n){return null!=i&&n in Object(i)};var Nt=a(6667),Vt=a(8696);const Wt=function Gt(i,n){return null!=i&&function Ht(i,n,h){for(var u=-1,I=(n=t(n,i)).length,f=!1;++u<I;){var y=l(n[u]);if(!(f=null!=i&&h(i,y)))break;i=i[y]}return f||++u!=I?f:!!(I=null==i?0:i.length)&&(0,Vt.Z)(I)&&(0,Nt.Z)(y,I)&&((0,N.Z)(i)||(0,Y.Z)(i))}(i,n,zt)},Qt=function Yt(i,n){return xe(i)&&Qe(n)?qe(l(i),n):function(h){var u=function Zt(i,n,h){var u=null==i?void 0:m(i,n);return void 0===u?h:u}(h,i);return void 0===u&&u===n?Wt(h,i):Ye(n,u,3)}};var ke=a(9940);const ii=function ti(i){return xe(i)?function Jt(i){return function(n){return null==n?void 0:n[i]}}(l(i)):function kt(i){return function(n){return m(n,i)}}(i)},ni=function si(i){return"function"==typeof i?i:null==i?ke.Z:"object"==typeof i?(0,N.Z)(i)?Qt(i[0],i[1]):Rt(i):ii(i)};var ri=a(139);var et=a(8706);const ai=function hi(i,n){return function(h,u){if(null==h)return h;if(!(0,et.Z)(h))return i(h,u);for(var I=h.length,f=n?I:-1,y=Object(h);(n?f--:++f<I)&&!1!==u(y[f],f,y););return h}}(function oi(i,n){return i&&(0,ri.Z)(i,n,Je.Z)});var pi=a(6932);const mi=function vi(i,n){if(i!==n){var h=void 0!==i,u=null===i,I=i==i,f=Le(i),y=void 0!==n,F=null===n,H=n==n,j=Le(n);if(!F&&!j&&!f&&i>n||f&&y&&H&&!F&&!j||u&&y&&H||!h&&H||!I)return 1;if(!u&&!f&&!j&&i<n||j&&h&&I&&!u&&!f||F&&h&&I||!y&&I||!H)return-1}return 0},Si=function Li(i,n,h){n=n.length?X(n,function(f){return(0,N.Z)(f)?function(y){return m(y,1===f.length?f[0]:f)}:f}):[ke.Z];var u=-1;n=X(n,(0,pi.Z)(ni));var I=function ci(i,n){var h=-1,u=(0,et.Z)(i)?Array(i.length):[];return ai(i,function(I,f,y){u[++h]=n(I,f,y)}),u}(i,function(f,y,F){return{criteria:X(n,function(j){return j(f)}),index:++u,value:f}});return function fi(i,n){var h=i.length;for(i.sort(n);h--;)i[h]=i[h].value;return i}(I,function(f,y){return function _i(i,n,h){for(var u=-1,I=i.criteria,f=n.criteria,y=I.length,F=h.length;++u<y;){var H=mi(I[u],f[u]);if(H)return u>=F?H:H*("desc"==h[u]?-1:1)}return i.index-n.index}(f,y,h)})};var wi=a(1531),tt=a(4810);const $i=(0,wi.Z)(function(i,n){if(null==i)return[];var h=n.length;return h>1&&(0,tt.Z)(i,n[0],n[1])?n=[]:h>2&&(0,tt.Z)(n[0],n[1],n[2])&&(n=[n[0]]),Si(i,J(n,1),[])})}}]);