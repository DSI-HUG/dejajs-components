(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[623],{66623:function(e,t,n){"use strict";n.r(t),n.d(t,{DejaCircularPickerDemoModule:function(){return z}});var i=n(61511),a=n(16073),l=n(27439),s=n(55109),r=n(33104),o=n(31572),c=n(19861),u=n(27312),h=n(87254),g=n(55959),d=n(31906),p=n(43835),m=n(47701),f=n(44689),b=n(90611),v=n(66599),C=n(25416),_=n(96673),x=n(48569);class T{constructor(e,t){this.period=e,this.scheduler=t}call(e,t){return t.subscribe(new w(e,this.period,this.scheduler))}}class w extends _.L{constructor(e,t,n){super(e),this.period=t,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(M,t,{subscriber:this,period:t}))}_next(e){this.lastValue=e,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function M(e){let{subscriber:t,period:n}=e;t.notifyNext(),this.schedule(e,n)}const O=["labelTemplate"],k=["cursorTemplate"],P=["picker"];function Z(e,t){}const A=function(e){return{$implicit:e}};function I(e,t){if(1&e&&o.YNc(0,Z,0,0,"ng-template",9),2&e){const e=o.oxw(2);o.Q6J("ngTemplateOutlet",e.cursorTemplate)("ngTemplateOutletContext",o.VKq(2,A,e.cursor.value))}}function V(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){const e=o.oxw(2);o.xp6(1),o.Oqu(e.cursor.value)}}function D(e,t){if(1&e&&(o.TgZ(0,"div",6),o.YNc(1,I,1,4,void 0,7),o.YNc(2,V,2,1,"ng-template",null,8,o.W1O),o.qZA()),2&e){const e=o.MAs(3),t=o.oxw();o.Udp("top",t.cursor.position.top,"px")("left",t.cursor.position.left,"px"),o.xp6(1),o.Q6J("ngIf",t.cursorTemplate)("ngIfElse",e)}}function q(e,t){}const y=function(e,t){return{$implicit:e,index:t}};function j(e,t){if(1&e&&o.YNc(0,q,0,0,"ng-template",9),2&e){const e=o.oxw(),t=e.$implicit,n=e.index,i=o.oxw();o.Q6J("ngTemplateOutlet",i.labelTemplate)("ngTemplateOutletContext",o.WLB(2,y,t.value,n))}}function L(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){const e=o.oxw().$implicit;o.xp6(1),o.Oqu(e.value)}}function J(e,t){if(1&e&&(o.TgZ(0,"div",10),o.YNc(1,j,1,5,void 0,11),o.YNc(2,L,2,1,"span",11),o.qZA()),2&e){const e=t.$implicit,n=o.oxw();o.Udp("top",e.position.top,"px")("left",e.position.left,"px"),o.uIk("value",e.value),o.xp6(1),o.Q6J("ngIf",n.labelTemplate),o.xp6(1),o.Q6J("ngIf",!n.labelTemplate)}}const N=function(e){return{transform:e}};var Q=function(e){return e[e.clockwise=-1]="clockwise",e[e.counterClockwise=1]="counterClockwise",e}({});let Y=(()=>{class e extends u.yl{constructor(e,t,n){super(),this.changeDetectorRef=t,this.control=n,this.clockwiseFactor=Q.clockwise,this.fullDiameter=310,this.labelsDiameter=43,this._outerLabels=!1,this._disabled=!1,this.twoPi=2*Math.PI,this._radius=0,this.configs=[],this._circularValues=[],this.onChangeCallback=e=>{},this.onTouchedCallback=()=>{};const i=e.nativeElement;this.control&&(this.control.valueAccessor=this);const a=(0,h.R)(i.ownerDocument,"mouseup");(0,h.R)(i,"mousedown").pipe((0,p.h)(e=>!this.disabled&&1===e.buttons),(0,m.b)(100),(0,p.h)(e=>{this.clickedTime=Date.now();const t=this.getHtmlElement(e.target,"cursor"),n=this.getHtmlElement(e.target,"value");return t?this.cursorElement=t:n&&(this.value=+n.getAttribute("value")),!!t||!!n}),(0,f.w)(()=>{const e=new g.xQ;i.ownerDocument.body.className.match(/noselect/)||i.ownerDocument.body.classList.add("noselect");const t=(0,d.T)(e,a).pipe((0,b.q)(1),(0,v.b)(()=>{delete this.cursorElement,delete this.clickedTime,i.ownerDocument.body.className=i.ownerDocument.body.className.replace(/\bnoselect\b/,"")})),n=this.picker.nativeElement.getBoundingClientRect();return(0,h.R)(i.ownerDocument,"mousemove").pipe((0,C.R)(t),function(e,t=x.P){return n=>n.lift(new T(e,t))}(10),(0,v.b)(t=>{if(1!==t.buttons)return void e.next();let i=u.Cd.fromOuterRect(n),a=!1;if(this.outerLabels){i=i.inflate(this.labelsDiameter);for(const e of this.configs){if(a=i.containsPoint(new u.Ly(t.pageX,t.pageY)),a){this.selectedConfig=e;break}i=i.inflate(this.labelsDiameter)}}else{i=i.inflate(-this.labelsDiameter*(this.configs.length-1));for(let e=this.configs.length;e>0;e--){if(a=i.containsPoint(new u.Ly(t.pageX,t.pageY)),a){this.selectedConfig=this.configs[e-1];break}i=i.inflate(this.labelsDiameter)}}const l=this.pointToValue(t.pageX-n.left,t.pageY-n.top,this.selectedConfig);l!==this.value&&(this.value=l)}))}),(0,C.R)(this.destroyed$)).subscribe()}set outerLabels(e){this._outerLabels=(0,c.Ig)(e)||null}get outerLabels(){return this._outerLabels}set disabled(e){this._disabled=(0,c.Ig)(e),this.changeDetectorRef.markForCheck()}get disabled(){return this._disabled}get cursorHand(){return this._cursorHand}get cursor(){return this._cursor}get radius(){return this._radius}get circularValues(){return this._circularValues}ngOnInit(){this._radius=(this.fullDiameter-this.labelsDiameter)/2,this.ranges.forEach(e=>{e.interval=e.interval?e.interval:1,e.labelInterval=e.labelInterval?e.labelInterval:1,e.beginOffset=e.beginOffset?e.beginOffset:Math.PI/2,this.configs.push({range:e,stepAngle:this.twoPi/Math.floor((e.max-e.min+1)/e.interval),steps:Math.floor((e.max-e.min+1)/e.interval)})}),this.selectedConfig=this.configs[0],this.bind(),this.updateCursor()}set value(e){e!==this._value&&(this.writeValue(e),this.onChangeCallback(e))}get value(){return this._value}writeValue(e){e!==this._value&&(this._value=e,this.updateCursor())}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}pointToValue(e,t,n){const i=this.pointToAngle(e-this._radius,t-this._radius,n);let a=n.steps-Math.ceil(i/n.stepAngle);return a<0&&(a=n.steps),n.range.min+a*n.range.interval}valueToPoint(e,t,n){const i=new u.Ly,a=this.valueToAngle(e,n);return i.left=this._radius+(this._radius+t)*Math.cos(a),i.top=this._radius-(this._radius+t)*Math.sin(a),i}pointToAngle(e,t,n){return(-Math.atan2(t,e)-n.range.beginOffset-n.stepAngle/2+this.twoPi)%this.twoPi}valueToAngle(e,t){return Math.floor((e-t.range.min)/t.range.interval)*t.stepAngle*this.clockwiseFactor+t.range.beginOffset}bind(){this._circularValues=[],this.configs.forEach((e,t)=>{for(let n=e.range.min;n<=e.range.max;n+=e.range.labelInterval*e.range.interval){const i={value:n},a=this.labelsDiameter/2,l=this.labelsDiameter*t,s=this.valueToPoint(n,this.outerLabels?a+l:-a-l,e);i.position=new u.Ly(s.left-a,s.top-a),this._circularValues.push(i)}})}updateCursor(){if(!this._circularValues||!this._circularValues.length)return;null==this._value&&(this._value=this._circularValues[0].value),this.selectedConfig=this.configs.find(e=>this._value>=e.range.min&&this._value<=e.range.max),this.selectedConfig||(this.selectedConfig=this.configs[0]);const e=this.configs.indexOf(this.selectedConfig),t=this.labelsDiameter/2,n=this.valueToPoint(this._value,this.outerLabels?t+this.labelsDiameter*e:-t-this.labelsDiameter*e,this.selectedConfig);this._cursor={position:new u.Ly(n.left-t,n.top-t),value:this._value},this._cursorHand={angle:this.valueToAngle(this._value,this.selectedConfig),width:this.outerLabels?this._radius+this.labelsDiameter*e:this._radius-this.labelsDiameter-this.labelsDiameter*e},this.changeDetectorRef.markForCheck()}getHtmlElement(e,t){let n=e;for(;n&&!n.hasAttribute(t);)n=n.parentElement;if(n)return n}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(a.a5,10))},e.\u0275cmp=o.Xpm({type:e,selectors:[["deja-circular-picker"]],contentQueries:function(e,t,n){if(1&e&&(o.Suo(n,O,5),o.Suo(n,k,5)),2&e){let e;o.iGM(e=o.CRH())&&(t.labelTemplate=e.first),o.iGM(e=o.CRH())&&(t.cursorTemplate=e.first)}},viewQuery:function(e,t){if(1&e&&o.Gf(P,7),2&e){let e;o.iGM(e=o.CRH())&&(t.picker=e.first)}},inputs:{clockwiseFactor:"clockwiseFactor",fullDiameter:"fullDiameter",labelsDiameter:"labelsDiameter",ranges:"ranges",outerLabels:"outerLabels",disabled:"disabled"},features:[o.qOj],decls:6,vars:13,consts:[[1,"circular-picker"],["picker",""],[1,"cursor-container"],["class","cursor","cursor","",3,"top","left",4,"ngIf"],[1,"cursorHand",3,"ngStyle"],["class","value",3,"top","left",4,"ngFor","ngForOf"],["cursor","",1,"cursor"],[4,"ngIf","ngIfElse"],["valueTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"value"],[4,"ngIf"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0,1),o.TgZ(2,"div",2),o.YNc(3,D,4,6,"div",3),o._UZ(4,"div",4),o.qZA(),o.YNc(5,J,3,7,"div",5),o.qZA()),2&e&&(o.Udp("width",2*t.radius,"px")("height",2*t.radius,"px"),o.ekj("disabled",t.disabled),o.xp6(3),o.Q6J("ngIf",void 0!==t.cursor.value),o.xp6(1),o.Udp("width",t.cursorHand.width+2,"px"),o.Q6J("ngStyle",o.VKq(11,N,"translateY(-50%) rotate("+-t.cursorHand.angle+"rad)")),o.xp6(1),o.Q6J("ngForOf",t.circularValues))},directives:[i.O5,i.PC,i.sg,i.tP],styles:["[_nghost-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]{border-radius:50%;position:relative}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{border-radius:50%;cursor:pointer;height:43px;line-height:43px;position:absolute;text-align:center;width:43px}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .cursor-container[_ngcontent-%COMP%]   .cursor[_ngcontent-%COMP%]{border-radius:50%;cursor:pointer;height:43px;line-height:43px;position:absolute;text-align:center;width:43px;z-index:5}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .cursor-container[_ngcontent-%COMP%]   .cursorHand[_ngcontent-%COMP%]{border-radius:2px;height:4px;left:50%;position:absolute;top:50%;transform-origin:left center}"],changeDetection:0}),e})(),E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,a.u5]]}),e})();var U=n(7631),H=n(71398),R=n(50246);function F(e,t){1&e&&(o.TgZ(0,"mat-card",5),o._UZ(1,"deja-markdown",6),o.qZA()),2&e&&(o.xp6(1),o.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/circular-picker/readme.md"))}function S(e,t){if(1&e&&o._uU(0),2&e){const e=t.$implicit,n=o.oxw(2);o.hij(" ",n.getLabelForValue(e)," ")}}function $(e,t){if(1&e&&o._uU(0),2&e){const e=t.$implicit;o.hij(" ",24===e?0:e," ")}}function B(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"mat-card",7),o.TgZ(2,"mat-toolbar",8),o._uU(3,"Complex Circular-picker width custom labels"),o.qZA(),o.TgZ(4,"mat-card-content",9),o._UZ(5,"deja-circular-picker",10),o.TgZ(6,"deja-circular-picker",11),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().sm=t})("ngModelChange",function(t){return o.CHM(e),o.oxw().range42Changed(t)}),o.YNc(7,S,1,1,"ng-template",null,12,o.W1O),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"mat-card",7),o.TgZ(11,"mat-toolbar",8),o._uU(12,"Circular-picker demo simple - Range 1 to 20 (inside and outside labels)"),o.qZA(),o.TgZ(13,"mat-card-content",13),o.TgZ(14,"div"),o._UZ(15,"deja-circular-picker",14),o.qZA(),o.TgZ(16,"div"),o._UZ(17,"deja-circular-picker",15),o.qZA(),o.qZA(),o.qZA(),o.TgZ(18,"mat-card",7),o.TgZ(19,"mat-toolbar",8),o._uU(20,"Circular-picker demo multiple range (inside labels)"),o.qZA(),o.TgZ(21,"mat-card-content",13),o.TgZ(22,"deja-circular-picker",16),o.NdJ("ngModelChange",function(t){return o.CHM(e),o.oxw().sms=t}),o.YNc(23,$,1,1,"ng-template",null,12,o.W1O),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=o.oxw();o.xp6(5),o.Q6J("ranges",e.ranges41)("outerLabels",!0),o.xp6(1),o.Q6J("ngModel",e.sm)("ranges",e.ranges42),o.xp6(9),o.Q6J("ranges",e.ranges1),o.xp6(2),o.Q6J("ranges",e.ranges2)("outerLabels",!0),o.xp6(5),o.Q6J("ngModel",e.sms)("ranges",e.ranges3)}}const X=H.Bz.forChild([{path:"",component:(()=>{class e{constructor(){this.tabIndex=1,this.sm=3,this.sms=10,this.ranges1=[{min:1,max:20,labelInterval:2}],this.ranges2=[{min:1,max:20}],this.ranges3=[{min:1,max:12,beginOffset:Math.PI/3},{min:13,max:24,beginOffset:Math.PI/3}],this.ranges41=[{labelInterval:5,max:59,min:0}],this.ranges42=[{max:11,min:0},{max:111,min:100}],this.myModel=[{value:0,label:"T0"},{value:1,label:"T1"},{value:2,label:"T2"},{value:3,label:"T3"},{value:4,label:"T4"},{value:5,label:"T5"},{value:6,label:"T6"},{value:7,label:"T7"},{value:8,label:"T8"},{value:9,label:"T9"},{value:10,label:"T10"},{value:11,label:"T11"},{value:100,label:"T-1",realValue:-1},{value:101,label:"T-2",realValue:-2},{value:102,label:"T-3",realValue:-3},{value:103,label:"T-4",realValue:-4},{value:104,label:"T-5",realValue:-5},{value:105,label:"T-6",realValue:-6},{value:106,label:"T-7",realValue:-7},{value:107,label:"T-8",realValue:-8},{value:108,label:"T-9",realValue:-9},{value:109,label:"T-10",realValue:-10},{value:110,label:"T-11",realValue:-11},{value:111,label:"T-12",realValue:-12}]}range42Changed(e){console.log(`Selected model ${this.getLabelForValue(e)}`)}getLabelForValue(e){const t=this.myModel.find(t=>t.value===e);return(null==t?void 0:t.label)||(null==e?void 0:e.toString())||""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["deja-circular-picker-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],[1,"demo-card"],["color","primary"],["id","complex-wrapper",1,"listContainer"],["id","outside",3,"ranges","outerLabels"],["id","inside",3,"ngModel","ranges","ngModelChange"],["cursorTemplate","","labelTemplate",""],[1,"listContainer"],[3,"ranges"],[3,"ranges","outerLabels"],[3,"ngModel","ranges","ngModelChange"]],template:function(e,t){1&e&&(o.TgZ(0,"mat-tab-group",0),o.NdJ("selectedTabChange",function(e){return t.tabIndex=e.index}),o._UZ(1,"mat-tab",1),o._UZ(2,"mat-tab",2),o.qZA(),o.YNc(3,F,2,1,"mat-card",3),o.YNc(4,B,26,9,"div",4)),2&e&&(o.Q6J("selectedIndex",t.tabIndex),o.xp6(3),o.Q6J("ngIf",0===t.tabIndex),o.xp6(1),o.Q6J("ngIf",1===t.tabIndex))},directives:[s.SP,s.uX,i.O5,l.a8,R.F,r.Ye,l.dn,Y,a.JJ,a.On],styles:["[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px;padding:2rem 0}[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   deja-circular-picker[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]{position:relative;height:333px}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #inside[_ngcontent-%COMP%], [_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #outside[_ngcontent-%COMP%]{left:50%;position:absolute!important;top:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #inside[_ngcontent-%COMP%]   .circular-picker[_ngcontent-%COMP%]{background:transparent;border:none}"]}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]);let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[],imports:[[i.ez,a.u5,l.QW,s.Nh,r.g0,E,U.O,X]]}),e})()}}]);