(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[405],{7405:function(e,t,i){"use strict";i.r(t),i.d(t,{DejaContentEditableDemoModule:function(){return U}});var n=i(61511),s=i(16073),d=i(27439),a=i(29236),o=i(55109),l=i(33104),r=i(31572),c=i(19861),u=i(27312),h=i(78512),m=i(87254),b=i(81110),p=i(25416),g=i(98720),f=i(79996),_=i(90611),w=i(43835),x=i(44689);let C=(()=>{class e extends u.yl{constructor(e,t){super(),this.control=t,this._disabled=null,this._inEdition=!1,this._editMode=!1,this._mandatory=!1,this._multiline=!1,this.edit$=new h.X([!1,!1]),this.onTouchedCallback=()=>{},this.onChangeCallback=e=>{},this.control&&(this.control.valueAccessor=this),this.element=e.nativeElement,(0,m.R)(this.element,"mousedown").pipe((0,p.R)(this.destroyed$)).subscribe(e=>this.inEdition||this.disabled?(e.cancelBubble=!0,!1):this.editMode?(this.edit$.next([!0,!0]),e.cancelBubble=!0,!1):void 0);const i=this.edit$.pipe((0,g.x)(),(0,f.U)(([e,t])=>((null==t||t)&&(0,b.H)(10).pipe((0,_.q)(1),(0,p.R)(this.destroyed$)).subscribe(()=>{this.selectAll(),this.focus()}),this._inEdition=e,e?this.element.setAttribute("contenteditable","true"):this.element.removeAttribute("contenteditable"),this.refreshView(),e))),n=i.pipe((0,w.h)(e=>!e)),s=(0,m.R)(this.element.ownerDocument,"mousedown").pipe((0,w.h)(e=>!this.isChildElement(e.target)),(0,p.R)(n));i.pipe((0,w.h)(e=>e),(0,x.w)(()=>s),(0,p.R)(this.destroyed$)).subscribe(()=>{const e=this.element.innerText.replace(/\n/g,"<br />").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");this.onTouchedCallback(),!e&&this.mandatory||(this.value=e),this.inEdition=!1});const d=(0,m.R)(this.element,"keydown").pipe((0,p.R)(n));i.pipe((0,w.h)(e=>e),(0,x.w)(()=>d),(0,p.R)(this.destroyed$)).subscribe(e=>{if(e.cancelBubble=!0,e.stopPropagation(),e.code!==u.mW.Enter||this.multiline)e.code===u.mW.Escape&&(this.inEdition=!1);else{const e=this.element.innerText;!e&&this.mandatory||(this.value=e),this.inEdition=!1}return!1})}set mandatory(e){this._mandatory=(0,c.Ig)(e)}get mandatory(){return this._mandatory}set multiline(e){this._multiline=(0,c.Ig)(e)}get multiline(){return this._multiline}set disabled(e){const t=(0,c.Ig)(e);this._disabled=t||null,this.disabled&&this.edit$.next([!1,!1])}get disabled(){var e;return(null===(e=this.control)||void 0===e?void 0:e.disabled)||this._disabled}set editMode(e){this._editMode=(0,c.Ig)(e)}get editMode(){return this._editMode}set inEdition(e){this.disabled||this.edit$.next([(0,c.Ig)(e),!1])}get inEdition(){return this._inEdition}set value(e){e!==this.model&&(this.writeValue(e),this.onChangeCallback(e))}get value(){return this.model}writeValue(e){this.model=e,this.refreshView()}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngOnInit(){this.model=this.element.innerHTML}focus(){this.element.focus()}selectAll(){const e=document.createRange();e.selectNodeContents(this.element);const t=window.getSelection();t.removeAllRanges(),t.addRange(e)}edit(e){this.edit$.next([!this.disabled,e])}isChildElement(e){let t=e;for(;t&&t!==this.element;)t=t.parentElement;return t===this.element}refreshView(){this.model&&(this.inEdition?this.element.innerText=this.model.replace(/<br\s*[/]?>/gi,"\n"):this.element.innerHTML=this.model.replace(/\n/g,"<br />"))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(s.a5,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","deja-editable",""]],hostVars:1,hostBindings:function(e,t){2&e&&r.uIk("disabled",t._disabled)},inputs:{mandatory:"mandatory",multiline:"multiline",disabled:"disabled",editMode:["deja-editable","editMode"],inEdition:"inEdition"},features:[r.qOj]}),e})(),E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[n.ez,s.u5]]}),e})();var Z=i(7631),M=i(71398),v=i(50246);function T(e,t){1&e&&(r.TgZ(0,"mat-card",4),r._UZ(1,"deja-markdown",5),r.qZA()),2&e&&(r.xp6(1),r.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/content-editable/readme.md"))}function y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-card",4),r.TgZ(1,"mat-toolbar",6),r._uU(2,"Content Editable Demo"),r.qZA(),r.TgZ(3,"mat-card-content"),r.TgZ(4,"mat-checkbox",7),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().designMode=t}),r._uU(5,"Design Mode\xa0"),r.qZA(),r.TgZ(6,"mat-checkbox",7),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().disabled=t}),r._uU(7,"Disabled"),r.qZA(),r.qZA(),r.TgZ(8,"mat-card-content",8),r.TgZ(9,"div",9),r._uU(10," Lorem ipsum dolor sit amet, consectetur adipiscing elit. "),r._UZ(11,"br"),r._uU(12," Mauris auctor sit amet odio et aliquet. Curabitur auctor eleifend mattis. "),r._UZ(13,"br"),r._uU(14," Nullam sit amet quam tellus. Ut mattis tellus sed erat ultricies ornare. "),r._UZ(15,"br"),r._uU(16," Nulla dictum nisi eu tortor lacinia porttitor. Donec eu arcu et enim cursus viverra. "),r._UZ(17,"br"),r._uU(18," Praesent pulvinar dui nisi, a tincidunt arcu finibus sed. "),r._UZ(19,"br"),r.TgZ(20,"a",10),r._uU(21,"Google"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(4),r.Q6J("ngModel",e.designMode),r.xp6(2),r.Q6J("ngModel",e.disabled),r.xp6(3),r.Q6J("deja-editable",e.designMode)("disabled",e.disabled)}}const A=M.Bz.forChild([{path:"",component:(()=>{class e{constructor(){this.tabIndex=1,this.designMode=!1,this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["deja-content-editable-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],["color","primary"],["color","primary",3,"ngModel","ngModelChange"],["id","contentEditableContainer"],["multiline","",3,"deja-editable","disabled"],["href","http://www.google.ch"]],template:function(e,t){1&e&&(r.TgZ(0,"mat-tab-group",0),r.NdJ("selectedTabChange",function(e){return t.tabIndex=e.index}),r._UZ(1,"mat-tab",1),r._UZ(2,"mat-tab",2),r.qZA(),r.YNc(3,T,2,1,"mat-card",3),r.YNc(4,y,22,4,"mat-card",3)),2&e&&(r.Q6J("selectedIndex",t.tabIndex),r.xp6(3),r.Q6J("ngIf",0===t.tabIndex),r.xp6(1),r.Q6J("ngIf",1===t.tabIndex))},directives:[o.SP,o.uX,n.O5,d.a8,v.F,l.Ye,d.dn,a.oG,s.JJ,s.On,C],encapsulation:2}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]);let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[],imports:[[n.ez,s.u5,d.QW,a.p9,o.Nh,l.g0,E,Z.O,A]]}),e})()}}]);