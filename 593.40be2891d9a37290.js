"use strict";(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[593],{5933:(O,C,s)=>{s.d(C,{b:()=>g});var h=s(9947),p=s(2254),u=s(5373),n=s(7613),o=s(7867);function g(...m){return function(...m){const b=(0,n.yG)(m),j=(0,n._6)(m,1/0);return m=(0,p.k)(m),(0,h.e)((T,P)=>{(0,u.J)(j)((0,o.D)([T,...m],b)).subscribe(P)})}(...m)}},2254:(O,C,s)=>{s.d(C,{k:()=>p});const{isArray:h}=Array;function p(u){return 1===u.length&&h(u[0])?u[0]:u}},5576:(O,C,s)=>{s.d(C,{L:()=>h});class h{constructor(u,n){this.left=u||0,this.top=n||0}static equals(u,n){return u.left===n.left&&u.top===n.top}offset(u,n){return new h(this.left+u,this.top+n)}clone(){return new h(this.left,this.top)}constrain(u,n,o,t){return new h(Math.min(Math.max(u,this.left),n),Math.min(Math.max(o,this.top),t))}around(u,n,o,t){return Math.abs(this.left-u)<=o&&Math.abs(this.top-n)<=(t||o)}}},1850:(O,C,s)=>{s.d(C,{U:()=>p});var h=s(5576);class p{constructor(n,o,t,g){if("number"==typeof n)this.left=n||0,this.top=o||0,this.width=t||0,this.height=g||0;else{const m=n||{};this.left=m.left||0,this.top=m.top||0,this.width=void 0!==m.right?m.right-this.left:m.width||0,this.height=void 0!==m.bottom?m.bottom-this.top:m.height||0}}static equals(n,o){return n&&o&&n.left===o.left&&n.top===o.top&&n.width===o.width&&n.height===o.height}static union(n,o){return p.fromLTRB(Math.min(n.left,o.left),Math.min(n.top,o.top),Math.max(n.left+n.width,o.left+o.width),Math.max(n.top+n.height,o.top+o.height))}static overlapInfos(n,o){const t=Math.max(0,Math.min(n.right,o.right)-Math.max(n.left,o.left)),g=Math.max(0,Math.min(n.bottom,o.bottom)-Math.max(n.top,o.top));return{area:t*g,width:t,height:g,direction:t>g?"horizontal":"vertical"}}static fromLTRB(n,o,t,g){return new p(n,o,t-n,g-o)}static fromPoints(n,o){return p.fromLTRB(Math.min(n.left,o.left),Math.min(n.top,o.top),Math.max(n.left,o.left),Math.max(n.top,o.top))}set right(n){this.width=n-this.left}get right(){return this.left+this.width}set bottom(n){this.height=n-this.top}get bottom(){return this.top+this.height}get position(){return new h.L(this.left,this.top)}offset(n,o){return new p(this.left+n,this.top+o,this.width,this.height)}adjacent(n){return n.left<=this.right&&n.right>=this.left&&n.top<=this.bottom&&n.bottom>=this.top}contains(n){return n.left>=this.left&&n.right<=this.right&&n.top>=this.top&&n.bottom<=this.bottom}containsPoint(n){return n.left>=this.left&&n.left<=this.right&&n.top>=this.top&&n.top<=this.bottom}intersectWith(n){return n.left<this.right&&n.right>this.left&&n.top<this.bottom&&n.bottom>this.top}isEmpty(){return!this.width||!this.height}clone(){return new p(this.left,this.top,this.width,this.height)}toClientRect(){return{left:this.left,top:this.top,bottom:this.bottom,right:this.right,width:this.width,height:this.height}}toRectStruct(){return this.toClientRect()}}},9593:(O,C,s)=>{s.r(C),s.d(C,{DejaCircularPickerDemoModule:()=>Tt});var h=s(6019),p=s(9133),u=s(888),n=s(2605),o=s(8643),t=s(3668),g=s(348),m=s(4986),b=s(5576),j=s(1850);class T{constructor(l,e){this.center=l,this.radius=e}static fromOuterRect(l,e,i,r){if("object"==typeof l){const x=l;l=x.left,e=x.top,i=x.width,r=x.height}const c=Math.min(i,r)/2,d=new b.L(+l+i/2,e+r/2);return new T(d,c)}static equals(l,e){return!l==!e&&b.L.equals(l.center,e.center)&&l.radius===e.radius}get outerRect(){return j.U.fromLTRB(this.center.left-this.radius,this.center.top-this.radius,this.center.left+this.radius,this.center.top+this.radius)}contains(l){return this.outerRect.contains(l.outerRect)}containsPoint(l){const e=Math.abs(l.left-this.center.left),i=Math.abs(l.top-this.center.top);return e*e+i*i<=this.radius*this.radius}clone(){return new T(this.center,this.radius)}inflate(l){return new T(this.center,this.radius+l)}}var P=s(5077),y=s(461),J=s(9463),U=s(3067),Q=s(273),N=s(5933),Y=s(9468),L=s(7384),V=s(6263),S=s(2210),F=s(9947),H=s(6921),R=s(8889),B=s(6474);const z=["labelTemplate"],X=["cursorTemplate"],G=["picker"];function K(a,l){}const q=function(a){return{$implicit:a}};function tt(a,l){if(1&a&&t.YNc(0,K,0,0,"ng-template",9),2&a){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.cursorTemplate)("ngTemplateOutletContext",t.VKq(2,q,e.cursor.value))}}function et(a,l){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.cursor.value)}}function it(a,l){if(1&a&&(t.TgZ(0,"div",6),t.YNc(1,tt,1,4,void 0,7),t.YNc(2,et,2,1,"ng-template",null,8,t.W1O),t.qZA()),2&a){const e=t.MAs(3),i=t.oxw();t.Udp("top",i.cursor.position.top,"px")("left",i.cursor.position.left,"px"),t.xp6(1),t.Q6J("ngIf",i.cursorTemplate)("ngIfElse",e)}}function nt(a,l){}const at=function(a,l){return{$implicit:a,index:l}};function rt(a,l){if(1&a&&t.YNc(0,nt,0,0,"ng-template",9),2&a){const e=t.oxw(),i=e.$implicit,r=e.index,c=t.oxw();t.Q6J("ngTemplateOutlet",c.labelTemplate)("ngTemplateOutletContext",t.WLB(2,at,i.value,r))}}function lt(a,l){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.value)}}function st(a,l){if(1&a&&(t.TgZ(0,"div",10),t.YNc(1,rt,1,5,void 0,11),t.YNc(2,lt,2,1,"span",11),t.qZA()),2&a){const e=l.$implicit,i=t.oxw();t.Udp("top",e.position.top,"px")("left",e.position.left,"px"),t.uIk("value",e.value),t.xp6(1),t.Q6J("ngIf",i.labelTemplate),t.xp6(1),t.Q6J("ngIf",!i.labelTemplate)}}const ot=function(a){return{transform:a}};var _=(()=>{return(a=_||(_={}))[a.clockwise=-1]="clockwise",a[a.counterClockwise=1]="counterClockwise",_;var a})();let ct=(()=>{class a extends m.yl{constructor(e,i,r){super(),this.changeDetectorRef=i,this.control=r,this.clockwiseFactor=_.clockwise,this.fullDiameter=310,this.labelsDiameter=43,this._outerLabels=!1,this._disabled=!1,this.twoPi=2*Math.PI,this._radius=0,this.configs=[],this._circularValues=[],this.onChangeCallback=f=>{},this.onTouchedCallback=()=>{};const c=e.nativeElement;this.control&&(this.control.valueAccessor=this);const d=(0,P.R)(c.ownerDocument,"mouseup");(0,P.R)(c,"mousedown").pipe((0,y.h)(f=>!this.disabled&&1===f.buttons),(0,J.b)(100),(0,y.h)(f=>{this.clickedTime=Date.now();const D=this.getHtmlElement(f.target,"cursor"),w=this.getHtmlElement(f.target,"value");return D?this.cursorElement=D:w&&(this.value=+w.getAttribute("value")),!!D||!!w}),(0,U.w)(()=>{const f=new Q.x;c.ownerDocument.body.className.match(/noselect/)||c.ownerDocument.body.classList.add("noselect");const D=f.pipe((0,N.b)(d),(0,Y.q)(1),(0,L.b)(()=>{delete this.cursorElement,delete this.clickedTime,c.ownerDocument.body.className=c.ownerDocument.body.className.replace(/\bnoselect\b/,"")})),Z=this.picker.nativeElement.getBoundingClientRect();return(0,P.R)(c.ownerDocument,"mousemove").pipe((0,V.R)(D),function(a,l=S.z){return function(a){return(0,F.e)((l,e)=>{let i=!1,r=null;l.subscribe(new R.Q(e,d=>{i=!0,r=d})),a.subscribe(new R.Q(e,()=>{if(i){i=!1;const d=r;r=null,e.next(d)}},H.Z))})}((0,B.F)(a,l))}(10),(0,L.b)(M=>{if(1!==M.buttons)return void f.next();let v=T.fromOuterRect(Z),k=!1;if(this.outerLabels){v=v.inflate(this.labelsDiameter);for(const A of this.configs){if(k=v.containsPoint(new b.L(M.pageX,M.pageY)),k){this.selectedConfig=A;break}v=v.inflate(this.labelsDiameter)}}else{v=v.inflate(-this.labelsDiameter*(this.configs.length-1));for(let I=this.configs.length;I>0;I--){if(k=v.containsPoint(new b.L(M.pageX,M.pageY)),k){this.selectedConfig=this.configs[I-1];break}v=v.inflate(this.labelsDiameter)}}const E=this.pointToValue(M.pageX-Z.left,M.pageY-Z.top,this.selectedConfig);E!==this.value&&(this.value=E)}))}),(0,V.R)(this.destroyed$)).subscribe()}set outerLabels(e){this._outerLabels=(0,g.Ig)(e)||null}get outerLabels(){return this._outerLabels}set disabled(e){this._disabled=(0,g.Ig)(e),this.changeDetectorRef.markForCheck()}get disabled(){return this._disabled}get cursorHand(){return this._cursorHand}get cursor(){return this._cursor}get radius(){return this._radius}get circularValues(){return this._circularValues}ngOnInit(){this._radius=(this.fullDiameter-this.labelsDiameter)/2,this.ranges.forEach(i=>{i.interval=i.interval?i.interval:1,i.labelInterval=i.labelInterval?i.labelInterval:1,i.beginOffset=i.beginOffset?i.beginOffset:Math.PI/2,this.configs.push({range:i,stepAngle:this.twoPi/Math.floor((i.max-i.min+1)/i.interval),steps:Math.floor((i.max-i.min+1)/i.interval)})}),this.selectedConfig=this.configs[0],this.bind(),this.updateCursor()}set value(e){e!==this._value&&(this.writeValue(e),this.onChangeCallback(e))}get value(){return this._value}writeValue(e){e!==this._value&&(this._value=e,this.updateCursor())}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}pointToValue(e,i,r){const c=this.pointToAngle(e-this._radius,i-this._radius,r);let d=r.steps-Math.ceil(c/r.stepAngle);return d<0&&(d=r.steps),r.range.min+d*r.range.interval}valueToPoint(e,i,r){const c=new b.L,d=this.valueToAngle(e,r);return c.left=this._radius+(this._radius+i)*Math.cos(d),c.top=this._radius-(this._radius+i)*Math.sin(d),c}pointToAngle(e,i,r){return(-Math.atan2(i,e)-r.range.beginOffset-r.stepAngle/2+this.twoPi)%this.twoPi}valueToAngle(e,i){return Math.floor((e-i.range.min)/i.range.interval)*i.stepAngle*this.clockwiseFactor+i.range.beginOffset}bind(){this._circularValues=[],this.configs.forEach((e,i)=>{for(let r=e.range.min;r<=e.range.max;r+=e.range.labelInterval*e.range.interval){const c={value:r},d=this.labelsDiameter/2,x=this.labelsDiameter*i,f=this.valueToPoint(r,this.outerLabels?d+x:-d-x,e);c.position=new b.L(f.left-d,f.top-d),this._circularValues.push(c)}})}updateCursor(){if(!this._circularValues||!this._circularValues.length)return;null==this._value&&(this._value=this._circularValues[0].value),this.selectedConfig=this.configs.find(c=>this._value>=c.range.min&&this._value<=c.range.max),this.selectedConfig||(this.selectedConfig=this.configs[0]);const e=this.configs.indexOf(this.selectedConfig),i=this.labelsDiameter/2,r=this.valueToPoint(this._value,this.outerLabels?i+this.labelsDiameter*e:-i-this.labelsDiameter*e,this.selectedConfig);this._cursor={position:new b.L(r.left-i,r.top-i),value:this._value},this._cursorHand={angle:this.valueToAngle(this._value,this.selectedConfig),width:this.outerLabels?this._radius+this.labelsDiameter*e:this._radius-this.labelsDiameter-this.labelsDiameter*e},this.changeDetectorRef.markForCheck()}getHtmlElement(e,i){let r=e;for(;r&&!r.hasAttribute(i);)r=r.parentElement;if(r)return r}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(p.a5,10))},a.\u0275cmp=t.Xpm({type:a,selectors:[["deja-circular-picker"]],contentQueries:function(e,i,r){if(1&e&&(t.Suo(r,z,5),t.Suo(r,X,5)),2&e){let c;t.iGM(c=t.CRH())&&(i.labelTemplate=c.first),t.iGM(c=t.CRH())&&(i.cursorTemplate=c.first)}},viewQuery:function(e,i){if(1&e&&t.Gf(G,7),2&e){let r;t.iGM(r=t.CRH())&&(i.picker=r.first)}},inputs:{clockwiseFactor:"clockwiseFactor",fullDiameter:"fullDiameter",labelsDiameter:"labelsDiameter",ranges:"ranges",outerLabels:"outerLabels",disabled:"disabled"},features:[t.qOj],decls:6,vars:13,consts:[[1,"circular-picker"],["picker",""],[1,"cursor-container"],["class","cursor","cursor","",3,"top","left",4,"ngIf"],[1,"cursorHand",3,"ngStyle"],["class","value",3,"top","left",4,"ngFor","ngForOf"],["cursor","",1,"cursor"],[4,"ngIf","ngIfElse"],["valueTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"value"],[4,"ngIf"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0,1),t.TgZ(2,"div",2),t.YNc(3,it,4,6,"div",3),t._UZ(4,"div",4),t.qZA(),t.YNc(5,st,3,7,"div",5),t.qZA()),2&e&&(t.Udp("width",2*i.radius,"px")("height",2*i.radius,"px"),t.ekj("disabled",i.disabled),t.xp6(3),t.Q6J("ngIf",void 0!==i.cursor.value),t.xp6(1),t.Udp("width",i.cursorHand.width+2,"px"),t.Q6J("ngStyle",t.VKq(11,ot,"translateY(-50%) rotate("+-i.cursorHand.angle+"rad)")),t.xp6(1),t.Q6J("ngForOf",i.circularValues))},directives:[h.O5,h.PC,h.sg,h.tP],styles:["[_nghost-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]{border-radius:50%;position:relative}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{border-radius:50%;cursor:pointer;height:43px;line-height:43px;position:absolute;text-align:center;width:43px}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .cursor-container[_ngcontent-%COMP%]   .cursor[_ngcontent-%COMP%]{border-radius:50%;cursor:pointer;height:43px;line-height:43px;position:absolute;text-align:center;width:43px;z-index:5}[_nghost-%COMP%]   .circular-picker[_ngcontent-%COMP%]   .cursor-container[_ngcontent-%COMP%]   .cursorHand[_ngcontent-%COMP%]{border-radius:2px;height:4px;left:50%;position:absolute;top:50%;transform-origin:left center}"],changeDetection:0}),a})(),ut=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[h.ez,p.u5]]}),a})();var ht=s(6412),dt=s(3507),mt=s(7991);function pt(a,l){1&a&&(t.TgZ(0,"mat-card",5),t._UZ(1,"deja-markdown",6),t.qZA()),2&a&&(t.xp6(1),t.Q6J("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/develop/projects/deja-js/component/circular-picker/readme.md"))}function gt(a,l){if(1&a&&t._uU(0),2&a){const e=l.$implicit,i=t.oxw(2);t.hij(" ",i.getLabelForValue(e)," ")}}function ft(a,l){if(1&a&&t._uU(0),2&a){const e=l.$implicit;t.hij(" ",24===e?0:e," ")}}function Ct(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-card",7),t.TgZ(2,"mat-toolbar",8),t._uU(3,"Complex Circular-picker width custom labels"),t.qZA(),t.TgZ(4,"mat-card-content",9),t._UZ(5,"deja-circular-picker",10),t.TgZ(6,"deja-circular-picker",11),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw().sm=r})("ngModelChange",function(r){return t.CHM(e),t.oxw().range42Changed(r)}),t.YNc(7,gt,1,1,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-card",7),t.TgZ(11,"mat-toolbar",8),t._uU(12,"Circular-picker demo simple - Range 1 to 20 (inside and outside labels)"),t.qZA(),t.TgZ(13,"mat-card-content",13),t.TgZ(14,"div"),t._UZ(15,"deja-circular-picker",14),t.qZA(),t.TgZ(16,"div"),t._UZ(17,"deja-circular-picker",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"mat-card",7),t.TgZ(19,"mat-toolbar",8),t._uU(20,"Circular-picker demo multiple range (inside labels)"),t.qZA(),t.TgZ(21,"mat-card-content",13),t.TgZ(22,"deja-circular-picker",16),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw().sms=r}),t.YNc(23,ft,1,1,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(5),t.Q6J("ranges",e.ranges41)("outerLabels",!0),t.xp6(1),t.Q6J("ngModel",e.sm)("ranges",e.ranges42),t.xp6(9),t.Q6J("ranges",e.ranges1),t.xp6(2),t.Q6J("ranges",e.ranges2)("outerLabels",!0),t.xp6(5),t.Q6J("ngModel",e.sms)("ranges",e.ranges3)}}const xt=dt.Bz.forChild([{path:"",component:(()=>{class a{constructor(){this.tabIndex=1,this.sm=3,this.sms=10,this.ranges1=[{min:1,max:20,labelInterval:2}],this.ranges2=[{min:1,max:20}],this.ranges3=[{min:1,max:12,beginOffset:Math.PI/3},{min:13,max:24,beginOffset:Math.PI/3}],this.ranges41=[{labelInterval:5,max:59,min:0}],this.ranges42=[{max:11,min:0},{max:111,min:100}],this.myModel=[{value:0,label:"T0"},{value:1,label:"T1"},{value:2,label:"T2"},{value:3,label:"T3"},{value:4,label:"T4"},{value:5,label:"T5"},{value:6,label:"T6"},{value:7,label:"T7"},{value:8,label:"T8"},{value:9,label:"T9"},{value:10,label:"T10"},{value:11,label:"T11"},{value:100,label:"T-1",realValue:-1},{value:101,label:"T-2",realValue:-2},{value:102,label:"T-3",realValue:-3},{value:103,label:"T-4",realValue:-4},{value:104,label:"T-5",realValue:-5},{value:105,label:"T-6",realValue:-6},{value:106,label:"T-7",realValue:-7},{value:107,label:"T-8",realValue:-8},{value:108,label:"T-9",realValue:-9},{value:109,label:"T-10",realValue:-10},{value:110,label:"T-11",realValue:-11},{value:111,label:"T-12",realValue:-12}]}range42Changed(e){console.log(`Selected model ${this.getLabelForValue(e)}`)}getLabelForValue(e){const i=this.myModel.find(r=>r.value===e);return(null==i?void 0:i.label)||(null==e?void 0:e.toString())||""}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["deja-circular-picker-demo"]],decls:5,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],[4,"ngIf"],[1,"demo-card","demo-basic"],[3,"url"],[1,"demo-card"],["color","primary"],["id","complex-wrapper",1,"listContainer"],["id","outside",3,"ranges","outerLabels"],["id","inside",3,"ngModel","ranges","ngModelChange"],["cursorTemplate","","labelTemplate",""],[1,"listContainer"],[3,"ranges"],[3,"ranges","outerLabels"],[3,"ngModel","ranges","ngModelChange"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-tab-group",0),t.NdJ("selectedTabChange",function(c){return i.tabIndex=c.index}),t._UZ(1,"mat-tab",1),t._UZ(2,"mat-tab",2),t.qZA(),t.YNc(3,pt,2,1,"mat-card",3),t.YNc(4,Ct,26,9,"div",4)),2&e&&(t.Q6J("selectedIndex",i.tabIndex),t.xp6(3),t.Q6J("ngIf",0===i.tabIndex),t.xp6(1),t.Q6J("ngIf",1===i.tabIndex))},directives:[n.SP,n.uX,h.O5,u.a8,mt.F,o.Ye,u.dn,ct,p.JJ,p.On],styles:["[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px;padding:2rem 0}[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   .listContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   deja-circular-picker[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]{position:relative;height:333px}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #outside[_ngcontent-%COMP%], [_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #inside[_ngcontent-%COMP%]{left:50%;position:absolute!important;top:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]   .listContainer#complex-wrapper[_ngcontent-%COMP%]   #inside[_ngcontent-%COMP%]   .circular-picker[_ngcontent-%COMP%]{background:transparent;border:none}"]}),a})()},{path:"**",redirectTo:"",pathMatch:"full"}]);let Tt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[],imports:[[h.ez,ut,ht.O,p.u5,u.QW,n.Nh,o.g0,xt]]}),a})()}}]);