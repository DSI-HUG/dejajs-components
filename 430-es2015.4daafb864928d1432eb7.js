(self.webpackChunkdejajs_component=self.webpackChunkdejajs_component||[]).push([[430],{20583:function(e,t,i){"use strict";i.d(t,{vS:function(){return m},K4:function(){return g},I7:function(){return u}});var s=i(31572),n=i(27312),r=i(87254),a=i(31906),l=i(43835),d=i(44689),o=i(90611),c=i(25416),h=i(66599),p=i(19861);let g=(()=>{class e extends n.yl{constructor(e,t){super(),this.clipboardService=t,this.draggable=null,this.draginfokey="draginfos",this.objectKey="object",this.elementKey="element",this.uuidKey="uuid";const i=e.nativeElement;(0,r.R)(i,"dragstart").pipe((0,l.h)(()=>!!this.context),(0,d.w)(e=>{var s,a;if(!t)throw new Error("To use the DejaDraggableDirective, please import and provide the DejaClipboardService in your application.");const l={};this.dragdropid=(new n.hb).toString(),l[this.uuidKey]=this.dragdropid;const d=(null===(s=this.context)||void 0===s?void 0:s.object)||i;l[this.objectKey]=d,l[this.elementKey]=i,this.clipboardService.set(this.draginfokey,l);let c="notavailable";if(d&&(d.dragged=!0,c=JSON.stringify(c)),null===(a=this.context)||void 0===a?void 0:a.dragstartcallback){const t=e;t.dragInfo=l,t.dragObject=this.context.object,t.dragElement=i,this.context.dragstartcallback(t),e.dataTransfer.setData("text/plain",c),t.defaultPrevented&&e.preventDefault()}return(0,r.R)(i,"dragend").pipe((0,o.q)(1))}),(0,c.R)(this.destroyed$)).subscribe(e=>{var t;const i=this.clipboardService.get(this.draginfokey),s=null==i?void 0:i[this.objectKey];if(s&&delete s.dragged,(null===(t=this.context)||void 0===t?void 0:t.dragendcallback)&&i){const t=e;t.dragInfo=i,t.dragObject=s,t.dragElement=i[this.elementKey],this.context.dragendcallback(t),t.defaultPrevented&&e.stopPropagation()}this.clipboardService.clear(),this.dragdropid=void 0})}set context(e){this._context=e,this.draggable=!!e||null}get context(){return this._context}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq),s.Y36(n.ST,8))},e.\u0275dir=s.lG2({type:e,selectors:[["","deja-draggable",""]],hostVars:2,hostBindings:function(e,t){2&e&&s.uIk("draggable",t.draggable)("dragdropid",t.dragdropid)},inputs:{context:["deja-draggable","context"]},features:[s.qOj]}),e})(),u=(()=>{class e extends n.yl{constructor(e,t){super(),this.clipboardService=t,this.droppable=null,this.draginfokey="draginfos",this.objectKey="object",this.droppedKey="dropped",this.elementKey="element",this._allEvents=!1;let i=!1;const s=e.nativeElement,n=(0,r.R)(s,"dragenter").pipe((0,h.b)(()=>{if(!t)throw new Error("To use the DejaDroppableDirective, please import and provide the DejaClipboardService in your application.")}),(0,l.h)(()=>!(i||!this.context||!this.context.dragentercallback||!this.clipboardService.get(this.draginfokey))),(0,h.b)(()=>i=!0)),p=(0,r.R)(s,"dragleave").pipe((0,l.h)(()=>i&&!!this.context&&!!this.clipboardService.get(this.draginfokey)),(0,l.h)(e=>{const t=s.getBoundingClientRect();return!(e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)})),g=(0,r.R)(s,"drop").pipe((0,l.h)(()=>i&&!!this.context&&!!this.clipboardService.get(this.draginfokey))),u=(0,r.R)(s,"dragover").pipe((0,l.h)(()=>i)),m=(0,a.T)(n,p,g).pipe((0,h.b)(()=>i=!1));n.pipe((0,d.w)(e=>{const t=this.clipboardService.get(this.draginfokey),i=e;i.dragInfo=t,i.dragObject=e[this.objectKey],i.dragElement=s,i.itsMe=e[this.elementKey]===s,this.context.dragentercallback(i),i.defaultPrevented?(e.preventDefault(),e.dataTransfer.dropEffect="copy"):e.dataTransfer.dropEffect="none";const n=p.pipe((0,o.q)(1),(0,l.h)(()=>!!this.context.dragleavecallback),(0,h.b)(e=>{const t=new CustomEvent("DejaDragLeave",{cancelable:!0});this.context.dragleavecallback(t),t.defaultPrevented&&e.preventDefault()})),r=g.pipe((0,o.q)(1),(0,l.h)(()=>!!this.context.dropcallback),(0,h.b)(i=>{if(t){const n=i;n.dragInfo=t,n.dragObject=t[this.objectKey],n.dragElement=s,n.itsMe=t[this.elementKey]===s,this.context.dropcallback(n),n.defaultPrevented?(n.dragInfo[this.droppedKey]=!0,i.preventDefault(),e.dataTransfer.dropEffect="copy"):e.dataTransfer.dropEffect="none"}})),d=u.pipe((0,c.R)(m),(0,h.b)(i=>{if(!this._allEvents&&this.lastTarget&&this.lastTarget===i.target)this.lastAccept?(i.preventDefault(),e.dataTransfer.dropEffect="copy"):e.dataTransfer.dropEffect="none";else if(this.context.dragovercallback&&t){const n=i;n.dragInfo=t,n.dragObject=t[this.objectKey],n.dragElement=s,n.itsMe=t[this.elementKey]===s,this.context.dragovercallback(n),this.lastTarget=i.target,this.lastAccept=n.defaultPrevented,n.defaultPrevented?(i.preventDefault(),e.dataTransfer.dropEffect="copy"):e.dataTransfer.dropEffect="none"}}));return(0,a.T)(r,d,n)}),(0,c.R)(this.destroyed$)).subscribe(e=>{})}set allEvents(e){this._allEvents=(0,p.Ig)(e)}set context(e){this._context=e,this.droppable=!!e||null}get context(){return this._context}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq),s.Y36(n.ST,8))},e.\u0275dir=s.lG2({type:e,selectors:[["","deja-droppable",""]],hostVars:1,hostBindings:function(e,t){2&e&&s.uIk("droppable",t.droppable)},inputs:{allEvents:["continous-dragover","allEvents"],context:["deja-droppable","context"]},features:[s.qOj]}),e})(),m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({}),e})()},28437:function(e,t,i){"use strict";i.d(t,{b:function(){return r},u:function(){return a}});var s=i(61511),n=i(31572);let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["deja-list-loader"]],decls:4,vars:0,consts:[[1,"spinner"],[1,"bounce1"],[1,"bounce2"],[1,"bounce3"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"div",1),n._UZ(2,"div",2),n._UZ(3,"div",3),n.qZA())},styles:["[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{margin:40px auto 0;width:70px;text-align:center}[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s ease-in-out infinite both;animation:sk-bouncedelay 1.4s ease-in-out infinite both}[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   .bounce1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]   .bounce2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes sk-bouncedelay{0%,80%,to{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]}),e})(),a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez]]}),e})()},54430:function(e,t,i){"use strict";i.d(t,{LD:function(){return le},x$:function(){return de}});var s=i(61511),n=i(31572),r=i(16073),a=i(15980),l=i(29236),d=i(43691),o=i(26756),c=i(27312),h=i(20583),p=i(28437),g=i(19861),u=i(55959),m=i(78512),f=i(87254),x=i(31305),b=i(31906),v=i(40878),I=i(81110),j=i(47701),w=i(25416),S=i(66599),y=i(44689),T=i(79996),$=i(90611),k=i(43835),C=i(66283);const R=["itemTemplate"],E=["parentItemTemplate"],_=["loaderTemplate"],M=["headerTemplate"],D=["searchPrefixTemplate"],P=["searchSuffixTemplate"],L=["inputelement"],V=["listElement"];function q(e,t){}function A(e,t){if(1&e&&(n.TgZ(0,"span",16),n.YNc(1,q,0,0,"ng-template",17),n.qZA()),2&e){const e=n.oxw(3);n.xp6(1),n.Q6J("ngTemplateOutlet",e.searchPrefixTemplate)}}function F(e,t){}function N(e,t){if(1&e&&(n.TgZ(0,"span",18),n.YNc(1,F,0,0,"ng-template",17),n.qZA()),2&e){const e=n.oxw(3);n.xp6(1),n.Q6J("ngTemplateOutlet",e.searchSuffixTemplate)}}function Q(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"mat-form-field",11),n.TgZ(1,"input",12,13),n.NdJ("input",function(){n.CHM(e);const t=n.MAs(3);return n.oxw(2).setQuery$.next(t&&t.value)}),n.qZA(),n.YNc(4,A,2,1,"span",14),n.YNc(5,N,2,1,"span",15),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngModel",e.query)("placeholder",e.placeholder)("disabled",e.disabled),n.xp6(3),n.Q6J("ngIf",e.searchPrefixTemplate),n.xp6(1),n.Q6J("ngIf",e.searchSuffixTemplate)}}function K(e,t){if(1&e&&(n.TgZ(0,"div",9),n.YNc(1,Q,6,5,"mat-form-field",10),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.searchArea)}}function O(e,t){}function H(e,t){if(1&e&&(n.TgZ(0,"div",19),n.YNc(1,O,0,0,"ng-template",17),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngTemplateOutlet",e.headerTemplate)}}function U(e,t){if(1&e&&(n.TgZ(0,"div",20),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.nodataholder)}}function Z(e,t){if(1&e&&(n.TgZ(0,"div",21),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.hintLabel)}}function J(e,t){if(1&e&&n._UZ(0,"div"),2&e){const e=n.oxw();n.Udp("height",e.vpBeforeHeight,"px")}}function Y(e,t){1&e&&(n.TgZ(0,"mat-icon"),n._uU(1,"arrow_drop_down"),n.qZA())}function W(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(1),n.Oqu(t.getTextValue(e))}}function B(e,t){}const z=function(e,t,i){return{$implicit:e,query:t,flatindex:i}};function G(e,t){if(1&e&&(n.ynx(0),n.YNc(1,B,0,0,"ng-template",26),n.BQk()),2&e){const e=n.oxw(),t=e.$implicit,i=e.index,s=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",s.parentItemTemplate)("ngTemplateOutletContext",n.kEZ(2,z,t,s.query,s.vpStartRow+i))}}function X(e,t){}function ee(e,t){if(1&e&&(n.ynx(0),n.YNc(1,X,0,0,"ng-template",26),n.BQk()),2&e){const e=n.oxw(),t=e.$implicit,i=e.index,s=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",n.kEZ(2,z,t,s.query,s.vpStartRow+i))}}function te(e,t){if(1&e&&(n.TgZ(0,"div",23,24),n.TgZ(2,"span",25),n.YNc(3,Y,2,0,"mat-icon",7),n.qZA(),n.YNc(4,W,2,1,"ng-container",7),n.YNc(5,G,2,6,"ng-container",7),n.YNc(6,ee,2,6,"ng-container",7),n.qZA()),2&e){const e=t.$implicit,i=t.index,s=n.oxw(2);n.Udp("width",s.itemsWidth,"px")("height",s.getItemHeight(e),"px"),n.Q6J("deja-draggable",s.getDragContext(s.vpStartRow+i)),n.uIk("class",s.getItemClass(e))("current",s.vpStartRow+i===s.currentItemIndex||null)("depth",s.depthMax?e.depth:null)("id",e.id||null)("flat",s.vpStartRow+i),n.xp6(3),n.Q6J("ngIf",null==e.$items?null:e.$items.length),n.xp6(1),n.Q6J("ngIf",(!e.$items||!s.parentItemTemplate)&&(e.$items||!s.itemTemplate)),n.xp6(1),n.Q6J("ngIf",e.$items&&s.parentItemTemplate),n.xp6(1),n.Q6J("ngIf",!e.$items&&s.itemTemplate)}}function ie(e,t){if(1&e&&(n.ynx(0),n.YNc(1,te,7,14,"div",22),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.treeItemList)}}function se(e,t){if(1&e&&n._UZ(0,"div"),2&e){const e=n.oxw();n.Udp("height",e.vpAfterHeight,"px")}}function ne(e,t){1&e&&n._UZ(0,"deja-list-loader",27)}function re(e,t){}function ae(e,t){if(1&e&&(n.ynx(0),n.YNc(1,re,0,0,"ng-template",17),n.BQk()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngTemplateOutlet",e.loaderTemplate)}}let le=(()=>{class e extends c.ZE{constructor(e,t,i,s,r){super(e,t),this.viewPort=t,this.elementRef=i,this.control=s,this.clipboardService=r,this.scroll=new n.vpe,this.query="",this.itemsWidth=null,this.itemDragEnd=new n.vpe,this.itemDragStart=new n.vpe,this.selectedChange=new n.vpe,this.viewPortChanged=new n.vpe,this._disabled=null,this.setQuery$=new u.xQ,this._keyboardNavigation=!1,this.rangeStartIndex=0,this.filterExpression="",this._searchArea=!1,this._sortable=!1,this._itemsDraggable=!1,this.hasCustomService=!1,this.hasLoadingEvent=!1,this._modelIsValue=!1,this.keyboardNavigation$=new u.xQ,this.clearFilterExpression$=new m.X(null),this.writeValue$=new u.xQ,this.selectItems$=new u.xQ,this.contentInitialized$=new u.xQ,this.onTouchedCallback=()=>{},this.onChangeCallback=e=>{},console.warn("@deja-js/component/deja-tree-list is deprecated, and will be removed in a further version. Please use @deja-js/component/v2/tree-list instead."),this.control&&(this.control.valueAccessor=this),this.clearFilterExpression$.pipe((0,j.b)(400),(0,w.R)(this.destroyed$)).subscribe(()=>this.filterExpression=""),this.keyboardNavigation$.pipe((0,S.b)(()=>this._keyboardNavigation=!0),(0,j.b)(1e3),(0,w.R)(this.destroyed$)).subscribe(()=>{this._keyboardNavigation=!1,this.changeDetectorRef.markForCheck()}),(0,f.R)(window,"resize").pipe((0,j.b)(5),(0,w.R)(this.destroyed$)).subscribe(()=>{this.viewPort.deleteSizeCache(),this.viewPort.refresh(),this.changeDetectorRef.markForCheck()}),this.setQuery$.pipe((0,j.b)(250),(0,y.w)(e=>(this.query=e,this.setCurrentItem(void 0),this.calcViewList$())),(0,w.R)(this.destroyed$)).subscribe();const a=(0,x.aj)([this.selectItems$,this.contentInitialized$]).pipe((0,T.U)(([e])=>e),(0,T.U)(e=>this.getVirtualSelectedEntities(e)),(0,T.U)(e=>e instanceof Array&&e||e&&[e]||[]),(0,S.b)(e=>super.setSelectedItems(e))),l=(0,x.aj)([this.writeValue$,this.contentInitialized$]).pipe((0,T.U)(([e])=>{if(void 0===this.modelIsValue)if(e instanceof Array){const t=e||[],i=t.length&&typeof t[0];this.modelIsValue="string"===i||"number"===i}else{const t=typeof e;this.modelIsValue=""===e||"string"===t||"number"===t}return this.modelIsValue&&(this.query=""),e}),(0,T.U)(e=>this.getVirtualSelectedEntities(e)),(0,S.b)(e=>super.setSelectedModels(!e||this._multiSelect||e instanceof Array?e:[e])));(0,b.T)(l,a).pipe((0,w.R)(this.destroyed$)).subscribe(()=>{super.getItemListService().ensureSelection(),this.changeDetectorRef.markForCheck()}),this._viewPortChanged=this.viewPortChanged,this.maxHeight=0}set minSearchlength(e){this._minSearchLength=(0,g.su)(e)}get minSearchlength(){return this._minSearchLength}set listElememtRef(e){this.listElement=e.nativeElement}keyboardNavigation(){return this._keyboardNavigation}set searchArea(e){this._searchArea=(0,g.Ig)(e)}get searchArea(){return this._searchArea||this.minSearchlength>0}set modelIsValue(e){this._modelIsValue=(0,g.Ig)(e)}get modelIsValue(){return this._modelIsValue}set sortable(e){this._sortable=(0,g.Ig)(e)}get sortable(){return this._sortable}set itemsDraggable(e){this._itemsDraggable=(0,g.Ig)(e)}get itemsDraggable(){return this._itemsDraggable}set pageSize(e){this._pageSize=(0,g.su)(e)}get pageSize(){if(0===this._pageSize){const e=this.getViewPortRowHeight(),t=this.getMaxHeight()||this.listElement.clientHeight;return Math.floor(t/e)}return this._pageSize}set hintLabel(e){this.setHintLabel(e)}get hintLabel(){return this._hintLabel}set viewPortRowHeight(e){this.setViewPortRowHeight(e)}set viewportMode(e){this.setViewportMode(e)}set childrenField(e){super.setChildrenField(e)}get childrenField(){return this._childrenField}set textField(e){super.setTextField(e)}set valueField(e){super.setValueField(e)}set searchField(e){super.setSearchField(e)}get searchField(){return this._searchField}set maxHeight(e){super.setMaxHeight(e)}get maxHeight(){return this.getMaxHeight()}set currentItem(e){super.setCurrentItem(e),e&&this.ensureItemVisible(e)}get currentItem(){return super.getCurrentItem()}get depthMax(){return this._depthMax}set multiSelect(e){super.setMultiSelect((0,g.Ig)(e))}get multiSelect(){return this._multiSelect}set selectedItems(e){void 0!==e&&this.selectItems$.next(e)}get selectedItems(){return super.getSelectedItems()}set selectedItem(e){void 0!==e&&this.selectItems$.next(e)}get selectedItem(){const e=super.getSelectedItems();return null==e?void 0:e[0]}set selectedModel(e){void 0!==e&&this.writeValue(e)}get selectedModel(){const e=super.getSelectedModels();return null==e?void 0:e[0]}set selectedModels(e){void 0!==e&&this.writeValue(e)}get selectedModels(){return super.getSelectedModels()}set itemListService(e){void 0!==e&&(this.hasCustomService=!0,this.setItemListService(e),(null==e?void 0:e.lastQuery)&&(this.query=e.lastQuery.toString()))}get itemListService(){return this.getItemListService()}set sortingService(e){this.setSortingService(e)}set groupingService(e){this.setGroupingService(e)}set items(e){delete this.hintLabel,super.setItems$(e).pipe((0,y.w)(e=>this.minSearchlength>0&&!this.query?(this._itemList=[],this.changeDetectorRef.markForCheck(),(0,v.of)(e)):this.calcViewList$().pipe((0,T.U)(()=>e))),(0,w.R)(this.destroyed$)).subscribe()}set loadingItems(e){this.hasLoadingEvent=!!e,super.setLoadingItems(e)}set selectingItem(e){super.setSelectingItem(e)}set unselectingItem(e){super.setUnselectingItem(e)}set expandingItem(e){super.setExpandingItem(e)}set collapsingItem(e){super.setCollapsingItem(e)}set models(e){super.setModels$(e).pipe((0,$.q)(1),(0,y.w)(()=>this.calcViewList$()),(0,w.R)(this.destroyed$)).subscribe()}set disabled(e){const t=(0,g.Ig)(e);this._disabled=t||null,this.changeDetectorRef.markForCheck()}get disabled(){return this._disabled}set waiter(e){this._waiter=(0,g.Ig)(e)}get waiter(){return this._waiter}set inputValidatorDirective(e){e&&(e.parentControl=this.control)}set currentItemIndex(e){super.setCurrentItemIndex(e),this.changeDetectorRef.markForCheck()}get currentItemIndex(){return this.getCurrentItemIndex()}get itemTemplate(){return this.itemTemplateExternal||this.itemTemplateInternal}get parentItemTemplate(){return this.parentItemTemplateExternal||this.parentItemTemplateInternal}get loaderTemplate(){return this.loaderTemplateExternal||this.loaderTemplateInternal}get headerTemplate(){return this.headerTemplateExternal||this.headerTemplateInternal}get searchPrefixTemplate(){return this.searchPrefixTemplateExternal||this.searchPrefixTemplateInternal}get searchSuffixTemplate(){return this.searchSuffixTemplateExternal||this.searchSuffixTemplateInternal}get value(){return this._multiSelect?this.selectedItems:this.selectedItem}set value(e){this.writeValue(e),this.onChangeCallback(e),this.onTouchedCallback()}writeValue(e){this.writeValue$.next(e)}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}toggleAll$(e){return super.toggleAll$(e).pipe((0,y.w)(e=>this.calcViewList$().pipe((0,$.q)(1),(0,T.U)(()=>e))))}toggleAll(e){this.toggleAll$(e).pipe((0,$.q)(1),(0,w.R)(this.destroyed$)).subscribe()}ensureItemVisible(e){super.ensureItemVisible(e)}clearViewPort(){super.clearViewPort()}ngAfterContentInit(){var e;if(!this.items&&(null===(e=this.options)||void 0===e?void 0:e.length)){const e=[];this.valueField="value",this.textField="text";const t=this.options.map(t=>{const i={text:t.text,value:t.value};return t.selected&&e.push(i),i});this.models=t,e.length&&(this.selectedModels=e),t.length>100&&console.error("Select options with more than 100 items can have performance options. Please bind directly the items in code behind with items or models input.")}this.contentInitialized$.next(!0)}ngAfterViewInit(){0===this._itemList.length&&(this.hasCustomService||this.hasLoadingEvent)&&(0,I.H)(1).pipe((0,$.q)(1),(0,y.w)(()=>this.calcViewList$()),(0,w.R)(this.destroyed$)).subscribe(),(0,f.R)(this.listElement,"scroll").pipe((0,T.U)(e=>{const t=e.target;return this.scroll.emit({originalEvent:e,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}),t.scrollTop}),(0,w.R)(this.destroyed$)).subscribe(e=>this.viewPort.scrollPosition$.next(e));let e=(0,f.R)(this.listElement,"keydown");if(this.input){const t=(0,f.R)(this.input.nativeElement,"keydown");e=(0,b.T)(e,t)}e.pipe((0,k.h)(()=>!this.disabled),(0,k.h)(e=>{const t=e.code;return t===c.mW.Home||t===c.mW.End||t===c.mW.PageUp||t===c.mW.PageDown||t===c.mW.UpArrow||t===c.mW.DownArrow||t===c.mW.Space||t===c.mW.Enter}),(0,y.w)(e=>this.ensureListCaches$().pipe((0,y.w)(()=>{if(!this.rowsCount)return(0,v.of)(null);const t=e=>{this.currentItemIndex=e,this.ensureItemVisible(this.currentItemIndex),this.viewPort.refresh()},i=this.rangeStartIndex>=0?this.rangeStartIndex:this.rangeStartIndex=this.currentItemIndex;let s,n,r,a,l,d,o;switch(e.code){case c.mW.Home:return t(0),e.shiftKey?this.selectRange$(i,0):e.ctrlKey?(0,v.of)(-1):(this.rangeStartIndex=0,this.selectRange$(this.rangeStartIndex));case c.mW.End:return t(this.rowsCount-1),e.shiftKey?this.selectRange$(i,this.rowsCount-1):e.ctrlKey?(0,v.of)(-1):(this.rangeStartIndex=this.rowsCount-1,this.selectRange$(this.rangeStartIndex));case c.mW.PageUp:return s=Math.max(0,this.currentItemIndex-this._pageSize),t(s),e.shiftKey?this.selectRange$(i,s):e.ctrlKey?(0,v.of)(-1):(this.rangeStartIndex=s,this.selectRange$(this.rangeStartIndex));case c.mW.PageDown:return n=Math.min(this.rowsCount-1,this.currentItemIndex+this._pageSize),t(n),e.shiftKey?this.selectRange$(i,n):e.ctrlKey?(0,v.of)(-1):(this.rangeStartIndex=n,this.selectRange$(this.rangeStartIndex));case c.mW.UpArrow:if(r=Math.max(0,this.currentItemIndex-1),-1!==r){if(t(r),e.shiftKey)return this.selectRange$(i,r);if(!e.ctrlKey)return this.rangeStartIndex=r,this.selectRange$(this.rangeStartIndex)}return(0,v.of)(-1);case c.mW.DownArrow:if(a=Math.min(this.rowsCount-1,this.currentItemIndex+1),-1!==a){if(t(a),e.shiftKey)return this.selectRange$(i,a);if(!e.ctrlKey)return this.rangeStartIndex=a,this.selectRange$(this.rangeStartIndex)}return(0,v.of)(-1);case c.mW.Space:return l=e.target,"INPUT"!==l.tagName||e.ctrlKey||e.shiftKey?(o=this.currentItem,o?this.isCollapsible(o)?this.toggleCollapse$(i,!o.collapsed):o.selected?this.toggleSelect$([o],!1):this.multiSelect&&e.ctrlKey?this.toggleSelect$([o],!o.selected):this.unselectAll$().pipe((0,y.w)(()=>this.toggleSelect$([o],!0))):(0,v.of)(-1)):(0,v.of)(null);case c.mW.Enter:if(d=this.currentItem,d){if(this.isCollapsible(d))return this.toggleCollapse$(i,!d.collapsed);if(this.isSelectable(d))return this.unselectAll$().pipe((0,y.w)(()=>this.toggleSelect$([d],!0)))}return(0,v.of)(-1);default:return(0,v.of)(null)}}),(0,T.U)(t=>{if(null!==t)return this.keyboardNavigation$.next(),this.changeDetectorRef.markForCheck(),e.preventDefault(),!1}))),(0,w.R)(this.destroyed$)).subscribe();let t=(0,f.R)(this.listElement,"keyup");if(this.input){const e=(0,f.R)(this.input.nativeElement,"keyup"),i=(0,f.R)(this.input.nativeElement,"drop");t=(0,b.T)(t,e,i)}t.pipe((0,k.h)(()=>!this.disabled),(0,S.b)(()=>{(this.query||"").length<this.minSearchlength&&(this._itemList=[])}),(0,k.h)(e=>{const t=e.code;return t>=c.mW.Key0||t===c.mW.Backspace||t===c.mW.Space||t===c.mW.Delete}),(0,y.w)(e=>{if(this.searchArea)this.keyboardNavigation$.next();else if(/[a-zA-Z0-9]/.test(e.key)){this.clearFilterExpression$.next(null),this.filterExpression+=e.key;const t=new RegExp(`^${this.filterExpression}`,"i");return this.findNextMatch$(i=>{if(i&&this.isSelectable(i)){const e=this.getTextValue(i);if(t.test(e))return!0}return e.preventDefault(),!1},this.currentItemIndex)}return(0,v.of)(null)}),(0,k.h)(e=>(null==e?void 0:e.index)>=0),(0,w.R)(this.destroyed$)).subscribe(e=>{this.currentItemIndex=e.index,this.ensureItemVisible(this.currentItemIndex)}),this.viewPort.element$.next(this.listElement)}mousedown(e){if(this.mouseUp$sub&&(this.mouseUp$sub.unsubscribe(),this.mouseUp$sub=void 0),this.disabled)return;const t=e.target,i=this.getItemIndexFromHTMLElement(t);if(void 0===i)return;const s=e=>"expandbtn"===e.id||"expandbtn"===e.parentElement.id,n=this._itemList[i-this.vpStartRow];if(this.clickedItem=n,(!s(t)||!this.isCollapsible(n))&&this.isSelectable(n)&&(!e.ctrlKey||!this.multiSelect)&&(0===e.button||!n.selected)){if(e.shiftKey&&this.multiSelect)return this.selectRange$(i,this.currentItemIndex).pipe((0,$.q)(1),(0,w.R)(this.destroyed$)).subscribe(()=>this.changeDetectorRef.markForCheck()),!1;if(!e.ctrlKey){if(!this.multiSelect&&n.selected)return;this.unselectAll$().pipe((0,$.q)(1),(0,y.w)(()=>(this.currentItemIndex=i,this.toggleSelect$([n],!0))),(0,$.q)(1),(0,w.R)(this.destroyed$)).subscribe(()=>this.changeDetectorRef.markForCheck())}}this.mouseUp$sub=(0,f.R)(this.listElement,"mouseup").pipe((0,$.q)(1),(0,k.h)(()=>!this.disabled),(0,y.w)(e=>{this.mouseUp$sub=void 0;const t=e.target,i=this.getItemIndexFromHTMLElement(t);if(void 0===i)return(0,v.of)(null);const n=this._itemList[i-this.vpStartRow];return this.clickedItem&&n!==this.clickedItem||e.shiftKey||0!==e.button?(0,v.of)(null):!this.isCollapsible(n)||!s(t)&&this.isSelectable(n)?e.ctrlKey?this.multiSelect?this.toggleSelect$([n],!n.selected).pipe((0,T.U)(()=>i)):(this.selectedItem&&this.selectedItem!==n?this.toggleSelect$([this.selectedItem],!1).pipe((0,y.w)(()=>this.toggleSelect$([n],!0))):this.toggleSelect$([n],!n.selected)).pipe((0,T.U)(()=>i)):(this.rangeStartIndex=-1,(0,v.of)(null)):this.toggleCollapse$(i,!n.collapsed).pipe((0,T.U)(()=>i))}),(0,k.h)(e=>null!==e),(0,w.R)(this.destroyed$)).subscribe(e=>{this.currentItemIndex=e,this.changeDetectorRef.markForCheck()})}getDragContext(e){return this.clipboardService&&(this.sortable||this.itemsDraggable)?{dragendcallback:e=>{this.itemDragEnd.emit(e),delete this._ddStartIndex,delete this._ddTargetIndex,this.calcViewList$().pipe((0,$.q)(1),(0,w.R)(this.destroyed$)).subscribe()},dragstartcallback:t=>{const i=this.getItemIndexFromHTMLElement(t.target);void 0!==i&&(this._ddStartIndex=e,t.dragObject=this._itemList[i-this.vpStartRow],this.itemDragStart.emit(t))},object:{index:e}}:null}getDropContext(){if(!this.clipboardService||!this.sortable)return null;const e=e=>{if(void 0===this._ddStartIndex)return;const t=this.getItemIndexFromHTMLElement(e.target);void 0!==t&&(this.calcDragTargetIndex$(this._ddStartIndex,t).pipe((0,y.w)(e=>void 0!==e&&e!==this._ddTargetIndex?(this._ddTargetIndex=e,this.calcViewList$().pipe((0,$.q)(1),(0,T.U)(()=>e))):(0,v.of)(e)),(0,w.R)(this.destroyed$)).subscribe(),e.preventDefault())};return{dragentercallback:e,dragovercallback:e,dropcallback:e=>{delete this._ddStartIndex,delete this._ddTargetIndex,this.drop$().pipe((0,y.w)(()=>this.calcViewList$().pipe((0,$.q)(1))),(0,w.R)(this.destroyed$)).subscribe(),e.preventDefault()}}}dragLeave(e){const t=this.listElement.getBoundingClientRect();c.UL.fromLTRB(t.left,t.top,t.right,t.bottom).containsPoint(new c.Ly(e.pageX,e.pageY))||(this._ddTargetIndex=this._ddStartIndex,this.calcViewList$().pipe((0,$.q)(1),(0,w.R)(this.destroyed$)).subscribe())}onSelectionChange(){let e=null,t=null;if(this.multiSelect){const i=this.selectedModels;if(e={items:this.selectedItems,models:i},this.modelIsValue){const e=this.getValueField();i.find(t=>!!t[e])&&(t=i.map(t=>void 0!==t[e]?t[e]:t))}else t=i}else{const i=this.selectedModel;if(e={item:this.selectedItems[0],model:i},this.modelIsValue){const e=this.getValueField();t=void 0!==i[e]?i[e]:i}else t=i}this.onChangeCallback(t),this.selectedChange.emit(e)}selectRange$(e,t){return super.selectRange$(e,t).pipe((0,S.b)(e=>(e&&this.onSelectionChange(),e)),(0,S.b)(()=>this.changeDetectorRef.markForCheck()))}toggleSelect$(e,t){return this._multiSelect||!e[0].selected!=!t?super.toggleSelect$(e,t).pipe((0,S.b)(()=>{this.onSelectionChange()})):(0,v.of)(e)}calcViewList$(){return super.calcViewList$(this.query).pipe((0,S.b)(()=>this.changeDetectorRef.markForCheck()))}getItemClass(e){var t;const i=["listitem"];return e.className&&i.push(e.className),(e.collapsing||e.expanding)&&i.push("hide"),e.depth<this.depthMax&&i.push("parent"),e.collapsed&&i.push("collapsed"),e.selected&&i.push("selected"),null===(t=e.selectable)||void 0===t||t||i.push("unselectable"),e.depth===this._depthMax&&e.odd&&i.push("odd"),i.join(" ")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.sBO),n.Y36(c.Z2),n.Y36(n.SBq),n.Y36(r.a5,10),n.Y36(c.ST,8))},e.\u0275cmp=n.Xpm({type:e,selectors:[["deja-tree-list"]],contentQueries:function(e,t,i){if(1&e&&(n.Suo(i,R,5),n.Suo(i,E,5),n.Suo(i,_,5),n.Suo(i,M,5),n.Suo(i,D,5),n.Suo(i,P,5),n.Suo(i,c.ZV,4)),2&e){let e;n.iGM(e=n.CRH())&&(t.itemTemplateInternal=e.first),n.iGM(e=n.CRH())&&(t.parentItemTemplateInternal=e.first),n.iGM(e=n.CRH())&&(t.loaderTemplateInternal=e.first),n.iGM(e=n.CRH())&&(t.headerTemplateInternal=e.first),n.iGM(e=n.CRH())&&(t.searchPrefixTemplateInternal=e.first),n.iGM(e=n.CRH())&&(t.searchSuffixTemplateInternal=e.first),n.iGM(e=n.CRH())&&(t.options=e)}},viewQuery:function(e,t){if(1&e&&(n.Gf(L,5),n.Gf(V,7),n.Gf(c.TW,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.input=e.first),n.iGM(e=n.CRH())&&(t.listElememtRef=e.first),n.iGM(e=n.CRH())&&(t.inputValidatorDirective=e.first)}},hostVars:1,hostBindings:function(e,t){2&e&&n.uIk("disabled",t._disabled)},inputs:{placeholder:"placeholder",nodataholder:"nodataholder",query:"query",itemTemplateExternal:"itemTemplateExternal",parentItemTemplateExternal:"parentItemTemplateExternal",loaderTemplateExternal:"loaderTemplateExternal",headerTemplateExternal:"headerTemplateExternal",searchPrefixTemplateExternal:"searchPrefixTemplateExternal",searchSuffixTemplateExternal:"searchSuffixTemplateExternal",itemsWidth:"itemsWidth",minSearchlength:["min-search-length","minSearchlength"],searchArea:"searchArea",modelIsValue:"modelIsValue",sortable:"sortable",itemsDraggable:"itemsDraggable",pageSize:"pageSize",hintLabel:"hintLabel",viewPortRowHeight:"viewPortRowHeight",viewportMode:"viewportMode",childrenField:"childrenField",textField:"textField",valueField:"valueField",searchField:"searchField",maxHeight:"maxHeight",currentItem:"currentItem",multiSelect:"multiSelect",selectedItems:"selectedItems",selectedItem:"selectedItem",selectedModel:"selectedModel",selectedModels:"selectedModels",itemListService:"itemListService",sortingService:"sortingService",groupingService:"groupingService",items:"items",loadingItems:"loadingItems",selectingItem:"selectingItem",unselectingItem:"unselectingItem",expandingItem:"expandingItem",collapsingItem:"collapsingItem",models:"models",disabled:"disabled",waiter:"waiter"},outputs:{scroll:"scroll",itemDragEnd:"itemDragEnd",itemDragStart:"itemDragStart",selectedChange:"selectedChange",viewPortChanged:"viewPortChanged"},features:[n._Bn([c.Z2]),n.qOj],decls:11,vars:21,consts:[["id","header",4,"ngIf"],["id","listheader",4,"ngIf"],["tabindex","1",1,"deja-listcontainer",3,"id","deja-droppable","dragleave","mousedown"],["listElement",""],["id","nodata-holder",4,"ngIf"],["id","error-hint",4,"ngIf"],[3,"height",4,"ngIf"],[4,"ngIf"],["id","loader",4,"ngIf"],["id","header"],["deja-child-validator","","id","input",4,"ngIf"],["deja-child-validator","","id","input"],["type","text","matInput","","tabindex","0",3,"ngModel","placeholder","disabled","input"],["inputelement","","model","ngModel"],["matPrefix","",4,"ngIf"],["matSuffix","",4,"ngIf"],["matPrefix",""],[3,"ngTemplateOutlet"],["matSuffix",""],["id","listheader"],["id","nodata-holder"],["id","error-hint"],[3,"deja-draggable","width","height",4,"ngFor","ngForOf"],[3,"deja-draggable"],["listitem",""],["id","expandbtn"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["id","loader"]],template:function(e,t){1&e&&(n.YNc(0,K,2,1,"div",0),n.YNc(1,H,2,1,"div",1),n.TgZ(2,"div",2,3),n.NdJ("dragleave",function(e){return t.sortable?t.dragLeave(e):null})("mousedown",function(e){return t.mousedown(e)}),n.YNc(4,U,2,1,"div",4),n.YNc(5,Z,2,1,"div",5),n.YNc(6,J,1,2,"div",6),n.YNc(7,ie,2,1,"ng-container",7),n.YNc(8,se,1,2,"div",6),n.YNc(9,ne,1,0,"deja-list-loader",8),n.YNc(10,ae,2,1,"ng-container",7),n.qZA()),2&e&&(n.Q6J("ngIf",t.searchArea),n.xp6(1),n.Q6J("ngIf",t.headerTemplate),n.xp6(1),n.Udp("max-height",t.maxHeight||null,"px"),n.ekj("hasheader",t.headerTemplate)("dragover",void 0!==t.ddStartIndex?t.ddStartIndex:null),n.Q6J("id",t.listElementId)("deja-droppable",t.getDropContext()),n.uIk("itemscount",t.itemList&&t.itemList.length)("depth-max",t.depthMax||null)("vp-rowheight",t.getViewPortRowHeight())("keynav",t.keyboardNavigation()),n.xp6(2),n.Q6J("ngIf",!(t.itemList&&0!==t.itemList.length||t.waiter)),n.xp6(1),n.Q6J("ngIf",t.hintLabel),n.xp6(1),n.Q6J("ngIf",t.vpBeforeHeight&&!t.waiter),n.xp6(1),n.Q6J("ngIf",!t.waiter),n.xp6(1),n.Q6J("ngIf",t.vpAfterHeight&&!t.waiter),n.xp6(1),n.Q6J("ngIf",t.waiter&&!t.loaderTemplate),n.xp6(1),n.Q6J("ngIf",t.waiter&&t.loaderTemplate))},directives:[s.O5,h.I7,C.KE,c.TW,o.Nt,r.Fj,r.JJ,r.On,C.qo,s.tP,C.R9,s.sg,h.K4,d.Hw,p.b],styles:['deja-tree-list{display:flex;position:relative;flex-direction:column;align-content:stretch;overflow:hidden}deja-tree-list.ng-invalid #input .mat-form-field-wrapper .mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:scaleY(1)}deja-tree-list #input{outline:none}deja-tree-list #header{flex:0 0 auto;align-items:center;display:flex}deja-tree-list #header #input{flex:1 1 auto}deja-tree-list #header button{flex:0 0 auto;margin:16px .5rem 16px 0}deja-tree-list #listheader{flex:0 0 auto;overflow:hidden;box-sizing:border-box}deja-tree-list .deja-listcontainer{flex:1 1 auto;outline:none;overflow:auto}deja-tree-list .deja-listcontainer.hasheader{border-top:0}deja-tree-list .deja-listcontainer[keynav=false]:not(.dragover) div.listitem:not(.unselectable):hover{cursor:pointer}deja-tree-list .deja-listcontainer[valign=bottom]{border-top:none}deja-tree-list .deja-listcontainer #error-hint,deja-tree-list .deja-listcontainer #nodata-holder{margin:.5rem}deja-tree-list #loader{position:absolute;left:0;right:0}deja-tree-list .deja-listcontainer{padding:0;margin:0;position:relative}deja-tree-list .deja-listcontainer[vprowheight="0"]>div.listitem{padding:.35rem .1rem}deja-tree-list .deja-listcontainer>div.listitem{opacity:1;margin:0;transition-timing-function:linear;transition-duration:.3s;transition-property:max-height,opacity;display:flex;align-items:center}deja-tree-list .deja-listcontainer>div.listitem.hide{opacity:0!important;max-height:0!important;transition-timing-function:ease-out}deja-tree-list .deja-listcontainer>div.listitem #expandbtn{width:24px;cursor:pointer}deja-tree-list .deja-listcontainer>div.listitem.parent.collapsed #expandbtn>.mat-icon{transform:rotate(-90deg)}deja-tree-list .deja-listcontainer [depth="0"]{padding-left:0}deja-tree-list .deja-listcontainer [depth="1"]{padding-left:1rem}deja-tree-list .deja-listcontainer [depth="2"]{padding-left:2rem}deja-tree-list .deja-listcontainer [depth="3"]{padding-left:3rem}deja-tree-list .deja-listcontainer [depth="4"]{padding-left:4rem}deja-tree-list .deja-listcontainer [depth="5"]{padding-left:5rem}deja-tree-list .deja-listcontainer [depth="6"]{padding-left:6rem}deja-tree-list .deja-listcontainer [depth="7"]{padding-left:7rem}deja-tree-list .deja-listcontainer [depth="8"]{padding-left:8rem}deja-tree-list .deja-listcontainer [depth="9"]{padding-left:9rem}deja-tree-list .deja-listcontainer [depth="10"]{padding-left:10rem}deja-tree-list .deja-listcontainer [depth="11"]{padding-left:11rem}deja-tree-list .deja-listcontainer [depth="12"]{padding-left:12rem}deja-tree-list .deja-listcontainer [depth="13"]{padding-left:13rem}deja-tree-list .deja-listcontainer [depth="14"]{padding-left:14rem}deja-tree-list .deja-listcontainer [depth="15"]{padding-left:15rem}deja-tree-list .deja-listcontainer [depth="16"]{padding-left:16rem}deja-tree-list .deja-listcontainer [depth="17"]{padding-left:17rem}deja-tree-list .deja-listcontainer [depth="18"]{padding-left:18rem}deja-tree-list .deja-listcontainer [depth="19"]{padding-left:19rem}deja-tree-list .deja-listcontainer [depth="20"]{padding-left:20rem}deja-tree-list .deja-listcontainer [depth="21"]{padding-left:21rem}deja-tree-list .deja-listcontainer [depth="22"]{padding-left:22rem}deja-tree-list .deja-listcontainer [depth="23"]{padding-left:23rem}deja-tree-list .deja-listcontainer [depth="24"]{padding-left:24rem}deja-tree-list .deja-listcontainer [depth="25"]{padding-left:25rem}deja-tree-list .deja-listcontainer [depth="26"]{padding-left:26rem}deja-tree-list .deja-listcontainer [depth="27"]{padding-left:27rem}deja-tree-list .deja-listcontainer [depth="28"]{padding-left:28rem}deja-tree-list .deja-listcontainer [depth="29"]{padding-left:29rem}deja-tree-list .deja-listcontainer [depth="30"]{padding-left:30rem}deja-tree-list .deja-listcontainer [depth="31"]{padding-left:31rem}deja-tree-list .deja-listcontainer [depth="32"]{padding-left:32rem}deja-tree-list .deja-listcontainer [depth="33"]{padding-left:33rem}deja-tree-list .deja-listcontainer [depth="34"]{padding-left:34rem}deja-tree-list .deja-listcontainer [depth="35"]{padding-left:35rem}deja-tree-list .deja-listcontainer [depth="36"]{padding-left:36rem}deja-tree-list .deja-listcontainer [depth="37"]{padding-left:37rem}deja-tree-list .deja-listcontainer [depth="38"]{padding-left:38rem}deja-tree-list .deja-listcontainer [depth="39"]{padding-left:39rem}deja-tree-list .deja-listcontainer [depth="40"]{padding-left:40rem}deja-tree-list .deja-listcontainer [depth="41"]{padding-left:41rem}deja-tree-list .deja-listcontainer [depth="42"]{padding-left:42rem}deja-tree-list .deja-listcontainer [depth="43"]{padding-left:43rem}deja-tree-list .deja-listcontainer [depth="44"]{padding-left:44rem}deja-tree-list .deja-listcontainer [depth="45"]{padding-left:45rem}deja-tree-list .deja-listcontainer [depth="46"]{padding-left:46rem}deja-tree-list .deja-listcontainer [depth="47"]{padding-left:47rem}deja-tree-list .deja-listcontainer [depth="48"]{padding-left:48rem}deja-tree-list .deja-listcontainer [depth="49"]{padding-left:49rem}deja-tree-list .deja-listcontainer [depth="50"]{padding-left:50rem}'],encapsulation:2,changeDetection:0}),e})(),de=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez,r.u5,a.ot,o.c,l.p9,d.Ps,c.ET,p.u,h.vS,c.sS,c.tN]]}),e})()}}]);