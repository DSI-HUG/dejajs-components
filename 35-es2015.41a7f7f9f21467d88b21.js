(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"ToA/":function(e,t,i){"use strict";i.r(t);var n=i("SVse"),s=i("s7LF"),o=i("Dxy4"),r=i("PDjf"),a=i("pMoy"),l=i("M9ds"),d=i("l0rg"),h=i("650w"),c=i("PO1J"),u=i("KUKF"),p=(i("mrSG"),i("8Y7J")),m=i("Ynp+"),g=i("Q2Ze"),b=i("Tj54"),f=i("UhP/"),v=i("8LU1"),y=i("omvX"),x=i("SCoL");function _(e,t){if(1&e&&(p["\u0275\u0275namespaceSVG"](),p["\u0275\u0275element"](0,"circle",3)),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275styleProp"]("animation-name","mat-progress-spinner-stroke-rotate-"+e.diameter)("stroke-dashoffset",e._strokeDashOffset,"px")("stroke-dasharray",e._strokeCircumference,"px")("stroke-width",e._circleStrokeWidth,"%"),p["\u0275\u0275attribute"]("r",e._circleRadius)}}function w(e,t){if(1&e&&(p["\u0275\u0275namespaceSVG"](),p["\u0275\u0275element"](0,"circle",3)),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275styleProp"]("stroke-dashoffset",e._strokeDashOffset,"px")("stroke-dasharray",e._strokeCircumference,"px")("stroke-width",e._circleStrokeWidth,"%"),p["\u0275\u0275attribute"]("r",e._circleRadius)}}class j{constructor(e){this._elementRef=e}}const M=Object(f.r)(j,"primary"),C=new p.InjectionToken("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let O=(()=>{class e extends M{constructor(t,i,n,s,o){super(t),this._elementRef=t,this._document=n,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const r=e._diameters;r.has(n.head)||r.set(n.head,new Set([100])),this._fallbackAnimation=i.EDGE||i.TRIDENT,this._noopAnimations="NoopAnimations"===s&&!!o&&!o._forceAnimations,o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}get diameter(){return this._diameter}set diameter(e){this._diameter=Object(v.e)(e),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Object(v.e)(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Object(v.e)(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=function(e,t){if("undefined"!=typeof window){const i=t.head;if(i&&(i.createShadowRoot||i.attachShadow)){const t=e.getRootNode?e.getRootNode():null;if(t instanceof window.ShadowRoot)return t}}return null}(e,this._document)||this._document.head,this._attachStyleNode(),e.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}get _circleRadius(){return(this.diameter-10)/2}get _viewBox(){const e=2*this._circleRadius+this.strokeWidth;return`0 0 ${e} ${e}`}get _strokeCircumference(){return 2*Math.PI*this._circleRadius}get _strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null}get _circleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,i=this._diameter,n=e._diameters;let s=n.get(t);if(!s||!s.has(i)){const e=this._document.createElement("style");e.setAttribute("mat-spinner-animation",i+""),e.textContent=this._getAnimationText(),t.appendChild(e),s||(s=new Set,n.set(t,s)),s.add(i)}}_getAnimationText(){return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,`${.95*this._strokeCircumference}`).replace(/END_VALUE/g,`${.2*this._strokeCircumference}`).replace(/DIAMETER/g,`${this.diameter}`)}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](p.ElementRef),p["\u0275\u0275directiveInject"](x.a),p["\u0275\u0275directiveInject"](n.d,8),p["\u0275\u0275directiveInject"](y.a,8),p["\u0275\u0275directiveInject"](C))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(p["\u0275\u0275attribute"]("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),p["\u0275\u0275styleProp"]("width",t.diameter,"px")("height",t.diameter,"px"),p["\u0275\u0275classProp"]("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(p["\u0275\u0275namespaceSVG"](),p["\u0275\u0275elementStart"](0,"svg",0),p["\u0275\u0275template"](1,_,1,9,"circle",1),p["\u0275\u0275template"](2,w,1,7,"circle",2),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275styleProp"]("width",t.diameter,"px")("height",t.diameter,"px"),p["\u0275\u0275property"]("ngSwitch","indeterminate"===t.mode),p["\u0275\u0275attribute"]("viewBox",t._viewBox),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngSwitchCase",!0),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngSwitchCase",!1))},directives:[n.p,n.q],styles:[".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),e._diameters=new WeakMap,e})(),T=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[f.e,n.c],f.e]}),e})();var E=i("1O3W"),k=i("YEUz"),P=i("Ht+U"),D=i("XNiG"),S=i("itXk"),B=i("GyhO"),$=i("HDdC"),I=i("IzEk"),R=i("7o/Q");class A{constructor(e){this.total=e}call(e,t){return t.subscribe(new z(e,this.total))}}class z extends R.a{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}var F=i("Kj3r"),L=i("lJxs"),W=i("JX91"),V=i("1G5W");const H=new Set;let X,N=(()=>{class e{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):U}matchMedia(e){return this._platform.WEBKIT&&function(e){if(!H.has(e))try{X||(X=document.createElement("style"),X.setAttribute("type","text/css"),document.head.appendChild(X)),X.sheet&&(X.sheet.insertRule(`@media ${e} {.fx-query-test{ }}`,0),H.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275inject"](x.a))},e.\u0275prov=Object(p["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(p["\u0275\u0275inject"])(x.a))},token:e,providedIn:"root"}),e})();function U(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let G=(()=>{class e{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new D.a}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return q(Object(v.a)(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){const t=q(Object(v.a)(e)).map(e=>this._registerQuery(e).observable);let i=Object(S.b)(t);return i=Object(B.a)(i.pipe(Object(I.a)(1)),i.pipe(e=>e.lift(new A(1)),Object(F.a)(0))),i.pipe(Object(L.a)(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(e=>{t.matches=t.matches||e.matches,t.breakpoints[e.query]=e.matches}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e),i={observable:new $.a(e=>{const i=t=>this._zone.run(()=>e.next(t));return t.addListener(i),()=>{t.removeListener(i)}}).pipe(Object(W.a)(t),Object(L.a)(t=>({query:e,matches:t.matches})),Object(V.a)(this._destroySubject)),mql:t};return this._queries.set(e,i),i}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275inject"](N),p["\u0275\u0275inject"](p.NgZone))},e.\u0275prov=Object(p["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(p["\u0275\u0275inject"])(N),Object(p["\u0275\u0275inject"])(p.NgZone))},token:e,providedIn:"root"}),e})();function q(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var Y=i("1z/I"),K=i("GS7A"),Q=i("7KAL"),J=i("9gLZ");const Z={tooltipState:Object(K.n)("state",[Object(K.k)("initial, void, hidden",Object(K.l)({opacity:0,transform:"scale(0)"})),Object(K.k)("visible",Object(K.l)({transform:"scale(1)"})),Object(K.m)("* => visible",Object(K.e)("200ms cubic-bezier(0, 0, 0.2, 1)",Object(K.h)([Object(K.l)({opacity:0,transform:"scale(0)",offset:0}),Object(K.l)({opacity:.5,transform:"scale(0.99)",offset:.5}),Object(K.l)({opacity:1,transform:"scale(1)",offset:1})]))),Object(K.m)("* => hidden",Object(K.e)("100ms cubic-bezier(0, 0, 0.2, 1)",Object(K.l)({opacity:0})))])},ee=Object(x.f)({passive:!0});function te(e){return Error(`Tooltip position "${e}" is invalid.`)}const ie=new p.InjectionToken("mat-tooltip-scroll-strategy"),ne={provide:ie,deps:[E.d],useFactory:function(e){return()=>e.scrollStrategies.reposition({scrollThrottle:20})}},se=new p.InjectionToken("mat-tooltip-default-options",{providedIn:"root",factory:function(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let oe=(()=>{class e{constructor(e,t,i,n,s,o,r,a,l,d,h,c){this._overlay=e,this._elementRef=t,this._scrollDispatcher=i,this._viewContainerRef=n,this._ngZone=s,this._platform=o,this._ariaDescriber=r,this._focusMonitor=a,this._dir=d,this._defaultOptions=h,this._position="below",this._disabled=!1,this.showDelay=this._defaultOptions.showDelay,this.hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=new Map,this._destroyed=new D.a,this._handleKeydown=e=>{this._isTooltipVisible()&&e.keyCode===P.e&&!Object(P.o)(e)&&(e.preventDefault(),e.stopPropagation(),this._ngZone.run(()=>this.hide(0)))},this._scrollStrategy=l,h&&(h.position&&(this.position=h.position),h.touchGestures&&(this.touchGestures=h.touchGestures)),a.monitor(t).pipe(Object(V.a)(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&s.run(()=>this.show()):s.run(()=>this.hide(0))}),s.runOutsideAngular(()=>{t.nativeElement.addEventListener("keydown",this._handleKeydown)})}get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(),this._tooltipInstance&&this._tooltipInstance.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(v.b)(e),this._disabled&&this.hide(0)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message),this._message=null!=e?`${e}`.trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message)})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngOnInit(){this._setupPointerEvents()}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),e.removeEventListener("keydown",this._handleKeydown),this._passiveListeners.forEach((t,i)=>{e.removeEventListener(i,t,ee)}),this._passiveListeners.clear(),this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const t=this._createOverlay();this._detach(),this._portal=this._portal||new Y.d(re,this._viewContainerRef),this._tooltipInstance=t.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe(Object(V.a)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),t=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(".mat-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withScrollableContainers(e);return t.positionChanges.pipe(Object(V.a)(this._destroyed)).subscribe(e=>{this._tooltipInstance&&e.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:t,panelClass:"mat-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(Object(V.a)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(){const e=this._overlayRef.getConfig().positionStrategy,t=this._getOrigin(),i=this._getOverlayPosition();e.withPositions([Object.assign(Object.assign({},t.main),i.main),Object.assign(Object.assign({},t.fallback),i.fallback)])}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,t=this.position;let i;if("above"==t||"below"==t)i={originX:"center",originY:"above"==t?"top":"bottom"};else if("before"==t||"left"==t&&e||"right"==t&&!e)i={originX:"start",originY:"center"};else{if(!("after"==t||"right"==t&&e||"left"==t&&!e))throw te(t);i={originX:"end",originY:"center"}}const{x:n,y:s}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:n,originY:s}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,t=this.position;let i;if("above"==t)i={overlayX:"center",overlayY:"bottom"};else if("below"==t)i={overlayX:"center",overlayY:"top"};else if("before"==t||"left"==t&&e||"right"==t&&!e)i={overlayX:"end",overlayY:"center"};else{if(!("after"==t||"right"==t&&e||"left"==t&&!e))throw te(t);i={overlayX:"start",overlayY:"center"}}const{x:n,y:s}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:n,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(I.a)(1),Object(V.a)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,t){return"above"===this.position||"below"===this.position?"top"===t?t="bottom":"bottom"===t&&(t="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:t}}_setupPointerEvents(){if(this._platform.IOS||this._platform.ANDROID){if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const e=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};this._passiveListeners.set("touchend",e).set("touchcancel",e).set("touchstart",()=>{clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)})}}else this._passiveListeners.set("mouseenter",()=>this.show()).set("mouseleave",()=>this.hide());this._passiveListeners.forEach((e,t)=>{this._elementRef.nativeElement.addEventListener(t,e,ee)})}_disableNativeGesturesIfNecessary(){const e=this._elementRef.nativeElement,t=e.style,i=this.touchGestures;"off"!==i&&(("on"===i||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName)&&(t.userSelect=t.msUserSelect=t.webkitUserSelect=t.MozUserSelect="none"),"on"!==i&&e.draggable||(t.webkitUserDrag="none"),t.touchAction="none",t.webkitTapHighlightColor="transparent")}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](E.d),p["\u0275\u0275directiveInject"](p.ElementRef),p["\u0275\u0275directiveInject"](Q.b),p["\u0275\u0275directiveInject"](p.ViewContainerRef),p["\u0275\u0275directiveInject"](p.NgZone),p["\u0275\u0275directiveInject"](x.a),p["\u0275\u0275directiveInject"](k.c),p["\u0275\u0275directiveInject"](k.f),p["\u0275\u0275directiveInject"](ie),p["\u0275\u0275directiveInject"](J.b,8),p["\u0275\u0275directiveInject"](se,8),p["\u0275\u0275directiveInject"](p.ElementRef))},e.\u0275dir=p["\u0275\u0275defineDirective"]({type:e,selectors:[["","matTooltip",""]],inputs:{showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]}),e})(),re=(()=>{class e{constructor(e,t){this._changeDetectorRef=e,this._breakpointObserver=t,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new D.a,this._isHandset=this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)")}show(e){this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=null,this._markForCheck()},e)}hide(e){this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=null,this._markForCheck()},e)}afterHidden(){return this._onHide.asObservable()}isVisible(){return"visible"===this._visibility}ngOnDestroy(){this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){const t=e.toState;"hidden"!==t||this.isVisible()||this._onHide.next(),"visible"!==t&&"hidden"!==t||(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](p.ChangeDetectorRef),p["\u0275\u0275directiveInject"](G))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,t){1&e&&p["\u0275\u0275listener"]("click",(function(e){return t._handleBodyInteraction()}),!1,p["\u0275\u0275resolveBody"]),2&e&&p["\u0275\u0275styleProp"]("zoom","visible"===t._visibility?1:null)},decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275listener"]("@state.start",(function(e){return t._animationStart()}))("@state.done",(function(e){return t._animationDone(e)})),p["\u0275\u0275pipe"](1,"async"),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"]()),2&e){var i;const e=null==(i=p["\u0275\u0275pipeBind1"](1,5,t._isHandset))?null:i.matches;p["\u0275\u0275classProp"]("mat-tooltip-handset",e),p["\u0275\u0275property"]("ngClass",t.tooltipClass)("@state",t._visibility),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](t.message)}},directives:[n.l],pipes:[n.b],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[Z.tooltipState]},changeDetection:0}),e})(),ae=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[ne],imports:[[k.a,n.c,E.g,f.e],f.e]}),e})();var le=i("Jql4"),de=i("6SPM"),he=i("QmX1"),ce=i("oJzz"),ue=i("bFib"),pe=i("Z5sx"),me=i("2Vo4"),ge=i("jtHE"),be=i("Cfvw"),fe=i("PqYM"),ve=i("VRyK"),ye=i("xgIS"),xe=i("LRne"),_e=i("pLZG"),we=i("GJmQ"),je=i("SxV6"),Me=i("vkgz"),Ce=i("3E0/"),Oe=i("eIep"),Te=i("128B"),Ee=i("cUpR");function ke(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"deja-editor",5),p["\u0275\u0275listener"]("ngModelChange",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).onModelChanged(t)}))("blur",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).onEditorBlur()})),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275property"]("ngModel",e.model.html)("config",e.editorConfig)}}function Pe(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",6),p["\u0275\u0275listener"]("dblclick",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).edit()})),p["\u0275\u0275element"](1,"div",7),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("innerHtml",e.innerHtml,p["\u0275\u0275sanitizeHtml"])}}function De(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",8),p["\u0275\u0275elementStart"](1,"em",9),p["\u0275\u0275listener"]("click",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).editStyle()})),p["\u0275\u0275text"](2,"border_style"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"em",10),p["\u0275\u0275listener"]("click",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).edit()})),p["\u0275\u0275text"](4,"edit"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"em",11),p["\u0275\u0275listener"]("click",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).close.emit(t)})),p["\u0275\u0275text"](6,"close"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("matTooltip",e.model.borderWidth?" Edit Border":" Add Border"),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("matTooltip","Edit"),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("matTooltip","Delete")}}function Se(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",1),p["\u0275\u0275template"](1,ke,1,2,"deja-editor",2),p["\u0275\u0275template"](2,Pe,2,1,"div",3),p["\u0275\u0275template"](3,De,7,3,"div",4),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.editing),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!e.designMode||!e.editing),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.designMode)}}function Be(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"deja-tile-group",3),p["\u0275\u0275listener"]("modelChanged",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().onGroupChanged(t)}))("close",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().close.emit(t)})),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("model",e.tile)("designMode",e.designMode)}}function $e(e,t){}const Ie=function(e,t){return{$implicit:e,designMode:t}};function Re(e,t){if(1&e&&p["\u0275\u0275template"](0,$e,0,0,"ng-template",4),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("ngTemplateOutlet",e.template)("ngTemplateOutletContext",p["\u0275\u0275pureFunction2"](2,Ie,e.tile,e.designMode))}}function Ae(e,t){if(1&e&&p["\u0275\u0275element"](0,"mat-progress-spinner",5),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("diameter",e.progressDiameter)}}const ze=["tileTemplate"],Fe=["tilesContainer"];function Le(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"deja-tile",4),p["\u0275\u0275listener"]("close",(function(i){p["\u0275\u0275restoreView"](e);const n=t.$implicit;return p["\u0275\u0275nextContext"]().onTileClosed(n)}))("groupChanged",(function(i){p["\u0275\u0275restoreView"](e);const n=t.$implicit;return p["\u0275\u0275nextContext"]().onTileGroupModelChanged(n)})),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,n=p["\u0275\u0275nextContext"]();p["\u0275\u0275property"]("id",e.id)("tile",e)("designMode",n.designMode)("template",n.tileTemplate),p["\u0275\u0275attribute"]("tile-index",i)}}let We=(()=>{class e{constructor(t){this.cutted$=new me.a(!1),this.dragging$=new me.a(!1),this.dropping$=new me.a(!1),this.pressed$=new me.a(!1),this.selected$=new me.a(!1),this.hidden$=new ge.a(1),this.pixelBounds$=new me.a(null),this.deleted$=new D.a,this.refresh$=new D.a,this.isTemporary=!1,this._isDragging=!1,this._isDropping=!1,this._isPressed=!1,this._isHidden=!1,this._id=t||`#${e.currentId++}`}get idealBounds(){return new pe.F(0,0,15,15)}set pixelBounds(e){pe.F.equals(this._pixelBounds,e)||(this._pixelBounds=e,this.pixelBounds$.next(e))}get pixelBounds(){return this._pixelBounds}set percentBounds(e){this._percentBounds=e}get percentBounds(){return this._percentBounds}set templateModel(e){this._templateModel=e}get templateModel(){return this._templateModel}get id(){return this._id}set isCutted(e){this._cutted!==e&&(this._cutted=e,this.cutted$.next(e))}get isCutted(){return this._cutted}set color(e){this._color=e}get color(){return this._color}set isDragging(e){this._isDragging!==e&&(this._isDragging=e,this.dragging$.next(e))}get isDragging(){return this._isDragging}set isDropping(e){this._isDropping!==e&&(this._isDropping=e,this.dropping$.next(e))}get isDropping(){return this._isDropping}set isPressed(e){this._isPressed!==e&&(this._isPressed=e,this.pressed$.next(e))}get isPressed(){return this._isPressed}set isSelected(e){this._selected!==e&&(this._selected=e,this.selected$.next(e))}get isSelected(){return this._selected}set isHidden(e){this._isHidden!==e&&(this._isHidden=e,this.hidden$.next(e))}get isHidden(){return this._isHidden}set isPending(e){this._pending=e}get fading(){return this._fading}set fading(e){this._fading=e}get isPending(){return this._pending}makeId(){this._id=`#${e.currentId++}`}equalsTo(e){return this._templateModel?this._templateModel===e._templateModel:this._id===e._id}clone(t){return t||(t=new e(this.id)),t._percentBounds=this.percentBounds,t._color=this.color,t._templateModel=this.templateModel,t._cutted=this._cutted,t._selected=this._selected,t._pending=this._pending,t._fading=this._fading,t}delete(){this.deleted$.next()}refresh(){this.refresh$.next()}}return e.currentId=0,e})();var Ve=function(e){return e[e.top=1]="top",e[e.right=2]="right",e[e.bottom=4]="bottom",e[e.left=8]="left",e[e.all=15]="all",e}({});class He extends We{constructor(e){super(e),this.color="rgb(38, 50, 56)",this.clearBorder()}get idealBounds(){return new pe.F(0,0,15,5)}clearBorder(){this.borderDirection=Ve.all,this.borderWidth=0,this.borderColor="#000"}clone(e){return e||(e=new He),super.clone(e),e.html=this.html,e.borderWidth=this.borderWidth,e.borderColor=this.borderColor,e.borderDirection=this.borderDirection,e}}let Xe=(()=>{let e=class extends ue.d{constructor(){super(...arguments),this.min=0,this.max=20,this.widthStep=2}ngOnInit(){this.materialColors=this.injector.get(pe.B),this.model=this.config.data}get borderColor(){return this.model&&this.model.borderColor?pe.b.fromHex(this.model.borderColor):null}set borderColor(e){this.model.borderColor=e.toHex(),this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection)}get borderWidth(){return this.model&&this.model.borderWidth/2||null}set borderWidth(e){e>=this.min&&e<=this.max&&(this.model.borderWidth=e*this.widthStep,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}get topBorder(){return!!this.model&&0!=(this.model.borderDirection&Ve.top)}set topBorder(e){this.model&&(e?this.model.borderDirection|=Ve.top:this.model.borderDirection&=~Ve.top,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}get rightBorder(){return!!this.model&&0!=(this.model.borderDirection&Ve.right)}set rightBorder(e){this.model&&(e?this.model.borderDirection|=Ve.right:this.model.borderDirection&=~Ve.right,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}get bottomBorder(){return!!this.model&&0!=(this.model.borderDirection&Ve.bottom)}set bottomBorder(e){this.model&&(e?this.model.borderDirection|=Ve.bottom:this.model.borderDirection&=~Ve.bottom,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}get leftBorder(){return!!this.model&&0!=(this.model.borderDirection&Ve.left)}set leftBorder(e){this.model&&(e?this.model.borderDirection|=Ve.left:this.model.borderDirection&=~Ve.left,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))}};return e.\u0275fac=function(t){return Ze(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["deja-tile-group-style-editor"]],features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:9,consts:[[1,"border-dimensions"],[1,"border-width"],["appearance","outline"],[3,"min","max","ngModel","ngModelChange"],[1,"border-positions"],["color","primary",3,"ngModel","ngModelChange"],[1,"border-color"],[3,"colors","ngModel","ngModelChange"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275elementStart"](1,"div",1),p["\u0275\u0275elementStart"](2,"h4"),p["\u0275\u0275text"](3,"Border Width:"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"mat-form-field",2),p["\u0275\u0275elementStart"](5,"deja-numeric-stepper",3),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.borderWidth=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"div",4),p["\u0275\u0275elementStart"](7,"h4"),p["\u0275\u0275text"](8,"Border Position:"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"mat-checkbox",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.topBorder=e})),p["\u0275\u0275text"](10,"Top"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"mat-checkbox",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.rightBorder=e})),p["\u0275\u0275text"](12,"Right"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](13,"mat-checkbox",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.bottomBorder=e})),p["\u0275\u0275text"](14,"Bottom"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](15,"mat-checkbox",5),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.leftBorder=e})),p["\u0275\u0275text"](16,"Left"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](17,"div",6),p["\u0275\u0275elementStart"](18,"h4"),p["\u0275\u0275text"](19,"Color Selection:"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](20,"deja-color-selector",7),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.borderColor=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("min",t.min)("max",t.max)("ngModel",t.borderWidth),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngModel",t.topBorder),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",t.rightBorder),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",t.bottomBorder),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",t.leftBorder),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("colors",t.materialColors.colors)("ngModel",t.borderColor))},directives:[g.b,he.a,s.NgControlStatus,s.NgModel,a.a,le.a],styles:["deja-tile-group-style-editor{padding:24px 24px 0}deja-tile-group-style-editor mat-checkbox label{margin-bottom:.2rem}deja-tile-group-style-editor h4{margin:.5rem 0}deja-tile-group-style-editor .border-dimensions{display:flex;flex:1 1 auto}deja-tile-group-style-editor .border-dimensions .border-width{flex:1 1 auto}deja-tile-group-style-editor .border-dimensions .border-positions{flex:1 1 auto;display:flex;flex-direction:column}deja-tile-group-style-editor mat-form-field>div.mat-form-field-wrapper{padding-bottom:.5rem!important}"],encapsulation:2,changeDetection:0}),e})();class Ne extends ue.e{constructor(){super(),this.toolbarType="window",this.title="Modifier l'apparence du groupe",this.actions=[new ue.c("confirm","Ok","done"),new ue.c("cancel","Cancel","cancel")],this.fullscreen=!1,this.hasBackdrop=!0,this.disableClose=!0,this.contentComponentRef=Xe}}var Ue;let Ge=(()=>{let e=Ue=class extends pe.s{constructor(e,t,i){super(),this.changeDetectorRef=e,this.dejaPopupService=t,this.sanitizer=i,this.edit$=new D.a,this.editorConfig=Ue.buildEditorConfig(),this.foregroundColor=null,this.backgroundColor=null,this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null,this.close=new p.EventEmitter,this.modelChanged=new p.EventEmitter,this.editing=!1,this.subscriptions=[],this._designMode=!1,Object(be.a)(this.edit$).pipe(Object(_e.a)(()=>this._designMode),Object(F.a)(100),Object(_e.a)(()=>!!this.editor),Object(V.a)(this.destroyed$)).subscribe(()=>this.editor.setFocus())}set model(e){this._model=e,this.updateColorsFromModel(),this.updateBorderFromModel(),this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions=[],e&&this.subscriptions.push(Object(be.a)(this._model.refresh$).pipe(Object(we.a)(()=>!!this._model),Object(F.a)(1),Object(V.a)(this.destroyed$)).subscribe(()=>{this.updateColorsFromModel(),this.updateBorderFromModel(),this.modelChanged.emit(this.model)}))}get model(){return this._model}get designMode(){return this._designMode}get innerHtml(){return this.sanitizer.bypassSecurityTrustHtml(this.model.html)}set designMode(e){this._designMode=Object(v.b)(e),this.editing=!1,this.changeDetectorRef.markForCheck()}static buildEditorConfig(){return{coreStyles_bold:{element:"b",overrides:"strong"},coreStyles_italic:{element:"i",overrides:"em"},enterMode:3,extraPlugins:"colorbutton,justify,autogrow",language:"fr",format_tags:"p;h1;h2",removeButtons:"Styles,Subscript,Superscript,Strike",removePlugins:"magicline",toolbarGroups:[{name:"undo"},{name:"align"},{name:"colors"},{name:"font"},"/",{name:"others"},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"styles",groups:["format","formats"]},{name:"paragraph",groups:["list"]}]}}edit(){this.designMode&&(this.editing=!0,this.changeDetectorRef.markForCheck(),Object(fe.a)(100).pipe(Object(_e.a)(()=>!!this.editor),Object(V.a)(this.destroyed$)).subscribe(()=>this.editor.setFocus()))}onEditorBlur(){this.editing=!1,this.changeDetectorRef.markForCheck()}onModelChanged(e){this.model.html=e,this.modelChanged.emit(this.model)}editStyle(){const e=new Ne;e.data={borderWidth:this.model.borderWidth,borderColor:this.model.borderColor,borderDirection:this.model.borderDirection,update:(e,t,i)=>{this.model.borderWidth=e,this.model.borderColor=t,this.model.borderDirection=i,this.updateBorderFromModel()}};const t={borderColor:this.model.borderColor,borderWidth:this.model.borderWidth,borderDirection:this.model.borderDirection};this.dejaPopupService.openAdvanced$(e).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>{e.accepted?0!==this.model.borderDirection&&0!==this.model.borderWidth||(this.model.clearBorder(),this.updateBorderFromModel()):(this.model.borderColor=t.borderColor,this.model.borderDirection=t.borderDirection,this.model.borderWidth=t.borderWidth,this.updateBorderFromModel()),e.accepted&&this.modelChanged.emit(this.model)})}updateColorsFromModel(){this.foregroundColor=this._model?pe.b.parse(this._model.color).bestTextColor.toHex():null,this.backgroundColor=this._model?this._model.color:null,this.changeDetectorRef.markForCheck()}updateBorderFromModel(){this._model?(this.borderTop=0!=(this._model.borderDirection&Ve.top)?`solid ${this._model.borderColor||"transparent"} ${this._model.borderWidth||0}px`:null,this.borderRight=0!=(this._model.borderDirection&Ve.right)?`solid ${this._model.borderColor||"transparent"} ${this._model.borderWidth||0}px`:null,this.borderBottom=0!=(this._model.borderDirection&Ve.bottom)?`solid ${this._model.borderColor||"transparent"} ${this._model.borderWidth||0}px`:null,this.borderLeft=0!=(this._model.borderDirection&Ve.left)?`solid ${this._model.borderColor||"transparent"} ${this._model.borderWidth||0}px`:null):(this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null),this.changeDetectorRef.markForCheck()}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](p.ChangeDetectorRef),p["\u0275\u0275directiveInject"](ue.g),p["\u0275\u0275directiveInject"](Ee.DomSanitizer))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["deja-tile-group"]],viewQuery:function(e,t){var i;1&e&&p["\u0275\u0275viewQuery"](de.a,!0),2&e&&p["\u0275\u0275queryRefresh"](i=p["\u0275\u0275loadQuery"]())&&(t.editor=i.first)},hostVars:13,hostBindings:function(e,t){2&e&&(p["\u0275\u0275attribute"]("designMode",t._designMode),p["\u0275\u0275styleProp"]("color",t.foregroundColor)("background-color",t.backgroundColor)("border-top",t.borderTop)("border-right",t.borderRight)("border-bottom",t.borderBottom)("border-left",t.borderLeft))},inputs:{model:"model",designMode:"designMode"},outputs:{close:"close",modelChanged:"modelChanged"},features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["class","tile-group-content",4,"ngIf"],[1,"tile-group-content"],[3,"ngModel","config","ngModelChange","blur",4,"ngIf"],["class","not-editing-container",3,"dblclick",4,"ngIf"],["class","button-container",4,"ngIf"],[3,"ngModel","config","ngModelChange","blur"],[1,"not-editing-container",3,"dblclick"],[1,"not-editing",3,"innerHtml"],[1,"button-container"],["id","edit-border-button",1,"material-icons",3,"matTooltip","click"],["id","edit-button",1,"material-icons",3,"matTooltip","click"],["id","close-button",1,"material-icons",3,"matTooltip","click"]],template:function(e,t){1&e&&p["\u0275\u0275template"](0,Se,4,3,"div",0),2&e&&p["\u0275\u0275property"]("ngIf",t.model)},directives:[n.n,de.a,s.NgControlStatus,s.NgModel,oe],styles:["deja-tile-group{display:flex;justify-content:space-between;align-items:center;box-sizing:border-box;height:100%;width:100%}deja-tile-group .mat-icon{display:flex;align-items:center;justify-content:center}deja-tile-group .tile-group-content{flex-grow:1;display:flex;overflow:hidden}deja-tile-group .tile-group-content .not-editing-container,deja-tile-group .tile-group-content deja-editor{padding:.8rem;width:100%}deja-tile-group .tile-group-content .not-editing-container p,deja-tile-group .tile-group-content deja-editor p{margin:0}deja-tile-group .tile-group-content deja-editor.hidden{display:none}deja-tile-group .tile-group-content deja-editor div.cke_editable{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center}deja-tile-group .tile-group-content .not-editing-container{display:flex;align-items:center;flex:1 1 auto;overflow:hidden}deja-tile-group .tile-group-content .not-editing-container .not-editing{display:flex;flex-direction:column;width:100%}deja-tile-group .tile-group-content .button-container{position:absolute;left:0;right:0;top:0;display:flex;flex-direction:row;color:#fff;background-color:rgba(0,0,0,.8);opacity:0;justify-content:flex-end;align-items:center;transition:opacity 1s ease-in-out}deja-tile-group .tile-group-content .button-container .material-icons{font-size:1rem;z-index:3;cursor:pointer;margin:.3rem;flex:0 0 auto}deja-tile-group:hover .button-container{background-color:rgba(0,0,0,.2);opacity:1}deja-tile-group:hover .button-container:hover{background-color:rgba(0,0,0,.8)}deja-tile-group #title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex-grow:1;flex-basis:auto;outline:0}deja-tile-group #title a{color:inherit!important}deja-tile-group #title[contenteditable=true]{cursor:text}deja-tile-group [fontIcon]{font-size:1rem;z-index:3;cursor:pointer;flex-basis:1rem;flex-grow:0;flex-shrink:0}deja-tile-group [fontIcon] path{fill:#777!important}deja-tile-group [fontIcon]:hover{background-color:rgba(255,255,255,.2);color:#222}deja-tile-group #close-button,deja-tile-group #edit-button{margin:.3rem;flex:0 0 auto}"],encapsulation:2,changeDetection:0}),e})(),qe=(()=>{let e=class{constructor(e){this.element=e.nativeElement,this.element.style.display="none"}set bounds(e){if(e){const{left:t,top:i,width:n,height:s}=e;this.element.style.left=`${t}px`,this.element.style.top=`${i}px`,this.element.style.width=`${n}px`,this.element.style.height=`${s}px`,this.element.style.display="block"}else this.element.style.display="none"}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](p.ElementRef))},e.\u0275dir=p["\u0275\u0275defineDirective"]({type:e,selectors:[["","deja-tile-position",""]],inputs:{bounds:"bounds"}}),e})(),Ye=(()=>{let e=class{constructor(e,t){this.changeDetectorRef=t,this.groupChanged=new p.EventEmitter,this.close=new p.EventEmitter,this.progressDiameter=100,this.subscriptions=[],this.element=e.nativeElement,this.element.setAttribute("hidden","0")}set designMode(e){this._designMode=Object(v.b)(e)}get designMode(){return this._designMode}set tile(e){if(this._tile=e,this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions=[],e){const t=(e,t)=>{t?this.element.setAttribute(e,t.toString()):this.element.removeAttribute(e)};e.fading&&(this.element.setAttribute("fading","0"),this.changeDetectorRef.markForCheck()),this.subscriptions.push(Object(be.a)(e.pixelBounds$).pipe(Object(_e.a)(e=>!!e),Object(je.a)(),Object(_e.a)(()=>e.fading),Object(Me.a)(()=>{this.element.setAttribute("fading","1"),this.changeDetectorRef.markForCheck()}),Object(Ce.a)(200)).subscribe(()=>{this.element.removeAttribute("fading"),this.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(be.a)(e.pixelBounds$).pipe(Object(_e.a)(e=>!!e)).subscribe(t=>{e.isHidden||this.element.removeAttribute("hidden"),this.element.style.left=`${t.left}px`,this.element.style.top=`${t.top}px`,this.element.style.width=`${t.width}px`,this.element.style.height=`${t.height}px`,this.progressDiameter=Math.min(100,Math.round(Math.max(.4*t.width,.4*t.height))),this.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(be.a)(e.pressed$).pipe(Object(Me.a)(e=>t("pressed",e))).subscribe(()=>this.changeDetectorRef.markForCheck())),this.subscriptions.push(Object(be.a)(e.selected$).pipe(Object(Me.a)(e=>t("selected",e))).subscribe(()=>this.changeDetectorRef.markForCheck())),this.subscriptions.push(Object(be.a)(e.dragging$).pipe(Object(Me.a)(e=>t("drag",e))).subscribe(()=>this.changeDetectorRef.markForCheck())),this.subscriptions.push(Object(be.a)(e.dropping$).pipe(Object(Me.a)(e=>t("drop",e))).subscribe(()=>this.changeDetectorRef.markForCheck())),this.subscriptions.push(Object(be.a)(e.cutted$).pipe(Object(Me.a)(e=>t("cutted",e))).subscribe(()=>this.changeDetectorRef.markForCheck())),this.subscriptions.push(Object(be.a)(e.deleted$).pipe(Object(Me.a)(()=>this.element.remove())).subscribe(()=>this.changeDetectorRef.markForCheck()));const i=Object(be.a)(e.hidden$).pipe(Object(Me.a)(e=>t("hidden",e?"1":"2")));this.subscriptions.push(i.pipe(Object(F.a)(1e3),Object(_e.a)(e=>e),Object(Me.a)(()=>this.element.setAttribute("hidden","0"))).subscribe(()=>this.changeDetectorRef.markForCheck())),this.subscriptions.push(i.pipe(Object(F.a)(1),Object(_e.a)(e=>!e),Object(Me.a)(()=>this.element.removeAttribute("hidden"))).subscribe(()=>this.changeDetectorRef.markForCheck())),this.subscriptions.push(Object(be.a)(e.refresh$).pipe(Object(F.a)(1)).subscribe(()=>this.changeDetectorRef.markForCheck()))}}get tile(){return this._tile}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}onGroupChanged(e){this.groupChanged.emit(e)}get isGroup(){return this._tile&&this._tile instanceof He}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](p.ElementRef),p["\u0275\u0275directiveInject"](p.ChangeDetectorRef))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["deja-tile"]],inputs:{designMode:"designMode",tile:"tile",template:"template"},outputs:{groupChanged:"groupChanged",close:"close"},decls:3,vars:3,consts:[["class","noselect",3,"model","designMode","modelChanged","close",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","class","accent",3,"diameter",4,"ngIf"],[1,"noselect",3,"model","designMode","modelChanged","close"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mode","indeterminate",1,"accent",3,"diameter"]],template:function(e,t){1&e&&(p["\u0275\u0275template"](0,Be,1,2,"deja-tile-group",0),p["\u0275\u0275template"](1,Re,1,5,void 0,1),p["\u0275\u0275template"](2,Ae,1,1,"mat-progress-spinner",2)),2&e&&(p["\u0275\u0275property"]("ngIf",t.isGroup),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!t.isGroup),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.tile&&t.tile.isPending))},directives:[n.n,Ge,n.s,O],styles:['[_nghost-%COMP%]{display:block;position:absolute;transition-property:left,top,opacity;transition-duration:.5s;transition-timing-function:ease;opacity:1}[expanded][_nghost-%COMP%]{transition-property:height}[cutted][_nghost-%COMP%]{opacity:.5}[drag][_nghost-%COMP%], [drop][_nghost-%COMP%]{z-index:100}[drag][_nghost-%COMP%]{opacity:.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:none}[fading="0"][_nghost-%COMP%]{opacity:0;transition:none}[fading="1"][_nghost-%COMP%]{opacity:0}[hidden="0"][_nghost-%COMP%]{visibility:hidden;transition:none}[hidden="1"][_nghost-%COMP%]{opacity:0;transition:opacity 1s ease-in-out}[hidden="2"][_nghost-%COMP%]{visibility:visible;opacity:0;transition:none}[_nghost-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{position:absolute;z-index:1;right:.2rem;bottom:.2rem;transform:translate(-60%,-60%)}'],changeDetection:0}),e})(),Ke=(()=>{let e=class extends pe.s{constructor(e){super(),this.clipboardService=e,this.refreshTiles$=new D.a,this.ensureVisible$=new D.a,this.ensureBounds$=new D.a,this.dragging$=new me.a(!1),this.dragSelection$=new D.a,this.dragDropInfos$=new D.a,this.selectionRect$=new D.a,this.dragover$=new D.a,this.dragleave$=new D.a,this.deleteTiles$=new D.a,this.designMode=!1,this.layoutCompleted=new D.a,this.layoutChanged=new D.a,this.tilesAdded=new D.a,this.tilesDeleted=new D.a,this.selectionChanged=new D.a,this.contentAdding=new D.a,this.contentRemoving=new D.a,this._tileMinWidth=10,this._tileMinWidthUnit="%",this._tileMaxWidth=100,this._tileMaxWidthUnit="%",this._tileMinHeight=10,this._tileMinHeightUnit="%",this._tileMaxHeight=100,this._tileMaxHeightUnit="%",this._maxWidth=100,this._maxWidthUnit="%",this.tilesDic=new Map,this._targetBounds=new pe.F,this.destination=new pe.F,this.dragPageOffset=new pe.E,this.dragOriginalPosition=new pe.E,this.selectedIds=new Array,Object(be.a)(this.refreshTiles$).pipe(Object(F.a)(30),Object(Me.a)(()=>{this.container.style.width="",this.container.style.height=""}),Object(Ce.a)(10),Object(V.a)(this.destroyed$)).subscribe(e=>{var t,i,n;const s=new Array,o=this.container.getBoundingClientRect();((null===(t=e)||void 0===t?void 0:t.resetWidth)||!this.hundredPercentWith)&&(this.hundredPercentWith=o.width);let r=o.height-20,a=o.width-20,l=0,d=0;const h=this.tiles||new Array,c=new Array;h.forEach(e=>{if(e.percentBounds&&!e.percentBounds.isEmpty()){const t=this.getPixelBounds(e.percentBounds);t.bottom>l&&(l=t.right),t.right>d&&(d=t.bottom),e.isDragging||(e.pixelBounds=t)}else s.push(e);e.isSelected&&!e.isHidden&&c.push(e.id),e.pixelBounds&&e.pixelBounds.bottom>r&&(r=e.pixelBounds.bottom)});let u=d,p=0;if(s.forEach(e=>{e.percentBounds=e.percentBounds||new pe.F(this.getPercentSize(p),this.getPercentSize(u),3*this.getTileMinPercentWidth(),3*this.getTileMinPercentHeight());let t=this.getPixelBounds(e.percentBounds);t.right>a&&(u=d,p=0,e.percentBounds.left=0,e.percentBounds.top=this.getPercentSize(u),t=this.getPixelBounds(e.percentBounds)),t.bottom>d&&(d=t.bottom),e.pixelBounds=this.getPixelBounds(e.percentBounds),p+=t.width}),this.dragTarget){const e=this.getPixelBounds(this.dragTarget);r<=e.bottom&&(r=e.bottom+e.height),a<=e.right&&(a=e.right+e.width)}const m=this.getPixelSize(2*this._tileMinHeight,this._tileMinHeightUnit);r<m&&(r=m),this.container.style.width=`${a}px`,this.container.style.height=`${r}px`,(null===(i=e)||void 0===i?void 0:i.ensureVisible)&&this.ensureVisible$.next(e.ensureVisible),(null===(n=e)||void 0===n?void 0:n.ensureBounds)&&this.ensureBounds$.next(e.ensureBounds),this.selectedTiles=c;const g=new CustomEvent("DejaTilesEvent",{cancelable:!1});s.length>0&&(g.tiles=s,this.layoutChanged.next(g)),g.tiles=h,this.layoutCompleted.next(g)});const t=Object(be.a)(this.ensureVisible$).pipe(Object(Ce.a)(1),Object(L.a)(e=>this.tilesDic.get(e)),Object(_e.a)(e=>!!e),Object(L.a)(e=>e.percentBounds));Object(ve.a)(this.ensureBounds$,t).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>{const{left:t,right:i,top:n,bottom:s}=this.getPixelBounds(e),o=(e=>{for(;e&&"DEJA-TILES"!==e.tagName;)e=e.parentElement;return e})(this.container);if(!o)return;const r=this.container.getBoundingClientRect(),a=o.getBoundingClientRect();t+r.left<a.bottom?o.scrollLeft+=t+r.left-a.bottom:i+r.left>a.right&&(o.scrollLeft+=i+r.left-a.right),n+r.top<a.top?o.scrollTop+=n+r.top-a.top:s+r.top>a.bottom&&(o.scrollTop+=s+r.top-a.bottom)}),Object(be.a)(this.dragSelection$).pipe(Object(Oe.a)(e=>{const t=Object(ye.a)(this._container.ownerDocument,"mouseup").pipe(Object(Me.a)(()=>this.selectionRect$.next(null)));return Object(ye.a)(this._container,"mousemove").pipe(Object(V.a)(t),Object(_e.a)(e=>1===e.buttons),Object(Me.a)(t=>{const i=this._container.getBoundingClientRect();e.selectedRect=pe.F.fromPoints(e.startPosition,new pe.E(t.pageX-i.left,t.pageY-i.top)),this.selectionRect$.next(e.selectedRect);const n=this.HitTest(e.selectedRect);this.selectedTiles=n.map(e=>e.id)}))}),Object(V.a)(this.destroyed$)).subscribe();const i=Object(be.a)(this.dragleave$);Object(be.a)(this.dragDropInfos$).pipe(Object(Oe.a)(e=>{const t=e&&(e.tiles&&e.tiles.length&&e.tiles||e.currentTile&&[e.currentTile]);if(!t)return Object(xe.a)(null);const n=!e.tiles,s=Object(ye.a)(this._container,"mousemove"),o=Object(ye.a)(this._container.ownerDocument,"keyup").pipe(Object(_e.a)(e=>e.code===pe.A.Escape)),r=s.pipe(Object(_e.a)(e=>1!==e.buttons)),a=Object(ve.a)(i,r,o).pipe(Object(Me.a)(()=>{this.removeTemporaryTile(),this.cancelDrag(t)})),l=Object(ye.a)(this._container.ownerDocument,"mouseup").pipe(Object(Me.a)(()=>this.drop(t))),d=Object(ve.a)(l,a),h=Object(be.a)(this.dragover$).pipe(Object(L.a)(e=>e.originalEvent));return Object(ve.a)(s,h).pipe(Object(V.a)(d),Object(Me.a)(i=>{const s=this._container.getBoundingClientRect(),o=i.pageX-s.left,r=i.pageY-s.top;if(e.enabled)this.drag(t,o,r);else if(Math.abs(e.startX-o)>=15||Math.abs(e.startY-r)>=15)if(n){const i=e.currentTile;this.selectedTiles=[i.id];let n=i.percentBounds;n&&!n.isEmpty()||(n=new pe.F(0,0,15,15));const s=this.getFreePlace(new pe.F(this.getPercentSize(o)-n.width/2,this.getPercentSize(r)-n.height/2,n.width,n.height));e.startX=s.left-n.width/2,e.startY=s.top-n.height/2,i.percentBounds=s,i.dragging$.next(!0),this._cursor="move",this.tiles.push(i),this.tilesDic.set(i.id,i),this.dragging$.next(!0),e.enabled=!0,this.startDrag(t,this.getPixelSize(s.left+s.width/2),this.getPixelSize(s.top+s.height/2))}else this.dragging$.next(!0),e.enabled=!0,this.startDrag(t,e.startX,e.startY)}))}),Object(V.a)(this.destroyed$)).subscribe(),Object(be.a)(this.deleteTiles$).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>this.deleteTiles(e))}set container(e){if(this._container=e,this._container){const t=Object(ye.a)(e,"mouseleave"),i=Object(ye.a)(e.ownerDocument,"mouseup"),n=Object(ye.a)(e,"mouseenter");n.pipe(Object(Oe.a)(()=>{if(this.designMode){const i=t.pipe(Object(Me.a)(()=>this.container.style.cursor=""));return Object(ye.a)(e,"mousemove").pipe(Object(V.a)(i),Object(_e.a)(e=>!!this.container&&0===e.buttons),Object(L.a)(e=>this._cursor=this.getCursorFromHTMLElement(e.pageX,e.pageY,e.target)))}return Object(xe.a)("")}),Object(V.a)(this.destroyed$)).subscribe(e=>this.container.style.cursor=e),n.pipe(Object(Oe.a)(()=>Object(ye.a)(e,"mousedown").pipe(Object(_e.a)(e=>1===e.buttons),Object(_e.a)(e=>!this.isElementInsideDejaEditor(e.target)),Object(L.a)(e=>({event:e,clickedTile:this.getTileComponentFromHTMLElement(e.target)}))).pipe(Object(V.a)(t),Object(Oe.a)(({event:e,clickedTile:t})=>{const n=e.target;if(this.currentTile&&(this.currentTile.isPressed=!1),this.currentTile=t,this.currentTile){if(this.currentTile.isPressed=!0,e.ctrlKey);else if(this.currentTile.isSelected&&"move"===this._cursor||(this.selectedTiles=[this.currentTile.id]),this.designMode){const t=this._container.getBoundingClientRect();this.dragDropInfos$.next({enabled:!1,startX:e.pageX-t.left,startY:e.pageY-t.top,currentTile:this.currentTile,tiles:this.tiles.filter(e=>e.isSelected)})}return i.pipe(Object(I.a)(1),Object(_e.a)(()=>!!this.currentTile))}if(n===this.container||n.parentElement===this.container){if(1===e.buttons){const t=this._container.getBoundingClientRect();this.dragSelection$.next({startPosition:new pe.E(e.pageX-t.left,e.pageY-t.top),selectedRect:new pe.F})}this.currentTile&&(this.currentTile.isPressed=!1),this.selectedTiles=[]}return Object(xe.a)(null)}))),Object(_e.a)(e=>!!e),Object(V.a)(this.destroyed$)).subscribe(e=>{this.currentTile.isPressed&&(this.currentTile.isPressed=!1,e.ctrlKey&&(this.currentTile.isSelected=!this.currentTile.isSelected,this.selectedTiles=this.tiles.filter(e=>e.isSelected).map(e=>e.id))),this.designMode&&(this._cursor=this.getCursorFromHTMLElement(e.pageX,e.pageY,e.target),this.container.style.cursor=this._cursor),this.currentTile=void 0})}}get container(){return this._container}set tiles(e){this._tiles=e,this.tilesDic=this.tiles.reduce((e,t)=>e.set(t.id,t),new Map),this.refreshTiles$.next({resetWidth:!0})}get tiles(){return this._tiles||(this._tiles=new Array)}set selectedTiles(e){var t;const i=new Array;let n=!1;const s=e.reduce((e,t)=>e.add(t),new Set),o=this.selectedIds.reduce((e,t)=>e.add(t),new Set);if((null===(t=this.tiles)||void 0===t?void 0:t.length)?this.tiles.forEach(e=>{s.has(e.id)!==o.has(e.id)&&(n=!0),e.isSelected=s.has(e.id),e.isSelected&&i.push(e)}):n=this.selectedIds.length>0,this.selectedIds=e,n){const e=new CustomEvent("DejaTilesAddEvent",{cancelable:!1});e.tiles=i,this.selectionChanged.next(e)}}set tileMinWidth(e){this.extractValueAndUnit("_tileMinWidth",e)}set tileMaxWidth(e){this.extractValueAndUnit("_tileMaxWidth",e)}set tileMinHeight(e){this.extractValueAndUnit("_tileMinHeight",e)}set tileMaxHeight(e){this.extractValueAndUnit("_tileMaxHeight",e)}set maxWidth(e){this.extractValueAndUnit("_maxWidth",e)}get targetBounds(){return this._targetBounds}set targetBounds(e){this._targetBounds=e,e?this.selectionRect$.next(new pe.F({height:this.getPixelSize(e.height||0),left:this.getPixelSize(e.left||0),top:this.getPixelSize(e.top||0),width:this.getPixelSize(e.width||0)})):this.selectionRect$.next()}copySelection(){const e=this.tiles.filter(e=>e.isSelected);return e.length&&this.copyTiles(e,!1),e}cutSelection(){const e=this.tiles.filter(e=>e.isSelected);return e.length&&this.copyTiles(e,!0),e}deleteSelection(){const e=this.tiles.filter(e=>e.isSelected);return e.length&&this.removeTiles(e.map(e=>e.id)),e}paste(){if(!this.clipboardService||!this.clipboardService.isAvailable("tiles"))return new Array;const e=this.clipboardService.get("tiles");let t;this.tiles.forEach(e=>e.isSelected=!1),e.forEach(e=>{t=t?pe.F.union(t,e.percentBounds):new pe.F(e.percentBounds)});const i=this.getFreePlace(new pe.F(0,0,t.width,t.height)),n=e.map(e=>{const n=e.clone();return n.percentBounds=new pe.F(i.left+e.percentBounds.left-t.left,i.top+e.percentBounds.top-t.top,e.percentBounds.width,e.percentBounds.height),n.isSelected=!0,n});return this.addTiles(n),n}getTileElementFromHTMLElement(e){let t=e;for(;t&&"DEJA-TILE"!==t.tagName;)if(t=t.parentElement,t===this.container)return;return t}isElementInsideDejaEditor(e){let t=e;for(;t&&t!==this.container;){if("DEJA-EDITOR"===t.tagName)return!0;t=t.parentElement}return!1}getTileComponentFromHTMLElement(e){const t=this.getTileElementFromHTMLElement(e);return t&&this.tilesDic.get(t.id)}deleteTiles(e){if(!e||0===e.length)return;const t=new CustomEvent("DejaTilesDeletedEvent",{cancelable:!1});t.tiles=e,e.forEach(e=>{this.tilesDic.delete(e.id),e.delete()});let i=this.tiles.length;for(;--i>=0;)this.tilesDic.has(this.tiles[i].id)||this.tiles.splice(i,1);this.refreshTiles$.next({resetWidth:!0}),t.tiles=this.tiles,this.tilesDeleted.next(t)}removeTiles(e){if(!e||0===e.length)return;const t=e.map(e=>this.tilesDic.get(e));t.forEach(e=>{e.isHidden=!0});const i=new CustomEvent("DejaTilesRemoveEvent",{cancelable:!0});i.tiles=this.tiles,i.removed=t,i.cancel$=new D.a;const n=i.cancel$.pipe(Object(je.a)(),Object(V.a)(this.destroyed$)).subscribe(e=>{e?t.forEach(e=>e.isHidden=!1):this.deleteTiles(t)});this.contentRemoving.next(i),i.defaultPrevented||(n.unsubscribe(),this.deleteTiles(t))}getFreePlace(e){const t=new Array,i=this.tiles.filter(e=>!e.isDragging);let n=0;i.forEach(e=>{e.percentBounds.bottom>n&&(n=e.percentBounds.bottom)});for(let s=0;s<=this._maxWidth-e.width;s+=this._tileMinWidth)for(let o=0;o<=n-e.height;o+=this._tileMinHeight){const n=new pe.F(s,o,e.width,e.height);i.find(e=>e.percentBounds.intersectWith(n))||t.push(n)}return t.length>0?(t.sort((t,i)=>{const n=t=>Math.min(Math.abs(t.left-e.left),Math.abs(t.right-e.right))+200*Math.min(Math.abs(t.top-e.top),Math.abs(t.bottom-e.bottom));return n(t)-n(i)}),t[0]):new pe.F(0,n,e.width,e.height)}moveTile(e,t){const i=this.tiles.find(t=>t.id===e);i&&(i.percentBounds=t,this.refreshTiles$.next())}HitTest(e){const t=new pe.F(this.getPercentSize(e.left),this.getPercentSize(e.top),this.getPercentSize(e.width),this.getPercentSize(e.height));return this.tiles.filter(e=>e.percentBounds.intersectWith(t))}getPercentSize(e){return Math.round(100*e/this.hundredPercentWith)}dragEnter(e,t){if(!this.designMode||!this._container)return!1;const i=e.DejaTile;if(!i)return!1;const n=this._container.getBoundingClientRect(),{pageX:s,pageY:o}=t.originalEvent,r=s-n.left,a=o-n.top,l=i.clone();return l.isTemporary=!0,this.dragDropInfos$.next({enabled:!1,startX:r,startY:a,currentTile:l}),!0}startDrag(e,t,i){const n=this.saveLayout();let s;e.forEach(e=>{s=s?pe.F.union(s,e.percentBounds):e.percentBounds,e.isDragging=!0}),this.dragRelativePosition=new Map,e.forEach(e=>this.dragRelativePosition.set(e.id,new pe.E(e.percentBounds.left-s.left,e.percentBounds.top-s.top))),this.dragPageOffset=new pe.E(t,i),this.dragOriginalPosition=new pe.E(s.left,s.top),this.targetBounds=n.targetBounds=n.validBounds=s,this.originalLayout=n,this.validLayout=void 0}cancelDrag(e){this.clearMoveTimer(),Object(be.a)(e).pipe(Object(_e.a)(e=>!!e),Object(V.a)(this.destroyed$)).subscribe(e=>{e.isDragging=!1,e.isDropping=!0}),this.originalLayout&&this.restoreLayout(this.originalLayout),this.endDrag()}drop(e){let t;if(this.clearMoveTimer(),this.validLayout){if(this.restoreLayout(this.validLayout),"move"!==this._cursor){const t=e[0];t.percentBounds=new pe.F(this.validLayout.validBounds),t.isDragging=!1}else Object(be.a)(e).pipe(Object(_e.a)(e=>!!e),Object(Me.a)(e=>{const t=this.validLayout.validBounds.left+this.dragRelativePosition.get(e.id).left,i=this.validLayout.validBounds.top+this.dragRelativePosition.get(e.id).top;e.percentBounds=new pe.F(t,i,e.percentBounds.width,e.percentBounds.height),e.isDragging=!1,e.isDropping=!0,e.isTemporary&&(this.tilesDic.delete(e.id),e.makeId(),this.tilesDic.set(e.id,e),this.addTiles([e]))}),Object(Ce.a)(1e3),Object(V.a)(this.destroyed$)).subscribe(e=>e.isDropping=!1);t=this.tiles.filter(e=>{var t;return!pe.F.equals(e.percentBounds,null===(t=this.originalLayout[e.id])||void 0===t?void 0:t.bounds)}),this.endDrag()}else this.removeTemporaryTile(),this.cancelDrag(e);if(t){const e=new CustomEvent("DejaTilesEvent",{cancelable:!0});e.tiles=this.tiles,this.layoutChanged.next(e)}return t}endDrag(){this.originalLayout=void 0,this.validLayout=void 0,this.targetBounds=void 0,this.dragging$.next(!1),this.dragDropInfos$.next(null),this.dragTarget=void 0,this.copyTiles(null),this.refreshTiles$.next()}drag(e,t,i){const n=new pe.E(t-this.dragPageOffset.left,i-this.dragPageOffset.top),s=n.left+this.getPixelSize(this.dragOriginalPosition.left),o=n.top+this.getPixelSize(this.dragOriginalPosition.top),r=this.getTileMinPixelSize(),a=this.getTileMaxPixelSize();if("move"!==this._cursor){const t=e[0],i=this.getPixelBounds(t.percentBounds),n=s+i.width,l=o+i.height,d=i.right,h=i.bottom;switch(this._cursor){case"nw-resize":i.left=Math.max(Math.min(s,i.right-r.width),i.right-a.width),i.right=d,i.top=Math.max(Math.min(o,i.bottom-r.height),i.bottom-a.height),i.bottom=h,this.size(t,new pe.E(s,o),pe.u.left+pe.u.top);break;case"sw-resize":i.left=Math.max(Math.min(s,i.right-r.width),i.right-a.width),i.right=d,i.bottom=Math.max(Math.min(l,i.top+a.height),i.top+r.height),this.size(t,new pe.E(s,l),pe.u.left+pe.u.bottom);break;case"w-resize":i.left=Math.max(Math.min(s,i.right-r.width),i.right-a.width),i.right=d,this.size(t,new pe.E(s,0),pe.u.left);break;case"ne-resize":i.right=Math.max(Math.min(n,i.left+a.width),i.left+r.width),i.top=Math.max(Math.min(o,i.bottom-r.height),i.bottom-a.height),i.bottom=h,this.size(t,new pe.E(n,o),pe.u.right+pe.u.top);break;case"se-resize":i.right=Math.max(Math.min(n,i.left+a.width),i.left+r.width),i.bottom=Math.max(Math.min(l,i.top+a.height),i.top+r.height),this.size(t,new pe.E(n,l),pe.u.right+pe.u.bottom);break;case"e-resize":i.right=Math.max(Math.min(n,i.left+a.width),i.left+r.width),this.size(t,new pe.E(n,0),pe.u.right);break;case"n-resize":i.top=Math.max(Math.min(o,i.bottom-r.height),i.bottom-a.height),i.bottom=h,this.size(t,new pe.E(0,o),pe.u.top);break;case"s-resize":i.bottom=Math.max(Math.min(l,i.top+a.height),i.top+r.height),this.size(t,new pe.E(0,l),pe.u.bottom)}t.pixelBounds=i}else e.forEach(e=>{e.pixelBounds=new pe.F(s+this.getPixelSize(this.dragRelativePosition.get(e.id).left),o+this.getPixelSize(this.dragRelativePosition.get(e.id).top),this.getPixelSize(e.percentBounds.width),this.getPixelSize(e.percentBounds.height))}),this.dragTarget=new pe.F(this.getPercentSize(s),this.getPercentSize(o),this.targetBounds.width,this.targetBounds.height),this.move()}addTiles(e){var t;if(!e||0===e.length)return;e.forEach(e=>{this.tiles.find(t=>t.id===e.id)||(this.tiles.find(t=>{var i;return e.percentBounds&&(null===(i=t.percentBounds)||void 0===i?void 0:i.intersectWith(e.percentBounds))})&&(e.percentBounds=void 0),e.percentBounds||(e.percentBounds=this.getFreePlace(e.idealBounds)),this.tiles.push(e),this.tilesDic.set(e.id,e))});const i=new CustomEvent("DejaTilesAddEvent",{cancelable:!0});i.tiles=this.tiles,i.added=e,i.cancel$=new D.a;const n=null===(t=this.clipboardService)||void 0===t?void 0:t.get("tiles-provider");let s;n&&(s=this.clipboardService.get("tiles"),s.forEach(e=>{e.isHidden=!0}));const o=()=>{s&&(n.next(s),this.clipboardService.clear())},r=e=>{o();const t=new CustomEvent("DejaTileAddedEvent",{cancelable:!1});t.tiles=this.tiles,t.added=e,this.tilesAdded.next(t)};let a;e.forEach(e=>{a=a?pe.F.union(a,e.percentBounds):new pe.F(e.percentBounds)}),this.refreshTiles$.next({ensureBounds:a}),this.contentAdding.next(i),i.defaultPrevented?(i.cancel$.pipe(Object(I.a)(1),Object(_e.a)(e=>!e),Object(V.a)(this.destroyed$)).subscribe(r),i.cancel$.pipe(Object(I.a)(1),Object(_e.a)(e=>!!e),Object(Oe.a)(()=>(s&&s.forEach(e=>{e.isHidden=!1,e.isCutted=!0}),Object(be.a)(e))),Object(Me.a)(e=>e.isHidden=!0),Object(Ce.a)(1e3),Object(Te.a)((e,t)=>[...e,t],new Array),Object(I.a)(1),Object(V.a)(this.destroyed$)).subscribe(e=>this.deleteTiles(e))):r(e)}size(e,t,i){const n=new pe.E(this.getPercentSize(t.left),this.getPercentSize(t.top)),s=e.percentBounds.clone(),o=e.percentBounds.clone();let r,a,l,d;if(i&pe.u.left){r=this.getTileMinPercentWidth(),l=this.getTileMaxPercentWidth();const e=n.left,t=s.left<e?r*Math.ceil(e/r):r*Math.floor(e/r),i=Math.min(l,Math.max(r,o.right-t));s.width=s.right-e,s.left=e,o.left=o.right-i,o.width=i}if(i&pe.u.right){r=r||this.getTileMinPercentWidth(),l=l||this.getTileMaxPercentWidth();const e=n.left,t=s.right<e?r*Math.ceil(e/r):r*Math.floor(e/r);s.width=e-s.left,o.width=Math.min(l,Math.max(r,t-o.left))}if(i&pe.u.top){a=this.getTileMinPercentHeight(),d=this.getTileMaxPercentHeight();const e=n.top,t=s.top<e?a*Math.ceil(e/a):a*Math.floor(e/a),i=Math.min(d,Math.max(a,o.bottom-t));s.height=s.bottom-e,s.top=e,o.top=o.bottom-i,o.height=i}if(i&pe.u.bottom){a=a||this.getTileMinPercentHeight(),d=d||this.getTileMaxPercentHeight();const e=n.top,t=s.bottom<e?a*Math.ceil(e/a):a*Math.floor(e/a);s.height=e-s.top,o.height=Math.min(d,Math.max(a,t-o.top))}if(!pe.F.equals(o,this.destination))if(this.restoreLayout(this.originalLayout),this.destination=o.clone(),this.tiles.find(e=>!e.isDragging&&e.percentBounds.intersectWith(o))){if(o){const e=this.ensureTarget(o,s,i);e&&(this.targetBounds=e,this.validLayout=this.saveLayout(),this.validLayout.targetBounds=o,this.validLayout.validBounds=e,this.refreshTiles$.next())}}else this.targetBounds=o,this.validLayout=this.saveLayout(),this.validLayout.targetBounds=this.validLayout.validBounds=o,this.refreshTiles$.next()}clearMoveTimer(){this.moveTimOut&&(this.moveTimOut.unsubscribe(),this.moveTimOut=void 0)}move(){const e=this.getTileMinPercentWidth(),t=this.getTileMinPercentHeight();let i=this.ensureContainer(new pe.F(e*Math.round(this.dragTarget.left/e),t*Math.round(this.dragTarget.top/t),this.dragTarget.width,this.dragTarget.height));if(this.lastTargetBounds&&Math.abs(i.left-this.lastTargetBounds.left)<e&&Math.abs(i.top-this.lastTargetBounds.top)<t)return;this.lastTargetBounds=i;const n=this.tiles.filter(e=>!e.isDragging).reduce((e,t)=>{const n=pe.F.overlapInfos(t.percentBounds,i);return Math.max(Math.min(n.height,n.width),e)},0);if(this.tiles.find(e=>{var t;return null===(t=this.originalLayout[e.id])||void 0===t?void 0:t.bounds.intersectWith(i)})||this.restoreLayout(this.originalLayout),0===n)this.clearMoveTimer(),this.targetBounds=i.clone(),this.destination=i.clone(),this.validLayout=this.saveLayout(),this.validLayout.targetBounds=this.validLayout.validBounds=i,this.refreshTiles$.next();else{if(pe.F.equals(this.targetBounds,i)||this.clearMoveTimer(),n>3){const e=i.clone();this.moveTimOut=Object(fe.a)(500).pipe(Object(I.a)(1),Object(V.a)(this.destroyed$)).subscribe(()=>{this.restoreLayout(this.originalLayout),this.destination=e;const t=this.ensureTarget(e,this.dragTarget,pe.u.all);t&&(this.targetBounds=t,this.validLayout=this.saveLayout(),this.validLayout.targetBounds=e,this.validLayout.validBounds=t,this.refreshTiles$.next())})}const e=new Array,t=this.tiles.filter(e=>!e.isDragging);for(let n=Math.min(this.targetBounds.left,i.left);n<=Math.max(this.targetBounds.left,i.left);n++)for(let s=Math.min(this.targetBounds.top,i.top);s<=Math.max(this.targetBounds.top,i.top);s++){const o=new pe.F(n,s,i.width,i.height);t.find(e=>e.percentBounds.intersectWith(o))||e.push(o)}e.length>0&&(e.sort((e,t)=>{const n=e=>Math.min(Math.abs(e.left-i.left),Math.abs(e.right-i.right))+200*Math.min(Math.abs(e.top-i.top),Math.abs(e.bottom-i.bottom));return n(e)-n(t)}),i=e[0],this.targetBounds=i.clone(),this.destination=i.clone(),this.validLayout=this.saveLayout(),this.validLayout.targetBounds=this.validLayout.validBounds=i,this.refreshTiles$.next())}}ensureContainer(e){e.left<0&&(e=e.offset(-e.left,0)),e.top<0&&(e=e.offset(0,-e.top));const t=this.getMaxPercentWidth();t&&e.right>t&&(e=e.offset(t-e.right,0));const i=this.getMaxPercentHeight();return i&&e.bottom>i&&(e=e.offset(0,i-e.bottom)),e}ensureTarget(e,t,i,n,s=10){t||(t=e),n||(n=e.clone()),i||(i=pe.u.all);const o=new Array,r=new Array,a=new Array,l=new Array;if(this.tiles.filter(t=>!t.isDragging&&t.percentBounds.intersectWith(e)).find(n=>{const s=new pe.F(this.dragOriginalPosition.left,this.dragOriginalPosition.top,e.width,e.height);if(Math.abs(n.percentBounds.left-t.left)<1&&Math.abs(n.percentBounds.top-t.top)<1&&Math.abs(n.percentBounds.width-t.width)<1&&Math.abs(n.percentBounds.height-t.height)<1&&(Math.abs(t.left-s.right)<=4||Math.abs(t.right-s.left)<=4||Math.abs(t.top-s.bottom)<=4||Math.abs(t.bottom-s.top)<=4))return n.percentBounds=s,!0;{const e=n.percentBounds.left-t.left,s=t.right-n.percentBounds.right,d=n.percentBounds.top-t.top,h=t.bottom-n.percentBounds.bottom,c=Math.max(0,Math.min(n.percentBounds.right,t.right)-Math.max(n.percentBounds.left,t.left))/Math.min(n.percentBounds.width,t.width);let u;switch(Math.max(0,Math.min(n.percentBounds.bottom,t.bottom)-Math.max(n.percentBounds.top,t.top))/Math.min(n.percentBounds.height,t.height)>=c&&i&pe.u.horizontal?u=s>=e&&i&pe.u.left?pe.u.left:pe.u.right:i&pe.u.vertical&&(u=h>=d&&i&pe.u.top?pe.u.top:pe.u.bottom),u){case pe.u.left:o.push(n);break;case pe.u.top:a.push(n);break;case pe.u.right:r.push(n);break;default:l.push(n)}}}))return e;let d=0;return o.length&&(d=this.pushHorizontal(e,-1,o),d)?(e=this.ensureContainer(e.offset(d,0)),s?this.ensureTarget(e,t,i&~pe.u.left,n,s-1):null):(r.length&&(d=this.pushHorizontal(e,1,r)),d>0?(this.restoreLayout(this.originalLayout),s?this.ensureTarget(n,t,i&pe.u.vertical,void 0,s-1):null):a.length&&(d=this.pushVertical(e,-1,a),d)?(e=this.ensureContainer(e.offset(0,d)),s?this.ensureTarget(e,t,pe.u.bottom,void 0,s-1):null):(d=this.pushVertical(e,1,l),d?null:e))}saveLayout(){const e={};return e.height=this.getTileMinPercentHeight(),this.tiles.forEach(t=>{const i=this.getPixelSize(t.percentBounds.top||0),n=this.getPixelSize(t.percentBounds.height||this._tileMinHeight);i+n>e.height&&(e.height=i+n),e[t.id]={bounds:t.percentBounds.clone(),id:t.id}}),e}getPixelBounds(e){return pe.F.fromLTRB(Math.round(e.left*this.hundredPercentWith/100),Math.round(e.top*this.hundredPercentWith/100),Math.round(e.right*this.hundredPercentWith/100),Math.round(e.bottom*this.hundredPercentWith/100))}getPixelSize(e,t){return t&&"%"!==t?e:Math.round(e*this.hundredPercentWith/100)}getSizePercentLimit(e){const t=this[`${e}Unit`];return t&&"px"!==t?this[e]:this.getPercentSize(this[e])}getSizePixelLimit(e){const t=this[`${e}Unit`];return t&&"px"!==t?this.getPixelSize(this[e]):this[e]}getTileMinPixelSize(){return new pe.H(this.getSizePixelLimit("_tileMinWidth"),this.getSizePixelLimit("_tileMinHeight"))}getTileMaxPixelSize(){return new pe.H(this.getSizePixelLimit("_tileMaxWidth"),this.getSizePixelLimit("_tileMaxHeight"))}getTileMinPercentWidth(){return Math.max(1,this.getSizePercentLimit("_tileMinWidth"))}getTileMaxPercentWidth(){return Math.max(5,this.getSizePercentLimit("_tileMaxWidth"))}getTileMinPercentHeight(){return Math.max(1,this.getSizePercentLimit("_tileMinHeight"))}getTileMaxPercentHeight(){return Math.max(5,this.getSizePercentLimit("_tileMaxHeight"))}getMaxPercentWidth(){return Math.max(5,this.getSizePercentLimit("_maxWidth"))}getMaxPercentHeight(){return Math.max(5,this.getSizePercentLimit("_maxHeight"))}getCursorFromHTMLElement(e,t,i){const n=this.getTileElementFromHTMLElement(i);if(!n)return null;const s=n.getBoundingClientRect();return e<s.left+15?t<s.top+15?"nw-resize":t>s.bottom-15?"sw-resize":"w-resize":e>s.right-15?t<s.top+15?"ne-resize":t>s.bottom-15?"se-resize":"e-resize":t<s.top+15?"n-resize":t>s.bottom-15?"s-resize":"move"}extractValueAndUnit(e,t){var i;const n=/(\d+)(.*)/i.exec(t);if((null===(i=n)||void 0===i?void 0:i.length)>=1){const t=this;t[e]=parseInt(n[1],10),t[`${e}Unit`]=n.length>=2?n[2]:"px"}}restoreLayout(e){this.tiles.forEach(t=>{const i=e[t.id];i&&(t.percentBounds=i.bounds.clone())})}calcHorizontalOverflow(e,t,i,n){let s=0;return n=n||new Set,t.forEach(t=>{if(!n.has(t.id)){n.add(t.id);const o=t.percentBounds.offset(e*i,0);let r=0;const a=this.getMaxPercentWidth();o.left<0?r=-o.left:a&&o.right>a&&(r=o.right-a);const l=this.tiles.filter(e=>!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(o));l.length&&(r+=this.calcHorizontalOverflow(e,l,i,n)),r>s&&(s=r)}}),s}moveHorizontal(e,t,i,n){t.forEach(t=>{if(!n.has(t.id)){const s=t.percentBounds.offset(e*i,0);n.set(t.id,s);const o=this.tiles.filter(e=>!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(s));o.length&&this.moveHorizontal(e,o,i,n)}})}pushHorizontal(e,t,i,n){let s=0;const o=new Map;return n||(n=0,i.forEach(i=>{const s=t>0?Math.max(0,e.right-i.percentBounds.left):Math.max(0,i.percentBounds.right-e.left);s>n&&(n=s)})),n>0&&(s=this.calcHorizontalOverflow(t,i,n),(n-=s)>0&&(this.moveHorizontal(t,i,n,o),this.tiles.forEach(e=>{o.has(e.id)&&(e.percentBounds=o.get(e.id))}))),s}calcVerticalOverflow(e,t,i,n){let s=0;return n=n||new Set,t.forEach(t=>{if(!n.has(t.id)){n.add(t.id);const o=t.percentBounds.offset(0,e*i);let r=0;const a=this.getMaxPercentHeight();o.top<0?r=-o.top:a&&o.bottom>a&&(r=o.bottom-a);const l=this.tiles.filter(e=>!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(o));l.length&&(r+=this.calcVerticalOverflow(e,l,i,n)),r>s&&(s=r)}}),s}moveVertical(e,t,i,n){t.forEach(t=>{if(!n.has(t.id)){const s=t.percentBounds.offset(0,e*i);n.set(t.id,s);const o=this.tiles.filter(e=>!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(s));o.length&&this.moveVertical(e,o,i,n)}})}pushVertical(e,t,i,n){let s=0;const o=new Map;return n||(n=0,i.forEach(i=>{const s=t>0?Math.max(0,e.bottom-i.percentBounds.top):Math.max(0,i.percentBounds.bottom-e.top);s>n&&(n=s)})),n>0&&(s=this.calcVerticalOverflow(t,i,n),(n-=s)>0&&(this.moveVertical(t,i,n,o),this.tiles.forEach(e=>o.has(e.id)&&(e.percentBounds=o.get(e.id))))),s}copyTiles(e,t){if(!this.clipboardService){if(!e)return;throw new Error("DejaClipboardService must be imported by your application to use the copyTiles methode of DejaTilesComponent.")}const i=this.clipboardService.get("tiles");i&&i.forEach(e=>e.isCutted=!1),this.clipboardService.set("tiles",e),t?(e.forEach(e=>e.isCutted=!0),this.clipboardService.set("tiles-provider",this.deleteTiles$)):this.clipboardService.set("tiles-provider",void 0)}removeTemporaryTile(){let e=this.tiles.length;for(;--e>=0;){const t=this.tiles[e];t.isTemporary&&(this.tilesDic.delete(t.id),this.tiles.splice(e,1))}}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275inject"](pe.e,8))},e.\u0275prov=p["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})(),Qe=(()=>{let e=class extends pe.s{constructor(e,t,i,n){super(),this.changeDetectorRef=t,this.layoutProvider=i,this._control=n,this.selectionChanged=new p.EventEmitter,this.layoutChanged=new p.EventEmitter,this.layoutCompleted=new p.EventEmitter,this.contentAdding=new p.EventEmitter,this.contentRemoving=new p.EventEmitter,this.tileGroupChanged=new p.EventEmitter,this.tilesAdded=new p.EventEmitter,this.tilesDeleted=new p.EventEmitter,this.contentCopied=new p.EventEmitter,this.tabIndex=0,this._models=[],this.hasFocus=!1,this.onTouchedCallback=e=>{},this.onChangeCallback=e=>{},this._control&&(this._control.valueAccessor=this);const s=e.nativeElement;Object(be.a)(this.layoutProvider.selectionChanged).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>this.selectionChanged.emit(e)),Object(be.a)(this.layoutProvider.contentAdding).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>this.contentAdding.emit(e)),Object(be.a)(this.layoutProvider.contentRemoving).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>this.contentRemoving.emit(e)),Object(be.a)(this.layoutProvider.tilesAdded).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>{this.tilesAdded.emit(e),this.onChangeCallback(e.tiles)}),Object(be.a)(this.layoutProvider.tilesDeleted).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>{this.tilesDeleted.emit(e),this.onChangeCallback(e.tiles)}),Object(be.a)(this.layoutProvider.layoutChanged).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>{this.layoutChanged.emit(e),this.onChangeCallback(e.tiles)}),Object(be.a)(this.layoutProvider.layoutCompleted).pipe(Object(V.a)(this.destroyed$)).subscribe(e=>this.layoutCompleted.emit(e)),this.keyup$=Object(ye.a)(s.ownerDocument,"keyup"),Object(ye.a)(window,"resize").pipe(Object(F.a)(5),Object(V.a)(this.destroyed$)).subscribe(()=>this.refresh({resetWidth:!0}))}get tiles(){return this.layoutProvider.tiles}get selectionRect$(){return this.layoutProvider.selectionRect$}set tileminwidth(e){this.layoutProvider.tileMinWidth=e}set tilemaxwidth(e){this.layoutProvider.tileMaxWidth=e}set tileminheight(e){this.layoutProvider.tileMinHeight=e}set tilemaxheight(e){this.layoutProvider.tileMaxHeight=e}set maxwidth(e){this.layoutProvider.maxWidth=e}set designMode(e){this.layoutProvider.designMode=Object(v.b)(e)}get designMode(){return this.layoutProvider.designMode}set models(e){this.writeValue(e)}set canDelete(e){Object(v.b)(e)&&!this.delete$sub?this.delete$sub=this.keyup$.pipe(Object(_e.a)(e=>this.layoutProvider.designMode&&e.code===pe.A.Delete&&this.hasFocus),Object(V.a)(this.destroyed$)).subscribe(()=>this.layoutProvider.deleteSelection()):this.delete$sub&&(this.delete$sub.unsubscribe(),this.delete$sub=void 0)}set canCopy(e){Object(v.b)(e)&&!this.copy$sub?this.copy$sub=this.keyup$.pipe(Object(_e.a)(e=>e.code===pe.A.KeyC&&e.ctrlKey&&this.hasFocus),Object(V.a)(this.destroyed$)).subscribe(()=>this.copySelection()):this.copy$sub&&(this.copy$sub.unsubscribe(),this.copy$sub=void 0)}set canCut(e){Object(v.b)(e)&&!this.cut$sub?this.cut$sub=this.keyup$.pipe(Object(_e.a)(e=>this.layoutProvider.designMode&&e.code===pe.A.KeyX&&e.ctrlKey&&this.hasFocus),Object(V.a)(this.destroyed$)).subscribe(()=>this.cutSelection()):this.cut$sub&&(this.cut$sub.unsubscribe(),this.cut$sub=void 0)}set canPaste(e){Object(v.b)(e)&&!this.paste$sub?this.paste$sub=this.keyup$.pipe(Object(_e.a)(e=>this.layoutProvider.designMode&&e.code===pe.A.KeyV&&e.ctrlKey&&this.hasFocus),Object(V.a)(this.destroyed$)).subscribe(()=>this.paste()):this.paste$sub&&(this.paste$sub.unsubscribe(),this.paste$sub=void 0)}set selectedTiles(e){this.layoutProvider.selectedTiles=e.map(e=>"string"==typeof e?e:e.id)}writeValue(e){this._models=e||[],this.layoutProvider.tiles=this._models,this.changeDetectorRef.markForCheck()}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}ngAfterViewInit(){this.layoutProvider.container=this.tilesContainer.nativeElement,this.refresh({resetWidth:!0})}ngOnDestroy(){super.ngOnDestroy(),this.canCopy=!1,this.canCut=!1,this.canDelete=!1,this.canPaste=!1}copySelection(){var e;const t=this.layoutProvider.copySelection();if(null===(e=t)||void 0===e?void 0:e.length){const e=new CustomEvent("DejaTilesCopied",{cancelable:!0});e.tiles=t,this.contentCopied.emit(e)}}cutSelection(){var e;const t=this.layoutProvider.cutSelection();if(null===(e=t)||void 0===e?void 0:e.length){const e=new CustomEvent("DejaTilesCutted",{cancelable:!0});e.tiles=t,this.contentCopied.emit(e)}}deleteSelection(){const e=this.layoutProvider.deleteSelection();return this.changeDetectorRef.markForCheck(),e}paste(){const e=this.layoutProvider.paste();return this.changeDetectorRef.markForCheck(),e}ensureVisible(e){this.layoutProvider.ensureVisible$.next(e)}refresh(e){this.layoutProvider.refreshTiles$.next(e)}addTiles(e){this.layoutProvider.addTiles(e)}removeTiles(e){this.layoutProvider.removeTiles(e)}HitTest(e,t){const i=this.tilesContainer.nativeElement.getBoundingClientRect(),n=e-i.left,s=t-i.top;return this.tiles.find(e=>{var t;return null===(t=e.pixelBounds)||void 0===t?void 0:t.containsPoint(new pe.E(n,s))})}getFreePlace(e,t,i,n){if(!this._models||0===this._models.length)return new pe.F(0,0,i,n);const s=this.tilesContainer.nativeElement.getBoundingClientRect(),o=t?t-s.top:0,r=new pe.F(this.layoutProvider.getPercentSize(e?e-s.left:0),this.layoutProvider.getPercentSize(o),i,n);return this.layoutProvider.getFreePlace(r)}moveTile(e,t){this.layoutProvider.moveTile(e,t)}getDropContext(){return{dragEnter:(e,t)=>this.layoutProvider.dragEnter(e,t)&&{className:"hidden"},dragOver:(e,t)=>{this.layoutProvider.dragover$.next(t)},dragLeave:e=>{this.layoutProvider.dragleave$.next()}}}onTileClosed(e){this.layoutProvider.removeTiles([e.id])}onTileGroupModelChanged(e){const t=new CustomEvent("DejaTileGroupModelEvent",{cancelable:!1});t.tileGroup=e,this.tileGroupChanged.emit(t)}onFocus(){this.hasFocus=!0}onBlur(){this.hasFocus=!1}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](p.ElementRef),p["\u0275\u0275directiveInject"](p.ChangeDetectorRef),p["\u0275\u0275directiveInject"](Ke),p["\u0275\u0275directiveInject"](s.NgControl,10))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["deja-tiles"]],contentQueries:function(e,t,i){var n;1&e&&p["\u0275\u0275contentQuery"](i,ze,!0),2&e&&p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.tileTemplate=n.first)},viewQuery:function(e,t){var i;1&e&&p["\u0275\u0275staticViewQuery"](Fe,!0),2&e&&p["\u0275\u0275queryRefresh"](i=p["\u0275\u0275loadQuery"]())&&(t.tilesContainer=i.first)},inputs:{tabIndex:"tabIndex",tileminwidth:"tileminwidth",tilemaxwidth:"tilemaxwidth",tileminheight:"tileminheight",tilemaxheight:"tilemaxheight",maxwidth:"maxwidth",designMode:"designMode",models:"models",canDelete:"canDelete",canCopy:"canCopy",canCut:"canCut",canPaste:"canPaste",selectedTiles:"selectedTiles"},outputs:{selectionChanged:"selectionChanged",layoutChanged:"layoutChanged",layoutCompleted:"layoutCompleted",contentAdding:"contentAdding",contentRemoving:"contentRemoving",tileGroupChanged:"tileGroupChanged",tilesAdded:"tilesAdded",tilesDeleted:"tilesDeleted",contentCopied:"contentCopied"},features:[p["\u0275\u0275ProvidersFeature"]([Ke]),p["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:8,consts:[["id","tiles",3,"deja-mouse-droppable","focus","blur"],["tilesContainer",""],[3,"id","tile","designMode","template","close","groupChanged",4,"ngFor","ngForOf"],["deja-tile-position","",3,"bounds"],[3,"id","tile","designMode","template","close","groupChanged"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0,1),p["\u0275\u0275listener"]("focus",(function(e){return t.onFocus()}))("blur",(function(e){return t.onBlur()})),p["\u0275\u0275template"](2,Le,1,5,"deja-tile",2),p["\u0275\u0275element"](3,"div",3),p["\u0275\u0275pipe"](4,"async"),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275classProp"]("design",t.designMode),p["\u0275\u0275property"]("deja-mouse-droppable",t.getDropContext()),p["\u0275\u0275attribute"]("tabindex",t.tabIndex),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngForOf",t.tiles),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("bounds",p["\u0275\u0275pipeBind1"](4,6,t.selectionRect$)))},directives:[c.d,n.m,qe,Ye],pipes:[n.b],styles:["[_nghost-%COMP%]{position:relative;overflow:auto;margin:0!important}[_nghost-%COMP%]   #tiles[_ngcontent-%COMP%]{display:block;left:0;top:0;width:100%;height:100%;position:absolute;padding:0!important;margin:0!important}[_nghost-%COMP%]   #tiles.design[_ngcontent-%COMP%]   deja-tile[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}[_nghost-%COMP%]   #tiles[_ngcontent-%COMP%]   #tile[_ngcontent-%COMP%]:hover{z-index:200}[_nghost-%COMP%]   [deja-tile-position][_ngcontent-%COMP%]{position:absolute;z-index:101;background-color:rgba(0,0,0,.5)}[drag][_nghost-%COMP%]{background-color:rgba(0,0,0,.5)}[drag][_nghost-%COMP%]   [deja-tile-position][_ngcontent-%COMP%]{transition-property:left,top,width,height;transition-duration:.35s;transition-timing-function:ease}"],changeDetection:0}),e})(),Je=(()=>{let e=class{};return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.c,s.FormsModule,T,o.c,g.d,b.b,a.b,m.c,ae,le.b,c.b,he.b,pe.k,de.b,ce.b,ue.f]]}),e})();const Ze=p["\u0275\u0275getInheritedFactory"](Xe);var et=i("KYkd"),tt=i("iInd"),it=i("Kqap"),nt=i("xbPD"),st=i("1XgV"),ot=i("iss+");function rt(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-card",5),p["\u0275\u0275element"](1,"deja-markdown",6),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("url","https://raw.githubusercontent.com/DSI-HUG/dejajs-components/dev/projects/deja-js/component/tiles/readme.txt"))}function at(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"button",11),p["\u0275\u0275listener"]("click",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).$implicit.cancel(!1)})),p["\u0275\u0275text"](1," Ok "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](2,"button",12),p["\u0275\u0275listener"]("click",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).$implicit.cancel(!0)})),p["\u0275\u0275text"](3," Annuler "),p["\u0275\u0275elementEnd"]()}}function lt(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"deja-snackbar",8),p["\u0275\u0275listener"]("onAnimationDone",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().$implicit.cancel(!1)})),p["\u0275\u0275elementStart"](1,"deja-message-box",9),p["\u0275\u0275text"](2),p["\u0275\u0275template"](3,at,4,0,"ng-template",null,10,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275property"]("duration",8e3),p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate"]("type",e.type),p["\u0275\u0275propertyInterpolate"]("title",e.title),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"](" ",e.content," ")}}function dt(e,t){1&e&&p["\u0275\u0275template"](0,lt,5,4,"deja-snackbar",7),2&e&&p["\u0275\u0275property"]("ngIf",t.$implicit.gate)}function ht(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",25),p["\u0275\u0275text"](1),p["\u0275\u0275elementStart"](2,"span",26),p["\u0275\u0275text"](3,"Selected"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"span",27),p["\u0275\u0275text"](5,"Pressed"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275styleProp"]("background-color",e.color),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate2"]("",e.templateModel.naqme," (",e.templateModel.code,") ")}}function ct(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",25),p["\u0275\u0275text"](1),p["\u0275\u0275elementStart"](2,"span",26),p["\u0275\u0275text"](3,"Selected"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"span",27),p["\u0275\u0275text"](5,"Pressed"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275styleProp"]("background-color",e.color),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate2"]("",e.templateModel.naqme," (",e.templateModel.code,") ")}}function ut(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"span",25),p["\u0275\u0275text"](1),p["\u0275\u0275elementStart"](2,"span",26),p["\u0275\u0275text"](3,"Selected"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"span",27),p["\u0275\u0275text"](5,"Pressed"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275styleProp"]("background-color",e.color),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate2"]("",e.templateModel.naqme," (",e.templateModel.code,") ")}}function pt(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"mat-card",5),p["\u0275\u0275elementStart"](1,"mat-toolbar",13),p["\u0275\u0275text"](2,"Tiles Demo"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"mat-card-content",14),p["\u0275\u0275elementStart"](4,"mat-checkbox",15),p["\u0275\u0275listener"]("ngModelChange",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().designMode=t})),p["\u0275\u0275text"](5,"Design Mode"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"button",11),p["\u0275\u0275listener"]("click",(function(t){p["\u0275\u0275restoreView"](e);const i=p["\u0275\u0275reference"](20);return p["\u0275\u0275nextContext"]().addGroup(i)})),p["\u0275\u0275text"](7," Add Group "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"mat-card-content"),p["\u0275\u0275elementStart"](9,"span",16,17),p["\u0275\u0275text"](11," Drop Area "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"mat-card-content"),p["\u0275\u0275elementStart"](13,"deja-tiles",18,19),p["\u0275\u0275listener"]("contentAdding",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().onContentAdding(t)}))("contentRemoving",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().onContentRemoving(t)})),p["\u0275\u0275pipe"](15,"async"),p["\u0275\u0275template"](16,ht,6,4,"ng-template",null,20,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](18,"mat-card-content"),p["\u0275\u0275elementStart"](19,"deja-tiles",21,22),p["\u0275\u0275listener"]("contentAdding",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().onContentAdding(t)}))("contentRemoving",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().onContentRemoving(t)})),p["\u0275\u0275pipe"](21,"async"),p["\u0275\u0275template"](22,ct,6,4,"ng-template",null,20,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"mat-card-content"),p["\u0275\u0275elementStart"](25,"deja-tiles",23,24),p["\u0275\u0275listener"]("contentAdding",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().onContentAdding(t)}))("contentRemoving",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().onContentRemoving(t)})),p["\u0275\u0275pipe"](27,"async"),p["\u0275\u0275template"](28,ut,6,4,"ng-template",null,20,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=p["\u0275\u0275reference"](10),t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngModel",t.designMode),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("deja-mouse-droppable",t.getDropContext(e)),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("models",p["\u0275\u0275pipeBind1"](15,8,t.tiles1$))("deja-mouse-draggable",t.getDragContext()),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("models",p["\u0275\u0275pipeBind1"](21,10,t.tiles2$))("designMode",t.designMode),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("models",p["\u0275\u0275pipeBind1"](27,12,t.tiles3$))("designMode",t.designMode)}}const mt=tt.f.forChild([{path:"",component:(()=>{class e{constructor(e){this.countriesService=e,this.tabIndex=1,this.designMode=!1,this.message$=new D.a,this.messages$=Object(be.a)(this.message$).pipe(Object(it.a)((e,t)=>[...e,t],[]),Object(nt.a)([]))}ngOnInit(){let e=0,t=0,i=0,n=0;this.countriesMap=new Map;const s=this.countriesService.getCountries$().pipe(Object(Oe.a)(e=>e));this.tiles1$=s.pipe(Object(I.a)(12),Object(L.a)(i=>{const n=new We;return n.percentBounds=new pe.F(e,t,15,15),n.color=i.color,n.templateModel=i,e+=15,e+15>100&&(e=0,t+=15),this.countriesMap.set(n.id,i),n}),Object(Te.a)((e,t)=>[...e,t],[])),this.tiles2$=s.pipe(Object(L.a)(e=>{const t=new We;return t.percentBounds=new pe.F(i,n,15,15),t.color=e.color,t.templateModel=e,i+=15,i+15>100&&(i=0,n+=15),t}),Object(Te.a)((e,t)=>[...e,t],[]));const o=new He;o.percentBounds=new pe.F(i,n,60,30),o.color="#aba280",o.html="<div>Tuile <b>\xe9ditable</b> de type groupe</div><div><div><p>Utilise le composant deja-editor</p></div></div></div></span></div>",this.tiles3$=Object(xe.a)([o])}addGroup(e){const t=new He;t.html="New Group",e.addTiles([t])}getDragContext(){return{target:"deja-tile",className:"deja-tile-cursor",dragStart:e=>{const t=this.countriesMap.get(e.id),i=new We;return i.percentBounds=new pe.F(0,0,15,15),i.color=t.color,i.templateModel=t,{country:t,DejaTile:i}}}}getDropContext(e){return{dragEnter:e=>({width:200,height:60,className:"country-target-cursor"}),drop:t=>{const i=t.country;e.innerText=`The dropped country is ${i.naqme} - the code is: ${i.code}`}}}onContentAdding(e){this.message$.next({title:"Tiles added",content:`${e.added.length} tiles added.`,type:"warn",gate:!0,cancel:function(t){this.gate=!1,e.cancel$.next(t)}}),e.preventDefault()}onContentRemoving(e){this.message$.next({title:"Tiles deleted",content:`${e.removed.length} tiles deleted.`,type:"warn",gate:!0,cancel:function(t){this.gate=!1,e.cancel$.next(t)}}),e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](st.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["deja-tiles-demo"]],decls:8,vars:6,consts:[[3,"selectedIndex","selectedTabChange"],["label","API REFERENCE"],["label","EXAMPLES"],["class","demo-card demo-basic",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"demo-card","demo-basic"],[3,"url"],["alignment","bottom right",3,"duration","onAnimationDone",4,"ngIf"],["alignment","bottom right",3,"duration","onAnimationDone"],[3,"type","title"],["actionsTemplate",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],["color","primary"],["id","actions"],[3,"ngModel","ngModelChange"],["id","droparea",3,"deja-mouse-droppable"],["dropArea",""],["id","tiles1","maxwidth","100%","tileminwidth","5%","tileminheight","5%","tilemaxheight","50%","tilemaxwidth","50%",3,"models","deja-mouse-draggable","contentAdding","contentRemoving"],["tiles1",""],["tileTemplate",""],["id","tiles2","canDelete","","canCopy","","canCut","","canPaste","","maxwidth","100%","tileminwidth","5%","tileminheight","5%","tilemaxheight","50%","tilemaxwidth","50%",3,"models","designMode","contentAdding","contentRemoving"],["tiles2",""],["id","tiles3","canDelete","","canCopy","","canCut","","canPaste","","maxwidth","100%","tileminwidth","5%","tileminheight","5%","tilemaxheight","50%","tilemaxwidth","50%",3,"models","designMode","contentAdding","contentRemoving"],["tiles3",""],[1,"tile-content","noselect"],["id","selected"],["id","pressed"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"mat-tab-group",0),p["\u0275\u0275listener"]("selectedTabChange",(function(e){return t.tabIndex=e.index})),p["\u0275\u0275element"](1,"mat-tab",1),p["\u0275\u0275element"](2,"mat-tab",2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](3,rt,2,1,"mat-card",3),p["\u0275\u0275template"](4,dt,1,1,"ng-template",4),p["\u0275\u0275pipe"](5,"async"),p["\u0275\u0275template"](6,pt,30,14,"mat-card",3),p["\u0275\u0275element"](7,"deja-mouse-dragdrop-cursor")),2&e&&(p["\u0275\u0275property"]("selectedIndex",t.tabIndex),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",0===t.tabIndex),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",p["\u0275\u0275pipeBind1"](5,4,t.messages$)),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",1===t.tabIndex))},directives:[l.b,l.a,n.n,n.m,c.a,r.a,ot.a,u.a,h.a,o.b,d.a,r.c,a.a,s.NgControlStatus,s.NgModel,c.d,Qe,c.c],pipes:[n.b],styles:["deja-tiles-demo .demo-basic{padding:0}deja-tiles-demo .demo-full-width{width:100%}deja-tiles-demo .demo-icons{font-size:100%;height:inherit;vertical-align:top;width:inherit}deja-tiles-demo .demo-card{margin:16px}deja-tiles-demo .demo-card mat-card-content{display:flex;flex-direction:column;margin:2rem}deja-tiles-demo #actions{display:flex;flex-direction:row;align-items:center;justify-content:space-between}deja-tiles-demo #droparea{height:5rem;background-color:#f57c00;width:50%;display:block}deja-tiles-demo #tiles1{height:370px;display:block}deja-tiles-demo #tiles2{height:1000px;display:block}deja-tiles-demo deja-tile{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}deja-tiles-demo deja-tile #pressed,deja-tiles-demo deja-tile #selected{display:none}deja-tiles-demo deja-tile[pressed] #pressed,deja-tiles-demo deja-tile[selected] #selected{display:block}deja-tiles-demo deja-tile .tile-content{width:100%;height:100%;display:block}@media screen and (min-width:1401px){deja-tiles-demo deja-tiles{font-size:100%}}@media screen and (max-width:1400px){deja-tiles-demo deja-tiles{font-size:90%}}@media screen and (max-width:1200px){deja-tiles-demo deja-tiles{font-size:85%}}@media screen and (max-width:768px){deja-tiles-demo deja-tiles{font-size:80%}}@media screen and (max-width:640px){deja-tiles-demo deja-tiles{font-size:70%}}@media screen and (max-width:320px){deja-tiles-demo deja-tiles{font-size:60%}}.country-target-cursor .tile-content,.deja-tile-cursor .tile-content{width:100%;height:100%;display:block;opacity:.8}.country-target-cursor .tile-content{background-color:#f4a460!important}"],encapsulation:2}),e})()},{path:"**",redirectTo:"",pathMatch:"full"}]);i.d(t,"DejaTilesDemoModule",(function(){return gt}));let gt=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.FormsModule,r.d,l.c,d.b,o.c,a.b,Je,et.a,u.b,c.b,h.b,mt]]}),e})()}}]);