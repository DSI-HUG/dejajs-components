(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+qQs":function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i("mrSG"),r=i("n6gG"),o=i("CcnG"),s=i("b716"),c=i("K9Ia"),a=(i("fYS1"),function(e){function t(i,n,r,s,a,u,l,h){var d=e.call(this,h,u,l,s)||this;return d.dejaTextMetricsService=i,d.elementRef=n,d.changeDetectorRef=r,d.ngControl=s,d.fm=a,d.id="deja-numeric-stepper-"+t.nextId++,d.describedBy="",d.controlType="deja-numeric-stepper",d.errorState=!1,d.size=0,d.stateChanges=new c.a,d.focused=!1,d.step=1,d.textChange=new o.EventEmitter,d._required=!1,d._disabled=null,d.onTouchedCallback=function(){},d.onChangeCallback=function(){},d.onValidatorChangeCallback=function(){},d.ngControl&&(d.ngControl.valueAccessor=d),d.fm.monitor(n.nativeElement,!0).subscribe(function(e){d.focused=!!e,d.focused||d.onTouchedCallback(),d.stateChanges.next()}),d}return n.c(t,e),Object.defineProperty(t.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty||this.alwaysDisplayUnit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputValidatorDirective",{set:function(e){e&&(e.parentControl=this.ngControl)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alwaysDisplayUnit",{get:function(){return this._alwaysDisplayUnit},set:function(e){this._alwaysDisplayUnit=Object(r.b)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return!this._value&&0!==this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.ngControl?this.ngControl.disabled:this._disabled},set:function(e){var t=Object(r.b)(e);this._disabled=t||null,this.changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(e){this._required=Object(r.b)(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(e){var t,i;(e.min||e.max)&&(this.validateFn=(t=this.max,i=this.min,function(e){return null==e.value?null:t&&e.value>t||i&&e.value<i?{rangeError:{given:e.value,max:t,min:i}}:null}),this.ngControl&&this.ngControl.control&&this.ngControl.control.setValidators(this.validateFn))},t.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},t.prototype.validate=function(e){return this.validateFn(e)},t.prototype.ngOnDestroy=function(){this.stateChanges.complete(),this.fm.stopMonitoring(this.elementRef.nativeElement)},t.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},t.prototype.onContainerClick=function(e){"input"!==e.target.tagName.toLowerCase()&&this.elementRef.nativeElement.querySelector("input").focus()},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this.writeValue(e),this.onChangeCallback(e),this.onTouchedCallback(),this.stateChanges.next()},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(e){this._value=null==e?e:isNaN(e)?null:+e,this.checkSize(e),this.changeDetectorRef.markForCheck(),this.textChange.emit(e)},t.prototype.registerOnChange=function(e){this.onChangeCallback=e},t.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},t.prototype.setDisabledState=function(e){this.disabled=e},t.prototype.checkSize=function(e){this.size=this.dejaTextMetricsService.getTextWidth((e||this.value||0).toString(),this.elementRef.nativeElement)},t.nextId=0,t}(s.c))},"1WO2":function(e,t,i){"use strict";i.d(t,"a",function(){return u});var n=i("fYS1"),r=i("0/uQ"),o=i("VnD/"),s=i("jvbL"),c=i("P6uZ"),a=i("ny24"),u=(i("qF2d"),function(){function e(e,t){var i=this;this.isAlive=!0;var u=e.nativeElement,l=Object(r.a)(t.dragging$),h=l.pipe(Object(o.a)(function(e){return!e}));l.pipe(Object(s.a)(function(){return i.isAlive}),Object(o.a)(function(e){return e})).subscribe(function(){h.pipe(Object(c.a)()).subscribe(function(){i._dragContext&&(i.context&&i.context.drop&&i.context.drop(i._dragContext),i._dragContext=void 0),t.dropCursor$.next(void 0)}),Object(r.a)(t.dragCursor$).pipe(Object(a.a)(h)).subscribe(function(e){var r=new n.m(u.getBoundingClientRect());if(i.context&&e){var o=e.originalEvent;if(r.containsPoint(new n.l(o.pageX,o.pageY))){if(i._dragContext){if(i.context.dragOver){var s=i.context.dragOver(i._dragContext,e);s&&t.dropCursor$.next(s)}}else if(i._dragContext=t.context,i.context.dragEnter){var a=i.context.dragEnter(i._dragContext,e);if(a){if(a.subscribe)return void a.pipe(Object(c.a)()).subscribe(function(e){t.dropCursor$.next(e)});t.dropCursor$.next(a)}}}else i._dragContext&&(i.context&&i.context.dragLeave&&i.context.dragLeave(i._dragContext),i._dragContext=void 0,t.dropCursor$.next(void 0))}})})}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},set:function(e){this._context=e},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.isAlive=!1},e}())},DMiE:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var n=i("n6gG"),r=i("CcnG"),o=(i("7lvT"),i("MPFR"),i("fYS1")),s=i("K9Ia"),c=i("0/uQ"),a=i("gI3B"),u=i("jvbL"),l=i("VnD/"),h=i("Gi3i"),d=i("ja5E"),p=i("Fp2t"),f=function(){function e(t,i){var n=this;this.changeDetectorRef=t,this.dejaPopupService=i,this.edit$=new s.a,this.editorConfig=e.buildEditorConfig(),this.foregroundColor=null,this.backgroundColor=null,this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null,this.close=new r.EventEmitter,this.modelChanged=new r.EventEmitter,this.editing=!1,this.isAlive=!0,this.subscriptions=[],this._designMode=!1,Object(c.a)(this.edit$).pipe(Object(u.a)(function(){return n.isAlive}),Object(l.a)(function(){return n._designMode}),Object(h.a)(100)).subscribe(function(){n.editor&&n.editor.setFocus()})}return Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(e){var t=this;this._model=e,this.updateColorsFromModel(),this.updateBorderFromModel(),this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.subscriptions=[],e&&this.subscriptions.push(Object(c.a)(this._model.refresh$).pipe(Object(u.a)(function(){return t.isAlive&&!!t._model}),Object(h.a)(1)).subscribe(function(){t.updateColorsFromModel(),t.updateBorderFromModel(),t.modelChanged.emit(t.model)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"designMode",{get:function(){return this._designMode},set:function(e){this._designMode=Object(n.b)(e),this.editing=!1,this.changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),e.buildEditorConfig=function(){return{coreStyles_bold:{element:"b",overrides:"strong"},coreStyles_italic:{element:"i",overrides:"em"},enterMode:3,extraPlugins:"colorbutton,justify,autogrow",language:"fr",format_tags:"p;h1;h2",removeButtons:"Styles,Subscript,Superscript,Strike",removePlugins:"magicline",toolbarGroups:[{name:"undo"},{name:"align"},{name:"colors"},{name:"font"},"/",{name:"others"},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"styles",groups:["format","formats"]},{name:"paragraph",groups:["list"]}]}},e.prototype.ngOnDestroy=function(){this.isAlive=!1,this.subscriptions.forEach(function(e){return e.unsubscribe()})},e.prototype.edit=function(){var e=this;this.designMode&&(this.editing=!0,this.changeDetectorRef.markForCheck(),Object(a.a)(100).subscribe(function(){e.editor&&e.editor.setFocus()}))},e.prototype.onEditorBlur=function(){this.editing=!1,this.changeDetectorRef.markForCheck()},e.prototype.editStyle=function(){var e=this,t=new d.a;t.data={borderWidth:this.model.borderWidth,borderColor:this.model.borderColor,borderDirection:this.model.borderDirection,update:function(t,i,n){e.model.borderWidth=t,e.model.borderColor=i,e.model.borderDirection=n,e.updateBorderFromModel()}};var i={borderColor:this.model.borderColor,borderWidth:this.model.borderWidth,borderDirection:this.model.borderDirection};this.dejaPopupService.openAdvanced$(t).subscribe(function(t){t.accepted?0!==e.model.borderDirection&&0!==e.model.borderWidth||(e.model.clearBorder(),e.updateBorderFromModel()):(e.model.borderColor=i.borderColor,e.model.borderDirection=i.borderDirection,e.model.borderWidth=i.borderWidth,e.updateBorderFromModel()),t.accepted&&e.modelChanged.emit(e.model)})},e.prototype.updateColorsFromModel=function(){this.foregroundColor=this._model?o.b.parse(this._model.color).bestTextColor.toHex():null,this.backgroundColor=this._model?this._model.color:null,this.changeDetectorRef.markForCheck()},e.prototype.updateBorderFromModel=function(){this._model?(this.borderTop=0!=(this._model.borderDirection&p.a.top)?"solid "+(this._model.borderColor||"transparent")+" "+(this._model.borderWidth||0)+"px":null,this.borderRight=0!=(this._model.borderDirection&p.a.right)?"solid "+(this._model.borderColor||"transparent")+" "+(this._model.borderWidth||0)+"px":null,this.borderBottom=0!=(this._model.borderDirection&p.a.bottom)?"solid "+(this._model.borderColor||"transparent")+" "+(this._model.borderWidth||0)+"px":null,this.borderLeft=0!=(this._model.borderDirection&p.a.left)?"solid "+(this._model.borderColor||"transparent")+" "+(this._model.borderWidth||0)+"px":null):(this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null),this.changeDetectorRef.markForCheck()},e}()},Fp2t:function(e,t,i){"use strict";i.d(t,"a",function(){return s}),i.d(t,"b",function(){return c});var n=i("mrSG"),r=i("fYS1"),o=i("UMfw"),s=function(e){return e[e.top=1]="top",e[e.right=2]="right",e[e.bottom=4]="bottom",e[e.left=8]="left",e[e.all=15]="all",e}({}),c=function(e){function t(t){var i=e.call(this,t)||this;return i.color="rgb(38, 50, 56)",i.clearBorder(),i}return n.c(t,e),Object.defineProperty(t.prototype,"idealBounds",{get:function(){return new r.m(0,0,15,5)},enumerable:!0,configurable:!0}),t.prototype.clearBorder=function(){this.borderDirection=s.all,this.borderWidth=0,this.borderColor="#000"},t.prototype.clone=function(i){return i||(i=new t),e.prototype.clone.call(this,i),i.html=this.html,i.borderWidth=this.borderWidth,i.borderColor=this.borderColor,i.borderDirection=this.borderDirection,i},t}(o.a)},JyZx:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var n=i("CcnG"),r=i("0/uQ"),o=i("VnD/"),s=i("P6uZ"),c=i("xMyE"),a=i("vubp"),u=i("Gi3i"),l=i("Fp2t"),h=(i("UMfw"),function(){function e(e,t){this.changeDetectorRef=t,this.groupChanged=new n.EventEmitter,this.close=new n.EventEmitter,this.progressDiameter=100,this.subscriptions=[],this.element=e.nativeElement,this.element.setAttribute("hidden","0")}return Object.defineProperty(e.prototype,"tile",{get:function(){return this._tile},set:function(e){var t=this;if(this._tile=e,this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.subscriptions=[],e){var i=function(e,i){i?t.element.setAttribute(e,i.toString()):t.element.removeAttribute(e)};e.fading&&(this.element.setAttribute("fading","0"),this.changeDetectorRef.markForCheck()),this.subscriptions.push(Object(r.a)(e.pixelBounds$).pipe(Object(o.a)(function(e){return!!e}),Object(s.a)(),Object(o.a)(function(){return e.fading}),Object(c.a)(function(){t.element.setAttribute("fading","1"),t.changeDetectorRef.markForCheck()}),Object(a.a)(200)).subscribe(function(){t.element.removeAttribute("fading"),t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.pixelBounds$).pipe(Object(o.a)(function(e){return!!e})).subscribe(function(i){e.isHidden||t.element.removeAttribute("hidden"),t.element.style.left=i.left+4+"px",t.element.style.top=i.top+4+"px",t.element.style.width=i.width-8+"px",t.element.style.height=i.height-8+"px",t.progressDiameter=Math.min(100,Math.round(Math.max(.4*i.width,.4*i.height))),t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.pressed$).pipe(Object(c.a)(function(e){return i("pressed",e)})).subscribe(function(){return t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.selected$).pipe(Object(c.a)(function(e){return i("selected",e)})).subscribe(function(){return t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.dragging$).pipe(Object(c.a)(function(e){return i("drag",e)})).subscribe(function(){return t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.dropping$).pipe(Object(c.a)(function(e){return i("drop",e)})).subscribe(function(){return t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.cutted$).pipe(Object(c.a)(function(e){return i("cutted",e)})).subscribe(function(){return t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.expanded$).pipe(Object(c.a)(function(e){return i("expanded",e)})).subscribe(function(){return t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.deleted$).pipe(Object(c.a)(function(){return t.element.remove()})).subscribe(function(){return t.changeDetectorRef.markForCheck()}));var n=Object(r.a)(e.hidden$).pipe(Object(c.a)(function(e){return i("hidden",e?"1":"2")}));this.subscriptions.push(n.pipe(Object(u.a)(1e3),Object(o.a)(function(e){return e}),Object(c.a)(function(){return t.element.setAttribute("hidden","0")})).subscribe(function(){return t.changeDetectorRef.markForCheck()})),this.subscriptions.push(n.pipe(Object(u.a)(1),Object(o.a)(function(e){return!e}),Object(c.a)(function(){return t.element.removeAttribute("hidden")})).subscribe(function(){return t.changeDetectorRef.markForCheck()})),this.subscriptions.push(Object(r.a)(e.refresh$).pipe(Object(u.a)(1)).subscribe(function(){return t.changeDetectorRef.markForCheck()}))}},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})},e.prototype.onGroupChanged=function(e){this.groupChanged.emit(e)},Object.defineProperty(e.prototype,"isGroup",{get:function(){return this._tile&&this._tile instanceof l.b},enumerable:!0,configurable:!0}),e}())},KVC5:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var n=i("26FU"),r=i("0/uQ"),o=i("jvbL"),s=i("VnD/"),c=i("xMyE"),a=i("vubp"),u=(i("qF2d"),function(){function e(e,t){var i=this;this.dragDropService=t,this.position$=new n.a(void 0),this.cursor$=new n.a(void 0),this.isAlive=!0;var u=e.nativeElement;Object(r.a)(this.position$).pipe(Object(o.a)(function(){return i.isAlive})).subscribe(function(e){u.style.left=e?e.left+"px":"-1000px",u.style.top=e?e.top+"px":"-1000px"});var l=Object(r.a)(this.cursor$);l.pipe(Object(o.a)(function(){return i.isAlive}),Object(s.a)(function(e){return!e}),Object(c.a)(function(e){i._currentCursor&&i.contentElement&&i.iconElement&&(i.contentElement.style.opacity="0",i.iconElement.style.opacity="0"),i._currentCursor=e}),Object(a.a)(300)).subscribe(function(){i.position$.next(null),u.style.display="none"}),l.pipe(Object(o.a)(function(){return i.isAlive}),Object(s.a)(function(e){return!!e}),Object(c.a)(function(e){u.style.display="",i.contentElement&&i.iconElement&&(i.contentElement.style.opacity="0",i.iconElement.style.opacity="0"),i._currentCursor=e}),Object(s.a)(function(e){return!e.className||"hidden"!==e.className}),Object(c.a)(function(e){e.html?(u.className=e.className,i.contentElement&&i.iconElement&&(i.contentElement.innerHTML=e.html,i.contentElement.style.width=(e.width||48)+"px",i.contentElement.style.height=(e.height||48)+"px")):i.iconElement&&(i.iconElement.style.opacity="1")}),Object(a.a)(1)).subscribe(function(e){e.html&&i.contentElement&&(i.contentElement.style.opacity="1")}),Object(r.a)(this.dragDropService.dragCursor$).pipe(Object(o.a)(function(){return i.isAlive})).subscribe(function(e){!!e!=!!i._dragCursor&&(i._dragCursor=e),i._dropCursor&&i._dragCursor&&(e.className=i._dropCursor.className||i._dragCursor.className,e.html=i._dropCursor.html||i._dragCursor.html,e.width=i._dropCursor.width||i._dragCursor.width,e.height=i._dropCursor.height||i._dragCursor.height),!!e!=!!i._currentCursor||e&&!!e.html!=!!i._currentCursor.html?i.cursor$.next(e):e&&i.position$.next(e.position)}),Object(r.a)(this.dragDropService.dropCursor$).pipe(Object(o.a)(function(){return i.isAlive})).subscribe(function(e){i._dropCursor=e})}return Object.defineProperty(e.prototype,"iconElement",{get:function(){return this.icon.nativeElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentElement",{get:function(){return this.content.nativeElement},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.isAlive=!1},e}())},SsaN:function(e,t,i){"use strict";i.d(t,"a",function(){return x});var n=i("fYS1"),r=i("K9Ia"),o=i("26FU"),s=i("0/uQ"),c=i("p0ib"),a=i("bne5"),u=i("gI3B"),l=i("Gi3i"),h=i("jvbL"),d=i("xMyE"),p=i("vubp"),f=i("67Y/"),g=i("VnD/"),b=i("ny24"),m=i("t9fZ"),v=i("P6uZ"),y=i("Qgas"),x=function(){function e(e){var t=this;this.clipboardService=e,this.refreshTiles$=new r.a,this.ensureVisible$=new r.a,this.ensureBounds$=new r.a,this.dragging$=new o.a(!1),this.dragSelection$=new r.a,this.dragDropInfos$=new r.a,this.selectionRect$=new r.a,this.dragover$=new r.a,this.dragleave$=new r.a,this.deleteTiles$=new r.a,this.designMode=!1,this.layoutCompleted=new r.a,this.layoutChanged=new r.a,this.tilesAdded=new r.a,this.tilesDeleted=new r.a,this.selectionChanged=new r.a,this.contentAdding=new r.a,this.contentRemoving=new r.a,this._tileMinWidth=10,this._tileMinWidthUnit="%",this._tileMaxWidth=100,this._tileMaxWidthUnit="%",this._tileMinHeight=10,this._tileMinHeightUnit="%",this._tileMaxHeight=100,this._tileMaxHeightUnit="%",this._maxWidth=100,this._maxWidthUnit="%",this.tilesDic={},this._targetBounds={},this.destination={},this.dragPageOffset={},this.dragOriginalPosition={},this.isAlive=!0,this.selectedIds=[],Object(s.a)(this.refreshTiles$).pipe(Object(l.a)(30),Object(h.a)(function(){return t.isAlive}),Object(d.a)(function(){t.container.style.width="",t.container.style.height=""}),Object(p.a)(10),Object(h.a)(function(){return t.isAlive})).subscribe(function(e){var i=[],r=t.container.getBoundingClientRect();(e&&e.resetWidth||!t.hundredPercentWith)&&(t.hundredPercentWith=r.width);var o=r.height-20,s=r.width-20,c=0,a=0,u=t.tiles||[],l=[];u.forEach(function(e){if(e.percentBounds&&!e.percentBounds.isEmpty()){var n=t.getPixelBounds(e.percentBounds);n.bottom>c&&(c=n.right),n.right>a&&(a=n.bottom),e.isDragging||(e.pixelBounds=n)}else i.push(e);e.isSelected&&!e.isHidden&&l.push(e.id),e.pixelBounds&&e.pixelBounds.bottom>o&&(o=e.pixelBounds.bottom)});var h=a,d=0;if(i.forEach(function(e){e.percentBounds=e.percentBounds||new n.m(t.getPercentSize(d),t.getPercentSize(h),3*t.getTileMinPercentWidth(),3*t.getTileMinPercentHeight());var i=t.getPixelBounds(e.percentBounds);i.right>s&&(h=a,d=0,e.percentBounds.left=0,e.percentBounds.top=t.getPercentSize(h),i=t.getPixelBounds(e.percentBounds)),i.bottom>a&&(a=i.bottom),e.pixelBounds=t.getPixelBounds(e.percentBounds),d+=i.width}),t.dragTarget){var p=t.getPixelBounds(t.dragTarget);o<=p.bottom&&(o=p.bottom+p.height),s<=p.right&&(s=p.right+p.width)}var f=t.getPixelSize(2*t._tileMinHeight,t._tileMinHeightUnit);o<f&&(o=f),t.container.style.width=s+"px",t.container.style.height=o+"px",e&&(e.ensureVisible&&t.ensureVisible$.next(e.ensureVisible),e.ensureBounds&&t.ensureBounds$.next(e.ensureBounds)),t.selectedTiles=l;var g=new CustomEvent("DejaTilesEvent",{cancelable:!1});i.length>0&&(g.tiles=i,t.layoutChanged.next(g)),g.tiles=u,t.layoutCompleted.next(g)});var i=Object(s.a)(this.ensureVisible$).pipe(Object(p.a)(1),Object(f.a)(function(e){return t.tilesDic[e]}),Object(g.a)(function(e){return!!e}),Object(f.a)(function(e){return e.percentBounds}));Object(c.a)(this.ensureBounds$,i).pipe(Object(h.a)(function(){return t.isAlive})).subscribe(function(e){var i=t.getPixelBounds(e),n=i.left,r=i.right,o=i.top,s=i.bottom,c=function(e){for(;e&&"DEJA-TILES"!==e.tagName;)e=e.parentElement;return e}(t.container);if(c){var a=t.container.getBoundingClientRect(),u=c.getBoundingClientRect();n+a.left<u.bottom?c.scrollLeft+=n+a.left-u.bottom:r+a.left>u.right&&(c.scrollLeft+=r+a.left-u.right),o+a.top<u.top?c.scrollTop+=o+a.top-u.top:s+a.top>u.bottom&&(c.scrollTop+=s+a.top-u.bottom)}}),Object(s.a)(this.dragSelection$).pipe(Object(h.a)(function(){return t.isAlive})).subscribe(function(e){var i=Object(a.a)(t._container.ownerDocument,"mouseup").pipe(Object(d.a)(function(){return t.selectionRect$.next(null)}));Object(a.a)(t._container,"mousemove").pipe(Object(b.a)(i),Object(g.a)(function(e){return 1===e.buttons})).subscribe(function(i){var r=t._container.getBoundingClientRect();e.selectedRect=n.m.fromPoints(e.startPosition,new n.l(i.pageX-r.left,i.pageY-r.top)),t.selectionRect$.next(e.selectedRect);var o=t.HitTest(e.selectedRect);t.selectedTiles=o.map(function(e){return e.id})})});var u=Object(s.a)(this.dragleave$);Object(s.a)(this.dragDropInfos$).pipe(Object(h.a)(function(){return t.isAlive})).subscribe(function(e){if(e&&e.tiles&&e.tiles.length){var i,r=Object(a.a)(t._container,"mousemove"),o=Object(a.a)(t._container.ownerDocument,"mouseup"),l=Object(a.a)(t._container.ownerDocument,"keyup").pipe(Object(g.a)(function(e){return e.keyCode===n.j.Escape})),h=Object(c.a)(u,r.pipe(Object(g.a)(function(e){return 1!==e.buttons})),l),p=Object(c.a)(o,h),v=h.pipe(Object(m.a)(1),Object(d.a)(function(){return i.unsubscribe()})).subscribe(function(){t.removeTemporaryTile(),t.cancelDrag(e.tiles)});i=o.pipe(Object(m.a)(1),Object(d.a)(function(){return v.unsubscribe()})).subscribe(function(){return t.drop(e.tiles)});var y=Object(s.a)(t.dragover$).pipe(Object(f.a)(function(e){return e.originalEvent}));Object(c.a)(r,y).pipe(Object(b.a)(p)).subscribe(function(i){var r=t._container.getBoundingClientRect(),o=i.pageX-r.left,s=i.pageY-r.top;if(e.enabled)t.drag(e.tiles,o,s);else if(Math.abs(e.startX-o)>=10||Math.abs(e.startY-s)>=10)if(1!==e.tiles.length||t.tiles.find(function(t){return t===e.tiles[0]}))t.dragging$.next(!0),e.enabled=!0,t.startDrag(e.tiles,o,s);else{var c=e.tiles[0];t.selectedTiles=[c.id];var a=c.percentBounds;a&&!a.isEmpty()||(a=new n.m(0,0,15,15));var u=t.getFreePlace(new n.m(t.getPercentSize(o)-a.width/2,t.getPercentSize(s)-a.height/2,a.width,a.height));e.startX=u.left-a.width/2,e.startY=u.top-a.height/2,c.percentBounds=u,c.dragging$.next(!0),t._cursor="move",t.tiles.push(c),t.tilesDic[c.id]=c,t.dragging$.next(!0),e.enabled=!0,t.startDrag(e.tiles,t.getPixelSize(u.left+u.width/2),t.getPixelSize(u.top+u.height/2))}})}}),Object(s.a)(this.deleteTiles$).pipe(Object(h.a)(function(){return t.isAlive})).subscribe(function(e){return t.deleteTiles(e)})}return Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(e){var t=this;if(this._container=e,this._container){var i=Object(a.a)(e,"mouseleave"),r=Object(a.a)(e.ownerDocument,"mouseup");Object(a.a)(e,"mouseenter").pipe(Object(h.a)(function(){return t.isAlive})).subscribe(function(){t.designMode?Object(a.a)(e,"mousemove").pipe(Object(l.a)(10),Object(b.a)(i),Object(g.a)(function(e){return!!t.container&&0===e.buttons})).subscribe(function(e){t._cursor=t.getCursorFromHTMLElement(e.pageX,e.pageY,e.target),t.container.style.cursor=t._cursor}):t.container.style.cursor="",Object(a.a)(e,"mousedown").pipe(Object(g.a)(function(e){return 1===e.buttons}),Object(g.a)(function(e){return!t.isElementInsideDejaEditor(e.target)}),Object(f.a)(function(e){return{event:e,target:e.target,clickedTile:t.getTileComponentFromHTMLElement(e.target)}})).pipe(Object(b.a)(i)).subscribe(function(e){var o=e.event,s=e.target,a=e.clickedTile;if(t.currentTile&&(t.currentTile.isPressed=!1),t.currentTile=a,t.currentTile){if(t.currentTile.isPressed=!0,o.ctrlKey);else if(t.currentTile.isSelected&&"move"===t._cursor||(t.selectedTiles=[t.currentTile.id]),t.designMode){var u=t._container.getBoundingClientRect();t.dragDropInfos$.next({enabled:!1,startX:o.pageX-u.left,startY:o.pageY-u.top,tiles:t.tiles.filter(function(e){return e.isSelected})})}Object(c.a)(r,i).pipe(Object(v.a)(),Object(g.a)(function(){return!!t.currentTile})).subscribe(function(e){t.currentTile.isPressed&&(t.currentTile.isPressed=!1,e.ctrlKey&&(t.currentTile.isSelected=!t.currentTile.isSelected,t.selectedTiles=t.tiles.filter(function(e){return e.isSelected}).map(function(e){return e.id}))),t.currentTile=void 0})}else s!==t.container&&s.parentElement!==t.container||(1===o.buttons&&(u=t._container.getBoundingClientRect(),t.dragSelection$.next({startPosition:new n.l(o.pageX-u.left,o.pageY-u.top),selectedRect:new n.m})),t.currentTile&&(t.currentTile.isPressed=!1),t.selectedTiles=[])})})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tiles",{get:function(){return this._tiles||(this._tiles=[])},set:function(e){this._tiles=e,this.tilesDic=this.tiles.reduce(function(e,t){return e[t.id]=t,e},{}),this.refreshTiles$.next({resetWidth:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedTiles",{set:function(e){var t=[],i=!1,n=e.reduce(function(e,t){return e[t]=!0,e},{}),r=this.selectedIds.reduce(function(e,t){return e[t]=!0,e},{});if(this.tiles&&this.tiles.length?this.tiles.forEach(function(e){n[e.id]!==r[e.id]&&(i=!0),e.isSelected=n[e.id],e.isSelected&&t.push(e)}):i=this.selectedIds.length>0,this.selectedIds=e,i){var o=new CustomEvent("DejaTilesAddEvent",{cancelable:!1});o.tiles=t,this.selectionChanged.next(o)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileMinWidth",{set:function(e){this.extractValueAndUnit("_tileMinWidth",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileMaxWidth",{set:function(e){this.extractValueAndUnit("_tileMaxWidth",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileMinHeight",{set:function(e){this.extractValueAndUnit("_tileMinHeight",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileMaxHeight",{set:function(e){this.extractValueAndUnit("_tileMaxHeight",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{set:function(e){this.extractValueAndUnit("_maxWidth",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetBounds",{get:function(){return this._targetBounds},set:function(e){this._targetBounds=e,e?this.selectionRect$.next(new n.m({height:this.getPixelSize(e.height||0),left:this.getPixelSize(e.left||0),top:this.getPixelSize(e.top||0),width:this.getPixelSize(e.width||0)})):this.selectionRect$.next()},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.isAlive=!1,this._container=void 0},e.prototype.copySelection=function(){var e=this.tiles.filter(function(e){return e.isSelected});return e.length&&this.copyTiles(e,!1),e},e.prototype.cutSelection=function(){var e=this.tiles.filter(function(e){return e.isSelected});return e.length&&this.copyTiles(e,!0),e},e.prototype.deleteSelection=function(){var e=this.tiles.filter(function(e){return e.isSelected});return e.length&&this.removeTiles(e.map(function(e){return e.id})),e},e.prototype.paste=function(){if(!this.clipboardService||!this.clipboardService.isAvailable("tiles"))return[];var e,t=this.clipboardService.get("tiles");this.tiles.forEach(function(e){return e.isSelected=!1}),t.forEach(function(t){e=e?n.m.union(e,t.percentBounds):new n.m(t.percentBounds)});var i=this.getFreePlace(new n.m(0,0,e.width,e.height)),r=t.map(function(t){var r=t.clone();return r.percentBounds=new n.m(i.left+t.percentBounds.left-e.left,i.top+t.percentBounds.top-e.top,t.percentBounds.width,t.percentBounds.height),r.isSelected=!0,r});return this.addTiles(r),r},e.prototype.getTileElementFromHTMLElement=function(e){for(var t=e;t&&"DEJA-TILE"!==t.tagName;)if((t=t.parentElement)===this.container)return;return t},e.prototype.isElementInsideDejaEditor=function(e){for(var t=e;t&&t!==this.container;){if("DEJA-EDITOR"===t.tagName)return!0;t=t.parentElement}return!1},e.prototype.getTileComponentFromHTMLElement=function(e){var t=this.getTileElementFromHTMLElement(e);return t&&this.tilesDic[t.id]},e.prototype.deleteTiles=function(e){var t=this;if(e&&0!==e.length){var i=new CustomEvent("DejaTilesDeletedEvent",{cancelable:!1});i.tiles=e,e.forEach(function(e){delete t.tilesDic[e.id],e.delete()});for(var n=this.tiles.length;--n>=0;)this.tilesDic[this.tiles[n].id]||this.tiles.splice(n,1);this.refreshTiles$.next({resetWidth:!0}),i.tiles=this.tiles,this.tilesDeleted.next(i)}},e.prototype.removeTiles=function(e){var t=this;if(e&&0!==e.length){var i=e.map(function(e){return t.tilesDic[e]});i.forEach(function(e){e.isHidden=!0});var n=new CustomEvent("DejaTilesRemoveEvent",{cancelable:!0});n.tiles=this.tiles,n.removed=i,n.cancel$=new r.a;var o=n.cancel$.pipe(Object(v.a)()).subscribe(function(e){e?i.forEach(function(e){return e.isHidden=!1}):t.deleteTiles(i)});this.contentRemoving.next(n),n.defaultPrevented||(o.unsubscribe(),this.deleteTiles(i))}},e.prototype.getFreePlace=function(e){var t=[],i=0;this.tiles.forEach(function(e){e.percentBounds.bottom>i&&(i=e.percentBounds.bottom)});for(var r=0;r<=this._maxWidth-e.width;r+=this._tileMinWidth)for(var o=function(i){var o=new n.m(r,i,e.width,e.height);0===s.tiles.filter(function(e){return e.percentBounds.intersectWith(o)}).length&&t.push(o)},s=this,c=0;c<=i-e.height;c+=this._tileMinHeight)o(c);return t.length>0?(t.sort(function(t,i){var n=function(t){return Math.min(Math.abs(t.left-e.left),Math.abs(t.right-e.right))+200*Math.min(Math.abs(t.top-e.top),Math.abs(t.bottom-e.bottom))};return n(t)-n(i)}),t[0]):new n.m(0,i,e.width,e.height)},e.prototype.moveTile=function(e,t){var i=this.tiles.find(function(t){return t.id===e});i&&(i.percentBounds=t,this.refreshTiles$.next())},e.prototype.HitTest=function(e){var t=new n.m(this.getPercentSize(e.left),this.getPercentSize(e.top),this.getPercentSize(e.width),this.getPercentSize(e.height));return this.tiles.filter(function(e){return e.percentBounds.intersectWith(t)})},e.prototype.getPercentSize=function(e){return Math.round(100*e/this.hundredPercentWith)},e.prototype.dragEnter=function(e,t){if(!this.designMode||!this._container)return!1;var i=e.DejaTile;if(!i)return!1;var n=this._container.getBoundingClientRect(),r=t.originalEvent,o=r.pageX-n.left,s=r.pageY-n.top,c=i.clone();return c.isTemporary=!0,this.dragDropInfos$.next({enabled:!1,startX:o,startY:s,tiles:[c]}),!0},e.prototype.startDrag=function(e,t,i){var r,o=this,s=this.saveLayout();e.forEach(function(e){r=r?n.m.union(r,e.percentBounds):e.percentBounds,e.isDragging=!0}),this.dragRelativePosition={},e.forEach(function(e){o.dragRelativePosition[e.id]=new n.l(e.percentBounds.left-r.left,e.percentBounds.top-r.top)}),this.dragPageOffset=new n.l(t,i),this.dragOriginalPosition=new n.l(r.left,r.top),this.targetBounds=s.targetBounds=s.validBounds=r,this.originalLayout=s,this.validLayout=void 0},e.prototype.expandTile=function(e,t){var i=e.id?this.tilesDic[e.id]:this.tiles.find(function(t){return t.equalsTo(e)});this.beforeSizeLayout?this.restoreLayout(this.beforeSizeLayout):this.beforeSizeLayout=this.saveLayout(),this.expandedTile=i,i.isExpanded=!0;var r=Math.ceil(100*t/this.hundredPercentWith);this.size(i,new n.l(0,this.getPixelSize(i.percentBounds.top+r)),n.g.bottom)},e.prototype.cancelExpand=function(){this.beforeSizeLayout&&(this.expandedTile.isExpanded=!1,this.restoreLayout(this.beforeSizeLayout),this.refreshTiles$.next(),this.beforeSizeLayout=void 0)},e.prototype.cancelDrag=function(e){this.moveTimOut&&(this.moveTimOut.unsubscribe(),this.moveTimOut=void 0),Object(s.a)(e).pipe(Object(g.a)(function(e){return!!e}),Object(d.a)(function(e){e.isDragging=!1,e.isDropping=!0}),Object(p.a)(1e3)).subscribe(function(e){e.isDropping=!1}),this.originalLayout&&this.restoreLayout(this.originalLayout),this.endDrag()},e.prototype.drop=function(e){var t,i=this;if(this.moveTimOut&&(this.moveTimOut.unsubscribe(),this.moveTimOut=void 0),this.validLayout){if(this.restoreLayout(this.validLayout),"move"!==this._cursor){var r=e[0];r.percentBounds=new n.m(this.validLayout.validBounds),r.isDragging=!1}else Object(s.a)(e).pipe(Object(g.a)(function(e){return!!e}),Object(d.a)(function(e){e.percentBounds=new n.m(i.validLayout.validBounds.left+i.dragRelativePosition[e.id].left,i.validLayout.validBounds.top+i.dragRelativePosition[e.id].top,e.percentBounds.width,e.percentBounds.height),e.isDragging=!1,e.isDropping=!0,e.isTemporary&&(delete i.tilesDic[e.id],e.makeId(),i.tilesDic[e.id]=e,i.addTiles([e]))}),Object(p.a)(1e3)).subscribe(function(e){e.isDropping=!1});t=this.tiles.filter(function(e){return!n.m.equals(e.percentBounds,i.originalLayout[e.id]&&i.originalLayout[e.id].bounds)}),this.endDrag()}else this.removeTemporaryTile(),this.cancelDrag(e);if(t){var o=new CustomEvent("DejaTilesEvent",{cancelable:!0});o.tiles=this.tiles,this.layoutChanged.next(o)}return t},e.prototype.endDrag=function(){this.originalLayout=void 0,this.validLayout=void 0,this.targetBounds=void 0,this.dragging$.next(!1),this.dragDropInfos$.next(null),this.dragTarget=void 0,this.copyTiles(null),this.refreshTiles$.next()},e.prototype.drag=function(e,t,i){var r=this,o=new n.l(t-this.dragPageOffset.left,i-this.dragPageOffset.top),s=o.left+this.getPixelSize(this.dragOriginalPosition.left),c=o.top+this.getPixelSize(this.dragOriginalPosition.top),a=this.getTileMinPixelSize(),u=this.getTileMaxPixelSize();if("move"!==this._cursor){var l=e[0],h=this.getPixelBounds(l.percentBounds),d=s+h.width,p=c+h.height,f=h.right,g=h.bottom;switch(this._cursor){case"nw-resize":h.left=Math.max(Math.min(s,h.right-a.width),h.right-u.width),h.right=f,h.top=Math.max(Math.min(c,h.bottom-a.height),h.bottom-u.height),h.bottom=g,this.size(l,new n.l(s,c),n.g.left+n.g.top);break;case"sw-resize":h.left=Math.max(Math.min(s,h.right-a.width),h.right-u.width),h.right=f,h.bottom=Math.max(Math.min(p,h.top+u.height),h.top+a.height),this.size(l,new n.l(s,p),n.g.left+n.g.bottom);break;case"w-resize":h.left=Math.max(Math.min(s,h.right-a.width),h.right-u.width),h.right=f,this.size(l,new n.l(s,0),n.g.left);break;case"ne-resize":h.right=Math.max(Math.min(d,h.left+u.width),h.left+a.width),h.top=Math.max(Math.min(c,h.bottom-a.height),h.bottom-u.height),h.bottom=g,this.size(l,new n.l(d,c),n.g.right+n.g.top);break;case"se-resize":h.right=Math.max(Math.min(d,h.left+u.width),h.left+a.width),h.bottom=Math.max(Math.min(p,h.top+u.height),h.top+a.height),this.size(l,new n.l(d,p),n.g.right+n.g.bottom);break;case"e-resize":h.right=Math.max(Math.min(d,h.left+u.width),h.left+a.width),this.size(l,new n.l(d,0),n.g.right);break;case"n-resize":h.top=Math.max(Math.min(c,h.bottom-a.height),h.bottom-u.height),h.bottom=g,this.size(l,new n.l(0,c),n.g.top);break;case"s-resize":h.bottom=Math.max(Math.min(p,h.top+u.height),h.top+a.height),this.size(l,new n.l(0,p),n.g.bottom);break;default:throw new Error("Invalid direction")}l.pixelBounds=h}else e.forEach(function(e){e.pixelBounds=new n.m(s+r.getPixelSize(r.dragRelativePosition[e.id].left),c+r.getPixelSize(r.dragRelativePosition[e.id].top),r.getPixelSize(e.percentBounds.width),r.getPixelSize(e.percentBounds.height))}),this.dragTarget=new n.m(this.getPercentSize(s),this.getPercentSize(c),this.targetBounds.width,this.targetBounds.height),this.move()},e.prototype.addTiles=function(e){var t=this;if(e&&0!==e.length){e.forEach(function(e){t.tiles.find(function(t){return t.id===e.id})||(t.tiles.find(function(t){return t.percentBounds&&e.percentBounds&&t.percentBounds.intersectWith(e.percentBounds)})&&(e.percentBounds=void 0),e.percentBounds||(e.percentBounds=t.getFreePlace(e.idealBounds)),t.tiles.push(e),t.tilesDic[e.id]=e)});var i=new CustomEvent("DejaTilesAddEvent",{cancelable:!0});i.tiles=this.tiles,i.added=e,i.cancel$=new r.a;var o,c=this.clipboardService&&this.clipboardService.get("tiles-provider");c&&(o=this.clipboardService.get("tiles")).forEach(function(e){e.isHidden=!0});var a,u=function(e){o&&(c.next(o),t.clipboardService.clear());var i=new CustomEvent("DejaTileAddedEvent",{cancelable:!1});i.tiles=t.tiles,i.added=e,t.tilesAdded.next(i)},l=i.cancel$.pipe(Object(v.a)()).subscribe(function(i){i?(Object(s.a)(e).pipe(Object(d.a)(function(e){return e.isHidden=!0}),Object(p.a)(1e3),Object(y.a)(function(e,t){return e.concat([t])},[]),Object(v.a)()).subscribe(function(e){return t.deleteTiles(e)}),o&&o.forEach(function(e){e.isHidden=!1,e.isCutted=!0})):u(e)});e.forEach(function(e){a=a?n.m.union(a,e.percentBounds):new n.m(e.percentBounds)}),this.refreshTiles$.next({ensureBounds:a}),this.contentAdding.next(i),i.defaultPrevented||(l.unsubscribe(),u(e))}},e.prototype.size=function(e,t,i){var r,o,s,c,a=new n.l(this.getPercentSize(t.left),this.getPercentSize(t.top)),u=e.percentBounds.clone(),l=e.percentBounds.clone();if(i&n.g.left){r=this.getTileMinPercentWidth(),s=this.getTileMaxPercentWidth();var h=a.left,d=u.left<h?r*Math.ceil(h/r):r*Math.floor(h/r),p=Math.min(s,Math.max(r,l.right-d));u.width=u.right-h,u.left=h,l.left=l.right-p,l.width=p}if(i&n.g.right){r=r||this.getTileMinPercentWidth(),s=s||this.getTileMaxPercentWidth();var f=a.left,g=u.right<f?r*Math.ceil(f/r):r*Math.floor(f/r);u.width=f-u.left,l.width=Math.min(s,Math.max(r,g-l.left))}if(i&n.g.top){o=this.getTileMinPercentHeight(),c=this.getTileMaxPercentHeight();var b=a.top,m=u.top<b?o*Math.ceil(b/o):o*Math.floor(b/o),v=Math.min(c,Math.max(o,l.bottom-m));u.height=u.bottom-b,u.top=b,l.top=l.bottom-v,l.height=v}if(i&n.g.bottom){o=o||this.getTileMinPercentHeight(),c=c||this.getTileMaxPercentHeight();var y=a.top,x=u.bottom<y?o*Math.ceil(y/o):o*Math.floor(y/o);u.height=y-u.top,l.height=Math.min(c,Math.max(o,x-l.top))}if(!n.m.equals(l,this.destination))if(e.isExpanded){var O=this.ensureTarget(l,u,i);e.percentBounds=O,this.refreshTiles$.next()}else this.restoreLayout(this.originalLayout),this.destination=l.clone(),this.tiles.find(function(e){return!e.isDragging&&e.percentBounds.intersectWith(l)})?l&&(O=this.ensureTarget(l,u,i))&&(this.targetBounds=O,this.validLayout=this.saveLayout(),this.validLayout.targetBounds=l,this.validLayout.validBounds=O,this.refreshTiles$.next()):(this.targetBounds=l,this.validLayout=this.saveLayout(),this.validLayout.targetBounds=this.validLayout.validBounds=l,this.refreshTiles$.next())},e.prototype.move=function(){var e=this,t=this.getTileMinPercentWidth(),i=this.getTileMinPercentHeight(),r=this.ensureContainer(new n.m(t*Math.round(this.dragTarget.left/t),i*Math.round(this.dragTarget.top/i),this.dragTarget.width,this.dragTarget.height));this.lastTargetBounds&&Math.abs(r.left-this.lastTargetBounds.left)<t&&Math.abs(r.top-this.lastTargetBounds.top)<i||(this.lastTargetBounds=r,this.moveTimOut&&(this.moveTimOut.unsubscribe(),this.moveTimOut=void 0),this.restoreLayout(this.originalLayout),this.tiles.find(function(e){return!e.isDragging&&e.percentBounds.intersectWith(r)})?this.moveTimOut=Object(u.a)(500).pipe(Object(v.a)()).subscribe(function(){if(e.moveTimOut=void 0,e.destination=r.clone(),r){var t=e.ensureTarget(r,e.dragTarget,n.g.all);t&&(e.targetBounds=t,e.validLayout=e.saveLayout(),e.validLayout.targetBounds=r,e.validLayout.validBounds=t,e.refreshTiles$.next())}}):(this.targetBounds=r.clone(),this.destination=r.clone(),this.validLayout=this.saveLayout(),this.validLayout.targetBounds=this.validLayout.validBounds=r,this.refreshTiles$.next()))},e.prototype.ensureContainer=function(e){e.left<0&&(e=e.offset(-e.left,0)),e.top<0&&(e=e.offset(0,-e.top));var t=this.getMaxPercentWidth();t&&e.right>t&&(e=e.offset(t-e.right,0));var i=this.getMaxPercentHeight();return i&&e.bottom>i&&(e=e.offset(0,i-e.bottom)),e},e.prototype.ensureTarget=function(e,t,i,r){t||(t=e),r||(r=e.clone()),i?i|=n.g.bottom:i=n.g.all;var o=[],s=[],c=[],a=[];for(var u in this.tilesDic)if(this.tilesDic[u]){var l=this.tilesDic[u];if(!l.isDragging&&!l.isExpanded&&l.percentBounds.intersectWith(e)){var h=new n.m(this.dragOriginalPosition.left,this.dragOriginalPosition.top,e.width,e.height);if(l.percentBounds.left===t.left&&l.percentBounds.top===t.top&&l.percentBounds.width===t.width&&l.percentBounds.height===t.height&&t.adjacent(h))return l.percentBounds=h,e;var d=l.percentBounds.left-t.left,p=t.right-l.percentBounds.right,f=l.percentBounds.top-t.top,g=t.bottom-l.percentBounds.bottom,b=Math.max(0,Math.min(l.percentBounds.right,t.right)-Math.max(l.percentBounds.left,t.left))/Math.min(l.percentBounds.width,t.width);switch(Math.max(0,Math.min(l.percentBounds.bottom,t.bottom)-Math.max(l.percentBounds.top,t.top))/Math.min(l.percentBounds.height,t.height)>=b&&i&n.g.horizontal?p>=d&&i&n.g.left?n.g.left:n.g.right:g>=f&&i&n.g.top?n.g.top:n.g.bottom){case n.g.left:o.push(l);break;case n.g.top:c.push(l);break;case n.g.right:s.push(l);break;default:a.push(l)}}}var m=0;return o.length&&(m=this.pushHorizontal(e,-1,o))?(e=this.ensureContainer(e.offset(m,0)),this.ensureTarget(e,t,i&~n.g.left,r)):(s.length&&(m=this.pushHorizontal(e,1,s)),m>0?(this.restoreLayout(this.originalLayout),this.ensureTarget(r,t,i&n.g.vertical)):c.length&&(m=this.pushVertical(e,-1,c))?(e=this.ensureContainer(e.offset(0,m)),this.ensureTarget(e,t,n.g.bottom)):(m=this.pushVertical(e,1,a))?null:e)},e.prototype.saveLayout=function(){var e=this,t={};return t.height=this.getTileMinPercentHeight(),this.tiles.forEach(function(i){var n=e.getPixelSize(i.percentBounds.top||0),r=e.getPixelSize(i.percentBounds.height||e._tileMinHeight);n+r>t.height&&(t.height=n+r),t[i.id]={bounds:i.percentBounds.clone(),id:i.id}}),t},e.prototype.getPixelBounds=function(e){return n.m.fromLTRB(Math.round(e.left*this.hundredPercentWith/100),Math.round(e.top*this.hundredPercentWith/100),Math.round(e.right*this.hundredPercentWith/100),Math.round(e.bottom*this.hundredPercentWith/100))},e.prototype.getPixelSize=function(e,t){return t&&"%"!==t?e:Math.round(e*this.hundredPercentWith/100)},e.prototype.getSizePercentLimit=function(e){var t=this[e+"Unit"];return t&&"px"!==t?this[e]:this.getPercentSize(this[e])},e.prototype.getSizePixelLimit=function(e){var t=this[e+"Unit"];return t&&"px"!==t?this.getPixelSize(this[e]):this[e]},e.prototype.getTileMinPixelSize=function(){return new n.n(this.getSizePixelLimit("_tileMinWidth"),this.getSizePixelLimit("_tileMinHeight"))},e.prototype.getTileMaxPixelSize=function(){return new n.n(this.getSizePixelLimit("_tileMaxWidth"),this.getSizePixelLimit("_tileMaxHeight"))},e.prototype.getTileMinPercentWidth=function(){return Math.max(1,this.getSizePercentLimit("_tileMinWidth"))},e.prototype.getTileMaxPercentWidth=function(){return Math.max(5,this.getSizePercentLimit("_tileMaxWidth"))},e.prototype.getTileMinPercentHeight=function(){return Math.max(1,this.getSizePercentLimit("_tileMinHeight"))},e.prototype.getTileMaxPercentHeight=function(){return Math.max(5,this.getSizePercentLimit("_tileMaxHeight"))},e.prototype.getMaxPercentWidth=function(){return Math.max(5,this.getSizePercentLimit("_maxWidth"))},e.prototype.getMaxPercentHeight=function(){return Math.max(5,this.getSizePercentLimit("_maxHeight"))},e.prototype.getCursorFromHTMLElement=function(e,t,i){var n=this.getTileElementFromHTMLElement(i);if(!n)return null;var r=n.getBoundingClientRect();return e<r.left+10?t<r.top+10?"nw-resize":t>r.bottom-10?"sw-resize":"w-resize":e>r.right-10?t<r.top+10?"ne-resize":t>r.bottom-10?"se-resize":"e-resize":t<r.top+10?"n-resize":t>r.bottom-10?"s-resize":"move"},e.prototype.extractValueAndUnit=function(e,t){var i=/(\d+)(.*)/i.exec(t);i&&i.length>=1&&(this[e]=parseInt(i[1],10),this[e+"Unit"]=i.length>=2?i[2]:"px")},e.prototype.restoreLayout=function(e){this.tiles.forEach(function(t){t.percentBounds=e[t.id].bounds.clone()})},e.prototype.calcHorizontalOverflow=function(e,t,i,n){var r=this,o=0;return n=n||{},t.forEach(function(t){if(!n[t.id]){n[t.id]=t.id;var s=t.percentBounds.offset(e*i,0),c=0,a=r.getMaxPercentWidth();s.left<0?c=-s.left:a&&s.right>a&&(c=s.right-a);var u=r.tiles.filter(function(e){return!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(s)});u.length&&(c+=r.calcHorizontalOverflow(e,u,i,n)),c>o&&(o=c)}}),o},e.prototype.moveHorizontal=function(e,t,i,n){var r=this;t.forEach(function(t){if(!n[t.id]){var o=n[t.id]=t.percentBounds.offset(e*i,0),s=r.tiles.filter(function(e){return!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(o)});s.length&&r.moveHorizontal(e,s,i,n)}})},e.prototype.pushHorizontal=function(e,t,i,n){var r=0,o={};return n||(n=0,i.forEach(function(i){var r=t>0?Math.max(0,e.right-i.percentBounds.left):Math.max(0,i.percentBounds.right-e.left);r>n&&(n=r)})),n>0&&(r=this.calcHorizontalOverflow(t,i,n),(n-=r)>0&&(this.moveHorizontal(t,i,n,o),this.tiles.forEach(function(e){o[e.id]&&(e.percentBounds=o[e.id])}))),r},e.prototype.calcVerticalOverflow=function(e,t,i,n){var r=this,o=0;return n=n||{},t.forEach(function(t){if(!n[t.id]){n[t.id]=t.id;var s=t.percentBounds.offset(0,e*i),c=0,a=r.getMaxPercentHeight();s.top<0?c=-s.top:a&&s.bottom>a&&(c=s.bottom-a);var u=r.tiles.filter(function(e){return!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(s)});u.length&&(c+=r.calcVerticalOverflow(e,u,i,n)),c>o&&(o=c)}}),o},e.prototype.moveVertical=function(e,t,i,n){var r=this;t.forEach(function(t){if(!n[t.id]){var o=n[t.id]=t.percentBounds.offset(0,e*i),s=r.tiles.filter(function(e){return!e.isDragging&&!e.equalsTo(t)&&e.percentBounds.intersectWith(o)});s.length&&r.moveVertical(e,s,i,n)}})},e.prototype.pushVertical=function(e,t,i,n){var r=0,o={};return n||(n=0,i.forEach(function(i){var r=t>0?Math.max(0,e.bottom-i.percentBounds.top):Math.max(0,i.percentBounds.bottom-e.top);r>n&&(n=r)})),n>0&&(r=this.calcVerticalOverflow(t,i,n),(n-=r)>0&&(this.moveVertical(t,i,n,o),this.tiles.forEach(function(e){o[e.id]&&(e.percentBounds=o[e.id])}))),r},e.prototype.copyTiles=function(e,t){if(!this.clipboardService){if(!e)return;throw new Error("DejaClipboardService must be imported by your application to use the copyTiles methode of DejaTilesComponent.")}var i=this.clipboardService.get("tiles");i&&i.forEach(function(e){return e.isCutted=!1}),this.clipboardService.set("tiles",e),t?(e.forEach(function(e){return e.isCutted=!0}),this.clipboardService.set("tiles-provider",this.deleteTiles$)):this.clipboardService.set("tiles-provider",void 0)},e.prototype.removeTemporaryTile=function(){for(var e=this.tiles.length;--e>=0;){var t=this.tiles[e];t.isTemporary&&(delete this.tilesDic[t.id],this.tiles.splice(e,1))}},e}()},UMfw:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i("fYS1"),r=i("26FU"),o=i("S5bw"),s=i("K9Ia"),c=function(){function e(t){this.cutted$=new r.a(!1),this.dragging$=new r.a(!1),this.dropping$=new r.a(!1),this.pressed$=new r.a(!1),this.selected$=new r.a(!1),this.expanded$=new r.a(!1),this.hidden$=new o.a(1),this.pixelBounds$=new r.a(null),this.deleted$=new s.a,this.refresh$=new s.a,this.isTemporary=!1,this._isDragging=!1,this._isDropping=!1,this._isPressed=!1,this._isExpanded=!1,this._isHidden=!1,this._id=t||"#"+e.currentId++}return Object.defineProperty(e.prototype,"idealBounds",{get:function(){return new n.m(0,0,15,15)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelBounds",{get:function(){return this._pixelBounds},set:function(e){n.m.equals(this._pixelBounds,e)||(this._pixelBounds=e,this.pixelBounds$.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percentBounds",{get:function(){return this._percentBounds},set:function(e){this._percentBounds=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateModel",{get:function(){return this._templateModel},set:function(e){this._templateModel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCutted",{get:function(){return this._cutted},set:function(e){this._cutted!==e&&(this._cutted=e,this.cutted$.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragging",{get:function(){return this._isDragging},set:function(e){this._isDragging!==e&&(this._isDragging=e,this.dragging$.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDropping",{get:function(){return this._isDropping},set:function(e){this._isDropping!==e&&(this._isDropping=e,this.dropping$.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPressed",{get:function(){return this._isPressed},set:function(e){this._isPressed!==e&&(this._isPressed=e,this.pressed$.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._selected},set:function(e){this._selected!==e&&(this._selected=e,this.selected$.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isExpanded",{get:function(){return this._isExpanded},set:function(e){this._isExpanded!==e&&(this._isExpanded=e,this.expanded$.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHidden",{get:function(){return this._isHidden},set:function(e){this._isHidden!==e&&(this._isHidden=e,this.hidden$.next(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return this._pending},set:function(e){this._pending=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fading",{get:function(){return this._fading},set:function(e){this._fading=e},enumerable:!0,configurable:!0}),e.prototype.makeId=function(){this._id="#"+e.currentId++},e.prototype.equalsTo=function(e){return this._templateModel?this._templateModel===e._templateModel:this._id===e._id},e.prototype.clone=function(t){return t||(t=new e(this.id)),t._percentBounds=this.percentBounds,t._color=this.color,t._templateModel=this.templateModel,t._cutted=this._cutted,t._selected=this._selected,t._pending=this._pending,t._fading=this._fading,t},e.prototype.delete=function(){this.deleted$.next()},e.prototype.refresh=function(){this.refresh$.next()},e.currentId=0,e}()},Z3dl:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i("+qQs");var n=function(){return function(){}}()},dSv2:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i("fYS1");var n=function(){function e(e){this.element=e.nativeElement,this.element.style.display="none"}return Object.defineProperty(e.prototype,"bounds",{set:function(e){if(e){var t=e.top,i=e.width,n=e.height;this.element.style.left=e.left+"px",this.element.style.top=t+"px",this.element.style.width=i+"px",this.element.style.height=n+"px",this.element.style.display="block"}else this.element.style.display="none"},enumerable:!0,configurable:!0}),e}()},ja5E:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("mrSG"),r=i("MPFR"),o=i("qLWr"),s=function(e){function t(){var t=e.call(this)||this;return t.toolbarType="window",t.title="Modifier l'apparence du groupe",t.actions=[new r.b("confirm","Ok","done"),new r.b("cancel","Cancel","cancel")],t.fullscreen=!1,t.hasBackdrop=!0,t.disableClose=!0,t.contentComponentRef=o.a,t}return n.c(t,e),t}(r.d)},"nN/P":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("qF2d"),r=(i("vg1q"),i("1WO2"),i("KVC5"),function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[n.a]}},e}())},qF2d:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i("26FU"),r=i("K9Ia"),o=i("xMyE"),s=i("VnD/"),c=function(){function e(){var e=this;this._context={},this._isDragging=!1,this.dragCursor$=new n.a(void 0),this.dropCursor$=new r.a,this.dragging$=new n.a(!1),this.dragging$.pipe(Object(o.a)(function(t){return e._isDragging=t}),Object(s.a)(function(e){return!e})).subscribe(function(){return e._context={}})}return Object.defineProperty(e.prototype,"isDragging",{get:function(){return this._isDragging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},set:function(e){this._context=e},enumerable:!0,configurable:!0}),e}()},qLWr:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var n=i("mrSG"),r=i("MPFR"),o=i("fYS1"),s=i("Fp2t"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.min=0,t.max=20,t.widthStep=2,t}return n.c(t,e),t.prototype.ngOnInit=function(){this.materialColors=this.injector.get(o.k),this.model=this.config.data},Object.defineProperty(t.prototype,"borderColor",{get:function(){return this.model&&this.model.borderColor?o.b.fromHex(this.model.borderColor):null},set:function(e){this.model.borderColor=e.toHex(),this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderWidth",{get:function(){return this.model&&this.model.borderWidth/2||null},set:function(e){e>=this.min&&e<=this.max&&(this.model.borderWidth=e*this.widthStep,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topBorder",{get:function(){return!!this.model&&0!=(this.model.borderDirection&s.a.top)},set:function(e){this.model&&(e?this.model.borderDirection|=s.a.top:this.model.borderDirection&=~s.a.top,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBorder",{get:function(){return!!this.model&&0!=(this.model.borderDirection&s.a.right)},set:function(e){this.model&&(e?this.model.borderDirection|=s.a.right:this.model.borderDirection&=~s.a.right,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomBorder",{get:function(){return!!this.model&&0!=(this.model.borderDirection&s.a.bottom)},set:function(e){this.model&&(e?this.model.borderDirection|=s.a.bottom:this.model.borderDirection&=~s.a.bottom,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBorder",{get:function(){return!!this.model&&0!=(this.model.borderDirection&s.a.left)},set:function(e){this.model&&(e?this.model.borderDirection|=s.a.left:this.model.borderDirection&=~s.a.left,this.model.update(this.model.borderWidth,this.model.borderColor,this.model.borderDirection))},enumerable:!0,configurable:!0}),t}(r.c)},sOkG:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var n=i("n6gG"),r=i("CcnG"),o=i("fYS1"),s=i("0/uQ"),c=i("bne5"),a=i("jvbL"),u=i("Gi3i"),l=i("VnD/"),h=(i("SsaN"),function(){}),d=function(){function e(e,t,i,n){var o=this;this.changeDetectorRef=t,this.layoutProvider=i,this._control=n,this.selectionChanged=new r.EventEmitter,this.layoutChanged=new r.EventEmitter,this.layoutCompleted=new r.EventEmitter,this.contentAdding=new r.EventEmitter,this.contentRemoving=new r.EventEmitter,this.tileGroupChanged=new r.EventEmitter,this.tilesAdded=new r.EventEmitter,this.tilesDeleted=new r.EventEmitter,this.contentCopied=new r.EventEmitter,this.tabIndex=0,this.onTouchedCallback=h,this.onChangeCallback=h,this._models=[],this.isAlive=!0,this.hasFocus=!1,this._control&&(this._control.valueAccessor=this);var l=e.nativeElement;Object(s.a)(this.layoutProvider.selectionChanged).pipe(Object(a.a)(function(){return o.isAlive})).subscribe(function(e){return o.selectionChanged.emit(e)}),Object(s.a)(this.layoutProvider.contentAdding).pipe(Object(a.a)(function(){return o.isAlive})).subscribe(function(e){return o.contentAdding.emit(e)}),Object(s.a)(this.layoutProvider.contentRemoving).pipe(Object(a.a)(function(){return o.isAlive})).subscribe(function(e){return o.contentRemoving.emit(e)}),Object(s.a)(this.layoutProvider.tilesAdded).pipe(Object(a.a)(function(){return o.isAlive})).subscribe(function(e){o.tilesAdded.emit(e),o.onChangeCallback(e.tiles)}),Object(s.a)(this.layoutProvider.tilesDeleted).pipe(Object(a.a)(function(){return o.isAlive})).subscribe(function(e){o.tilesDeleted.emit(e),o.onChangeCallback(e.tiles)}),Object(s.a)(this.layoutProvider.layoutChanged).pipe(Object(a.a)(function(){return o.isAlive})).subscribe(function(e){o.layoutChanged.emit(e),o.onChangeCallback(e.tiles)}),Object(s.a)(this.layoutProvider.layoutCompleted).pipe(Object(a.a)(function(){return o.isAlive})).subscribe(function(e){return o.layoutCompleted.emit(e)}),this.keyup$=Object(c.a)(l.ownerDocument,"keyup"),Object(c.a)(window,"resize").pipe(Object(a.a)(function(){return o.isAlive}),Object(u.a)(5)).subscribe(function(){return o.refresh({resetWidth:!0})})}return Object.defineProperty(e.prototype,"tiles",{get:function(){return this.layoutProvider.tiles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionRect$",{get:function(){return this.layoutProvider.selectionRect$},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileminwidth",{set:function(e){this.layoutProvider.tileMinWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tilemaxwidth",{set:function(e){this.layoutProvider.tileMaxWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileminheight",{set:function(e){this.layoutProvider.tileMinHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tilemaxheight",{set:function(e){this.layoutProvider.tileMaxHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxwidth",{set:function(e){this.layoutProvider.maxWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"designMode",{get:function(){return this.layoutProvider.designMode},set:function(e){this.layoutProvider.designMode=Object(n.b)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"models",{set:function(e){this.writeValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canDelete",{set:function(e){var t=this;Object(n.b)(e)&&!this.delete$sub?this.delete$sub=this.keyup$.pipe(Object(l.a)(function(){return t.layoutProvider.designMode}),Object(l.a)(function(e){return(e.keyCode||o.j[e.code])===o.j.Delete&&t.hasFocus})).subscribe(function(){return t.layoutProvider.deleteSelection()}):this.delete$sub&&(this.delete$sub.unsubscribe(),this.delete$sub=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canCopy",{set:function(e){var t=this;Object(n.b)(e)&&!this.copy$sub?this.copy$sub=this.keyup$.pipe(Object(l.a)(function(e){return(e.keyCode||o.j[e.code])===o.j.KeyC&&e.ctrlKey&&t.hasFocus})).subscribe(function(){t.copySelection()}):this.copy$sub&&(this.copy$sub.unsubscribe(),this.copy$sub=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canCut",{set:function(e){var t=this;Object(n.b)(e)&&!this.cut$sub?this.cut$sub=this.keyup$.pipe(Object(l.a)(function(){return t.layoutProvider.designMode}),Object(l.a)(function(e){return(e.keyCode||o.j[e.code])===o.j.KeyX&&e.ctrlKey&&t.hasFocus})).subscribe(function(){t.cutSelection()}):this.cut$sub&&(this.cut$sub.unsubscribe(),this.cut$sub=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canPaste",{set:function(e){var t=this;Object(n.b)(e)&&!this.paste$sub?this.paste$sub=this.keyup$.pipe(Object(l.a)(function(){return t.layoutProvider.designMode}),Object(l.a)(function(e){return(e.keyCode||o.j[e.code])===o.j.KeyV&&e.ctrlKey&&t.hasFocus})).subscribe(function(){return t.paste()}):this.paste$sub&&(this.paste$sub.unsubscribe(),this.paste$sub=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedTiles",{set:function(e){this.layoutProvider.selectedTiles=e.map(function(e){return"string"==typeof e?e:e.id})},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this._models=e||[],this.layoutProvider.tiles=this._models,this.changeDetectorRef.markForCheck()},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},e.prototype.ngAfterViewInit=function(){this.layoutProvider.container=this.tilesContainer.nativeElement,this.refresh({resetWidth:!0})},e.prototype.ngOnDestroy=function(){this.layoutProvider.ngOnDestroy(),this.canCopy=!1,this.canCut=!1,this.canDelete=!1,this.canPaste=!1,this.isAlive=!1},e.prototype.copySelection=function(){var e=this.layoutProvider.copySelection();if(e&&e.length){var t=new CustomEvent("DejaTilesCopied",{cancelable:!0});t.tiles=e,this.contentCopied.emit(t)}},e.prototype.cutSelection=function(){var e=this.layoutProvider.cutSelection();if(e&&e.length){var t=new CustomEvent("DejaTilesCutted",{cancelable:!0});t.tiles=e,this.contentCopied.emit(t)}},e.prototype.deleteSelection=function(){var e=this.layoutProvider.deleteSelection();return this.changeDetectorRef.markForCheck(),e},e.prototype.paste=function(){var e=this.layoutProvider.paste();return this.changeDetectorRef.markForCheck(),e},e.prototype.ensureVisible=function(e){this.layoutProvider.ensureVisible$.next(e)},e.prototype.expandTile=function(e,t){this.layoutProvider.expandTile(e,t)},e.prototype.cancelExpand=function(){this.layoutProvider.cancelExpand()},e.prototype.refresh=function(e){this.layoutProvider.refreshTiles$.next(e)},e.prototype.addTiles=function(e){this.layoutProvider.addTiles(e)},e.prototype.removeTiles=function(e){this.layoutProvider.removeTiles(e)},e.prototype.getFreePlace=function(e,t,i,n){if(!this._models||0===this._models.length)return new o.m(0,0,i,n);var r=this.tilesContainer.nativeElement.getBoundingClientRect(),s=t?t-r.top:0,c=new o.m(this.layoutProvider.getPercentSize(e?e-r.left:0),this.layoutProvider.getPercentSize(s),i,n);return this.layoutProvider.getFreePlace(c)},e.prototype.moveTile=function(e,t){this.layoutProvider.moveTile(e,t)},e.prototype.getDropContext=function(){var e=this;return{dragEnter:function(t,i){return e.layoutProvider.dragEnter(t,i)&&{className:"hidden"}},dragOver:function(t,i){e.layoutProvider.dragover$.next(i)},dragLeave:function(t){e.layoutProvider.dragleave$.next()}}},e.prototype.onTileClosed=function(e){this.layoutProvider.removeTiles([e.id])},e.prototype.onTileGroupModelChanged=function(e){var t=new CustomEvent("DejaTileGroupModelEvent",{cancelable:!1});t.tileGroup=e,this.tileGroupChanged.emit(t)},e.prototype.onFocus=function(){this.hasFocus=!0},e.prototype.onBlur=function(){this.hasFocus=!1},e}()},tMTD:function(e,t,i){"use strict";i.d(t,"c",function(){return o}),i("ja5E"),i("qLWr");var n=i("Fp2t");i.d(t,"b",function(){return n.b}),i("DMiE");var r=i("UMfw");i.d(t,"a",function(){return r.a}),i("JyZx"),i("dSv2"),i("SsaN"),i("sOkG");var o=function(){return function(){}}()},vg1q:function(e,t,i){"use strict";i.d(t,"a",function(){return d});var n=i("fYS1"),r=i("bne5"),o=i("K9Ia"),s=i("p0ib"),c=i("jvbL"),a=i("ny24"),u=i("VnD/"),l=i("P6uZ"),h=i("xMyE"),d=(i("qF2d"),function(){function e(e,t){var i=this;this.isAlive=!0;var d=e.nativeElement,p=Object(r.a)(d,"mouseleave"),f=Object(r.a)(d.ownerDocument,"mouseup");Object(r.a)(d,"mouseenter").pipe(Object(c.a)(function(){return i.isAlive})).subscribe(function(){Object(r.a)(d,"mousedown").pipe(Object(a.a)(p),Object(u.a)(function(e){return 1===e.buttons})).subscribe(function(e){var c,u,p=new o.a,g=function(){var e=Object(s.a)(f,p).pipe(Object(l.a)(),Object(h.a)(function(){t.dragCursor$.next(void 0),t.dragging$.next(!1)}));Object(r.a)(d.ownerDocument,"mousemove").pipe(Object(a.a)(e)).subscribe(function(e){if(c&&1===e.buttons){var r=new n.m(d.getBoundingClientRect()),o=new n.l(e.pageX,e.pageY),s=r.containsPoint(o)?c.innerHTML:void 0;t.dragCursor$.next({position:o,html:s,width:c.offsetWidth,height:c.offsetHeight,className:i.context.className,originalEvent:e})}else p.next();return e.preventDefault(),!1}),t.dragging$.next(!0)};if(i.context){if(i.context.target)for(c=e.target;c&&(u=c).tagName!==i.context.target.toUpperCase()&&u.id!==i.context.target.substr(1)&&!u.hasAttribute(i.context.target.substring(1,i.context.target.length-1));)c=c.parentElement;else c=d;if(c&&i.context.dragStart){var b=i.context.dragStart(c);if(b){if(b.subscribe)return void b.pipe(Object(l.a)()).subscribe(function(e){t.context=e,e&&g()});t.context=b,g()}}}})})}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},set:function(e){this._context=e},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.isAlive=!1},e}())}}]);